
<h2>Summary</h2>
<p>A security update for New Relic's Java agent fixes a vulnerability where the agent could unintentionally capture full SQL queries when SQL obfuscation is enabled.</p>
<p><strong>Release date:</strong> May 30, 2017</p>
<p><strong>Vulnerability identifier:</strong> NR17-05</p>
<p><strong>Priority:</strong> High</p>
<h2>Affected software [#affected]</h2>
<p>The following New Relic agent versions are affected:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Name</strong></p>
      </div>
      <div>
        <p><strong>Affected version</strong></p>
      </div>
      <div>
        <p><strong>Notes</strong></p>
      </div>
      <div>
        <p><strong>Remediated version</strong></p>
      </div>
    </div>
    <div>
      <div>
        <p>Java agent</p>
      </div>
      <div>
        <p>3.0.0-3.39.0</p>
      </div>
      <div>
        <p>With SQL obfuscation</p>
      </div>
      <div>
        <p><a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes">3.39.1</a></p>
      </div>
    </div>
  </div>
</div>
<h2>Vulnerability information [#vuln-info]</h2>
<p>New Relicâ€™s Java agent can be configured to obfuscate SQL query information. This setting is forced when <a href="/docs/agents/manage-apm-agents/configuration/high-security-mode">high security mode</a> is enabled. New Relic has found that, when an exception is thrown during the query, full SQL query information may still be captured as part of the error trace when SQL obfuscation is enabled. A fix has been made to disable the collection of this information during error collection. Customers are encouraged to upgrade to the <a href="/docs/release-notes/agent-release-notes/java-release-notes">latest version of the Java agent</a>.</p>
<h3>Mitigating factors [#factors]</h3>
<ul>
  <li>Only Java agents using SQL obfuscation are affected.</li>
</ul>
<h2>Workarounds</h2>
<p>New Relic has not identified any workarounds for this vulnerability.</p>
<h2>Report security vulnerabilities to New Relic [#report]</h2>
<p>New Relic is committed to the security of our customers and their data. If you believe you have found a security vulnerability in one of our products or websites, we welcome and greatly appreciate you reporting it to New Relic's coordinated disclosure program. For more information, see <a href="/docs/security/new-relic-security/data-privacy/reporting-security-vulnerabilities">Reporting security vulnerabilities</a>.</p>
<h2>For more help [#more_help]</h2>
<p>Additional documentation resources include:.</p>
<ul>
  <li><a href="https://docs.newrelic.com/docs/agents/java-agent/installation/upgrade-java-agent">Upgrade the Java agent</a></li>
  <li><a href="https://newrelic.com/why-new-relic/security" title="Link opens in a new window.">NR Security</a></li>
</ul>
