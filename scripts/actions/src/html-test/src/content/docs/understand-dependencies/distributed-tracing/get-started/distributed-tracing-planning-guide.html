
<p>If you are new to New Relic distributed tracing, we recommend you read the following before you enable distributed tracing.</p>
<h2>Impact to APM features [#changes]</h2>
<p>Our distributed tracing improves on APM's previous <a href="/docs/apm/transactions/cross-application-traces/introduction-cross-application-traces">cross application tracing feature</a>. Here are some key benefits:</p>
<ul>
  <li>See more cross-service activity details and more complete end-to-end traces.</li>
  <li>Filter and query traces, as well as make custom charts.</li>
  <li>See the complete trace even when calls cross account boundaries (for accounts with the same master account or in the same <a href="/docs/new-relic-partnerships/partner-integration-guide/partner-account-maintenance/partnership-accounts-users-subscriptions#partnerships">customer partnership</a>).</li>
  <li>See <a href="/docs/intro-distributed-tracing">Introduction to distributed tracing</a> for other features.</li>
</ul>
<p><a href="/docs/understand-dependencies/distributed-tracing/get-started/introduction-distributed-tracing#enable">Enabling distributed tracing</a> may affect some APM features you currently use. These changes affect only applications monitored by agents that have distributed tracing enabledâ€”they don't apply on an account-level.</p>
<p>We may provide backward compatibility with some or all of the affected features in future releases. For now, you should understand the following changes before enabling distributed tracing:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXh0ZXJuYWwtZGV0YWlscyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRXh0ZXJuYWwgc2VydmljZXMgcGFnZSBoYXMgbGVzcyBkZXRhaWwifV0=">
    <div data-prop-text="title">External services page has less detail</div>
    <p>When distributed tracing is enabled for an application, external calls do not have internal transaction details at <strong><a href="https://one.newrelic.com">one.newrelic.com</a> > APM > (select an app) > Monitor > External services > (select external service)</strong>.</p>
    <p>To find that information, you would instead go to the <strong>Distributed tracing</strong> UI page, find the external call URLs, and see what their child spans are.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHhuLXRyYWNlLWNoYW5nZXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlRyYW5zYWN0aW9uIHRyYWNlIFVJIGRpc3BsYXlzIHNlcnZpY2UgVVJMcywgbm90IHRyYW5zYWN0aW9uIGxpbmtzIn1d">
    <div data-prop-text="title">Transaction trace UI displays service URLs, not transaction links</div>
    <p>When distributed tracing is enabled for an application, the transaction trace UI will no longer have the transaction name and link for the called service (see screenshot below). This will be replaced with the called service's URL.</p>
    <p>
      <img src="./images/distributed-trace-txn-trace-affects.png" alt="Distributed tracing - Transaction trace effects" title="distributed-tracing-txn-trace-details-changes.png">
    </p>
    <p><strong><a href="https://one.newrelic.com">one.newrelic.com</a> > APM > (select an app) > Monitor > Transactions > (select a transaction trace)</strong>: This shows the transaction trace UI before distributed tracing is enabled, with a link to the associated transaction. With distributed tracing enabled, it will display the service's URL.</p>
    <p>If you wanted to get more detail about trace activity, you would go to the <strong>Distributed tracing</strong> UI page and examine that trace.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2F0LWRpc2FibGVkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJDcm9zcy1hcHBsaWNhdGlvbiB0cmFjaW5nIHdpbGwgYmUgZGlzYWJsZWQifV0=">
    <div data-prop-text="title">Cross-application tracing will be disabled</div>
    <p>Enabling distributed tracing will disable the <a href="/docs/apm/transactions/cross-application-traces/introduction-cross-application-traces">cross application tracing</a> feature. Distributed tracing is an improved version of cross-application tracing and only one can be enabled at a time.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcy1uby1icm93c2VyLW1vYmlsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiSW1wYWN0cyByZWxhdGVkIHRvIG1vYmlsZSBtb25pdG9yaW5nIn1d">
    <div data-prop-text="title">Impacts related to mobile monitoring</div>
    <p>Distributed tracing is not yet available for mobile monitoring. APM-related impacts include:</p>
    <ul>
      <li>When distributed tracing is enabled for an APM-monitored entity, <a href="/docs/understand-dependencies/understand-system-dependencies/service-maps/introduction-service-maps">service maps</a> will not show applications monitored by mobile.</li>
      <li>The <a href="/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/http-requests-page#details">App server drill-down</a> feature of the Mobile HTTP requests UI page is not available.</li>
    </ul>
  </div>
</div>
<h2>Plan your rollout [#rollout]</h2>
<p>If you're enabling distributed tracing for a large, distributed system, here are some tips:</p>
<ul>
  <li>
    <p>If you are a current APM user, see <a href="/docs/apm/distributed-tracing/getting-started/transition-guide-distributed-tracing">Impact to APM features</a>.</p>
  </li>
  <li>
    <p>Determine the requests that are the most important for your business, or the most likely to require analysis and troubleshooting, and <a href="#enable">enable distributed tracing</a> for those services. Enable tracing for services at roughly the same time so you can more easily gauge how complete your end-to-end traces are.</p>
  </li>
  <li>
    <p>When you look at traces in the <a href="/docs/apm/distributed-tracing/ui-data/understand-use-distributed-tracing-data">distributed tracing UI</a>, you'll see spans in the trace for external calls to other services. Then, you can <a href="#enable">enable distributed tracing</a> for any of those services you want. If a service is fairly standalone and not often used in context with other services, you may not want to enable distributed tracing for it.</p>
    <p>Here's a visual representation of such a phased roll-out:</p>
    <p>
      <img src="./images/roll_out.png" alt="Diagram showing a roll-out strategy for distributed tracing." title="distributed-tracing-roll-out-strategy-image.png">
    </p>
  </li>
  <li>
    <p>If you are using APM for a large, monolithic service, there may be many sub-process spans per trace and <a href="/docs/understand-use-distributed-tracing-data#rules-limits">APM limits</a> may result in fewer traces than expected. You can solve this by using APM agent instrumentation to disable the reporting of unimportant data.</p>
  </li>
  <li>
    <p>Distributed tracing works by <a href="/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#headers">propagating header information</a> from service to service in a request path. Some services may communicate through a proxy or other intermediary service that does not automatically propagate the header. In that case, you will need to configure that proxy so that it allows the <code>newrelic</code> header value to be propagated from source to destination.</p>
  </li>
</ul>
<h2>Enable distributed tracing [#enable]</h2>
<p>If you are aware of the impact to APM features and have thought about your rollout, you are ready to set up distributed tracing. See <a href="/docs/understand-dependencies/distributed-tracing/enable-configure/overview-enable-distributed-tracing">Overview: Enable distributed tracing</a>.</p>
