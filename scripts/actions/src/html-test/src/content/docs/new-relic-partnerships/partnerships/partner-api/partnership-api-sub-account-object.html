
<p>Accounts are the basic administrative unit of the New Relic system. As a partner, use the sub-account object with the <a href="/docs/new-relic-partnerships/partnerships/partner-api/partner-api-reference">Partnership API</a> to create <a href="/docs/accounts/install-new-relic/account-setup/manage-apps-or-users-sub-accounts">sub-accounts</a>.</p>
<ul>
  <li>A parent account may have more than one associated sub_account, but every sub_account must correspond to one and only one parent account.</li>
  <li>Every sub_account must have at least a primary_admin user.</li>
  <li>You cannot create a sub_account without connecting it to an existing parent account and adding at least one user.</li>
</ul>
<p>To manage existing master or sub-accounts, use the <a href="https://docs.newrelic.com/docs/new-relic-partnerships/partnerships/partner-api/partnership-api-account-object">Partnership API account object</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>This information is for version 2 of the Partnership API. Use v2 for all new integrations. Earlier versions have been deprecated. If you have problems with an older integration, upgrade to version 2.</p>
</div>
<h2>Sub-account object attributes [#account-attributes]</h2>
<p>Here are the Partnership API sub-account object's attributes.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXR0ci1uYW1lIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJuYW1lIChSRVFVSVJFRCkifV0=">
    <div data-prop-text="title">name (REQUIRED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type:</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default:</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>This name must be unique in New Relic's database. If the specified name is not unique, it will be auto-incremented with a numeric suffix as follows:</p>
    <pre><code>conflicting_name_1
conflicting_name_2
etc.

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXR0ci1hbGxvdy1hY2Nlc3MifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImFsbG93X2FwaV9hY2Nlc3MifV0=">
    <div data-prop-text="title">allow_api_access</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type:</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default:</p>
          </div>
          <div>
            <p>False</p>
          </div>
        </div>
      </div>
    </div>
    <p>This flag allows API access to application data. This must be set to <code>true</code> for partnerships remotely administering accounts.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXR0ci10ZXN0aW5nIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJ0ZXN0aW5nIn1d">
    <div data-prop-text="title">testing</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type:</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default:</p>
          </div>
          <div>
            <p>False</p>
          </div>
        </div>
      </div>
    </div>
    <p>Use this flag to indicate a test account. Test accounts are assumed to contain garbage data and are ignored by internal systems. The data they generate may be deleted at any time.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXR0ci11c2VycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoidXNlcnMgKFJFUVVJUkVEKSJ9XQ==">
    <div data-prop-text="title">users (REQUIRED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type:</p>
          </div>
          <div>
            <p>Array</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default:</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>An array defining a list of users. When you create the sub-account, only one user can be defined: the account <code>Owner</code>. To add additional users, use the <a href="/docs/new-relic-partnerships/partnerships/partner-api/partnership-api-user-object">Partnership API user object</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXR0ci1zdWJzY3JpcHRpb25zIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJwYXNzd29yZCAoUkVRVUlSRUQpIn1d">
    <div data-prop-text="title">password (REQUIRED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type:</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default:</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If you are creating a sub-account with an existing user as the account <code>Owner</code>, the password <em>must</em> match the user's current password.</p>
  </div>
</div>
<p>Sub-accounts can also be created via the master account's <a href="/docs/accounts/install-new-relic/account-setup/manage-apps-or-users-sub-accounts"><strong>Account settings</strong> page</a> in the New Relic UI.</p>
<h2>Sub-account API calls [#account-calls]</h2>
<p>Here is the URL pattern to create sub-accounts. Notice that the Parent Account ID must be specified. If using this URL pattern, send the JSON object along with an HTTP header containing the <a href="https://docs.newrelic.com/docs/new-relic-partnerships/partnerships/partner-api/partner-api-reference#the-api-key">Partner API key</a>. For example:</p>
<pre><code>POST .../api/v2/partners/:PARTNER_ID/accounts/:PARENT_ACCOUNT_ID/sub_accountsâ€‹
x-api-key: :PARTNER_ACCOUNT_KEY
Content-Type: application/json

{ JSON data }
</code></pre>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Call</p>
      </div>
      <div>
        <p>Resource URL pattern</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><strong>Create</strong> a sub-account with the given parameters.</p>
      </div>
      <div>
        <pre><code>POST /api/v2/partners/:PARTNER_ID/accounts/:PARENT_ACCOUNT_ID/sub_accounts

</code></pre>
      </div>
    </div>
  </div>
</div>
<h2>JSON example [#account-status-definitions]</h2>
<p>Here is an example of a JSON request and response using the Partnership API sub-account object.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYWNjb3VudC1yZXF1ZXN0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJTdWItYWNjb3VudCBvYmplY3QgSlNPTiByZXF1ZXN0In1d">
    <div data-prop-text="title">Sub-account object JSON request</div>
    <pre><code>{
  "account": {
    "name": "Sample Sub-Account",
    "users": [
      {
        "email": "sample_user@sample.org",
        "password": "XXXXXXXX",
        "owner": true,
        "role": "admin",
        "first_name": "Sample",
        "last_name": "User"
      }
    ],
    "allow_api_access": true,
    "phone_number": "555-555-5555"
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYWNjb3VudC1yZXF1ZXN0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJKU09OIHJlc3BvbnNlIn1d">
    <div data-prop-text="title">JSON response</div>
    <pre><code>{
  "id": XXXXXX,
  "name": "Sample Account",
  "status": "pending",
  "license_key": "caf8247360d8db295c142c72138fa8fb28df1403",
  "api_key": "86f818b6d81668b6c034661396b71c25bb323d8b8df1403",
  "browser_monitoring_key": "66617123f5",
  "allow_api_access": true,
  "high_security": false,
  "testing": null,
  "partner_external_identifier": null,
  "parent_account_id":XXXXXX,
  "subscription": {
    "id": XXXXXX,
    "starts_on": "2016-05-17",
    "expires_on": null,
    "annual_renewal_on": null,
    "products": [
      {
        "product_id": 4,
        "name": "Pro",
        "units": 10,
        "price": 1990.0
      },
      {
        "product_id": 10,
        "name": "Mobile Lite",
        "units": 0,
        "price": 0.0
      },
      {
        "product_id": 20,
        "name": "Browser Lite",
        "units": 0,
        "price": 0.0
      },
      {
        "product_id": 16,
        "name": "Insights None",
        "units": 0,
        "price": 0.0
      },
      {
        "product_id": 23,
        "name": "Synthetics Lite",
        "units": 0,
        "price": 0.0
      }
    ]
  },
  "primary admin": {
    "id": XXXXXX,
    "email": "sample_user@sample.org",
    "first_name": "Sample",
    "last_name": "User",
    "state": "active"
  }
}

</code></pre>
  </div>
</div>
<h2>Sub-account object API examples [#api-examples-v2]</h2>
<p>Here is an example of an API call using the Partnership API sub-account object.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1jcmVhdGUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkNyZWF0ZSJ9XQ==">
    <div data-prop-text="title">Create</div>
    <p>Request:</p>
    <pre><code>curl -X POST \
-H 'x-api-key:PARTNER_ACCOUNT_KEY' \
-H 'Content-Type:application/json' \
-d '{"sub_account":{"name":"Sample Sub-Account"}, "users":[{"email":"sample_user@sample.org", "password":"XXXXXX", "first_name":"Sample", "last_name":"User", "role":"admin", "owner":"true"}]}' \
https://rpm.newrelic.com/api/v2/partners/:PARTNER_ID/accounts/:PARENT_ACCOUNT_ID/sub_accounts

</code></pre>
    <pre><code>
{
  "id": XXXXXX,
  "name": "Sample Sub-Account",
  "status": "pending",
  "license_key": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
  "api_key": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
  "browser_monitoring_key": "xxxxxxxxxx",
  "allow_api_access": false,
  "high_security": false,
  "testing": null,
  "partner_external_identifier": null,
  "parent_account_id":XXXXXX,
  "subscription": {
    "id": XXXXXX,
    "starts_on": "2016-05-17",
    "expires_on": null,
    "annual_renewal_on": null,
    "products": [
      {
        "product_id": 4,
        "name": "Pro",
        "units": 10,
        "price": 1999.0
      },
      {
        "product_id": 10,
        "name": "Mobile Lite",
        "units": 0,
        "price": 0.0
      },
      {
        "product_id": 20,
        "name": "Browser Lite",
        "units": 0,
        "price": 0.0
      },
      {
        "product_id": 16,
        "name": "Insights None",
        "units": 0,
        "price": 0.0
      },
      {
        "product_id": 23,
        "name": "Synthetics Lite",
        "units": 0,
        "price": 0.0
      }
    ]
  },
  "primary admin": {
    "id": XXXXXX,
    "email": "sample_user@sample.org",
    "first_name": "Sample",
    "last_name": "User",
    "state": "active"
  }
}

</code></pre>Response (line breaks are for readability):
  </div>
</div>
<h2>For more help [#more_help]</h2>
<ul>
  <li>A parent account may have more than one associated sub_account, but every sub_account must correspond to one and only one parent account.</li>
  <li>Every sub_account must have at least a primary_admin user.</li>
  <li>You cannot create a sub_account without connecting it to an existing parent account and adding at least one user.</li>
</ul>
