
<p>This describes using New Relic's staging and production environments.</p>
<h2>Working in staging [#staging]</h2>
<p>The staging environment is provided as a sandbox for partners to develop, debug, and exercise the integration between their systems and New Relic's. When developing an integration, follow these guidelines:</p>
<ul>
  <li>Refrain from creating test accounts on the production server. Do as much test account and subscription creation as possible on the staging server. The activity metrics on the production system are closely watched. Quantities of test account activity in production cause distortions in these metrics and discomfort among metrics watchers.</li>
  <li>Do not use the Partnership Owner account for monitoring applications. Create an account under the partnership and use this account for application monitoring.</li>
</ul>
<p>There are a number of differences between the two environments, staging and production. These differences include server addresses and some partnership values. As these values will need to be changed when migrating from staging to production, it is helpful to keep track of them.</p>
<p>The table provided below lists the items that change between staging and production. Where these are common to all integrations, they are filled in. Values specific to your integration are blank. You may find it convenient to keep track of the values specific to your partnership in this table.</p>
<h2>Minimizing changes between staging and production [#changes]</h2>
<p>Some simple practices will minimize the effort required to migrate from staging to production. Use product names rather than product ids when referencing products in your API calls.</p>
<p>For example:</p>
<ul>
  <li>Use <code>product_name</code> = "Enterprise."</li>
  <li>Avoid <code>product_id</code> = "41."</li>
</ul>
<p>The numeric ID values for products differ between staging and production; the name value does not. Using the numeric ID to designate a product will require a change when moving to production; using the name descriptor will not.</p>
<p>Partnership <code>name</code>, <code>id</code> and <code>api_key</code> differ between staging and production. These will need to be manually changed when promoting your integration to production.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Code</strong></p>
      </div>
      <div>
        <p><strong>Staging</strong></p>
      </div>
      <div>
        <p><strong>Production</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>partnership_id</code></p>
      </div>
      <div></div>
      <div></div>
    </div>
    <div>
      <div>
        <p><code>partnership_name</code></p>
      </div>
      <div></div>
      <div></div>
    </div>
    <div>
      <div>
        <p><code>api_key</code></p>
      </div>
      <div></div>
      <div></div>
    </div>
    <div>
      <div>
        <p><code>server</code></p>
      </div>
      <div>
        <p>staging.newrelic.com</p>
      </div>
      <div>
        <p>rpm.newrelic.com</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>collector</code></p>
      </div>
      <div>
        <p>staging-collector</p>
      </div>
      <div>
        <p>collector</p>
      </div>
    </div>
  </div>
</div>
<h2>Agents and the staging collector [#agents-staging]</h2>
<p>When testing reporting data using the New Relic staging server, the agents must be directed to the staging collectors. When promoting your integration to production, these parameters can simply be removed and the collectors will point to the production servers by default.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>New Relic agent</strong></p>
      </div>
      <div>
        <p><strong>Configuration file edits</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Java and Ruby</p>
      </div>
      <div>
        <p>In the Java or Ruby agent configuration file, add this parameter to your production settings (or to your staging environment if appropriate):</p>
        <pre><code>host: staging-collector.newrelic.com

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p>.NET</p>
      </div>
      <div>
        <p>For the .NET agent, edit the configuration file to set:</p>
        <pre><code>service licenseKey="yourkey" host="staging-collector.newrelic.com" ssl="false"

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p>PHP</p>
      </div>
      <div>
        <p>For the PHP agent, edit the configuration file so that the service tag has the host attribute:</p>
        <pre><code>collector_host = staging-collector.newrelic.com

</code></pre>
      </div>
    </div>
  </div>
  <div></div>
</div>
