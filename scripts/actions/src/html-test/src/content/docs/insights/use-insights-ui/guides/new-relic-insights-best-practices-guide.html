
<p>As software systems grow more complex, the teams building the next generation of websites, apps, and services need tools that can provide end-to-end visibility across the entire stack. New Relic provides these tools—offering the features (such as sub-second query responses on real-time data, dashboards with powerful charting, and flexible alerts) that are essential to building great products.</p>
<p>Bundled into all New Relic solutions, Insights enables users to unlock the full power of the un-aggregated, highly dimensional event data collected by New Relic agents. By applying the tips and best practices detailed here, you can use New Relic Insights to build better performance into your systems with every release.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>We have an improved way to query and create custom charts: <a href="/docs/new-relic-one/use-new-relic-one/get-started/introduction-new-relic-one">New Relic One</a>. For tips on switching from Insights to New Relic One, see this <a href="/docs/new-relic-one/use-new-relic-one/core-concepts/transition-new-relic-one-insights">transition guide</a>.</p>
</div>
<h2>1. Explore your data [#explore]</h2>
<p>The Insights data explorer offers rich, full-text search across thousands of events and metrics collected by New Relic agents on your applications and hosts. Use it to explore and chart not just the <a href="/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#data-available">default available data types</a> but also any custom events and metrics you’ve added.</p>
<p>For example, if you were to use custom metrics to track messages sent and received on a Kafka queue, you could easily <a href="/docs/insights/use-insights-ui/explore-data/metric-explorer-search-chart-metrics-sent-new-relic-agents">find and add those metrics to a dashboard</a> alongside error rate or throughput trends.</p>
<p>From within the <a href="/docs/insights/use-insights-ui/explore-data/metric-explorer-search-chart-metrics-sent-new-relic-agents">metric explorer</a>, you can change the scope of metrics using wildcards, facet your metrics by application host, and expose an API call for the metric via a single click.</p>
<h3>How to do it (Event explorer) [#event-explorer]</h3>
<p>Here's how to use the Insights <a href="/docs/insights/use-insights-ui/explore-data/event-explorer-query-chart-your-event-data">event data explorer</a>:</p>
<ol>
  <li>
    <p>Go to <a href="https://insights.newrelic.com">insights.newrelic.com</a> and select <strong>Data explorer > Events</strong>.</p>
  </li>
  <li>
    <p>Select a data type to explore.</p>
  </li>
  <li>
    <p>Review the attribute names and values shown for the data matching your view.</p>
  </li>
  <li>
    <p>Select attributes to group by and plot.</p>
    <ul>
      <li>On the NRQL-generated query, click <strong>Run.</strong></li>
      <li>Configure the chart options as needed.</li>
      <li>To add individual charts to a dashboard: Give the chart a meaningful title to identify it in a dashboard. Select <strong>Add to a dashboard</strong>.</li>
    </ul>
  </li>
</ol>
<h3>How to do it (Metric explorer) [#metric-explorer]</h3>
<p>Here's how to use the Insights <a href="/docs/insights/use-insights-ui/explore-data/metric-explorer-search-chart-metrics-sent-new-relic-agents">metric data explorer</a>:</p>
<ol>
  <li>Go to <a href="https://insights.newrelic.com">insights.newrelic.com</a> and select <strong>Data explorer > Metrics</strong>.</li>
  <li>Select the entity or application your metrics report under. (To select a metric for your chart, browse the top metrics or search for a metric name.)</li>
  <li>View metric charts as you select them.</li>
  <li>Configure the chart options.</li>
  <li><strong>Optional:</strong> To visit the API Explorer (which is preset to the selected metric and time range), select <strong>Explore API</strong>.</li>
  <li>To add individual charts to a dashboard, select <strong>Add to dashboard</strong>.</li>
  <li>Give each chart a meaningful title to identify it on the target dashboard.</li>
</ol>
<p>
  <img src="./images/Insights_Guide_Figure_1.png" alt="Insights_Guide_Figure_1.png" title="Insights_Guide_Figure_1.png">
</p>
<p>Data explorer example.</p>
<h2>2. Try out NRQL queries [#nrql-queries]</h2>
<p>Once you’ve explored some of the taxonomy of your data via data explorer, it’s time to start asking some direct questions of your data. You can do this via <a href="/docs/query-data/nrql-new-relic-query-language/getting-started/introduction-nrql">NRQL</a>: a query language for making calls against our database. If you know SQL, you will already be familiar with a lot of NRQL syntax. And if you don’t know SQL, no worries: We’ll use example queries to get you up and running quickly.</p>
<p>At its core, NRQL enables you to query data collected from your application and transform it into dynamic charts. You can then use that data to better understand how your application is used.</p>
<p>For example, during incident response, you can test multiple hypotheses by asking and answering multiple questions in rapid succession—down to the individual user or end point (thanks to the un-aggregated, highly dimensional nature of New Relic data).</p>
<h3>How to do it</h3>
<p>Use the command-line query tool that appears at the top of your dashboards and on the <strong>Query history</strong> page to build commands with SQL-style syntax. As you type, the auto-completion feature suggests attributes and flags syntax errors with a red underline. (For more information about NRQL syntax, see <a href="https://docs.newrelic.com/docs/insights/nrql-new-relic-query-language/using-nrql/introduction-nrql">Introduction to NRQL</a> and <a href="https://docs.newrelic.com/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-syntax-components-functions">NRQL reference</a>.</p>
<p>Here are some example NRQL queries to show you the art of the possible:</p>
<ul>
  <li>
    <p>Out-of-the-box performance:</p>
    <ul>
      <li>
        <p>What is the distribution of response times for my app?</p>
        <pre><code>SELECT histogram(duration, width: 2, buckets: 20) FROM Transaction WHERE appName = YOUR_APP_NAME SINCE 1 day ago
</code></pre>
      </li>
      <li>
        <p>What percent of time is spent in the application processing the request (outside of database processing)?</p>
        <pre><code>SELECT (1-(average(duration)-average(databaseDuration))/average(duration))*100 AS '% of time in DB' FROM Transaction FACET name WHERE appName = YOUR_APP_NAME
</code></pre>
      </li>
    </ul>
  </li>
  <li>
    <p>Lightweight custom instrumentation to drill down to an individual user:</p>
    <ul>
      <li>`<code>SELECT count(*) FROM MobileCrash WHERE </code>authentication_email<code> = ‘```exampleuser@newrelic.com</code>'</li>
      <li><code>Authentication_email</code> is a custom attribute that’s been added to the default MobileCrash event type with a single line of code. (<a href="https://docs.newrelic.com/docs/insights/insights-data-sources/custom-events/insert-custom-events-attributes-mobile-data#examples">Find out more here</a>.)</li>
    </ul>
  </li>
</ul>
<p>See more examples:</p>
<ul>
  <li>Try out the tutorials on your <a href="https://insights.newrelic.com/">Insights homepage.</a></li>
  <li>If you’re using the New Relic Mobile agent, try out these <a href="https://docs.newrelic.com/docs/insights/nrql-new-relic-query-language/nrql-examples/insights-query-examples-mobile">examples</a>.</li>
</ul>
<h2>3. Pin charts from other New Relic products [#pin-charts]</h2>
<p>Now that you’ve explored your data and asked some questions, it’s time to learn how Insights can be integrated with charts from other New Relic products. Using the add-to-Insights feature, you can pin any New Relic chart to an Insights dashboard.</p>
<h3>How to do it</h3>
<ol>
  <li>Mouse over the chart.</li>
  <li>Click the <strong>Add to an Insights Dashboard</strong> button.</li>
  <li>From the <strong>Copy chart</strong> dialog box:
    <ul>
      <li>Select <strong>Copy to an existing dashboard</strong> (default) or <strong>Copy to a new dashboard</strong>.</li>
      <li>Edit the chart name as needed (maximum length: 255 characters).</li>
      <li>Click <strong>Copy</strong>. (Note: You can switch accounts from this dialog box to copy to different dashboards across accounts. You can also click the dashboard name in the green success bar to go the dashboard to which you added the chart.)</li>
    </ul>
  </li>
</ol>
<p>
  <img src="./images/Insights_Guide_Figure_3.png" alt="Insights_Guide_Figure_3.png" title="Insights_Guide_Figure_3.png">
</p>
<p>Copy chart dialog box.</p>
<h2>4. Create dashboard notes [#create-dashboard]</h2>
<p>To make your dashboard more usable across your entire organization, use the dashboard notes feature to add context to any dashboard. Have a chart you’d like to describe for others? Have important links that go hand-in-hand with the dashboard (for example a runbook)? Dashboard notes allow you to add arbitrary text and images to your dashboard.</p>
<p>Add notes to dashboards to record or share custom information about the dashboard. Because these notes use markdown syntax, it is easy to add elements such as headings, images, links, and so on.</p>
<h3>How to do it</h3>
<ul>
  <li>At the top of the dashboard, select <strong>Add Dashboard note</strong>.</li>
</ul>
<h2>5. Designate dashboards as favorites [#favorite]</h2>
<p>Get fast access to key dashboards by designating them as favorites.</p>
<p>How to do it:</p>
<ul>
  <li>To make a dashboard a favorite, click the <strong>star</strong> icon. (Favorite dashboards appear at the top of the dashboards list.)</li>
  <li>To remove a dashboard from your favorites, click the <strong>star</strong> icon again.</li>
</ul>
<h2>5. Apply a filter to a dashboard [#apply-filter]</h2>
<p>You can easily drill down into specifics about your data in Insights. All you have to do to change the data presented is input text into a search box. For example, anyone can visit a dashboard and input a user's email address to access data un-aggregated for that user.</p>
<h3>How to do it:</h3>
<ol>
  <li>On the dashboard, select <strong>Edit.</strong></li>
  <li>Then select <strong>Filter disabled</strong> or click the <strong>gear icon.</strong></li>
  <li>Select <strong>Enable filter</strong>.</li>
  <li>From the <strong>Event types</strong> drop-down menu, select one or more data types.</li>
  <li>From the <strong>Select attribute</strong> drop-down menu, select one or more attributes to restrict filtering to specific attributes.</li>
  <li>Select <strong>Filter enabled</strong> or click the blue gear icon again to close the Filter menu.</li>
  <li>To save your changes to the dashboard, select <strong>Done editing</strong>.</li>
</ol>
<p>
  <img src="./images/Insights_Guide_Figure_6.png" alt="Insights_Guide_Figure_6.png" title="Insights_Guide_Figure_6.png">
</p>
<p>Drill down to important data facets with ease by going to insights.newrelic.com > (selected dashboard) > Edit: Enable filtering on a dashboard.</p>
<h2>6. Build a data app [#build-data]</h2>
<p>Do you want to present a bunch of dashboards as a whole? Are you thinking about sharing information beyond your DevOps teams? <a href="/docs/insights/use-insights-ui/manage-dashboards/data-apps-build-collections-linked-dashboards">Data apps</a> can help you do so.</p>
<p>Designed to let users create self-service analytics reports that even non-technical users can employ to answer questions about performance, customers, feature usage, and more, data apps let business users click through preset drill-downs and modify their filters in real time via basic searches. As collections of linked dashboards that create curated, application-like experiences, data apps work on any attributes available in Insights.</p>
<h3>How to do it:</h3>
<ol>
  <li>Go to <strong>insights.newrelic.com > Data apps > Create a data app.</strong></li>
  <li>Specify an <strong>Icon, Title, URL, Description,</strong> and <strong>Permissions</strong> for your app.</li>
  <li>Select <strong>Create</strong> to save your new data app.</li>
  <li>After creating your data app, Insights automatically redirects you to a new dashboard. You can add widgets to this dashboard using standard NRQL queries.</li>
  <li>You can also create additional dashboards by selecting <strong>+ Add</strong> from the data app navigation bar, or by copying an existing dashboard into your data app:
    <ul>
      <li>From your data app dashboard, select <strong>Edit</strong>, then select <strong>Configure data app.</strong></li>
      <li>From the <strong>Copy dropdown menu</strong>, choose a dashboard. (Dashboard copies are independent of the original dashboard—meaning changes to the original dashboard do not affect the copy, and editing or deleting the copied dashboard does not affect the original.)</li>
    </ul>
  </li>
</ol>
<p>Learn more about <a href="/docs/insights/use-insights-ui/manage-dashboards/data-apps-build-collections-linked-dashboards">data apps</a>.</p>
<h2>7. Link facets across dashboards within a data app [#facet]</h2>
<p>Facet linking is a powerful way to build dashboards to tell a deep story around specific filters. For example, you can use the <code>FACET</code> clause in NRQL to break out your data by any string attribute. Use the <code>LIMIT</code> clause to specify how many facets appear (the default is 10). For more complex grouping, use <code>FACET CASES</code>.</p>
<p>By using <code>FACET</code> linking, a user can jump to details of an individual company on a prebuilt dashboard showing specifics for that company.</p>
<h3>How to do it:</h3>
<ol>
  <li>Go to <strong>insights.newrelic.com > Data apps > (select a data app).</strong></li>
  <li>Select the dashboard containing the widget you want to link from; then select <strong>Edit</strong>.</li>
  <li>From the widget you want to link, select the link
    <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJzdHlsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6Intjb2xvcjogJyM4RkFBREEnfSIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE3MiwiY29sdW1uIjo2Niwib2Zmc2V0IjoxMjM0MX0sImVuZCI6eyJsaW5lIjoxNzIsImNvbHVtbiI6ODYsIm9mZnNldCI6MTIzNjF9fX19LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS1saW5rIn1d"></div>icon.
  </li>
  <li>Select the target dashboard from the list.</li>
</ol>
<h2>8. Add a custom attribute and/or event via a New Relic agent [#custom-attribute]</h2>
<p>All New Relic agents report some event data by default, out of the box. For example, each time a <a href="https://docs.newrelic.com/docs/insights/insights-data-sources/default-data/mobile-default-event-attributes-insights">Mobile</a> event occurs, more than 35 attributes are added, providing a wealth of ways to slice and dice your data. This allows you to troubleshoot faster, understand better, and focus on creating value rather than putting out fires.</p>
<p>Eventually, however, you will probably want to add custom attributes to your event data. For example: you might want to add a unique user ID attribute that will let you see performance data on an individual user. With just a few lines of code, you can add custom attributes to your event data to enhance your ability to dashboard and filter your data along with other methods depending on the language.</p>
<p>Since the approach you use will be specific to the agent you’re employing, we’ve provided a couple of examples below. Please view the <a href="http://docs.newrelic.com">New Relic docs</a> for specifics on the agent you’re using.</p>
<h3>How to do it (for Java via agent API; you can also use an XML approach)</h3>
<ol>
  <li>To collect custom attributes via API, call the relevant methods.</li>
  <li>For each method you want to record an attribute, call <code>addCustomParameter</code>.</li>
  <li><strong>Optional:</strong> Include or exclude certain attributes with <code>attributes.include</code> and <code>attributes.exclude</code>. For example, to record a variable named userId, include the following code in the parent method: <code>NewRelic.addCustomParameter("userId", userId)</code>.</li>
</ol>
<h3>How to do it (for Agent API via Java APM agent)</h3>
<ul>
  <li>Custom event collection is enabled by default in Java agent version 3.13.0 or higher. To send custom events, simply call the relevant API. For example:
    <ul>
      <li><code>Map&#x3C;String, Object> eventAttributes = new HashMap&#x3C;String, Object>(); NewRelic.getAgent().getInsights().recordCustomEvent('MyCustomEvent', eventAttributes);</code></li>
    </ul>
  </li>
  <li>In the above example, the first argument defines the name of your event type, and the second argument is a map with the attributes for your custom event.</li>
  <li>Ensure you limit the number of unique event type names you create, and do not generate these names dynamically. For restrictions on event type names, see Limits and restricted characters and Reserved words.</li>
  <li>You can change the maximum number of events recorded by the Java agent via a configuration parameter in newrelic.yml: Simply add <code>custom_insights_events.max_samples_stored:</code> to your configuration file.</li>
  <li>Specify the maximum number of events to record per minute as an integer. For example, if you want to send less than the default of 10,000 events, use the following: <code>custom_insights_events.max_samples_stored: 5000</code></li>
  <li>To disable custom events, add <code>custom_insights_events.enabled: false</code> to newrelic.yml.</li>
</ul>
<h2>9. Add a custom event Insights end point [#custom-event]</h2>
<p>You can also enhance the information you report about your applications and systems by creating a custom event—via either a New Relic agent API or the Event API. If you chose the latter, you can send information from your system without adding a New Relic agent to it. You get all the benefits of our agent’s deep instrumentation in other parts of your stack in places where we don’t have an agent or you don’t want to add one. Keep in mind that Insights only supports event insertion via POST. Follow the instructions below to start reporting a new event type.</p>
<h3>How to do it:</h3>
<ol>
  <li>Go to the <strong>Manage data</strong> section of Insights.</li>
  <li>Click the API Keys tab.</li>
  <li>Register an Event API Insert key.</li>
  <li>Generate JSON for the event by instrumenting your application, querying an API, or some other method.</li>
  <li>Submit the JSON to the Insights HTTPS end point using cURL in a POST request. (<a href="https://docs.newrelic.com/docs/data-analysis/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data#event-data">More info)</a></li>
</ol>
<p><strong>Be sure to check out New Relic API Explorer</strong></p>
<p>By taking advantage of New Relic API Explorer (available at <a href="https://api.newrelic.com">https://api.newrelic.com</a>), Admin users and those with the API Key can:</p>
<ul>
  <li>Browse available API end points</li>
  <li>Interact with the API within a user interface (the API Explorer)</li>
  <li>View a live source of documentation</li>
  <li>Obtain cURL commands for API actions</li>
  <li>Share configured API calls with colleagues by copy and pasting API Explorer URLs.</li>
</ul>
<p>For more about reporting custom events, see <a href="/docs/insights/insights-data-sources/custom-data/send-custom-data-insights">Custom events</a>.</p>
<h2>Want more user tips? [#more-tips]</h2>
<ul>
  <li>For a library of videos about basic concepts and advanced procedures to query your data, visit <a href="https://learn.newrelic.com/live-webinar-introduction-to-the-new-relic-telemetry-data-platform">learn.newrelic.com</a>.</li>
  <li>Read the <a href="https://docs.newrelic.com/docs/insights">documentation</a>.</li>
  <li>Use the <a href="https://docs.newrelic.com/attribute-dictionary">data dictionary</a> to explore some events and attributes.</li>
  <li>Visit the <a href="https://discuss.newrelic.com/c/telemetry-data-platform/dashboards">New Relic Explorers Hub</a>.</li>
</ul>
<p>See our other product best-practice docs (found in <a href="https://docs.newrelic.com/">New Relic docs</a>) for more in-depth best practices on using Insights in conjunction with those products.</p>
