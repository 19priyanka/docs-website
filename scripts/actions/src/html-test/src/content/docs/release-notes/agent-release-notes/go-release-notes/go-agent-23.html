
<h3>2.3.0 Notes</h3>
<ul>
  <li>
    <p>Added support for <a href="https://echo.labstack.com">Echo</a> in the new <code>nrecho</code> package.</p>
    <ul>
      <li><a href="http://godoc.org/github.com/newrelic/go-agent/_integrations/nrecho">Documentation</a></li>
      <li><a href="https://github.com/newrelic/go-agent/blob/master/_integrations/nrecho/example/main.go">Example</a></li>
    </ul>
  </li>
  <li>
    <p>Introduced <code>Transaction.SetWebResponse(http.ResponseWriter)</code> method which sets the transaction's response writer. After calling this method, the <code>Transaction</code> may be used in place of the <code>http.ResponseWriter</code> to intercept the response code. This method is useful when the <code>http.ResponseWriter</code> is not available at the beginning of the transaction (if so, it can be given as a parameter to <code>Application.StartTransaction</code>). This method will return a reference to the transaction which implements the combination of <code>http.CloseNotifier</code>, <code>http.Flusher</code>, <code>http.Hijacker</code>, and <code>io.ReaderFrom</code> implemented by the ResponseWriter. Example:</p>
  </li>
</ul>
<pre><code>func setResponseDemo(txn newrelic.Transaction) {
    recorder := httptest.NewRecorder()
    txn = txn.SetWebResponse(recorder)
    txn.WriteHeader(200)
    fmt.Println("response code recorded:", recorder.Code)
}
</code></pre>
<ul>
  <li>The <code>Transaction</code>'s <code>http.ResponseWriter</code> methods may now be called safely if a <code>http.ResponseWriter</code> has not been set. This allows you to add a response code to the transaction without using a <code>http.ResponseWriter</code>. Example:</li>
</ul>
<pre><code>func transactionWithResponseCode(app newrelic.Application) {
       txn := app.StartTransaction("hasResponseCode", nil, nil)
       defer txn.End()
       txn.WriteHeader(200) // Safe!
}
</code></pre>
<ul>
  <li>The agent will now collect environment variables prefixed by <code>NEW_RELIC_METADATA_</code> and <code>KUBERNETES_SERVICE_HOST</code>. These will be added to Transaction events to provide context between your Kubernetes cluster and your services. For details on the benefits (currently in beta) see <a href="https://blog.newrelic.com/engineering/monitoring-application-performance-in-kubernetes/">this blog post</a></li>
  <li>The agent now collects the fully qualified domain name of the host and local IP addresses for improved linking with our Infrastructure product.</li>
</ul>
