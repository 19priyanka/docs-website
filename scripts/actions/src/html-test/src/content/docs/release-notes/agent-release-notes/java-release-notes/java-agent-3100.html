
<h3>Improvements</h3>
<ul>
  <li>
    <p>Full support for Java SE 8</p>
    <p>The New Relic Java agent now supports Java SE 8! Applications can now run on a Java 8 JVM, including those compiled to target Java 8 (i.e. -target 1.8). The system property newrelic.enable.java.8 is no longer necessary.</p>
  </li>
  <li>
    <p><code>@RequestMapping</code> annotation used to name web transactions</p>
    <p>Where available, Spring Web Transactions are now named using the URI path pattern defined in the <code>@RequestMapping</code> annotation. This generally provides even more meaningful transaction names than controller methods. To disable this and revert back to naming using controllers, add this config to your newrelic.yml:</p>
    <pre><code>instrumentation:
    spring_annotations:
       enabled: false
</code></pre>
  </li>
  <li>
    <p>WebSphere JMX metrics reported when global security is enabled</p>
    <p>Prior to this version, JMX metrics could not be pulled by the agent with WebSphere when global security was enabled. This means custom JMX metrics in a yaml file and default JMX metrics displayed on the JVM Threads and Http Sessions tabs were not reported.</p>
  </li>
  <li>
    <p>Servlet UserPrincipal name can be reported as an attribute</p>
    <p>With this release, you can enable the capturing of the UserPrincipal name so that it is available in New Relic Insights and as a transaction trace attribute. To enable:</p>
    <pre><code>class_transformer:
    com.newrelic.instrumentation.servlet-user:
      enabled: true
</code></pre>
  </li>
  <li>
    <p>Non-Web Transactions can now be made Key Transactions with a custom apdex T</p>
    <p>This feature will be available in the RPM UI very soon. It requires this or a higher version of the agent.</p>
  </li>
</ul>
<h3>Fixes</h3>
<ul>
  <li>
    <p>Fix: Web transactions not always reported.</p>
    <p>In some unusual cases the Agent stopped reporting web transactions. The agent would log an error that included the phrase "Inconsistent state"</p>
  </li>
  <li>
    <p>Fix: WebSphere 7 reports active thread count on the JVM tab</p>
    <p>The thread pool active count being displayed in the UI was actually the pool size.</p>
  </li>
  <li>
    <p>Fix: Excess error reporting in Play apps</p>
    <p>In Scala/Play apps, the agent was incorrectly logging errors when promises were resolved with a Failure.</p>
  </li>
  <li>
    <p>Fix: Request headers are not read when cross application tracing is disabled</p>
    <p>Disabling cross application tracing using these config settings did not stop the Agent from reading request headers.</p>
    <pre><code>cross_application_tracer:
enabled: false
</code></pre>
  </li>
  <li>
    <p>Fix: NewRelic API methods prematurely deprecated</p>
    <p>In 3.9.0, some API calls in com.newrelic.api.agent.NewRelic were prematurely deprecated. We are in the process of providing a more complete API for the New Relic agent. In an upcoming release, these methods may become deprecated, but with a stable and superior API alternative.</p>
  </li>
</ul>
