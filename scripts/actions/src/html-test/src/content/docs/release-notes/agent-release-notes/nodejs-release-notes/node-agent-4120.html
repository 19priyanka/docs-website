
<h3>New features</h3>
<ul>
  <li>
    <p>Added IP address collection and forwarding of metadata headers for upcoming protocol 17.</p>
    <p>These features are currently behind the <code>protocol_17</code> feature flag until all parts of protocol 17 are implemented.</p>
  </li>
</ul>
<h3>Improvements</h3>
<ul>
  <li>
    <p>Converted error handling in <code>CollectorAPI</code> and <code>RemoteMethod</code> to callbacks.</p>
    <p>Previously many of the errors were thrown. For consistency with async errors, these are now handed to the callback instead of thrown. The old behavior could result in a crash under a few circumstances, such as when the agent exceeded a configured maximum payload size. These errors came from <code>RemoteMethod._safeRequest</code>. Since these errors are handed to the callback instead of thrown, this bug is no longer a potential.</p>
  </li>
  <li>
    <p>Refactored harvest interactions in preparation for protocol 17 status codes.</p>
  </li>
</ul>
