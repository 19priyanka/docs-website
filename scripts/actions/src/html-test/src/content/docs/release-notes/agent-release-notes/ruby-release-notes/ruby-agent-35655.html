
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>The end-of-life date for this agent version is July 29, 2019. To update to the latest agent version, see <a href="/docs/agents/manage-apm-agents/installation/update-new-relic-agent">Update the agent</a>. For more information, see <a href="/docs/agents/manage-apm-agents/maintenance/new-relic-agent-plugin-end-life-policy">End-of-life policy</a>.</p>
</div>
<h3>Notes</h3>
<ul>
  <li>
    <p>Use HTTPS by default</p>
    <p>The agent now defaults to using SSL when it communicates with New Relic's servers. By defaults already configured, New Relic does not transmit any sensitive information (e.g. SQL parameters are masked), but SSL adds another layer of security. Upgrading customers may need to remove the "ssl: false" directive from their newrelic.yml to enable ssl. Customers on Jruby may need to install the jruby-openssl gem to take advantage of this feature.</p>
    <ul>
      <li>Fix two Resque-related issues</li>
    </ul>
    <p>Fixes a possible hang on exit of an instrumented Resque master process (<a href="https://github.com/resque/resque/issues/578">https://github.com/resque/resque/issues/578</a>), as well as a file descriptor leak that could occur during startup of the Resque master process.</p>
    <ul>
      <li>Fix for error graph over 100%</li>
    </ul>
    <p>Some errors were double counted toward the overall error total. This resulted in graphs with error percentages over 100%. This duplication did not impact the specific error traces captured, only the total metric.</p>
    <ul>
      <li>Notice gracefully handled errors in Sinatra</li>
    </ul>
    <p>When show_exceptions was set to false in Sinatra, errors weren't caught by New Relic's error collector. Now handled errors also have the chance to get reported back.</p>
    <ul>
      <li>Ruby 2.0 compatibility fixes</li>
    </ul>
    <p>Ruby 2.0 no longer finds protected methods by default, but will with a flag. <a href="http://tenderlovemaking.com/2012/09/07/protected-methods-and-ruby-2-0.html">http://tenderlovemaking.com/2012/09/07/protected-methods-and-ruby-2-0.html</a></p>
    <p>Thanks Ravil Bayramgalin and Charlie Somerville for the fixes.</p>
    <ul>
      <li>Auto-detect Trinidad as dispatcher</li>
    </ul>
    <p>Code already existing for detecting Trinidad as a dispatcher, but was only accessible via an ENV variable. This now auto-detects on startup. Thanks Robert Rasmussen for catching that.</p>
    <ul>
      <li>Coercion of types in collector communication</li>
    </ul>
    <p>Certain metrics can be recorded with a Ruby Rational type, which JSON serializes as a string rather than a floating point value. We now treat coerce each outgoing value, and log issues before sending the data.</p>
    <ul>
      <li>Developer mode fix for chart error</li>
    </ul>
    <p>Added require to fix a NameError in developer mode for summary page. Thanks to Ryan B. Harvey.</p>
    <ul>
      <li>Don't touch deprecated RAILS_ROOT if on Rails 3</li>
    </ul>
    <p>Under some odd startup conditions, we would look for the RAILS_ROOT constant after failing to find the ::Rails.root in a Rails 3 app, causing deprecation warnings. Thanks for Adrian Irving-Beer for the fix.</p>
  </li>
</ul>
