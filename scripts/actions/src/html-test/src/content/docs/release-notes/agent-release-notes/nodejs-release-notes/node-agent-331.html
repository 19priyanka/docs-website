
<h3>Fixes</h3>
<ul>
  <li>
    <p>Added a type check to attribute validation, restricting values to primitive types (but not <code>undefined</code>).</p>
    <p>Previously the agent was only enforcing byte limits on string values, resulting in overly large arrays being collected. This brings the agent in line with other language agents.</p>
  </li>
  <li>
    <p>The <code>DatastoreShim</code> will now respect specified <code>after</code> handlers.</p>
    <p>Previously on methods like <code>DatastoreShim#recordQuery</code> the <code>after</code> handler would be dropped. The property is now correctly propagated to the underlying <code>Shim#record</code> call.</p>
  </li>
  <li>
    <p>The agent will now check that a specified parent segment is part of an active segment before running a method under instrumentation.</p>
    <p>Previously the agent would unconditionally run a method under a specified parent. The shim expects the parent to exist and be active, and will throw errors in the case where the parent belongs to an inactive transaction.</p>
  </li>
</ul>
