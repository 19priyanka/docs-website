
<h3>New Features</h3>
<ul>
  <li>
    <p><strong>Adding custom transaction attributes using the .NET Agent API</strong></p>
    <p>New method, <code>AddCustomAttribute(string, object)</code> has been added to <code>ITransaction</code>.</p>
    <ul>
      <li>This new method accepts and supports all data types.</li>
      <li>Method <code>AddCustomParameter(string, IConvertable)</code> is still available with limited data-type support; however, this method should be considered obsolete and will be removed in a future release of the agent API.</li>
      <li>Further information may be found within <a href="https://docs.newrelic.com/docs/agents/net-agent/net-agent-api/itransaction">.NET Agent API documentation</a>.</li>
    </ul>
  </li>
  <li>
    <p><strong>Enhanced type support for <code>RecordCustomEvent</code> and <code>NoticeError</code> API methods.</strong></p>
    <p>APIs for recording exceptions and custom events now support values of all types.</p>
    <ul>
      <li>The <code>NoticeError</code> API method has new overloads that accept an <code>IDictionary&#x3C;string, object></code>.</li>
      <li>The <code>RecordCustomEvent</code> methods have been modified to handle all types of data. In that past, they only handled <code>string</code> and <code>float</code> types.</li>
      <li>Further information may be found within <a href="https://docs.newrelic.com/docs/agents/net-agent/net-agent-api">.NET agent API documentation</a>.</li>
    </ul>
  </li>
  <li>
    <p><strong>New attributes on span events</strong></p>
    <ul>
      <li>Spans created for external HTTP calls now include the <code>http.statusCode</code> attribute representing the status code of the call.</li>
      <li>Spans created for calls to a datastore now include the <code>db.collection</code> attribute. For instance, this will be the table name for a call to MS SQL Server.</li>
    </ul>
  </li>
  <li>
    <p><strong>Ability to exclude attributes from span events</strong></p>
    <p>Attributes on span events (e.g., <code>http.url</code>) can now be excluded via configuration. See <a href="https://docs.newrelic.com/docs/agents/net-agent/configuration/net-agent-configuration#span_events">.NET agent configuration</a> for further information.</p>
  </li>
</ul>
<h3>Fixes</h3>
<ul>
  <li>New Relic distributed tracing relies on propagating trace and span identifiers in the headers of external calls (e.g., an HTTP call). These identifiers now only contain lowercase alphanumeric characters. Previous versions of the .NET agent used uppercase alphanumeric characters. The usage of uppercase alphanumeric characters can break traces when calling downstream services also monitored by a New Relic agent that supports W3C trace context (New Relic's .NET agent does not currently support W3C trace context. Support for W3C trace context for .NET will be in an upcoming release). This is only a problem if a .NET application is the originator of the trace.</li>
</ul>
<h3>Upgrading</h3>
<ul>
  <li>Follow standard procedures to <a href="/docs/agents/net-agent/installation-configuration/update-net-agent">update the .NET agent</a>.</li>
  <li>If you are upgrading from a particularly old agent, review the list of major changes and procedures to <a href="/docs/agents/net-agent/troubleshooting/upgrade-legacy-net-agents">upgrade legacy .NET agents</a>.</li>
</ul>
