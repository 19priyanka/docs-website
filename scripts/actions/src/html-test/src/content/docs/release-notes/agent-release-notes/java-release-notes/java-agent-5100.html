
<h3>Improvements</h3>
<ul>
  <li>
    <p>Support for W3C Trace Context, with easy upgrade from New Relic trace context</p>
    <p>Distributed tracing now supports <a href="https://docs.newrelic.com/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#headers">W3C Trace Context</a> headers for HTTP and gRPC protocols when distributed tracing is enabled. Our implementation can accept and emit both W3C trace header format and New Relic trace header format. This simplifies agent upgrades, allowing trace context to be propagated between services with older and current releases of New Relic agents. With this release, W3C trace header format will always be accepted and emitted. New Relic trace header format will be accepted, and you can optionally disable emission of the New Relic trace header format.</p>
    <p>The New Relic trace header format can disabled using this config or as <a href="https://docs.newrelic.com/docs/agents/java-agent/configuration/java-agent-configuration-config-file#dt-exclude_newrelic_header">documented here</a>: <code>newrelic.config.distributed_tracing.exclude_newrelic_header = true</code></p>
    <p>Also, see <strong>Known issues and workarounds</strong>.</p>
  </li>
  <li>
    <p>Cassandra</p>
    <ul>
      <li>This release adds instrumentation for queries in versions 3.8+ of the Datastax Cassandra driver, including <a href="https://docs.newrelic.com/docs/apm/applications-menu/monitoring/databases-slow-queries-page">slow query</a> support. You’ll see relevant breakdowns in the overview chart, entries on the Databases page, and segments in transaction traces.</li>
    </ul>
  </li>
  <li>
    <p>AWS Async SDK</p>
    <ul>
      <li>AWS S3 - The Java agent now reports calls to Amazon S3 using the S3AsyncClient as external metrics</li>
      <li>AWS SQS - The Java agent now reports calls to SqsAsyncClient as message queue metrics</li>
      <li>AWS SNS - The Java agent now reports calls to Amazon SQS using SNSAsyncClient as message queue metrics</li>
    </ul>
  </li>
</ul>
<h3>Fixes</h3>
<ul>
  <li>
    <p>In an effort to modernize our language and improve clarity, we have renamed several config values. The old names will still work for now, but they will all be removed in the next major version.</p>
    <p><code>transaction_tracer.slow_query_whitelist</code> is now <code>transaction_tracer.collect_slow_queries_from</code></p>
    <p><code>strip_exception_messages.whitelist</code> is now <code>strip_exception_messages.allowed_classes</code></p>
    <p><code>command_parser.blacklist</code> is now <code>command_parser.disallow</code></p>
  </li>
  <li>
    <p>The <code>strip_exception_messages</code> config now excludes nested exception messages</p>
  </li>
  <li>
    <p>The agent will now use a lightweight tracer for SQL tracers beyond the <a href="https://docs.newrelic.com/docs/agents/java-agent/configuration/java-agent-configuration-config-file#cfg-tt-segment_limit">segment_limit</a>, improving performance in cases with a high number of segments.</p>
  </li>
  <li>
    <p>The agent would fail to report the Docker <code>containerId</code> for some combinations of systemd and Kubernetes</p>
  </li>
  <li>
    <p>The agent logger would fail to log with: <code>“ERROR RollingFileAppender 'File': No TriggeringPolicy provided”</code> when <code>newrelic.config.log_file_count>1</code> and <code>newrelic.config.isDaily=false</code> and <code>newrelic.config.log_limit_bytes=0</code></p>
  </li>
</ul>
<h3>Known issues and workarounds</h3>
<p>If a .NET agent is initiating distributed traces as the root service, you must update that .NET agent to version 8.24 or later before upgrading your downstream Java New Relic agents to this agent release.</p>
