
<h3>New Features</h3>
<p><strong><em>More flexibility for container deployments</em></strong></p>
<ul>
  <li>The daemon and the instrumented application no longer have to reside on the same host and can now communicate over an IPv4 or IPv6 TCP socket. For the instrumented application this can be configured via the <code>daemon_socket</code> argument of the <code>newrelic_init</code> function. For the daemon this can be configured via the <code>--address</code> command line option.</li>
  <li>When terminating the daemon via the <code>SIGTERM</code> signal (and/or the <code>SIGINT</code> signal if started with the <code>-f</code>, <code>--foreground</code> flag), the daemon will now send all buffered data to New Relic prior to exiting.</li>
  <li>The daemon has introduced a new configuration <code>--watchdog-foreground</code>. This keeps the daemon watchdog process in the foreground, whereas the <code>--foreground</code> configuration keeps the daemon worker process in the foreground. The new configuration makes it possible to use the daemon in a blocking way, without losing the additional stability provided by the watchdog process.</li>
  <li>The C SDK now offers <code>newrelic_set_transaction_name</code> with which users may change the name of an already started transaction.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
  <li>The daemon now synchronously handles critical code paths related to harvesting and merging transaction data. This prevents crashes caused by race conditions.</li>
</ul>
<h3>Upgrade Notices</h3>
<ul>
  <li>
    <p>The daemon has introduced a new configuration <code>--address</code> which serves as an alias to <code>--port</code>. Customers may use either to specify the location of the daemon. If both values are set, <code>--address</code> takes precedence.</p>
  </li>
  <li>
    <p>When starting the daemon, it will now wait for up to three seconds for the listening port to be ready to receive connections before forking into the background. This usually occurs in (much) less than a second, and most users with this configuration will notice no difference in practice.</p>
    <p>The time that the daemon will wait can be controlled by setting the <code>--wait-for-port</code> setting with a duration. This duration may be 0 to prevent any blocking. If the option is omitted, the default value is <code>3s</code>.</p>
    <p>Daemons started in foreground mode (with the <code>--foreground</code> flag) are unaffected, and will behave as before.</p>
  </li>
</ul>
