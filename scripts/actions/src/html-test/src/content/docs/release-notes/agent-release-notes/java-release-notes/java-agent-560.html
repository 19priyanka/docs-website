
<h3>New APIs</h3>
<ul>
  <li>Added <a href="http://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/Agent.html#getTraceMetadata()">getTraceMetadata()</a>. This provides information about the currently executing trace, including the trace and span ids as well as it’s sampled state</li>
  <li><a href="http://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/TraceMetadata.html">getTraceId()</a>, which provides the currently executing trace’s identifier from the <code>TraceMetadata</code>.</li>
  <li><a href="http://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/TraceMetadata.html">getSpanId()</a>, which provides the span identifier associated with the currently executing span from the <code>TraceMetadata</code>.</li>
  <li><a href="http://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/TraceMetadata.html">isSampled()</a>, returns whether or not the current transaction is part of a sampled distributed trace from the <code>TraceMetadata</code>.</li>
  <li>Added <a href="http://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/Agent.html#getLinkingMetadata()">getLinkingMetadata()</a>, which provides an opaque map of key/value pairs that can be used to correlate this application in the New Relic backend.</li>
</ul>
<h3>Fixes</h3>
<ul>
  <li>Spring Webflux WebClient would not track external calls when constructed with <code>baseUrl(String baseUrl)</code></li>
  <li>The <code>NewRelic.getAgent().getConfig().getValue()</code> api would not check configuration values set via environment variables</li>
  <li>The agent’s completable-future instrumentation could hold a reference to <code>Token</code>s after they were expired, which could cause excessive memory usage.</li>
  <li>Error traces could report to the wrong application when <code>auto_app_naming</code> is enabled and there were errors from two different application names getting reported during the same harvest</li>
  <li>The agent’s MongoDB instrumentation would instrument the same builder used by the async and reactive-streams drivers, resulting in excessive memory usage and incorrect transaction times. <strong>Note:</strong> The agent will no longer instrument the sync MongoDB driver if the async and/or reactive-streams drivers are on the application’s <code>classpath</code>.</li>
</ul>
