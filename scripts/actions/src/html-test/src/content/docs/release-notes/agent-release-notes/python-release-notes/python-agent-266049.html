
<h3>Notes</h3>
<p>This release of the Python agent is a bug fix release that addresses several outstanding issues. In addition, the agent's instrumentation for the Pyramid web framework was updated to handle changes introduced in version 1.7 of Pyramid.</p>
<p>The agent can be installed using easy_install/pip/distribute via the <a href="https://pypi.python.org/pypi/newrelic">Python Package Index</a> or can be downloaded directly from our <a href="http://download.newrelic.com/python_agent/release/">download site</a>.</p>
<p>For a list of known issues with the Python agent, see <a href="https://docs.newrelic.com/docs/python/status-of-python-agent">Status of the Python agent</a>.</p>
<h3>New Feature</h3>
<ul>
  <li>
    <p><strong>Support for Pyramid 1.7</strong></p>
    <p>In version 1.7 of the Pyramid web framework, the <code>ViewDeriver</code> class was removed and replaced with a custom view pipeline, composed with view derivers. This required a change to where the agent applied it's instrumentation, since we were previously instrumenting the <code>ViewDeriver</code> class.</p>
  </li>
</ul>
<h3>Bug Fixes</h3>
<ul>
  <li>
    <p><strong>Gevent and Python 3.4+</strong></p>
    <p>When running the agent with <code>gevent</code> in Python 3.4+, the agent would throw an <code>AttributeError</code> when accessing the <code>_sleep</code> attribute in the <code>threading</code> module, which was removed in Python 3.4. The agent now handles this properly.</p>
  </li>
  <li>
    <p><strong>Possible missing application exceptions in APM Error Analytics</strong></p>
    <p>Using the <code>record_exception()</code> API, it is possible to record an exception against the application, but outside of a transaction. If there was a time window in which no transaction exceptions were recorded, but only application exceptions were recorded, then no exceptions would be displayed when viewing that time window in APM Error Analytics. With this release, application exceptions show up as expected, whether or not transaction exceptions were also recorded.</p>
  </li>
  <li>
    <p><strong>CherryPyWSGIServer and keyword arguments</strong></p>
    <p>Previously, the agent would fail to instrument <code>CherryPyWSGIServer</code> correctly when it was initialized using keyword arguments. That is now handled correctly.</p>
  </li>
  <li>
    <p><strong>Missing attributes in Transaction Events</strong></p>
    <p>In <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/python-release-notes/python-agent-260046">version 2.60.0.46</a> of the agent, two response header attributes were renamed, but they were not added to Transaction Events as they should have been.</p>
    <ul>
      <li><code>response.headers.contentLength</code></li>
      <li><code>response.headers.contentType</code></li>
    </ul>
    <p>These attributes are now included in Transaction Events.</p>
  </li>
</ul>
<h3>Changed Feature</h3>
<ul>
  <li>
    <p><strong>Capture port for all HTTP requests to External Services</strong></p>
    <p>Prior to this release, the agent would capture the port for HTTP requests to external services for only some of the HTTP libraries that the agent instruments. Notably, the port was missing when using these libraries directly: <code>httplib</code>, <code>httplib2</code>, and <code>urllib3</code>. The agent now captures the port for these libraries.</p>
  </li>
</ul>
