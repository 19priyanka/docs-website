
<h2>2.9.0</h2>
<h3>New Features</h3>
<ul>
  <li>
    <p>Added support for <a href="https://github.com/grpc/grpc-go">gRPC</a> monitoring with the new <a href="https://godoc.org/github.com/newrelic/go-agent/_integrations/nrgrpc">_integrations/nrgrpc</a> package. This package supports instrumentation for servers and clients.</p>
    <ul>
      <li><a href="https://github.com/newrelic/go-agent/blob/master/_integrations/nrgrpc/example/server/server.go">Server Example</a></li>
      <li><a href="https://github.com/newrelic/go-agent/blob/master/_integrations/nrgrpc/example/client/client.go">Client Example</a></li>
    </ul>
  </li>
  <li>
    <p>Added new <a href="https://godoc.org/github.com/newrelic/go-agent#ExternalSegment">ExternalSegment</a> fields <code>Host</code>, <code>Procedure</code>, and <code>Library</code>. These optional fields are automatically populated from the segment's <code>URL</code> or <code>Request</code> if unset. Use them if you don't have access to a request or URL but still want useful external metrics, transaction segment attributes, and span attributes.</p>
    <ul>
      <li><code>Host</code> is used for external metrics, transaction trace segment names, and span event names. The host of segment's <code>Request</code> or <code>URL</code> is the default.</li>
      <li><code>Procedure</code> is used for transaction breakdown metrics. If set, it should be set to the remote procedure being called. The HTTP method of the segment's <code>Request</code> is the default.</li>
      <li><code>Library</code> is used for external metrics and the <code>"component"</code> span attribute. If set, it should be set to the framework making the call. <code>"http"</code> is the default.</li>
    </ul>
    <p>With the addition of these new fields, external transaction breakdown metrics are changed: <code>External/myhost.com/all</code> will now report as <code>External/myhost.com/http/GET</code> (provided the HTTP method is <code>GET</code>).</p>
  </li>
  <li>
    <p>HTTP Response codes below <code>100</code>, except <code>0</code> and <code>5</code>, are now recorded as errors. This is to support <code>gRPC</code> status codes. If you start seeing new status code errors that you would like to ignore, add them to <code>Config.ErrorCollector.IgnoreStatusCodes</code> or your server side configuration settings.</p>
  </li>
  <li>
    <p>Improve <a href="https://github.com/sirupsen/logrus">logrus</a> support by introducing <a href="https://godoc.org/github.com/newrelic/go-agent/_integrations/nrlogrus#Transform">nrlogrus.Transform</a>, a function which allows you to turn a <a href="https://godoc.org/github.com/sirupsen/logrus#Logger">logrus.Logger</a> instance into a <a href="https://godoc.org/github.com/newrelic/go-agent#Logger">newrelic.Logger</a>. Example use:</p>
    <pre><code>l := logrus.New()
l.SetLevel(logrus.DebugLevel)
cfg := newrelic.NewConfig("Your Application Name", "__YOUR_NEW_RELIC_LICENSE_KEY__")
cfg.Logger = nrlogrus.Transform(l)
</code></pre>
    <p>As a result of this change, the <a href="https://godoc.org/github.com/newrelic/go-agent/_integrations/nrlogrus">nrlogrus</a> package requires <a href="https://github.com/sirupsen/logrus">logrus</a> version <code>v1.1.0</code> and above.</p>
  </li>
</ul>
