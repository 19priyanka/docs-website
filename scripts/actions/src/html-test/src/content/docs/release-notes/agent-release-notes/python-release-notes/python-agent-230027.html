
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>The end-of-life date for this agent version is July 29, 2019. To update to the latest agent version, see <a href="/docs/agents/manage-apm-agents/installation/update-new-relic-agent">Update the agent</a>. For more information, see <a href="/docs/agents/manage-apm-agents/maintenance/new-relic-agent-plugin-end-life-policy">End-of-life policy</a>.</p>
</div>
<h3>Notes</h3>
<p>This release of the Python agent improves instrumentation for the Flask web framework and adds database monitoring support when using the pymssql client with a Microsoft SQL Server database.</p>
<p>The agent can be installed using <strong>easy_install/pip/distribute</strong> via the <a href="https://pypi.python.org/pypi/newrelic">Python Package Index</a> or can be downloaded directly from our <a href="http://download.newrelic.com/python_agent/release/">download site</a>.</p>
<p>For a list of known issues with the Python agent see <a href="/docs/python/status-of-python-agent">Status of the Python agent</a>.</p>
<h3>New Features</h3>
<ul>
  <li>
    <p><strong>Improved instrumentation for Flask</strong></p>
    <p>The Python agent now provides better web transaction naming and performance breakdown metrics when Flask style middleware are being used. This means that time spent in Flask <code>@before_request</code> and <code>@after_request</code> functions will now be broken out as their own metrics. If a <code>@before_request</code> function actually returns a response, the web transaction will be correctly named after that function rather than the Flask WSGI application entry point. These changes, in addition to being applied on middleware functions registered directly against the Flask application, will also work when Flask blueprints are used to encapsulate behavior.</p>
  </li>
  <li>
    <p><strong>Browser monitoring auto-instrumentation when using Flask-Compress</strong></p>
    <p>When the Flask-Compress package is used to perform response compression with Flask, insertion of browser monitoring tracking code into HTML responses is now automatically performed. Previously, if Flask-Compress was being used, manual instrumentation of HTML responses would have been required.</p>
  </li>
  <li>
    <p><strong>Monitoring of MSSQL database</strong></p>
    <p>Instrumentation is now provided for the <code>pymssql</code> database client module to monitor database calls made against a Microsoft SQL Server database.</p>
  </li>
</ul>
<h3>Bug Fixes</h3>
<ul>
  <li>When using high security mode, the use of <code>newrelic.capture_request_params</code> in the per request WSGI environ to enable capture of request parameters, possibly by setting it using the <code>SetEnv</code> directive when using Apache/mod_wsgi, was not being overridden and disabled as required.</li>
  <li>When using the <code>DatabaseTrace</code> context manager or associated wrappers explicitly to implement a custom monitoring mechanism for database calls, the instrumentation wrappers could fail with a <code>TypeError</code> exception when trying to internally derive the name of the database product being used.</li>
</ul>
