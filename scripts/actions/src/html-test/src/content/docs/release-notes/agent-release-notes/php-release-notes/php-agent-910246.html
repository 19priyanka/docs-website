
<h3>New Features in 9.1</h3>
<p><strong>Symfony 4 support added.</strong></p>
<ul>
  <li>Web transactions that use the Symfony 4 framework will now be automatically named based on the route or controller name.</li>
</ul>
<p><strong>Addition of the ability to migrate to <a href="https://docs.newrelic.com/docs/agents/manage-apm-agents/configuration/enable-configurable-security-policies">Configurable Security Policies (CSP)</a> on a per agent basis for accounts already using <a href="https://docs.newrelic.com/docs/agents/manage-apm-agents/configuration/high-security-mode">High Security Mode (HSM)</a>.</strong></p>
<ul>
  <li>When both HSM and CSP are enabled for an account, an agent (this version or later) can successfully connect with either <code>high_security: true</code> or the appropriate <code>security_policies_token</code> configured.</li>
</ul>
<h3>Upgrade notices</h3>
<ul>
  <li>
    <p>Requests handled by PHP-FPM that result in a 404 error because the script does not exist, or a 403 error because PHP-FPM does not have permission to access the script, will now result in a transaction called <code>404</code> or <code>403</code>, respectively, rather than being named after the request URI. This change was made to prevent <a href="https://docs.newrelic.com/docs/agents/manage-apm-agents/troubleshooting/metric-grouping-issues">metric grouping issues</a>, particularly when sites are being probed by potential attackers.</p>
    <p>If you wish to capture the actual request URI for analysis, it can be attached to the transaction event under the <code>request.uri</code> attribute using the following configuration setting: <code>newrelic.transaction_events.attributes.include=request.uri</code></p>
  </li>
</ul>
<h3>Bug fixes</h3>
<ul>
  <li>In version 9.0, Guzzle and Predis execution time could be double counted on application overview and transaction charts in APM, as time could be attributed to both PHP execution and the external or datastore time, respectively. This has been fixed, and charts should now revert back to their previous behavior.</li>
  <li>Restarting a transaction from within a Drupal or WordPress hook could result in a segfault. This has been fixed.</li>
</ul>
<h3>Known issues and workarounds</h3>
<ul>
  <li><strong>Potential memory exhaustion for long running transactions.</strong> See description under <strong>Known issues and workarounds</strong> in the <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/php-release-notes/php-agent-900242">PHP 9.0.0.242 release notes</a>.</li>
</ul>
