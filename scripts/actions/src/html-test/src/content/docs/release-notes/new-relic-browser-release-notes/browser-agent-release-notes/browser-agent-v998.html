
<h3>Notes</h3>
<p>The Browser Agent, sometimes called the JS Agent, has multiple variants: Lite, Pro, Pro+SPA. Unless noted otherwise, all features/improvements/bug fixes are available in all variants of the agent.</p>
<h3>New features</h3>
<ul>
  <li><strong>Added the setCurrentRouteName API method [relevant only for Pro+SPA]</strong>: The agent now has an API method to set the current route name for the page. This api can be used to set the <code>previousRouteName</code> and <code>targetRouteName</code> for BrowserInteraction events.</li>
</ul>
<p>For details on how and why to use this API, see our <a href="https://docs.newrelic.com/docs/browser/new-relic-browser/browser-agent-apis/report-data-events-browser-agent-api#spa-api">Browser SPA API Docs</a></p>
<h3>Improvements</h3>
<ul>
  <li><strong>Disabled insecure communication with New Relic</strong>: Previously the agent would send RUM data to the router without TLS if the request was initiated from an insecure page. Now the Browser Agent will always use TLS connection when transmitting data.</li>
  <li><strong>Browser Agent no longer mutates the attributes object passed to the addPageAction API</strong>: Previously the agent would mutate the attributes object passed to add page actions by adding the default and page attributes onto this object.</li>
</ul>
<h3>Bug fixes</h3>
<ul>
  <li><strong>Fixed a compatibility issue with zone.js</strong>: Previously when the Browser Agent and zone.js were both included on a page, additional event handlers would be triggered twice. For example, when event handlers were added as properties, such as <code>onreadystatechange</code>, these handlers would be triggered twice in some browsers. This issue has now been resolved.</li>
  <li><strong>Fixed a bug with cross-frame callbacks</strong>: Previously, when adding event handlers for events in iframes, the agent would attempt to wrap the provided callbacks. When the wrapping logic called the callback belonging to another frame, a permissions exception would be thrown. The agent will now only wrap callbacks created in the same frame.</li>
  <li><strong>Fixed a memory leak when the Browser agent fails to load correctly</strong></li>
</ul>
<h3>How to upgrade</h3>
<p>To upgrade your agent to the latest version, see <a href="https://docs.newrelic.com/docs/browser/new-relic-browser/installation-configuration/upgrade-browser-agent">Upgrade Browser agent</a>.</p>
