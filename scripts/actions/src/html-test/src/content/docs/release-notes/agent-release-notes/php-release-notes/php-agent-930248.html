
<h3>Known issues and workarounds</h3>
<p><strong>Potential memory exhaustion for long running transactions</strong></p>
<ul>
  <li>See description and recommendations under <strong>Known issues and workarounds</strong> in the <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/php-release-notes/php-agent-900242">PHP 9.0.0.242 release notes</a>.</li>
</ul>
<h3>New features in 9.3</h3>
<p><strong>Trace and entity metadata API calls</strong></p>
<ul>
  <li>A new API function <a href="https://docs.newrelic.com/docs/agents/php-agent/php-agent-api/newrelicissampled"><code>newrelic_is_sampled()</code></a> has been added. This call returns true if the current transaction is part of a sampled distributed trace.</li>
  <li>A new API function for obtaining linking metadata been added. <a href="https://docs.newrelic.com/docs/agents/php-agent/php-agent-api/newrelicgetlinkingmetadata"><code>newrelic_get_linking_metadata()</code></a>. This call returns an opaque map of key/value pairs that can be used to correlate this application to other data in the New Relic backend.</li>
  <li>A new API function <a href="https://docs.newrelic.com/docs/agents/php-agent/php-agent-api/newrelicgettracemetadata"><code>newrelic_get_trace_metadata()</code></a> has been added. This call returns a collection of metadata used to identify a trace: <code>trace.id</code>, which provides the currently executing trace's identifier; and <code>span.id</code>, which provides the span identifier associated with the currently executing span.</li>
</ul>
<p><strong>Configurable connection timeout</strong></p>
<ul>
  <li>
    <p>The PHP agent has introduced a new configuration <a href="https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration"><code>newrelic.daemon.app_connect_timeout</code></a>. Customers may use this to specify a timeout for the agent to wait for a daemon connection.</p>
    <p>With this timeout set, the agent will not immediately drop a transaction when the daemon hasn't connected to the backend yet, but rather grant the daemon time to establish the connection.</p>
    <p>It is recommended to only set this timeout when instrumenting long-lived background tasks, as in case of connection problems the agent will block for the given timeout at every transaction start.</p>
  </li>
</ul>
