
<h2>v6.0.0</h2>
<ul>
  <li>
    <p>Tracer API for flexible custom instrumentation</p>
    <p>With agent version 6.0, we are introducing the <code>Tracer</code> class, an officially supported public API for more flexible custom instrumentation. By calling its <code>in_transaction</code> method, you can instrument an arbitrary section of Ruby code without needing to juggle any explicit state. Behind the scenes, the agent will make sure that the measured code results in an APM segment inside a transaction.</p>
    <p>The same API contains additional methods for creating transactions and segments, and for interacting with the current transaction. For more details, see the <a href="https://docs.newrelic.com/docs/agents/ruby-agent/api-guides/ruby-custom-instrumentation">custom instrumentation documentation</a>.</p>
    <p>If you were previously using any of the agent's private, undocumented APIs, such as <code>Transaction.wrap</code> or <code>Transaction.start/stop</code>, you will need to update your code to use the Tracer API.</p>
    <p>The full list of APIs that were removed or deprecated are:</p>
    <ul>
      <li>
        <p><code>External.start_segment</code></p>
      </li>
      <li>
        <p><code>Transaction.create_segment</code></p>
      </li>
      <li>
        <p><code>Transaction.start</code></p>
      </li>
      <li>
        <p><code>Transaction.stop</code></p>
      </li>
      <li>
        <p><code>Transaction.start_datastore_segment</code></p>
      </li>
      <li>
        <p><code>Transaction.start_segment</code></p>
      </li>
      <li>
        <p><code>Transaction.wrap</code></p>
      </li>
      <li>
        <p><code>TransactionState.current_transaction</code></p>
        <p>If are you using any of these APIs, please see the <a href="https://docs.newrelic.com/docs/agents/ruby-agent/troubleshooting/update-private-api-calls-public-tracer-api">upgrade guide</a> for a list of replacements.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Agent detects Rails 6.0</p>
    <p>The agent properly detects Rails 6.0 and no longer logs an error when started in a Rails 6.0 environment. This does not include full Rails 6.0 support, which will be coming in a future release. Thanks to Jacob Bednarz for the contribution.</p>
  </li>
</ul>
