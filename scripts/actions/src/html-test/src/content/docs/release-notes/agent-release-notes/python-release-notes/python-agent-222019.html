
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>The end-of-life date for this agent version is July 29, 2019. To update to the latest agent version, see <a href="/docs/agents/manage-apm-agents/installation/update-new-relic-agent">Update the agent</a>. For more information, see <a href="/docs/agents/manage-apm-agents/maintenance/new-relic-agent-plugin-end-life-policy">End-of-life policy</a>.</p>
</div>
<h3>Notes</h3>
<p>This release of the Python agent introduces a means to enforce High Security Mode from the agent configuration, as well as enabling capture of Insights events for background tasks.</p>
<p>The agent can be installed using easy_install/pip/distribute via the <a href="https://pypi.python.org/pypi/newrelic">Python Package Index</a> or can be downloaded directly from our <a href="http://download.newrelic.com/python_agent/release/">download site</a>.</p>
<p>For a list of known issues with the Python agent see our online help article on the <a href="https://newrelic.com/docs/python/status-of-python-agent">status of the Python agent</a>.</p>
<h3>New Features:</h3>
<ul>
  <li>Insights events are now also recorded for background tasks, in addition to the existing events already captured for web transactions.</li>
  <li>The application to record an exception against can now be explicitly provided using the keyword argument <code>application</code> when calling <code>newrelic.agent.record_exception()</code>. This enables the ability to record exceptions outside of the context of a monitored web transaction or background task. A suitable application object can be retrieved using <code>newrelic.agent.application()</code>.</li>
</ul>
<h3>Features Changed:</h3>
<ul>
  <li>
    <p>Enforcing High Security Mode from the agent configuration is now supported.</p>
    <p>High Security Mode is a feature to prevent any sensitive data from being sent to New Relic. The local setting for the agent must match the server setting in the New Relic APM UI. If there is a mismatch, the agent will log a message and act as if it is disabled. A link to the docs for High Security Mode can be found <a href="https://docs.newrelic.com/docs/subscriptions/security#high-security">here</a></p>
    <p>Attributes of high security mode (when enabled):</p>
    <ul>
      <li>Requires an SSL connection to be used.</li>
      <li>Prevents capture of request parameters.</li>
      <li>Suppresses capture of custom parameters.</li>
    </ul>
    <p>The default setting for High Security Mode is <code>false</code>.</p>
    <p>If you already have high security mode enabled within the New Relic APM UI, you will need to add:</p>
    <pre><code>high_security = true
</code></pre>
    <p>to your local agent configuration file.</p>
    <p>Or if using Heroku, set the <code>NEW_RELIC_HIGH_SECURITY</code> environment variable by running:</p>
    <pre><code>heroku config:set NEW_RELIC_HIGH_SECURITY=true
</code></pre>
  </li>
  <li>
    <p>When using the gunicorn WSGI server, the request URL which appears in transaction trace samples and error details will now be sourced from the <code>RAW_URI</code> variable passed by gunicorn in the WSGI <code>environ</code> dictionary. This will ensure that what is displayed is the raw URL before <code>%</code> escape sequences have been decoded. This avoids the problem of the URL being shown as a raw byte sequence.</p>
  </li>
  <li>
    <p>When audit logging is enabled, the responses returned from our data collector service will now also be logged.</p>
  </li>
</ul>
<h3>Bug fixes/Improvements:</h3>
<ul>
  <li>An incorrect module name was being derived for methods of classes, when used in web transaction and function trace naming, where the method was from a base class defined in a different module, but invoked via a derived class.</li>
  <li>When using Django class based views, if a class based view was used explicitly from within a view handler, the name of the class based view method was overriding the web transaction name, which at that point would have been set to the view handler. The class based view method name will now only be used for the web transaction name when it is actually registered as the view handler.</li>
  <li>Explain plans for SQL queries were not working when the SQL database cursor had been configured to return a dictionary rather than a tuple for each row set when the original query was made.</li>
</ul>
