
<h2>Notes</h2>
<p>This release of the Python agent adds support for native coroutines and generators with the background task API and adds support for Kubernetes detection.</p>
<p>The agent can be installed using easy_install/pip/distribute via the <a href="https://pypi.python.org/pypi/newrelic">Python Package Index</a> or can be downloaded directly from the New Relic <a href="http://download.newrelic.com/python_agent/release">download site</a>.</p>
<h2>Features</h2>
<ul>
  <li>
    <p><strong>@background_task can now be used with coroutines</strong></p>
    <p>The background_task decorator API can now be used with native coroutines and generators.</p>
    <pre><code>@background_task(name='my_coroutine')
 async def my_coroutine():
   await asyncio.sleep(0.1)
</code></pre>
  </li>
  <li>
    <p><strong>Add support for collection of Kubernetes metadata</strong></p>
    <p>The agent will now collect environment variables prefixed by <code>NEW_RELIC_METADATA_</code> as additional metadata. Some of this metadata may be added to Transaction events to provide context between your Kubernetes cluster and your services. For details on the benefits (currently in beta) see <a href="https://blog.newrelic.com/engineering/monitoring-application-performance-in-kubernetes">this blog post</a>.</p>
    <p>The agent now also collects the <code>KUBERNETES_SERVICE_HOST</code> environment variable to detect when the application is running on Kubernetes. The data is used to link the application to the host machine when using the New Relic infrastructure product.</p>
  </li>
</ul>
<h2>Bug Fixes</h2>
<ul>
  <li>
    <p><strong>Using time trace decorators allowed coroutines to become Iterables and generators to become awaitables</strong></p>
    <p>When using time trace decorators native coroutines were converted to iterables. Additionally generators were converted to awaitables. The behavior of generators, native coroutines, and awaitable generators is now unchanged when using time trace decorators.</p>
  </li>
</ul>
