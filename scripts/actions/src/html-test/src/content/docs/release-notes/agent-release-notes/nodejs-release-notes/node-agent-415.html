
<h3>Fixes</h3>
<ul>
  <li>Make <code>require()</code> statements explicitly reference <code>package.json</code> as a <code>.json</code> file.</li>
</ul>
<p>This solves a problem when requiring/importing <code>newrelic</code> from a Typescript file.</p>
<ul>
  <li>Check if <code>process.mainModule.filename</code> exists before using in missing config file check.</li>
</ul>
<p>When the agent is preloaded with Node's <code>--require</code> flag, <code>mainModule</code> is not yet defined when the agent checks for a config file, resulting in a <code>TypeError</code> in the event that no config file exists. Defaulting to the file path being executed in <code>process.argv</code> ensures that the app will not crash when preloaded without a config file.</p>
<ul>
  <li>Updated dev dependency tap to <code>v12.0.1</code>.</li>
  <li>Fixed identification of errors with express.</li>
</ul>
<p>Previously the call <code>next('router')</code> was considered an error. This is actually valid usage of express and will no longer generate an error.</p>
<ul>
  <li>Removed <code>debug.internal_metrics</code> configuration.</li>
</ul>
<p>This legacy debug configuration was never used since trace-level logging provides everything this did and more.</p>
<ul>
  <li>Upgraded optional dependency <code>@newrelic/native-metrics</code> to v3.</li>
</ul>
<p>With this update comes pre-built binaries for Node 5 and 7. GC metrics are also now aggregated in C++ until the agent is ready to harvest them instead of hopping into JS for each event.</p>
<ul>
  <li>Added additional checks to <code>uninstrumented</code> ensuring that files with names matching instrumented modules do not result in a false uninstrumented status.</li>
</ul>
<p>For example, some users load config/env info before the agent. In that case, a file responsible for exporting DB config information (<code>config/redis.js</code>), may result in a false uninstrumented status, because the agent would interpret <code>redis.js</code> as the module itself.</p>
