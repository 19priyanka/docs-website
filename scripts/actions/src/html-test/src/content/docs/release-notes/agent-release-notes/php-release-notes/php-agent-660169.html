
<h3>New Features</h3>
<ul>
  <li>
    <p>Support has been added for Laravel 5.3.</p>
  </li>
  <li>
    <p>Experimental Laravel Queue support.</p>
    <p>Experimental support for the <a href="http://laravel.com/docs/5.2/queues">Laravel Queue component</a> has been added. This supports all versions of Laravel from 4.0 to 5.3, inclusive.</p>
    <p>Whether run via <code>artisan queue:listen</code> or <code>artisan queue:work</code>, queue workers will now generate a separate background transaction for each job that is processed. These transactions will be named with the class name of the job, or <code>IlluminateQueueClosure</code> if a closure was queued.</p>
    <p>Additionally, a transaction that queues one or more jobs will be linked to the background transaction(s) that processed those jobs on the transaction map in the New Relic UI.</p>
    <p>To enable this support, you will need to set the <code>laravel_queue</code> feature flag in newrelic.ini. For most users, this will simply involve adding this line:</p>
    <p>newrelic.feature_flag=laravel_queue</p>
    <p>As this is presently an experimental feature, we would welcome feedback — both positive and negative — on whether this feature helps users using the Laravel Queue component better visualise the structure and performance of their applications.</p>
    <p>If all goes well, it is anticipated that Laravel Queue support will be enabled by default in a future version of the agent.</p>
  </li>
</ul>
<h3>Upgrade Notices</h3>
<ul>
  <li>
    <p>Symfony 1 transactions that generate 404 errors due to no routes being matched will now be named based on the module and action that are actually used, rather than the module and action inferred from the request URL. In most cases, this will result in the transaction name being based on the <code>error_404_module</code> and <code>error_404_action</code> Symfony settings.</p>
    <p>Note that, as a result of this change, if the configured 404 action calls <code>sfAction::forward()</code> to forward to another action, the transaction name will be based on the final action. All other uses of <code>sfAction::forward()</code> are unaffected.</p>
  </li>
</ul>
<h3>Bug Fixes</h3>
<ul>
  <li>Previously, calling <code>PDO::query</code> with more than one argument resulted in the query being counted under the 'other' category on the Datastores page in the New Relic UI. This has been fixed. The agent will now correctly categorize the query as 'select', 'insert', 'update', or 'delete'.</li>
  <li>Previously, calling <code>PDO::query</code> with more than one argument resulted in the agent reporting "(unknown sql)" if the query was slow. (i.e., it exceeded the threshold given by the <a href="https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-epthreshold">newrelic.transaction_tracer.explain_threshold</a> setting.) This has been fixed.</li>
  <li>Previously, calling <code>SQLite3::querySingle</code> with two arguments resulted in the query being counted under the 'other' category on the Datastores page in the New Relic UI. This has been fixed. The agent will now correctly categorize the query as 'select', 'insert', 'update', or 'delete'.</li>
  <li>Previously, calling <code>SQLite3::querySingle</code> with two arguments resulted in the agent reporting "(unknown sql)" if the query was slow. (i.e. It exceeded the threshold given by the <a href="https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-epthreshold">newrelic.transaction_tracer.explain_threshold</a> setting.) This has been fixed.</li>
  <li>Transient Magento 2 tables now have the unique numbers removed from their names to avoid metric grouping issues.</li>
  <li>Pressflow 6 applications were incorrectly detected as Drupal 7 applications. This could cause POST requests made using <code>drupal_http_request</code> to be converted into GET requests. This has been fixed.</li>
  <li>Explain plan generation is now always performed on a separate database connection. This has been changed to avoid issues when using MySQL's <code>SELECT FOUND_ROWS()</code> feature.</li>
  <li>Previously, instrumenting method calls that resolved to <code>__call()</code> or <code>__callStatic()</code> calls could result in crashes on PHP 7. This primarily manifested in crashes for users of certain WordPress plugins (for example, wp-external-links) that registered hooks or actions that used magic methods. This has been fixed.</li>
</ul>
