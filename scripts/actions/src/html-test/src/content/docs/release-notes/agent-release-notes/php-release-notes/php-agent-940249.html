
<h3>Known issues and workarounds</h3>
<p><strong>Potential memory exhaustion for long running transactions</strong></p>
<ul>
  <li>See description and recommendations under <strong>Known issues and workarounds</strong> in the <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/php-release-notes/php-agent-900242">PHP 9.0.0.242 release notes</a>.</li>
</ul>
<h3>New features in 9.4</h3>
<p><strong>Added support for <a href="https://www.php.net/ChangeLog-7.php#7.4.0">PHP 7.4</a></strong></p>
<ul>
  <li>The PHP agent can detect libraries and frameworks that were preloaded via the <a href="https://www.php.net/manual/en/opcache.configuration.php#ini.opcache.preload"><code>opcache.preload</code></a> setting.
    <ul>
      <li>You can disable this feature by using the following configuration setting: <a href="https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-rare-settings"><code>newrelic.preload_framework_library_detection = false</code></a>.</li>
    </ul>
  </li>
</ul>
<p><strong>Request URI attribute is now captured</strong></p>
<ul>
  <li>We now capture the <a href="https://docs.newrelic.com/docs/agents/php-agent/attributes/php-agent-attributes#attributes"><code>request.uri</code></a> attribute. The request URI appears in transaction queries in New Relic Insights.
    <ul>
      <li>You can disable this attribute by using the following configuration setting: <a href="https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-attribute-settings"><code>newrelic.attributes.exclude = "request.uri"</code></a>.</li>
    </ul>
  </li>
</ul>
<h3>Upgrade Notices</h3>
<ul>
  <li>For cross agent conformance, the agent attributes <code>request.headers.User-Agent</code> and <code>httpResponseCode</code> are renamed to <code>request.headers.userAgent</code> and <code>response.statusCode</code>. The value <code>response.StatusCode</code> is changed to an integer.
    <ul>
      <li>Attributes are reported with both the new and the legacy attribute names.</li>
      <li>Support for legacy attribute names will be removed in future agent versions.</li>
    </ul>
  </li>
</ul>
<h3>Bug Fixes</h3>
<ul>
  <li>
    <p>Since 9.0, transaction traces and span events were not created when <code>newrelic_end_transaction</code> was called inside a PHP function. <code>newrelic_end_transaction</code> now creates transaction traces and span events in any case. It reports all traces and span events for segments that weren't ended at the time of its invocation as <code>unknown</code>.</p>
  </li>
  <li>
    <p>Since 9.0, Predis calls weren't instrumented when the Predis client was loaded from a path ending in <code>Predis/Client.php</code>. This has been fixed.</p>
  </li>
  <li>
    <p>For inbound distributed tracing payloads with invalid or missing values for <code>pr</code> (priority) and/or <code>sa</code> (sampled) the agent used to assign a default priority of -1 and/or a default sampled value of <code>false</code> to the transaction.</p>
    <ul>
      <li>This has been fixed, the agent now keeps initial priority and sampled values if the respective values in the inbound distributed tracing payload are missing or invalid.</li>
    </ul>
  </li>
  <li>
    <p>The daemon used to erroneously send <code>SIGUSR1</code> signals to its parent process group in case one of the flags <code>--foreground</code> or <code>--watchdog-foreground</code> was given. This has been fixed.</p>
  </li>
</ul>
