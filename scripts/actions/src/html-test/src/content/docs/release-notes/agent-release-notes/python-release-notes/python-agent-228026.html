
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>The end-of-life date for this agent version is July 29, 2019. To update to the latest agent version, see <a href="/docs/agents/manage-apm-agents/installation/update-new-relic-agent">Update the agent</a>. For more information, see <a href="/docs/agents/manage-apm-agents/maintenance/new-relic-agent-plugin-end-life-policy">End-of-life policy</a>.</p>
</div>
<h3>Notes</h3>
<p>This release of the Python agent improves data collection with the Django web framework. These improvements include better-targeted web transaction naming with the Django REST framework, better coverage of Django template inclusion tags, and better background task monitoring for Django management commands.</p>
<p>The agent can be installed using <strong>easy_install/pip/distribute</strong> via the <a href="https://pypi.python.org/pypi/newrelic">Python Package Index</a> or can be downloaded directly from our <a href="http://download.newrelic.com/python_agent/release/">download site</a>.</p>
<p>For a list of known issues with the Python agent see <a href="/docs/python/status-of-python-agent">Status of the Python agent</a>.</p>
<h3>New Features</h3>
<ul>
  <li>
    <p><strong>Improved Django REST Framework naming</strong></p>
    <p>Previously, when using the Django REST framework, web transactions were being named after the class based view that implemented the Django REST framework resources. Now, where such a view provides custom handler methods for different HTTP request method types or actions, the web transaction will be named after that custom handler method rather than the class as a whole. A new function breakdown metric will also be added for the custom handler method. This change will allow web requests using different HTTP request method types to be viewed separately.</p>
  </li>
  <li>
    <p><strong>Django inclusion tag monitoring</strong></p>
    <p>Usage of <a href="https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#howto-custom-template-tags-inclusion-tags">inclusion tags</a> in Django templates can now be monitored and will appear in the transaction breakdown table, charts and sample transaction traces.</p>
    <p>Due to the possibility that a large range of custom inclusion tags might be used and that they may be invoked a large number of times in tight loops, tracking of all inclusion tags may not be practical or may not produce worthwhile results in the transaction breakdown or sample transaction traces. As a result, monitoring of inclusion tags is off by default, with the preferred approach being that specific inclusion tags of interest be individually enabled through the agent configuration file.</p>
    <p>To enable monitoring of specific inclusion tags, a new section called <code>import-hook:django</code> should be added to the agent configuration:</p>
    <pre><code>[import-hook:django]
instrumentation.templates.inclusion_tag = prepopulated_fields_js date_hierarchy
</code></pre>
    <p>The <code>instrumentation.templates.inclusion_tag</code> setting within that section should then be set to a space separated list of the names of the inclusion tags to monitor. If there is any confusion over the identity of the inclusion tag, the full name of the inclusion tag function, with module name, can instead be listed. For example, <code>data_hierarchy</code> can also be identified using <code>django.contrib.admin.templatetags.admin_list:date_hierarchy</code>.</p>
    <p>In addition to specifying the names of the specific inclusion tags, it is also possible to specify <code>*</code> for <code>instrumentation.templates.inclusion_tag</code> in order to have usage of all inclusion tags be monitored:</p>
    <pre><code>[import-hook:django]
instrumentation.templates.inclusion_tag = *
</code></pre>
    <p>Enabling monitoring of all inclusion tags in this way is only recommended in development or test environments so as to get an initial idea of what inclusion tags are worth tracking. Once identified, the specific inclusion tags of interest should thereafter be listed individually in a production environment.</p>
  </li>
  <li>
    <p><strong>Better monitoring of Django management commands</strong></p>
    <p>We previously published a blog post about how the agent could be used to monitor <a href="http://blog.newrelic.com/2014/03/18/monitoring-django-management-commands/">Django management commands</a>. This required you to manually set up the instrumentation for each specific Django management command in the agent configuration file. We have now made that easier by integrating the functionality as part of the agent itself.</p>
    <p>Due to the limitations on what Django management commands can be monitored, you will still need to list explicitly the commands you want monitored, but it can now be done in a single location as a space separated list under the setting <code>instrumentation.scripts.django_admin</code> of the <code>import-hook:django</code> section:</p>
    <pre><code>[import-hook:django] 
instrumentation.scripts.django_admin = syncdb sqlflush
</code></pre>
    <p>By default, we automatically specify the startup timeout to be <code>10.0</code> seconds when monitoring the Django management commands. If you need to override the startup timeout, you can set the <code>instrumentation.background_task.startup_timeout</code> setting within the same <code>import-hook:django</code> configuration section.</p>
  </li>
</ul>
