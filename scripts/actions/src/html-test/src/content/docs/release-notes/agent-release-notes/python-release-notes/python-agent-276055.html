
<h2>Notes</h2>
<p>This release of the Python agent adds support for reporting datastore instance information for the <a href="https://pypi.python.org/pypi/python-memcached">python-memcached</a> library. It also addresses a couple of Python 3 issues related to naming metrics and transactions.</p>
<p>Over the past few releases, support has been added to the agent for collecting datastore instance information for a number of drivers. See a <a href="https://docs.newrelic.com/docs/apm/applications-menu/features/analyze-database-instance-level-performance-issues#python-compatibility">complete list of supported packages</a>.</p>
<p>The agent can be installed using easy_install/pip/distribute via the <a href="https://pypi.python.org/pypi/newrelic">Python Package Index</a> or can be downloaded directly from the New Relic <a href="http://download.newrelic.com/python_agent/release/">download site</a>.</p>
<h2>New Features</h2>
<ul>
  <li>
    <p><strong>Datastore instance information for python-memcached</strong></p>
    <p>For most memcached operations made using the <a href="https://pypi.python.org/pypi/python-memcached">python-memcached</a> package, the Python agent will collect the host and port of the memcached server, as well as the memcached database index number. This data will be displayed in transaction traces and in slow query traces in APM.</p>
    <p>Supported operations include: <code>add</code>, <code>append</code>, <code>cas</code>, <code>decr</code>, <code>delete</code>, <code>get</code>, <code>gets</code>, <code>incr</code>, <code>prepend</code>, <code>replace</code>, <code>set</code>.</p>
    <p>Currently, the Python agent does not collect instance information for operations that interact with multiple memcached instances. These include: <code>delete_multi</code>, <code>flush_all</code>, <code>get_multi</code>, <code>get_slabs</code>, <code>get_stats</code>, <code>set_multi</code>.</p>
  </li>
</ul>
<h2>Bug Fixes</h2>
<ul>
  <li>
    <p><strong>Names for subclass methods in Python 3</strong></p>
    <p>Previously, when using Python 3, if a method was defined on a base class, but was called as a method on an instance of a subclass, the agent would generate a metric name or transaction name for that method using the base class. It would also use the module name of the base class in the metric or transaction name.</p>
    <p>With this release, the metric name or transaction name will use the class name of the subclass, as well as the module name of the subclass. This is consistent with how the naming works for Python 2.</p>
  </li>
  <li>
    <p><strong>Names for Flask pluggable views in Python 3</strong></p>
    <p>When monitoring Python 3 Flask applications, the agent would create metric and transaction names for Flask pluggable (or, class-based) views using the name of the <code>View.as_view()</code> classmethod, making it impossible to distinguish between different views in APM. Now, the metric and transaction name uses the name that is passed into <code>View.as_view()</code>.</p>
    <p>For example, a view defined as <code>view_func=ShowUsersView.as_view('show_users')</code> would use <code>show_users</code> as the view name. This is consistent with how the naming works for Python 2.</p>
  </li>
  <li>
    <p><strong>Redis client with custom connection pool</strong></p>
    <p>If a custom connection pool was used with the <a href="https://pypi.python.org/pypi/redis">redis</a> client, the agent could throw an <code>AttributeError</code> when attempting to gather datastore instance information. One library known to define a custom connection pool that encountered this issue is <a href="https://pypi.python.org/pypi/rb">Redis Blaster</a>. With this release, the agent will no longer throw an error for custom connection pools. In addition, the agent will now be able to gather datastore instance information for some operations, even when using a custom connection pool.</p>
  </li>
  <li>
    <p><strong>Developer Mode error message during "fake" harvest</strong></p>
    <p>When using the configuration setting of <code>developer_mode = True</code>, the agent does not transmit any data to New Relic. Instead, it performs a "fake harvest". In some cases, it was possible for the agent to log an <code>AssertionError</code> during the "fake harvest", but this issue has now been fixed.</p>
  </li>
</ul>
