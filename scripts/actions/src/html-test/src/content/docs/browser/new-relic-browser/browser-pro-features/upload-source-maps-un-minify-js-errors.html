
<p><a href="/docs/browser/new-relic-browser/getting-started/introduction-new-relic-browser">Browser monitoring</a> supports the uploading of source maps.</p>
<p>Source maps support is primarily useful for "decoding" minified JavaScript. Minified JavaScript results in mostly useless error stack traces on Browser's <a href="/docs/browser/new-relic-browser/browser-pro-features/javascript-errors-page-examining-errors-over-time">JS errors page</a>. Uploading source maps converts these errors to understandable stack traces, with useful references to code lines. This feature might also be useful for bundled or transpiled JavaScript code.</p>
<p>Browser gives you two options for using source maps:</p>
<ol>
  <li>Upload source maps via the Browser UI</li>
  <li>Publish source maps to Browser via the API</li>
</ol>
<p>This document will explain the first method: how to upload source maps via the UI, along with general <a href="#troubleshoot">troubleshooting help</a>. For instructions on using the API method, see <a href="/docs/push-source-maps-api">Push source maps via the API</a>.</p>
<h2>Import source maps via the New Relic UI [#source-map-ui]</h2>
<p>You can drag and drop, or upload, a source map file into the Browser UI to associate it with a specific JavaScript file. New Relic will then convert minified stack traces into un-minified traces and source code visible on the <a href="#examine-unminified">JS errors page</a>.</p>
<p>To drag in or upload a source map to Browser, the source map must be on your local machine.</p>
<p>To associate a source map with an error stack trace on the <a href="/docs/browser/new-relic-browser/browser-pro-features/javascript-errors-page-examining-errors-over-time">JS errors page</a>:</p>
<ol>
  <li>
    <p>Go to <strong><a href="https://one.newrelic.com">one.newrelic.com</a> > Browser > (select an app) > <a href="/docs/browser/new-relic-browser/browser-pro-features/javascript-errors-page-examining-errors-over-time">JS Errors</a></strong>, then select a JS error group. (Don't select an <strong>Errors without a stack trace</strong> group.)</p>
  </li>
  <li>
    <p>From the selected JS error group, select the error instance details tab (next to the <strong>Summary</strong> tab).</p>
  </li>
  <li>
    <p>Error groupings will have one or more frames listed that reference JavaScript files. Select the + icon on the right side of a frame to expand it. Then drag the matching source map file into the frame. <strong>Alternative option:</strong> when the frame is expanded, select <strong>find file</strong> to upload the file manually.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>An error frame with a gray strip on the left side indicate minified JS; a blue strip indicates it has had a source map applied.</p>
    </div>
  </li>
</ol>
<p>Other JS error frame features include:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>If you want to...</strong></p>
      </div>
      <div>
        <p><strong>Do this...</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>See more of the surrounding code</p>
      </div>
      <div>
        <p>Select <code>Show 10 more lines above/below</code> to view the code before or after the code in the stack trace.</p>
      </div>
    </div>
    <div>
      <div>
        <p>See original, minified file information</p>
      </div>
      <div>
        <ul>
          <li>For individual frame info: Next to the frame's source line and column, mouse over the
            <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS1tb3JlLWhvcml6b250YWwifV0="></div>ellipsis.
          </li>
          <li>For raw data of the entire stack trace: At the top of the error tab, select <strong>&#x3C;/> Raw</strong>.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Remove a source map</p>
      </div>
      <div>
        <p>From an expanded stack trace frame, select <strong>Remove file</strong>.</p>
      </div>
    </div>
  </div>
</div>
<h2>Troubleshooting [#troubleshoot]</h2>
<h3>Stack traces are still minified [#still-minified]</h3>
<p>If you have uploaded source maps to New Relic and still see minified stack traces, there are a few things to check. Using the API is the best way to investigate potential issues, by <a href="/docs/push-source-maps-api#publish">listing or deleting published source maps</a>.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Typical problems</strong></p>
      </div>
      <div>
        <p><strong>Troubleshooting tips</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>URL mismatch</p>
      </div>
      <div>
        <p>Each frame in the stack trace is associated with a specific JavaScript URL. That URL must match the JavaScript URL that was used when publishing the source map. Ensure that these URLs match exactly.</p>
        <p>
          <img src="./images/browser-source-map-ui-ss.png" alt="browser-source-map-ui-ss.png" title="browser-source-map-ui-ss.png">
        </p>
      </div>
    </div>
    <div>
      <div>
        <p>Release name/ID mismatch</p>
      </div>
      <div>
        <p>If the JavaScript URL is not versioned when you deploy your front end assets, a release name and release ID must be specified using the <a href="https://docs.newrelic.com/docs/browser-api-newrelicaddrelease">newrelic.addRelease API method</a>, and also when publishing your source maps. Ensure that these strings match exactly.</p>
        <p>
          <img src="./images/browser-release-id-ss.png" alt="browser release id ss.png" title="browser release id ss.png">
        </p>
      </div>
    </div>
    <div>
      <div>
        <p>409 error: <code>Combination of javascriptUrl, releaseName, and releaseId must be unique</code></p>
      </div>
      <div>
        <p>If a source map file for a particular JavaScript URL is uploaded without a release name or ID specified, New Relic treats the URL as a unique identifier.</p>
        <p>To resolve this, delete the source map that has NULL release name and ID values and re-upload all versions for that URL including those parameters. This will allow multiple versions of source maps for a particular JS URL.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Missing <code>SourcesContent</code> component</p>
      </div>
      <div>
        <p>Your mapping file must contain the <code>SourcesContent</code> component for New Relic to un-minify your stack traces. If you have uploaded your map successfully and are still not seeing un-minified code, check the original source map for this component. If you can't find it, regenerate the source map so the component is included, and upload your map to New Relic.</p>
        <p>If the <code>SourcesContent</code> component is not added, an error similar to <code>Whoops, that was the wrong file. Please try again.</code> will appear.</p>
      </div>
    </div>
  </div>
</div>
<h3>Can't generate source maps [#generate-maps]</h3>
<p>Having trouble even generating source maps? Every build system has its own instructions for generating source maps. For more specific details, please see the documentation for your particular tool. Below are source map generation instructions for two popular build systems:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZ2VuZXJhdGUtZXhhbXBsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiR2VuZXJhdGUgc291cmNlIG1hcHMgd2l0aCBVZ2xpZnlKUyJ9XQ==">
    <div data-prop-text="title">Generate source maps with UglifyJS</div>
    <p><strong>Generate source maps using UglifyJS:</strong> When "uglifying" source files, specify a source map file name and include the original source content:</p>
    <pre><code>uglifyjs [source files]   \ 
     -o bundle.min.js   \ 
     --source-map bundle.min.js.map   \ 
     --source-map-include-sources   \ 
     -c -m

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZ2VuZXJhdGUtZXhhbXBsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiR2VuZXJhdGUgc291cmNlIG1hcHMgd2l0aCB3ZWJwYWNrIn1d">
    <div data-prop-text="title">Generate source maps with webpack</div>
    <p><strong>Generate source maps using <a href="https://webpack.github.io/docs/configuration.html#devtool">Webpack</a>:</strong> In your production webpack config, simply specify <code>source-map</code> for the config.devtool property. The sourceMapFilename property of config.output is optional and defaults to <code>[name].js.map</code>.</p>
    <pre><code>devtool: 'source-map', 
output: { 
     path: path.join(__dirname, 'dist'), 
     filename: '[name].js', 
     sourceMapFilename: '[name].js.map', 
},

</code></pre>
  </div>
</div>
