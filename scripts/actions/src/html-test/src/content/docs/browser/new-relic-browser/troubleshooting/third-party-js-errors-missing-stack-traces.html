
<h2>Problem</h2>
<p>JavaScript (JS) error events are compiled on the <a href="https://docs.newrelic.com/docs/browser/new-relic-browser/browser-pro-features/javascript-errors-page-examining-errors-over-time">Browser monitoring JS errors page</a>. By default, they’re grouped by error message. When you select a single error event, you’ll see more detail in its <strong>Error Instances</strong> list. In some cases, one or more of the instances may not have a stack trace.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>Instead, you’ll see the message, "<strong>This error is likely coming from a third-party site and no stack trace is available</strong>."</p>
</div>
<h2>Solution</h2>
<p>Enabling cross-origin resource sharing (CORS) can eliminate this issue, exposing the full details of the JS error to your application and allowing the error's stack trace to be captured by the Browser agent.</p>
<p>There are many online resources that provide information on CORS enabling and settings. This MDN article has a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">detailed description of CORS</a>, with a section on <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#The_HTTP_response_headers">configuring response headers</a>, and another on <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes">CORS settings attributes</a>. The Enable CORS website has information <a href="http://enable-cors.org/server.html">how to enable CORS for various platforms</a>.<br><strong>New Relic is not responsible for the accuracy of third-party websites.</strong></p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJjYXV0aW9uIn1d">
  <p>This document is intended only as a general introduction to using CORS. Due to possible security concerns, we recommend research before implementing any changes that impact the security of your application or resources. The optimal CORS implementation will depend on the systems you are using and your security considerations.</p>
</div>
<p>Here are general instructions on how to implement CORS:</p>
<ol>
  <li>
    <p>Add the <code>Access-Control-Allow-Origin</code> code to the response headers of any third-party assets that provide JavaScript to your app:</p>
    <pre><code>Access-Control-Allow-Origin: YOUR_DOMAIN
</code></pre>
    <p>Setting a domain, or multiple domains, will give those specific domains access to error trace details and other available resources. This MDN article may contain useful information on <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#The_HTTP_response_headers">configuring response headers</a>, such as adding multiple domains or using a wildcard in lieu of a domain.</p>
  </li>
  <li>
    <p>In your application, have the browser load JavaScript files using the CORS <code>crossorigin</code> attribute:</p>
    <pre><code>&#x3C;script src="EXTERNAL_LOCATION/script.js" crossorigin> &#x3C;/script>
</code></pre>
    <p>This MDN article may contain useful information on <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes">CORS settings attributes</a>.</p>
  </li>
</ol>
<h2>Cause</h2>
<p>The most common cause of the missing stack trace problem is the same-origin policy. This is a security policy that prevents one web resource from accessing data from another resource unless they both have the same origin. In this context, <strong>origin</strong> is the combination of the URI scheme, the hostname, and the port number. The policy prevents malicious code from gaining access to other web resources.</p>
<p>The same-origin policy is important for internet security, but it can make it more difficult for web resources to work together. Specifically, issues can arise if you have JS scripts hosted on Content Delivery Networks (CDNs) or other external locations. New Relic is able to see the errors coming from those scripts but is unable to access their data.</p>
