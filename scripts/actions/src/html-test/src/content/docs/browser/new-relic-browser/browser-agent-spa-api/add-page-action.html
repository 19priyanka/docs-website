
<h2>Syntax</h2>
<pre><code>newrelic.addPageAction(string $name[, JSON object $attributes])
</code></pre>
<p>Reports a Browser PageAction event to New Relic One along with a name and optional attributes.</p>
<h2>Requirements</h2>
<p>Agent version <a href="https://docs.newrelic.com/docs/release-notes/new-relic-browser-release-notes/browser-agent-release-notes">nr-593</a> or higher.</p>
<h2>Description</h2>
<p>This API call sends a Browser <a href="/docs/insights/explore-data/custom-events/insert-browser-custom-events-attributes-insights-javascript-api"><code>PageAction</code> event</a> with your user-defined name and optional attributes to <a href="/docs/query-your-data/explore-query-data/dashboards/introduction-new-relic-one-dashboards">dashboards</a>, along with <a href="/docs/insights/explore-data/attributes/browser-default-attributes-insights">several default attributes</a>. This is useful to track any event that is not already tracked automatically by the Browser agent, such as clicking a <strong>Subscribe</strong> button or accessing a tutorial.</p>
<ul>
  <li>PageAction events are sent to New Relic One every 30 seconds, with a maximum of 60 events per 30-second harvest cycle, per browser.</li>
  <li>After the 60-event limit is reached, additional events are not captured for that harvest cycle.</li>
</ul>
<h2>Parameters</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>$name</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Required. Name or category of the action. Reports to New Relic One as the <code>actionName</code> attribute.</p>
        <p>Avoid using <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-reserved-words">reserved NRQL words</a> when you name the attribute or value.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$attributes</code></p>
        <p><em>JSON object</em></p>
      </div>
      <div>
        <p>Optional. JSON object with one or more key/value pairs. For example: <code>{key:"value"}</code>. The key will report to New Relic One as its own PageAction attribute with the specified values.</p>
        <p>Avoid using <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-reserved-words">reserved NRQL words</a> when you name the attribute/value.</p>
      </div>
    </div>
  </div>
</div>
<h2>Examples</h2>
<h3>Record link clicks (JavaScript) [#example-link-click-js]</h3>
<div>
  <p>This example records a PageAction event whenever a user selects the <strong>Try Me</strong> link. The event is recorded with an <code>actionName</code> of <code>clickedTryMe</code>:</p>
  <pre><code>&#x3C;a href="/demo" id="try-me">Try Me!&#x3C;/a>
&#x3C;script>
    document.getElementById('try-me').addEventListener('click',function (e) {
        newrelic.addPageAction('clickedTryMe');
    })
&#x3C;/script>
</code></pre>
  <p>You can then query the number of times the <strong>Try Me</strong> button was clicked with the following NRQL query:</p>
  <pre><code>SELECT count(*) FROM PageAction WHERE actionName='clickedTryMe' SINCE 1 hour ago
</code></pre>
  <h3>Record link clicks (jQuery) [#example-link-click-jquery]</h3>
</div>
<div>
  <p>This example sends a PageAction event when a user clicks on an element with the class <code>copy-text</code>. The <code>actionName</code> is <code>copy-text-button</code> and the value is reported as another attribute called <code>Result</code> that corresponds to methods named <code>success</code> and <code>error</code> that handle the outcome.</p>
  <pre><code>$('.copy-text').click(function (){
    var clipboard = new Clipboard ('.copy-text');
    clipboard.on('success', function(event) {
      // Do stuff
      // Report data to New Relic One
      if (typeof newrelic == 'object') {
        newrelic.addPageAction('copy-text-button', {result: 'success'});
      }
    });
    clipboard.on('error', function(event) {
      // Do stuff
      // Report data to New Relic One
      if (typeof newrelic == 'object') {
        newrelic.addPageAction('copy-text-button', {result: 'error'});
      }
    });
});
</code></pre>
  <p>Then in the query builder, you can create a pie chart to see the breakdown of how many button clicks resulted in success versus error over the past 30 days:</p>
  <pre><code>SELECT count(*) AS 'Clicks' FROM PageAction WHERE actionName = 'copy-text-button' FACET result SINCE 30 days ago
</code></pre>
  <p>Or you can create a query to see what pages have the most copy button clicks in the last 30 days:</p>
  <pre><code>SELECT count(*) AS 'Clicks' FROM PageAction WHERE actionName = 'copy-text-button' FACET currentUrl SINCE 30 days ago
</code></pre>
  <h3>Capture form input [#example-form-input]</h3>
</div>
<div>
  <p>This example captures user input (email addresses) from a form called <strong>Signup</strong>. The event is recorded with an <code>actionName</code> of <code>userSignup</code>:</p>
  <pre><code>&#x3C;form action="/signup" id="myform">
   &#x3C;input id="email" name="email">
   &#x3C;input type="submit" value="Signup">
&#x3C;/form>
&#x3C;script type="text/javascript">
    document.getElementById('myform').addEventListener('submit', function (e) {
        var email = e.target.elements['email'].value;
        newrelic.addPageAction('userSignup', {email: email});
    })
&#x3C;/script>
</code></pre>
  <p>You can then see the emails that you gathered with the following NRQL query:</p>
  <pre><code>SELECT uniques(email) FROM PageAction WHERE actionName='userSignup' SINCE 1 hour ago
</code></pre>
</div>
