
<p><a href="https://docs.newrelic.com/docs/integrations/new-relic-integrations/getting-started/introduction-infrastructure-integrations">New Relic infrastructure integrations</a> include an integration for reporting your AWS Lambda data to New Relic. This document explains how to activate this integration and describes the data that can be reported.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>New Relic also offers a more in-depth Lambda monitoring feature. For more information, see <a href="/docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/introduction-new-relic-monitoring-aws-lambda">New Relic Serverless monitoring for AWS Lambda</a>.</p>
</div>
<h2>Features</h2>
<p><a href="https://aws.amazon.com/lambda/">AWS Lambda</a> is a zero-administration compute platform for back-end web developers. It runs your code for you in the AWS cloud and provides you with a fine-grained pricing structure.</p>
<p>Lambda functions are pieces of custom code that run when a certain event happens. In order to identify the events that invoke a particular Lambda function, AWS Lambda users define event source mappings. Optionally, aliases can be used to point to a specific version of a Lambda function.</p>
<p>New Relic's AWS Lambda integration reports data such as invocation counts, error counts, function timers, and other <a href="#metrics">metrics</a> and <a href="#inventory">inventory data</a>. You can view your Lambda data in pre-built dashboards and also create custom queries and charts in <a href="/docs/infrastructure/integrations-getting-started/getting-started/use-integration-data-new-relic-insights">New Relic One</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>New Relic offers a <a href="/docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/introduction-new-relic-monitoring-aws-lambda">Lambda monitoring feature that's more in-depth than this integration</a>.</p>
</div>
<h2>Activate integration [#activate]</h2>
<p>To enable this integration follow standard procedures to <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure">Connect AWS services to New Relic</a>.</p>
<h2>Configuration and polling [#polling]</h2>
<p>You can change the polling frequency and filter data using <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p>Default <a href="/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations">polling</a> information for the AWS Lambda integration:</p>
<ul>
  <li>New Relic polling interval: 5 minutes</li>
  <li>Amazon CloudWatch data interval: 1 minute</li>
</ul>
<h2>Find and use data [#find-data]</h2>
<p>To find your integration data, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > AWS</strong> and select one of the Lambda integration links.</p>
<p>You can <a href="https://docs.newrelic.com/docs/using-new-relic/data/understand-data/query-new-relic-data">query and explore your data</a> using the <code>ServerlessSample</code> <a href="https://docs.newrelic.com/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>, with <code>provider</code> values of <code>LambdaRegion</code> , <code>LambdaFunction</code> and <code>LambdaFunctionAlias</code>.</p>
<p>For more on how to use your data, see <a href="https://docs.newrelic.com/docs/infrastructure/integrations/find-use-infrastructure-integration-data">Understand and use integration data</a>.</p>
<h2>Metric data [#metrics]</h2>
<p>This integration collects the following metrics. For more on these metrics, see <a href="http://docs.aws.amazon.com/lambda/latest/dg/monitoring-functions-metrics.html">Amazon's Lambda documentation</a>.</p>
<h3>Function and Alias</h3>
<p>Lambda function and Alias data is attached to the <code>ServerlessSample</code> <a href="https://docs.newrelic.com/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>, with a <code>provider</code> value of <code>LambdaFunction</code> and <code>LambdaFunctionAlias</code>, respectively.</p>
<p>Additionally, if you're using <a href="https://docs.newrelic.com/docs/integrations/amazon-integrations/aws-integrations-list/aws-cloudfront-monitoring-integration">AWS CloudFront</a> to execute the functions in AWS locations closer to the clients, and have enabled the filter to collect <a href="mailto:Lambda@Edge">Lambda@Edge</a> metrics, these data will be attached to the <code>ServerlessSample</code> event type, with a provider value of <code>LambdaEdgeFunction</code>.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>concurrentExecutions</code></p>
      </div>
      <div>
        <p>Only available for functions that have a custom concurrency limit specified. Not applicable for versions or aliases. Measures the sum of concurrent executions for a given function at a given point in time. Must be viewed as an average metric if aggregated across a time period.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>deadLetterErrors</code></p>
      </div>
      <div>
        <p>Measures the number of times that a function is unable to write the failed event payload to your configured Dead Letter Queues. This could be due to one of the following:</p>
        <ul>
          <li>Permissions errors</li>
          <li>Throttles from downstream services</li>
          <li>Misconfigured resources</li>
          <li>Timeouts</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p><code>duration</code></p>
      </div>
      <div>
        <p>Measures the elapsed wall clock time in milliseconds from when the function code starts executing as a result of an invocation to when it stops executing. (This metric replaces the deprecated Latency metric.) The maximum data point value possible is the function timeout configuration. The billed duration will be rounded up to the nearest 100 milliseconds. Note that AWS Lambda only sends these metrics to CloudWatch if they have a nonzero value.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>edge-region</code></p>
      </div>
      <div>
        <p>The AWS region where the function is executed. Only for functions that are run by <a href="mailto:Lambda@Edge">Lambda@Edge</a> service.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>errors</code></p>
      </div>
      <div>
        <p>Measures the number of invocations that failed due to errors in the function (response code 4XX). This replaces the deprecated ErrorCount metric. Failed invocations may trigger a retry attempt that succeeds. This includes:</p>
        <ul>
          <li>
            <p>Handled exceptions (for example, context.fail(error))</p>
          </li>
          <li>
            <p>Unhandled exceptions causing the code to exit</p>
          </li>
          <li>
            <p>Out of memory exceptions</p>
          </li>
          <li>
            <p>Timeouts</p>
          </li>
          <li>
            <p>Permissions errors</p>
            <p>This does not include invocations that fail due to invocation rates exceeding default concurrent limits (error code 429) or failures due to internal service errors (error code 500).</p>
          </li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p><code>invocations</code></p>
      </div>
      <div>
        <p>Measures the number of times a function is invoked in response to an event or invocation API call. This replaces the deprecated RequestCount metric. This includes successful and failed invocations, but does not include throttled attempts. This equals the billed requests for the function. Note that AWS Lambda only sends these metrics to CloudWatch if they have a nonzero value.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>iteratorAge</code></p>
      </div>
      <div>
        <p>Only available for stream-based invocations (functions triggered by an Amazon DynamoDB stream or Kinesis stream). Measures the age of the last record in milliseconds for each batch of records processed. Age is the difference between the time Lambda received the batch, and the time the last record in the batch was written to the stream.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>throttles</code></p>
      </div>
      <div>
        <p>Measures the number of Lambda function invocation attempts that were throttled due to invocation rates exceeding the customerâ€™s concurrent limits (error code 429). Failed invocations may trigger a retry attempt that succeeds.</p>
      </div>
    </div>
  </div>
</div>
<h3>Region</h3>
<p>Lambda region data is attached to the <code>ServerlessSample</code> <a href="https://docs.newrelic.com/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>, with a <code>provider</code> value of <code>LambdaRegion</code>.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>concurrentExecutions</code></p>
      </div>
      <div>
        <p>Emitted as an aggregate metric for all functions in the account. Measures the sum of concurrent executions for a given function at a given point in time. Must be viewed as an average metric if aggregated across a time period.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>unreservedConcurrentExecutions</code></p>
      </div>
      <div>
        <p>Emitted as an aggregate metric for all functions in the account only. Represents the sum of the concurrency of the functions that do not have a custom concurrency limit specified. Must be viewed as an average metric if aggregated across a time period.</p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p>This integration supports the following inventory data. For more about inventory data, see <a href="https://docs.newrelic.com/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">Understand integration data</a>.</p>
<h3>aws/lambda/function/</h3>
<p>This entity describes Lambda function inventory data. For full documentation on the possible values, see <a href="http://docs.aws.amazon.com/lambda/latest/dg/API_FunctionConfiguration.html">Amazon's documentation for FunctionConfiguration</a>.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>codeSha256</code></p>
      </div>
      <div>
        <p>SHA256 hash of the function deployment package.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>codeSize</code></p>
      </div>
      <div>
        <p>The size, in bytes, of the function .zip file that was uploaded.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>deadLetterArn</code></p>
      </div>
      <div>
        <p>The ARN of an Amazon SQS queue or Amazon SNS topic that has been specified as the Dead Letter Queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>description</code></p>
      </div>
      <div>
        <p>The function description provided by the user.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>functionArn</code></p>
      </div>
      <div>
        <p>The ARN assigned to the function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>functionName</code></p>
      </div>
      <div>
        <p>The name of the function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>handler</code></p>
      </div>
      <div>
        <p>The function Lambda calls to begin executing the function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>kmsKeyArn</code></p>
      </div>
      <div>
        <p>The KMS key used to encrypt the function's environment variables. Only returned if you've configured a customer managed CMK.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>lastModified</code></p>
      </div>
      <div>
        <p>The time stamp of the last time the function was updated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>layers</code></p>
      </div>
      <div>
        <p>The list of ARN of the function layers.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>masterArn</code></p>
      </div>
      <div>
        <p>For <a href="mailto:Lambda@Edge">Lambda@Edge</a> functions, the ARN of the master function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memorySize</code></p>
      </div>
      <div>
        <p>The memory size, in MB, that was configured for the function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>revisionId</code></p>
      </div>
      <div>
        <p>Represents the latest updated revision of the function or alias.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>role</code></p>
      </div>
      <div>
        <p>The ARN of the IAM role that Lambda assumes when it executes the function to access any other AWS resources.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>runtime</code></p>
      </div>
      <div>
        <p>The runtime environment for the Lambda function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>timeout</code></p>
      </div>
      <div>
        <p>The function execution time at which Lambda should terminate the function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>tracingMode</code></p>
      </div>
      <div>
        <p>The tracing mode associated with the Lambda function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>version</code></p>
      </div>
      <div>
        <p>The version of the Lambda function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>vpcId</code></p>
      </div>
      <div>
        <p>The VPC ID associated with the Lambda function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>vpcSecurityGroupsIds</code></p>
      </div>
      <div>
        <p>A list of security group IDs associated with the Lambda function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>vpcSubnetIds</code></p>
      </div>
      <div>
        <p>A list of subnet IDs associated with the Lambda function.</p>
      </div>
    </div>
  </div>
</div>
<h3>aws/lambda/alias/</h3>
<p>This entity describes Alias inventory data.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>aliasArn</code></p>
      </div>
      <div>
        <p>Lambda function ARN that is qualified using the alias name as the suffix.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>aliasName</code></p>
      </div>
      <div>
        <p>Alias name.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>description</code></p>
      </div>
      <div>
        <p>Alias description.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>functionName</code></p>
      </div>
      <div>
        <p>Function name to which the alias points.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>functionVersion</code></p>
      </div>
      <div>
        <p>Function version to which the alias points.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>revisionId</code></p>
      </div>
      <div>
        <p>A unique identifier that changes when you update the alias.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>routingConfig</code></p>
      </div>
      <div>
        <p>The routing configuration of the alias.</p>
      </div>
    </div>
  </div>
</div>
<h3>aws/lambda/region/</h3>
<p>This entity describes Lambda region inventory data.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>concurrentExecutions</code></p>
      </div>
      <div>
        <p>Number of simultaneous executions of a function per region.</p>
      </div>
    </div>
  </div>
</div>
<h3>aws/lambda/event-source-mapping/</h3>
<p>This entity describes the mapping between an event source (such as a Kinesis stream, an SQS queue, or a DynamoDB stream) and an AWS Lambda function. For full documentation on the possible values, see <a href="http://docs.aws.amazon.com/lambda/latest/dg/API_EventSourceMappingConfiguration.html">Amazon's documentation for EventSourceMappingConfiguration</a>.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>batchSize</code></p>
      </div>
      <div>
        <p>The largest number of records that AWS Lambda will retrieve from an event source at the time of invoking the function.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>eventSourceArn</code></p>
      </div>
      <div>
        <p>The ARN of the Amazon Kinesis stream that is the source of events.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>functionArn</code></p>
      </div>
      <div>
        <p>The Lambda function to invoke when AWS Lambda detects an event on the stream.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>lastModified</code></p>
      </div>
      <div>
        <p>The UTC time string indicating the last time the event mapping was updated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>state</code></p>
      </div>
      <div>
        <p>The state of the event source mapping.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>stateTransitionReason</code></p>
      </div>
      <div>
        <p>The cause of the last state change, either <code>User initiated</code> or <code>Lambda initiated</code> .</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>uuid</code></p>
      </div>
      <div>
        <p>The AWS Lambda assigned opaque identifier for the mapping.</p>
      </div>
    </div>
  </div>
</div>
