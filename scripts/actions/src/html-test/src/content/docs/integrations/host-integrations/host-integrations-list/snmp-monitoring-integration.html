
<p>Our SNMP <a href="https://docs.newrelic.com/docs/integrations/host-integrations/getting-started/introduction-host-integrations">integration</a> monitors any application that exposes metrics with SNMP.</p>
<p>Read on to install the integration, and to configure a YAML file to start collecting metrics. This doc also contains sample YAML files to help you get started.</p>
<h2>Compatibility and requirements [#comp-req]</h2>
<p>Our integration is compatible with SNMP version 2 or 3.</p>
<p>Before installing the integration, make sure that you meet the following requirements:</p>
<ul>
  <li>SNMP monitoring enabled device or application.</li>
  <li>If SNMP is <strong>not</strong> running on Kubernetes or Amazon ECS, you must <a href="/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent-new-relic">install the infrastructure agent</a> on a Linux OS host that's running SNMP. Otherwise:
    <ul>
      <li>If running on Kubernetes, see <a href="https://docs.newrelic.com/docs/monitor-service-running-kubernetes#requirements">these requirements</a>.</li>
      <li>If running on ECS, see <a href="/docs/integrations/host-integrations/host-integrations-list/monitor-services-running-amazon-ecs">these requirements</a>.</li>
    </ul>
  </li>
</ul>
<h2>Install and activate [#install]</h2>
<p>To install the SNMP integration, follow the instructions for your environment:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWNzLWluc3RhbGwifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkVDUyJ9XQ==">
    <div data-prop-text="title">ECS</div>
    <p>See <a href="/docs/integrations/host-integrations/host-integrations-list/monitor-services-running-amazon-ecs">Monitor service running on ECS</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiazhzLWluc3RhbGwifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Ikt1YmVybmV0ZXMifV0=">
    <div data-prop-text="title">Kubernetes</div>
    <p>See <a href="/docs/monitor-service-running-kubernetes">Monitor service running on Kubernetes</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGludXgtaW5zdGFsbCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTGludXgifV0=">
    <div data-prop-text="title">Linux</div>
    <ol>
      <li>
        <p>Follow the instructions for <a href="/docs/install-integrations-package">installing an integration</a>, using the file name <code>nri-snmp</code>.</p>
      </li>
      <li>
        <p>Change directory to the integrations folder:</p>
        <pre><code>cd /etc/newrelic-infra/integrations.d
</code></pre>
      </li>
      <li>
        <p>Copy the sample configuration file:</p>
        <pre><code>sudo cp snmp-config.yml.sample snmp-config.yml
</code></pre>
      </li>
      <li>
        <p>Edit the <code>snmp-config.yml</code> file as described in the <a href="#config">configuration settings</a>.</p>
      </li>
      <li>
        <p><a href="https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status">Restart the infrastructure agent</a>.</p>
      </li>
    </ol>
  </div>
</div>
<p>Additional notes:</p>
<ul>
  <li><strong>Advanced:</strong> Integrations are also available in <a href="/docs/integrations/host-integrations/installation/install-host-integrations-built-new-relic#tarball">tarball format</a> to allow for install outside of a package manager.</li>
  <li><strong>On-host integrations do not automatically update.</strong> For best results, regularly <a href="/docs/integrations/host-integrations/installation/update-infrastructure-host-integration-package">update the integration package</a> and <a href="/docs/infrastructure/new-relic-infrastructure/installation/update-infrastructure-agent">the infrastructure agent</a>.</li>
</ul>
<h2>Configure the integration [#config]</h2>
<p>An integration's YAML-format configuration is where you can place required login credentials and configure how data is collected. Which options you change depend on your setup and preference.</p>
<p>There are several ways to configure the integration, depending on how it was installed:</p>
<ul>
  <li>If enabled via Kubernetes: see <a href="/docs/monitor-service-running-kubernetes">Monitor services running on Kubernetes</a>.</li>
  <li>If enabled via Amazon ECS: see <a href="/docs/integrations/host-integrations/host-integrations-list/monitor-services-running-amazon-ecs">Monitor services running on ECS</a>.</li>
  <li>If installed on-host: edit the config in the integration's YAML config files.</li>
</ul>
<p>For an example configuration, see the <a href="#host-connection-example">host connection file example</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>With secrets management, you can configure on-host integrations with New Relic infrastructure's agent to use sensitive data (such as passwords) without having to write them as plain text into the integration's configuration file. For more information, see <a href="https://docs.newrelic.com/docs/integrations/host-integrations/installation/secrets-management">Secrets management</a>.</p>
</div>
<h3>Integration configuration [#host-connection]</h3>
<p>The configuration accepts the following arguments.</p>
<ul>
  <li><code>snmp_host</code>: The host SNMP is running on. Default: <code>localhost</code>. This field is required.</li>
  <li><code>snmp_port</code>: The port SNMP is running on. Default: <code>161</code>. This field is required.</li>
  <li><code>v2</code>: Use SNMP version 2 Default: <code>true</code>.</li>
  <li><code>v3</code>: Use SNMP version 3. Default: <code>false</code>.</li>
  <li><code>community</code>: The SNMP v2 community string. Default: <code>public</code>. This field is applicable only for SNMP v2.</li>
  <li><code>username</code>: The security name that identifies an SNMP v3 user. This field is applicable only for SNMP v3.</li>
  <li><code>security_level</code>: The security level. Valid values are noAuthnoPriv,. authNoPriv or authPriv. This field is applicable only for SNMP v3.</li>
  <li><code>auth_protocol</code>: The authentication protocol. It can be either <code>MD5</code> or <code>SHA</code>. Default: <code>MD5</code>. This field is applicable only for SNMP v3.</li>
  <li><code>auth_passphrase</code>: The password used to generate the key used for authentication. This field is applicable only for SNMP v3.</li>
  <li><code>priv_protocol</code>: The encryption protocol. It can be <code>AES</code> or <code>DES</code>. Default: <code>AES</code>. This field is applicable only for SNMP v3.</li>
  <li><code>priv_passphrase</code>: The password used to generate the key used to encrypt messages. This field is applicable only for SNMP v3.</li>
  <li><code>collection_files</code>: Comma-separated list of full file paths to the metric collection definition files. Default: <code>/etc/newrelic-infra/integrations.d/snmp-metrics.yml</code>.</li>
</ul>
<h3>Metric collection files [#metrics-collection]</h3>
<p>The metrics collection definition files are structured YAML files which tell the integration what metrics to collect. For an example configuration, see the <a href="https://docs.newrelic.com/docs/integrations/host-integrations/host-integrations-list/snmp-monitoring-integration#collection-example">metrics collection file example</a>.</p>
<p>Sample metrics collection file: <code>/etc/newrelic-infra/integrations.d/snmp-metrics.yml.sample</code></p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>You can write different collection files to ease organization and maintenance. See <a href="#collection-example">configuration file</a> below for an example.</p>
</div>
<h3>Devices [#domains]</h3>
<p>A collection file collects and organizes metrics. Each file contains a single <code>collect:</code> block which contains one or more devices. For each device, the following keys are defined:</p>
<ul>
  <li><code>device</code>: The name of the SNMP device from which metrics are being collected. This field is required.</li>
  <li><code>metrics_sets</code>: A list of metric sets that organize metrics to collect from this device. See <a href="https://docs.newrelic.com/docs/integrations/host-integrations/host-integrations-list/snmp-monitoring-integration#metric_sets">Metric Sets</a>.</li>
  <li><code>inventory</code>: A list of Object Identifiers (OIDs) to collect from this device and report as inventory. See <a href="https://docs.newrelic.com/docs/integrations/host-integrations/host-integrations-list/snmp-monitoring-integration#inventory">Inventory</a>.</li>
</ul>
<h3>Metric Sets [#metric_sets]</h3>
<p>Metrics Set represents a logical grouping of SNMP Object Identifiers (OIDs) to get from the SNMP device and report to New Relic. For each metric set, the following keys are defined:</p>
<ul>
  <li>
    <p><code>name</code>: The metric set name.</p>
  </li>
  <li>
    <p><code>event_type</code>: The <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#events-new-relic">event type</a> name for a collection from this metric set.</p>
    <p>For tips on naming event types, see <a href="#data-naming">Naming tips</a>.</p>
  </li>
  <li>
    <p><code>type</code>: The metric set type. Use <code>scalar</code> to describe a metric set of SNMP scalar OIDs or <code>table</code> to describe a metric set that corresponds to the metrics from an SNMP table.</p>
  </li>
  <li>
    <p><code>root_oid</code>: If <code>type</code> is a <code>table</code>, enter the root OID of the table. The integration performs an SNMP walk from this OID to get the table metrics.</p>
  </li>
  <li>
    <p><code>index</code>: If <code>type</code> is a <code>table</code>, enter one or more table column index OIDs that define the table's row uniquely. For each index OID, the following keys are defined:</p>
    <ul>
      <li><code>oid</code>: The OID name to collect, e.g., <code>.1.3.6.1.4.1.52032.1.2.1.1.1</code>. This field is required.</li>
      <li><code>name</code>: The name under which the metric will appear in New Relic. If unspecified, it will default to the OID name.</li>
    </ul>
  </li>
  <li>
    <p><code>metrics</code>: List of SNMP OIDs to be collected as part of this metric set. Enter a list of <code>scalar OIDs</code> or <code>table column OIDs</code> as appropriate for the <code>type</code>.</p>
    <ul>
      <li><code>oid</code>: The OID name to collect, e.g., <code>1.3.6.1.4.1.52032.1.1.2.0​</code>. This field is required.</li>
      <li><code>metric_name</code>: The name under which the metric will appear in New Relic. If unspecified, it will default to the OID name.</li>
      <li><code>metric_type</code>: The New Relic metric type to collect this attribute as. Options are <code>gauge</code>, <code>delta</code>, <code>pdelta</code>, <code>rate</code>, <code>prate</code> or <code>attribute</code>. If unspecified, the integration attempts to infer the metric type .</li>
    </ul>
  </li>
</ul>
<h3>Inventory</h3>
<p>Inventory is an array of SNMP Object Identifiers (OIDs) to be collected and reported as inventory items. For each OID, the following keys are defined:</p>
<ul>
  <li><code>oid</code>: The OID name to collect, e.g., <code>1.3.6.1.4.1.52032.1.1.4.0</code>. This field is required.</li>
  <li><code>category</code>: The category name under which the inventory item will appear in New Relic. This field is required.</li>
  <li><code>name</code>: The name under which the inventory item will appear in New Relic. This field is required.</li>
</ul>
<h3>Example configuration [#example-config]</h3>
<p>Example configuration files:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaG9zdC1jb25uZWN0aW9uLWV4YW1wbGUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkV4YW1wbGUgaG9zdCBjb25uZWN0aW9uIGZpbGUifV0=">
    <div data-prop-text="title">Example host connection file</div>
    <pre><code>integration_name: com.newrelic.snmp

	instances:
	  - name: snmp
	    command: all_data
	    arguments:
	      snmp_host: localhost
	      snmp_port: 161
              v2: true
	      community: public
	      collection_files: "/etc/newrelic-infra/integrations.d/snmp-metrics.yml"

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY29sbGVjdGlvbi1leGFtcGxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJFeGFtcGxlIG1ldHJpY3MgY29sbGVjdGlvbiBmaWxlIn1d">
    <div data-prop-text="title">Example metrics collection file</div>
    <pre><code>collect:
  # Sample dataset for New Relic SNMP test application
- device: NR-SNMP-MIB
  metric_sets:
  - name: ScalarSet
    type: scalar
    event_type: SNMPSample
    metrics:
    - metric_name: counterSample
      oid: .1.3.6.1.4.1.52032.1.1.1
      metric_type: auto
    - metric_name: rateSample
      oid: .1.3.6.1.4.1.52032.1.1.2
      metric_type: auto
    - metric_name: displayStringSample
      oid: .1.3.6.1.4.1.52032.1.1.3
      metric_type: auto
  - name: CityWeatherTable
    type: table
    event_type: SNMPSample
    root_oid: .1.3.6.1.4.1.52032.1.2.1
    index:
    - metric_name: cityName
      oid: .1.3.6.1.4.1.52032.1.2.1.1.1
      metric_type: auto
    metrics:
    - metric_name: temperature
      oid: .1.3.6.1.4.1.52032.1.2.1.1.2
      metric_type: gauge
    - metric_name: humidity
      oid: .1.3.6.1.4.1.52032.1.2.1.1.3
      metric_type: gauge
    - metric_name: wind
      oid: .1.3.6.1.4.1.52032.1.2.1.1.4
      metric_type: gauge
    - metric_name: windDirection
      oid: .1.3.6.1.4.1.52032.1.2.1.1.5
      metric_type: gauge
  inventory:
    - oid: .1.3.6.1.4.1.52032.1.1.4.0
      category: version
      name: buildNumber

</code></pre>
  </div>
</div>
<p>For more about the general structure of on-host integration configuration, see <a href="/docs/integrations/integrations-sdk/file-specifications/host-integration-configuration-overview">Configuration</a>.</p>
<h2>Tips for naming your data [#data-naming]</h2>
<p>Metrics are sent and stored in the form of samples. This is a list of key-value pairs that include metric data and metadata. Each sample is stored as an <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#events-new-relic">event</a> in New Relic’s event database.</p>
<p>You are responsible for creating and naming the SNMP data reported to New Relic. For this reason, New Relic strongly recommends following these conventions when naming your event types. To ensure you have a consistent naming scheme:</p>
<ul>
  <li>Use camel case.</li>
  <li>Use a name that clearly identifies what data it contains.</li>
</ul>
<p>Example: <code>MyorgApplicationSample</code></p>
<p><strong>Recommendation:</strong> Use the same naming scheme for similar metrics across different applications.</p>
<h2>Find and use data [#find-and-use]</h2>
<p>Data from this service is not reported to an integration dashboard because the samples gathered are generally unique to the device being monitored. You will need to <a href="https://docs.newrelic.com/docs/insights/use-insights-ui/manage-dashboards/create-edit-insights-dashboards">build your own dashboard</a>.</p>
<p>SNMP metrics are attached to the user defined <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#events-new-relic">event type</a> specified in the <a href="#metrics-collection">configuration file</a>. You can <a href="/docs/using-new-relic/data/understand-data/query-new-relic-data">query this data</a> for troubleshooting purposes or to create custom charts and dashboards.</p>
<p>For more on how to find and use your data, see <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">Understand integration data</a>.</p>
<h2>Metric data [#metrics]</h2>
<p>The metrics generated by the integration include metadata associated with the collection they are collecting from. This metadata should be used in <a href="/docs/insights/nrql-new-relic-query-language/using-nrql/introduction-nrql">NRQL queries</a> to filter and facet the data so that the query returns only the data for the desired metric set.</p>
<p>Each event contains the following metadata:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>device</code></p>
      </div>
      <div>
        <p>The device name for these metrics.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>host</code></p>
      </div>
      <div>
        <p>The SNMP host the metrics are being collected from.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>port</code></p>
      </div>
      <div>
        <p>The SNMP port the metrics are being collected from.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>displayName</code></p>
      </div>
      <div>
        <p>The metric set name for these metrics.</p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p>The SNMP integration captures the configuration parameters of the SNMP integration. The data is available on the Infrastructure <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure">Inventory page</a>, under the <strong>config/snmp</strong> source. For more about inventory data, see <a href="/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">Understand integration data</a>.</p>
<h2>Troubleshooting [#troubleshoot]</h2>
<p>Troubleshooting tips:</p>
<div data-component="CollapserGroup" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHJvdWJsZXNob290aW5nLWxpc3QifV0=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaW50ZWdyYXRpb24tZXJyb3JzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJTZWFyY2ggbG9ncyBmb3IgZXJyb3JzIn1d">
    <div data-prop-text="title">Search logs for errors</div>
    <p>If you are having trouble with the integration, first <a href="/docs/infrastructure/new-relic-infrastructure/troubleshooting/generate-logs-troubleshooting-infrastructure">enable and search the logs</a> for errors.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWV0cmljcy1saW1pdCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTWV0cmljcyBsaW1pdCBleGNlZWRlZCJ9XQ==">
    <div data-prop-text="title">Metrics limit exceeded</div>
    <p>If you suspect there is a domain sending more than 200 metrics, you can check the <a href="/docs/infrastructure/new-relic-infrastructure/troubleshooting/generate-logs-troubleshooting-infrastructure">log file</a> for this message:</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>"Metric Set x has n metrics, the current limit is 200. This metric set will not be reported."</p>
    </div>
    <p>If you see this error message, lower the number of metrics being sent for the reported metric set.</p>
  </div>
</div>
<h2>Check the source code [#source-code]</h2>
<p>This integration is open source software. That means you can <a href="https://github.com/newrelic/nri-snmp" title="Link opens in a new window.">browse its source code</a> and send improvements, or create your own fork and build it.</p>
