
<p>Our Couchbase <a href="https://docs.newrelic.com/docs/integrations/host-integrations/getting-started/introduction-host-integrations">integration</a> collects and sends inventory and metric data from your Couchbase cluster to the New Relic platform, where you can quickly see the health of your Couchbase environment. We collect data at the cluster, node, query engine, and bucket level so you can trace a problem to its source.</p>
<p>Read on to install the integration, and to see what data we collect.</p>
<h2>Compatibility and requirements [#req]</h2>
<p>Our integration is compatible with Couchbase version 4.0 or higher.</p>
<p>Before installing the integration, make sure that you meet the following requirements:</p>
<ul>
  <li>If Couchbase is <strong>not</strong> running on Kubernetes, you must <a href="/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent-new-relic">install the infrastructure agent</a> on a host that's running Couchbase. Otherwise:
    <ul>
      <li>If running on Kubernetes, see <a href="https://docs.newrelic.com/docs/monitor-service-running-kubernetes#requirements">these requirements</a>.</li>
      <li>If running on ECS, see <a href="/docs/integrations/host-integrations/host-integrations-list/monitor-services-running-amazon-ecs">these requirements</a>.</li>
    </ul>
  </li>
</ul>
<h2>Install and activate [#install]</h2>
<p>To install the Couchbase integration, follow the instructions for your environment:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWNzLWluc3RhbGwifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkVDUyJ9XQ==">
    <div data-prop-text="title">ECS</div>
    <p>See <a href="/docs/integrations/host-integrations/host-integrations-list/monitor-services-running-amazon-ecs">Monitor service running on ECS</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiazhzLWluc3RhbGwifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Ikt1YmVybmV0ZXMifV0=">
    <div data-prop-text="title">Kubernetes</div>
    <p>See <a href="/docs/monitor-service-running-kubernetes">Monitor service running on Kubernetes</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGludXgtaW5zdGFsbCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTGludXgifV0=">
    <div data-prop-text="title">Linux</div>
    <ol>
      <li>
        <p>Follow the instructions for <a href="/docs/install-integrations-package">installing an integration</a>, using the file name <code>nri-couchbase</code>.</p>
      </li>
      <li>
        <p>Change directory to the integrations folder:</p>
        <pre><code>cd /etc/newrelic-infra/integrations.d
</code></pre>
      </li>
      <li>
        <p>Copy of the sample configuration file:</p>
        <pre><code>sudo cp couchbase-config.yml.sample couchbase-config.yml
</code></pre>
      </li>
      <li>
        <p>Edit the <code>couchbase-config.yml</code> file as described in the <a href="#config">configuration settings</a>.</p>
      </li>
      <li>
        <p><a href="https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status">Restart the infrastructure agent</a>.</p>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoid2luZG93cy1pbnN0YWxsIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJXaW5kb3dzIn1d">
    <div data-prop-text="title">Windows</div>
    <ol>
      <li>
        <p>Download the <code>nri-couchbase</code> .MSI installer image from:</p>
        <p><a href="http://download.newrelic.com/infrastructure_agent/windows/integrations/nri-couchbase/nri-couchbase-amd64.msi">http://download.newrelic.com/infrastructure_agent/windows/integrations/nri-couchbase/nri-couchbase-amd64.msi</a></p>
      </li>
      <li>
        <p>To install from the Windows command prompt, run:</p>
        <pre><code>msiexec.exe /qn /i PATH\TO\nri-couchbase-amd64.msi
</code></pre>
      </li>
      <li>
        <p>In the Integrations directory, <code>C:\Program Files\New Relic\newrelic-infra\integrations.d\</code>, create a copy of the sample configuration file by running:</p>
        <pre><code>cp couchbase-config.yml.sample couchbase-config.yml
</code></pre>
      </li>
      <li>
        <p>Edit the <code>couchbase-config.yml</code> file as described in the <a href="#config">configuration settings</a>.</p>
      </li>
      <li>
        <p><a href="https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status">Restart the infrastructure agent</a>.</p>
      </li>
    </ol>
  </div>
</div>
<p>Additional notes:</p>
<ul>
  <li><strong>Advanced:</strong> Integrations are also available in <a href="/docs/integrations/host-integrations/installation/install-host-integrations-built-new-relic#tarball">tarball format</a> to allow for install outside of a package manager.</li>
  <li><strong>On-host integrations do not automatically update.</strong> For best results, regularly <a href="/docs/integrations/host-integrations/installation/update-infrastructure-host-integration-package">update the integration package</a> and <a href="/docs/infrastructure/new-relic-infrastructure/installation/update-infrastructure-agent">the infrastructure agent</a>.</li>
</ul>
<h2>Configure the integration [#config]</h2>
<p>An integration's YAML-format configuration is where you can place required login credentials and configure how data is collected. Which options you change depend on your setup and preference.</p>
<p>There are several ways to configure the integration, depending on how it was installed:</p>
<ul>
  <li>If enabled via Kubernetes: see <a href="/docs/monitor-service-running-kubernetes">Monitor services running on Kubernetes</a>.</li>
  <li>If enabled via Amazon ECS: see <a href="/docs/integrations/host-integrations/host-integrations-list/monitor-services-running-amazon-ecs">Monitor services running on ECS</a>.</li>
  <li>If installed on-host: edit the config in the integration's YAML config file, <code>couchbase-config.yml</code>.</li>
</ul>
<p>Config options are below. To see the options in use, see an <a href="#example-config">example config file</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>With secrets management, you can configure on-host integrations with New Relic infrastructure agent to use sensitive data (such as passwords) without having to write them as plain text into the integration's configuration file. For more information, see <a href="https://docs.newrelic.com/docs/integrations/host-integrations/installation/secrets-management">Secrets management</a>.</p>
</div>
<h3>Commands</h3>
<p>The configuration accepts the following command:</p>
<ul>
  <li><code>all_data</code>: captures inventory and metrics data for the Couchbase cluster according to the given arguments.</li>
</ul>
<p>The <code>all_data</code> command accepts the following arguments:</p>
<ul>
  <li><code>hostname</code>: the hostname or IP of the node. Default: <code>localhost</code>.</li>
  <li><code>port</code>: the port on which the Couchbase API is listening. Default: <code>8091</code>.</li>
  <li><code>query_port</code>: the port on which the N1QL service is listening. Default: <code>8093</code>.</li>
  <li><code>username</code>: the username used to connect to Couchbase.</li>
  <li><code>password</code>: the password used to connect to Couchbase.</li>
  <li><code>use_ssl</code>: whether or not to connect using SSL. Default: <code>false</code>.</li>
  <li><code>ca_bundle_dir/ca_bundle_file</code>: location of SSL certificate on the host.</li>
  <li><code>timeout</code>: the timeout for API requests, in seconds. Default: <code>30</code>.</li>
  <li><code>enable_cluster_and_nodes</code>: whether or not to collect metrics for cluster, node, and query engine entities.</li>
  <li><code>enable_buckets</code>: whether or not to collect metrics for bucket entities.</li>
  <li><code>enable_bucket_stats</code>: whether or not to collect metrics for extended statistics for buckets.</li>
</ul>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>If you're <a href="/docs/integrations/kubernetes-integration/link-apps-services/monitor-services-running-kubernetes">monitoring Couchbase with our Kubernetes integration</a>, you may receive duplicated cluster metrics. However, you can facet by node when creating dashboards and alerts.</p>
</div>
<h3>Example configuration [#example-config]</h3>
<p>Example <code>couchbase-config.yml</code> file configuration:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1jb25maWcifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkV4YW1wbGUgY29uZmlndXJhdGlvbiJ9XQ==">
    <div data-prop-text="title">Example configuration</div>
    <pre><code>integration_name: com.newrelic.couchbase

instances:
  - name: couchbase
    command: all_data
    arguments:
      hostname: couchbase-1.localnet
      port: 8091
      query_port: 8093
      username: coubaseuser
      password: mypass
    labels:
      env: production
      role: couchbase

</code></pre>
  </div>
</div>
<p>For more about the general structure of on-host integration configuration, see <a href="/docs/integrations/integrations-sdk/file-specifications/host-integration-configuration-overview">Configuration</a>.</p>
<h2>Find and use data [#find-and-use]</h2>
<p>Integration data is reported to <a href="/docs/integrations/new-relic-integrations/getting-started/infrastructure-integration-dashboards-charts">integration dashboards</a>.</p>
<p>Couchbase data is attached to the following <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#events-new-relic">event types</a>:</p>
<ul>
  <li><code>CouchbaseBucketSample</code></li>
  <li><code>CouchbaseClusterSample</code></li>
  <li><code>CouchbaseNodeSample</code></li>
  <li><code>CouchbaseQueryEngineSample</code></li>
</ul>
<p>You can <a href="/docs/using-new-relic/data/understand-data/query-new-relic-data">query this data</a> for troubleshooting purposes or to create custom charts and dashboards.</p>
<p>For more on how to find and use your data, see <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">Understand integration data</a>.</p>
<h2>Metric data [#metrics]</h2>
<p>The Couchbase integration collects the following metric data attributes. Some metric names are prefixed with a category indicator and a period, such as <code>cluster.</code> or <code>node.</code>.</p>
<h3>Couchbase bucket sample metrics [#bucket-sample-metric]</h3>
<p>These attributes are attached to the <code>CouchbaseBucketSample</code> event type.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>bucket.activeResidentItemsRatio</code></p>
      </div>
      <div>
        <p>Percentage of active items cached in RAM in this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.averageDiskCommitTimeInMilliseconds</code></p>
      </div>
      <div>
        <p>The average disk commit time of the bucket, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.averageDiskUpdateTimeInMilliseconds</code></p>
      </div>
      <div>
        <p>The average disk update time of the bucket, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.cacheMissRatio</code></p>
      </div>
      <div>
        <p>Percentage of reads per second to this bucket from disk as opposed to RAM.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.currentConnections</code></p>
      </div>
      <div>
        <p>Number of connections to this server, including connections from external client SDKs, proxies, TAP requests, and internal statistic gathering.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.dataUsedInBytes</code></p>
      </div>
      <div>
        <p>Amount of data used by this bucket, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.decrementHitsPerSecond</code></p>
      </div>
      <div>
        <p>The number of decrement hits per second of the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.decrementMissesPerSecond</code></p>
      </div>
      <div>
        <p>The number of decrement misses per second of the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.deleteHitsPerSecond</code></p>
      </div>
      <div>
        <p>The number of delete hits per second for this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.deleteMissesPerSecond</code></p>
      </div>
      <div>
        <p>The number of delete misses per second for this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.diskCreateOperationsPerSecond</code></p>
      </div>
      <div>
        <p>Number of new items created on disk per second for this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.diskFetchesPerSecond</code></p>
      </div>
      <div>
        <p>The number of operations required per second to fetch items from disk on the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.diskUpdateOperationsPerSecond</code></p>
      </div>
      <div>
        <p>Number of items updated on disk per second for this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.diskUsedInBytes</code></p>
      </div>
      <div>
        <p>The amount of disk space in use for the bucket, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.diskWriteQueue</code></p>
      </div>
      <div>
        <p>Number of items waiting to be written to disk in the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.ejectionsPerSecond</code></p>
      </div>
      <div>
        <p>Total number of items per second being ejected to disk in this bucket</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.evictionPolicy</code></p>
      </div>
      <div>
        <p>The eviction policy of the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.evictionsPerSecond</code></p>
      </div>
      <div>
        <p>The number of items per second evicted from the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.getHitsPerSecond</code></p>
      </div>
      <div>
        <p>Number of get operations per second for data that this bucket contains.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.getMissesPerSecond</code></p>
      </div>
      <div>
        <p>Number of get operations per second for data that this bucket does not contain.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.hitRatio</code></p>
      </div>
      <div>
        <p>Percentage of get requests served with data from this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.incrementHitsPerSecond</code></p>
      </div>
      <div>
        <p>The number of increment hits per second of the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.incrementMissesPerSecond</code></p>
      </div>
      <div>
        <p>The number of increment misses per second of the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.itemCount</code></p>
      </div>
      <div>
        <p>The number of objects stored in the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.memoryHighWaterMarkInBytes</code></p>
      </div>
      <div>
        <p>High water mark for auto-evictions on the bucket, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.memoryLowWaterMarkInBytes</code></p>
      </div>
      <div>
        <p>Low water mark for auto-evictions on the bucket, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.memoryUsedInBytes</code></p>
      </div>
      <div>
        <p>The amount of RAM used for the bucket, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.metadataInRAMInBytes</code></p>
      </div>
      <div>
        <p>Amount of RAM used for metadata on this bucket, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.missesPerSecond</code></p>
      </div>
      <div>
        <p>The number of misses per second of the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.nodeLocator</code></p>
      </div>
      <div>
        <p>Type of node locator.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.outOfMemoryErrorsPerSecond</code></p>
      </div>
      <div>
        <p>Number of hard out of memory errors for this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.OverheadInBytes</code></p>
      </div>
      <div>
        <p>The extra memory used by transient data (persistence queues, replication queues, checkpoints, etc.) on the bucket, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.pendingResidentItemsRatio</code></p>
      </div>
      <div>
        <p>Percentage of pending items cached in RAM in this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.quotaUtilization</code></p>
      </div>
      <div>
        <p>The percent of RAM quota currently in use on the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.readOperationsPerSecond</code></p>
      </div>
      <div>
        <p>The number of reads (get operations) per second from this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.readRatePerSecond</code></p>
      </div>
      <div>
        <p>The bytes read per second of the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.replicaIndex</code></p>
      </div>
      <div>
        <p>Defines if the bucket has replica indexes enabled.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.replicaNumber</code></p>
      </div>
      <div>
        <p>Number of replicas of this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.replicaResidentItemsRatio</code></p>
      </div>
      <div>
        <p>Percentage of replica items cached in RAM in this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.residentItemsRatio</code></p>
      </div>
      <div>
        <p>Percentage of all items cached in RAM in this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.temporaryOutOfMemoryErrorsPerSecond</code></p>
      </div>
      <div>
        <p>Number of back-offs sent per second to client SDKs due to out of memory situations from this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.threadsNumber</code></p>
      </div>
      <div>
        <p>The number of concurrent readers and writers for the data bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.totalOperationsPerSecond</code></p>
      </div>
      <div>
        <p>The total operations per second of the bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.writeOperationsPerSecond</code></p>
      </div>
      <div>
        <p>The number of writes (set operations) per second to this bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bucket.writeRatePerSecond</code></p>
      </div>
      <div>
        <p>The bytes written of the bucket.</p>
      </div>
    </div>
  </div>
</div>
<h3>Couchbase cluster sample metrics [#cluster-sample-metric]</h3>
<p>These attributes are attached to the <code>CouchbaseClusterSample</code> event type.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>cluster.autoFailoverCount</code></p>
      </div>
      <div>
        <p>The number of auto failovers on the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.autoFailoverEnabled</code></p>
      </div>
      <div>
        <p>Indicates if failover is enabled on the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.databaseFragmentationThreshold</code></p>
      </div>
      <div>
        <p>The percentage level within the database at which compaction occurs.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.diskFreeInBytes</code></p>
      </div>
      <div>
        <p>The free disk space on this cluster, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.diskQuotaTotalInBytes</code></p>
      </div>
      <div>
        <p>Total disk space available to Couchbase, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.diskTotalInBytes</code></p>
      </div>
      <div>
        <p>Total disk space available, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.diskUsedbyDataInBytes</code></p>
      </div>
      <div>
        <p>Disk used by bucket data on this cluster, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.diskUsedInBytes</code></p>
      </div>
      <div>
        <p>The used disk space on this cluster, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.indexFragmentationThreshold</code></p>
      </div>
      <div>
        <p>The percentage level within indexes at which compaction occurs.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.maximumBucketCount</code></p>
      </div>
      <div>
        <p>Maximum number of buckets this cluster supports.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.memoryQuotaTotalInBytes</code></p>
      </div>
      <div>
        <p>Total RAM available to Couchbase, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.memoryQuotaTotalPerNodeInBytes</code></p>
      </div>
      <div>
        <p>Total RAM available to Couchbase, per node, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.memoryQuotaUsedInBytes</code></p>
      </div>
      <div>
        <p>Total RAM used by Couchbase, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.memoryQuotaUsedPerNodeInBytes</code></p>
      </div>
      <div>
        <p>Total RAM used by Couchbase, per node, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.memoryTotalInBytes</code></p>
      </div>
      <div>
        <p>The total RAM on this cluster, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.memoryUsedByDataInBytes</code></p>
      </div>
      <div>
        <p>Total RAM used by bucket data on this cluster, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.memoryUsedInBytes</code></p>
      </div>
      <div>
        <p>The total RAM used on this cluster, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cluster.viewFragmentationThreshold</code></p>
      </div>
      <div>
        <p>The percentage of fragmentation within all the view index files at which compaction is triggered.</p>
      </div>
    </div>
  </div>
</div>
<h3>Couchbase node sample metrics [#node-sample-metric]</h3>
<p>These attributes are attached to the <code>CouchbaseNodeSample</code> event type.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>node.cpuUtilization</code></p>
      </div>
      <div>
        <p>The CPU utilization of the node.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>node.memoryFreeInBytes</code></p>
      </div>
      <div>
        <p>The free memory of the node, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>node.memoryTotalInBytes</code></p>
      </div>
      <div>
        <p>The total memory allocated to the node, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>node.recoveryType</code></p>
      </div>
      <div>
        <p>The recovery type of the node.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>node.services</code></p>
      </div>
      <div>
        <p>The services of the node.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>node.status</code></p>
      </div>
      <div>
        <p>The status of the node. (<code>0</code> = unhealthy, <code>1</code> = healthy)</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>node.swapTotalInBytes</code></p>
      </div>
      <div>
        <p>The total swap space of the node, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>node.swapUsedInBytes</code></p>
      </div>
      <div>
        <p>The used swap space of the node, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>node.uptimeInMilliseconds</code></p>
      </div>
      <div>
        <p>The uptime of the node, in milliseconds.</p>
      </div>
    </div>
  </div>
</div>
<h3>Couchbase query engine sample metrics [#query-engine-sample-metric]</h3>
<p>These attributes are attached to the <code>CouchbaseQueryEngineSample</code> event type.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>queryengine.activeRequests</code></p>
      </div>
      <div>
        <p>Current number of active requests.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.averageRequestTimeInMilliseconds</code></p>
      </div>
      <div>
        <p>Average request time of this query engine, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.completedLimit</code></p>
      </div>
      <div>
        <p>Number of queries that Couchbase will keep in the query log.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.completedRequests</code></p>
      </div>
      <div>
        <p>Current number of completed requests.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.completedThresholdInMilliseconds</code></p>
      </div>
      <div>
        <p>Minimum time query must take to be logged in the Couchbase query log, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.cores</code></p>
      </div>
      <div>
        <p>Number of cores available for this query engine.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.garbageCollectionNumber</code></p>
      </div>
      <div>
        <p>Number of the last garbage collection.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.garbageCollectionPaused</code></p>
      </div>
      <div>
        <p>Percent of time that garbage collection is paused.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.garbageCollectionTimePausedInMilliseconds</code></p>
      </div>
      <div>
        <p>Number of milliseconds that garbage collection is paused, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.medianRequestTimeInMilliseconds</code></p>
      </div>
      <div>
        <p>Median request time of this query engine, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.preparedStatementUtilization</code></p>
      </div>
      <div>
        <p>Percentage of requests that are prepared statements.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.requestsLast15MinutesPerSecond</code></p>
      </div>
      <div>
        <p>Requests per second average over the past 15 minutes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.requestsLast1MinutesPerSecond</code></p>
      </div>
      <div>
        <p>Requests per second average over the past minute.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.requestsLast5MinutesPerSecond</code></p>
      </div>
      <div>
        <p>Requests per second average over the past 5 minutes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.requestTime80thPercentileInMilliseconds</code></p>
      </div>
      <div>
        <p>80th percentile of request time of this query engine, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.requestTime95thPercentileInMilliseconds</code></p>
      </div>
      <div>
        <p>95th percentile of request time of this query engine, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.requestTime99thPercentileInMilliseconds</code></p>
      </div>
      <div>
        <p>99th percentile of request time of this query engine, in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.systemCPUUtilization</code></p>
      </div>
      <div>
        <p>CPU utilization of this query engine</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.systemMemoryInBytes</code></p>
      </div>
      <div>
        <p>The virtual address space reserved by this query engine, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.totalMemoryInBytes</code></p>
      </div>
      <div>
        <p>Cumulative amount of memory allocated for heap objects by this query engine, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.totalThreads</code></p>
      </div>
      <div>
        <p>Total threads used by this query engine.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.uptimeInMilliseconds</code></p>
      </div>
      <div>
        <p>Uptime of this query engine, in milliseconds</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.usedMemoryInBytes</code></p>
      </div>
      <div>
        <p>Amount of memory allocated for heap objects for this query engine, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queryengine.userCPUUtilization</code></p>
      </div>
      <div>
        <p>User CPU utilization of this query engine.</p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p>The Couchbase integration captures the configuration parameters of the Couchbase database. The data is available on the Infrastructure <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure">Inventory page</a>, under the <strong>config/couchbase</strong> source. For more about inventory data, see <a href="/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">Understand data</a>.</p>
<p>The integration captures data for the following Couchbase configuration parameters:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYnVja2V0LXBhcmFtZXRlcnMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkJ1Y2tldCBwYXJhbWV0ZXJzIn1d">
    <div data-prop-text="title">Bucket parameters</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Name</p>
          </div>
          <div>
            <p>Description</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>Node locator</code></p>
          </div>
          <div>
            <p>Type of node locator.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Proxy port</code></p>
          </div>
          <div>
            <p>Proxy port on which the bucket communicates.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Type</code></p>
          </div>
          <div>
            <p>The type of bucket.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>UUID</code></p>
          </div>
          <div>
            <p>The UUID of the bucket.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2x1c3Rlci1wYXJhbWV0ZXJzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJDbHVzdGVyIHBhcmFtZXRlcnMifV0=">
    <div data-prop-text="title">Cluster parameters</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Name</p>
          </div>
          <div>
            <p>Description</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>Collection node</code></p>
          </div>
          <div>
            <p>The node used to collect metrics.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Couchbase version</code></p>
          </div>
          <div>
            <p>The version of Couchbase running on this cluster.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>UUID</code></p>
          </div>
          <div>
            <p>The UUID of the cluster.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibm9kZS1wYXJhbWV0ZXJzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJOb2RlIHBhcmFtZXRlcnMifV0=">
    <div data-prop-text="title">Node parameters</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Name</p>
          </div>
          <div>
            <p>Description</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>Cluster membership</code></p>
          </div>
          <div>
            <p>The cluster membership of the node.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Hostname</code></p>
          </div>
          <div>
            <p>The hostname of the node.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Operating system</code></p>
          </div>
          <div>
            <p>The operating system of the node.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Port</code></p>
          </div>
          <div>
            <p>The port of the node.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Recovery type</code></p>
          </div>
          <div>
            <p>The recovery type of the node.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Services</code></p>
          </div>
          <div>
            <p>A comma-separated list of services of the node.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Version</code></p>
          </div>
          <div>
            <p>The version of Couchbase running on this node.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicXVlcnktZW5naW5lLXBhcmFtZXRlcnMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlF1ZXJ5IGVuZ2luZSBwYXJhbWV0ZXJzIn1d">
    <div data-prop-text="title">Query engine parameters</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Name</p>
          </div>
          <div>
            <p>Description</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>Node hostname</code></p>
          </div>
          <div>
            <p>The hostname of the node this query engine runs on.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Node port</code></p>
          </div>
          <div>
            <p>The port of the node this query engine runs on.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Version</code></p>
          </div>
          <div>
            <p>The version of this query engine.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h2>Check the source code [#source-code]</h2>
<p>This integration is open source software. That means you can <a href="https://github.com/newrelic/nri-couchbase" title="Link opens in a new window.">browse its source code</a> and send improvements, or create your own fork and build it.</p>
