
<p><a href="/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations">New Relic infrastructure integrations</a> include an integration for reporting your <a href="https://aws.amazon.com/documentation/ecs/">Amazon EC2 Container Service (ECS)</a> data and your <a href="http://docs.aws.amazon.com/AmazonECR/latest/userguide/Registries.html">Amazon EC2 Container Registry (ECR)</a> data to New Relic products. This document explains the integration's features, how to activate it, and what data can be reported.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>New Relic also offers an <a href="/docs/integrations/elastic-container-service-integration/get-started/introduction-amazon-ecs-integration">ECS on-host integration</a>, which reports a different data set than this cloud integration. For complete ECS monitoring, we recommend enabling both integrations.</p>
</div>
<h2>Features</h2>
<p>With New Relic's ECS/ECR monitoring integration, you can monitor reserved vs. utilized capacity, task execution, and registry of containers. AWS integration data is also available for analysis and chart creation <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure#insights">in New Relic One</a>.</p>
<h2>Activate integration [#activate]</h2>
<p>To enable this integration, follow standard procedures to <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure">Connect AWS services to New Relic</a>.</p>
<p>If you have services running on ECS, you can also <a href="/docs/integrations/host-integrations/host-integrations-list/monitor-services-running-amazon-ecs">enable monitoring of those services</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>In AWS, you have to <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-account-settings.html#ecs-resource-arn-timeline">opt-in</a> for the new ARN format (<a href="https://aws.amazon.com/blogs/compute/migrating-your-amazon-ecs-deployment-to-the-new-arn-and-resource-id-format-2/">announcement</a>) to differentiate services with the same name in different clusters. If not, you could have data collision</p>
</div>
<h2>Configuration and polling [#polling]</h2>
<p>You can change the polling frequency and filter data using <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p><a href="/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations">Default polling</a> information for the Amazon ECS/ECR integration:</p>
<ul>
  <li>New Relic polling interval: 5 minutes</li>
  <li>Amazon CloudWatch data interval: 1 minute or 5 minutes</li>
</ul>
<h2>Find and use data [#find-data]</h2>
<p>To find this integration's data, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > AWS</strong> and select one of the Amazon ECS/ECR integration links.</p>
<p>You can <a href="https://docs.newrelic.com/docs/using-new-relic/data/understand-data/query-new-relic-data">query and explore your data</a> using the <code>ComputeSample</code> <a href="/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>, with a <code>provider</code> value of <code>EcsCluster</code>.</p>
<p>The integration collects these ECR/ECS definitions:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>ClusterName</code></p>
      </div>
      <div>
        <p>This dimension filters the data you request for all resources in a specified cluster. All Amazon ECS metrics are filtered by <code>ClusterName</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>ServiceName</code></p>
      </div>
      <div>
        <p>This dimension filters the data you request for all resources in a specified service within a specified cluster.</p>
      </div>
    </div>
  </div>
</div>
<p>For more on how to find and use integration data, see <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">Understand integration data</a>.</p>
<h2>Metric data [#metrics]</h2>
<p>The ECS/ECR integration collects the following data:</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>For full descriptions of these metrics, see Amazon's documentation on <a href="https://aws.amazon.com/documentation/ecs/">ECS</a> and <a href="https://aws.amazon.com/documentation/ecr/">ECR</a>.</p>
</div>
<h3>Cluster and service metrics</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Data type</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>CPUUtilization</code></p>
      </div>
      <div>
        <p>percent</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>MemoryUtilization</code></p>
      </div>
      <div>
        <p>percent</p>
      </div>
    </div>
  </div>
</div>
<h3>Cluster metrics [#cluster]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Data type</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>CPUReservation</code></p>
      </div>
      <div>
        <p>percent</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>MemoryReservation</code></p>
      </div>
      <div>
        <p>percent</p>
      </div>
    </div>
  </div>
</div>
<h3>Service metrics [#service]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>Active Service</code></p>
      </div>
      <div>
        <p>The number of services that are running on the cluster in an <code>ACTIVE</code> state</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>Pending Tasks</code></p>
      </div>
      <div>
        <p>Number of tasks in the cluster that are in <code>PENDING</code> state</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>Running Tasks</code></p>
      </div>
      <div>
        <p>Number of tasks in the cluster that are in <code>RUNNING</code> state</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>Registered Instances</code></p>
      </div>
      <div>
        <p>Number of container instances registered into the cluster</p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p>Inventory data provides information about the service's state and configuration. For more about inventory data, see <a href="/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">Understand and use data</a>.</p>
<h3>aws/ecs/cluster</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>status</code></p>
      </div>
      <div>
        <p>The status of the cluster. The valid values are <code>ACTIVE</code> or <code>INACTIVE</code>. <code>ACTIVE</code> indicates that you can register container instances with the cluster and the associated instances can accept tasks.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>name</code></p>
      </div>
      <div>
        <p>User-generated string to identify the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>awsRegion</code></p>
      </div>
      <div>
        <p>AWS region where the cluster is running.</p>
      </div>
    </div>
  </div>
</div>
<h3>aws/ecs/service</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>status</code></p>
      </div>
      <div>
        <p>The status of the service. The valid values are <code>ACTIVE</code>, <code>DRAINING</code> or <code>INACTIVE</code>. <code>ACTIVE</code> means the instance accepts new tasks, <code>DRAINING</code> means the instance prevents new tasks from being started and notifies the service scheduler to move tasks to other instances in the cluster, generally used with the purpose of maintaining the instance or scale it down and <code>INACTIVE</code> means the instance is not active.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>clusterName</code></p>
      </div>
      <div>
        <p>User-generated string to identify the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>serviceName</code></p>
      </div>
      <div>
        <p>User-generated string to identify the service.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>launchType</code></p>
      </div>
      <div>
        <p>Type of infrastructure on which tasks and services are hosted. The valid values are <code>EC2</code> and <code>FARGATE</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>awsRegion</code></p>
      </div>
      <div>
        <p>AWS region where the service is running.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>deploymentMaximumPercent</code></p>
      </div>
      <div>
        <p>Upper limit on the number of service's tasks that are allowed in the <code>RUNNING</code> or <code>PENDING</code> state during a deployment, as a percentage of the <code>desiredCount</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>deploymentMinimumPercent</code></p>
      </div>
      <div>
        <p>Lower limit on the number of service's tasks that must remain in the <code>RUNNING</code> state during a deployment, as a percentage of the <code>desiredCount</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>desiredCount</code></p>
      </div>
      <div>
        <p>The number of instantiations of the specified task definition to place and keep running on the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>taskDefinition</code></p>
      </div>
      <div>
        <p>ARN of the task definition file that describes the containers that form the application.</p>
      </div>
    </div>
  </div>
</div>
