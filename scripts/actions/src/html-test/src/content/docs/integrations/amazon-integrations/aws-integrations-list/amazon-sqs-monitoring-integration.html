
<p><a href="https://docs.newrelic.com/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations">New Relic infrastructure integrations</a> include an integration for reporting your Amazon SQS data to New Relic. This document explains how to activate the integration and describes the data reported.</p>
<h2>Features</h2>
<p><a href="https://aws.amazon.com/sqs/">Amazon Simple Queue Service (Amazon SQS)</a> provides hosted queues for storing messages in transit. New Relic's SQS integration reports queue-related data such as the count of messages delivered, delayed, and received, message size, and other <a href="#metrics">metrics</a> and <a href="#inventory">configuration/inventory data</a>. SQS data is available in pre-built dashboards and you can also create custom queries and charts in <a href="https://docs.newrelic.com/docs/infrastructure/integrations-getting-started/getting-started/use-integration-data-new-relic-insights">New Relic One</a>. You can also create alert conditions to notify you of changes in SQS data.</p>
<h2>Activate integration [#activate]</h2>
<p>To enable this integration follow standard procedures to <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure">Connect AWS services to New Relic</a>.</p>
<h2>Configuration and polling [#polling]</h2>
<p>You can change the polling frequency and filter data using <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p>Default <a href="/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations">polling</a> information for the Amazon SQS integration:</p>
<ul>
  <li>New Relic polling interval: 5 minutes</li>
  <li>Amazon CloudWatch data interval: 1 minute</li>
</ul>
<p>The maximum number of queues is 1,000 (an <a href="https://docs.aws.amazon.com/cli/latest/reference/sqs/list-queues.html#output">AWS limitation</a>). You can collect more than this by specifying queue prefixes (in <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations#filters">filter configuration</a>), with each prefix having fewer than 1,000 entities.</p>
<h2>Find and use data [#find-data]</h2>
<p>To find your integration data, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > AWS</strong> and select one of the SQS integration links.</p>
<p>You can <a href="https://docs.newrelic.com/docs/using-new-relic/data/understand-data/query-new-relic-data">query and explore your data</a> using the <code>QueueSample</code> <a href="https://docs.newrelic.com/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>, with a <code>provider</code> value of <code>SqsQueue</code>.</p>
<p>For more on how to use your data, see <a href="https://docs.newrelic.com/docs/infrastructure/integrations/find-use-infrastructure-integration-data">Understand integration data</a>.</p>
<h2>Metric data [#metrics]</h2>
<p>This integration collects the following Amazon SQS metrics. For full metric descriptions, see <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/sqs-metricscollected.html">Amazon's SQS documentation</a>.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>approximateAgeOfOldestMessage</code></p>
      </div>
      <div>
        <p>The approximate age of the oldest non-deleted message in the queue, in seconds. For dead letter queues, this value is the longest time that a message has been in the queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>approximateNumberOfMessagesDelayed</code></p>
      </div>
      <div>
        <p>The approximate number of messages in the queue that are delayed and not available for reading immediately. This can happen when the queue is configured as a delay queue or when a message has been sent with a delay parameter.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>approximateNumberOfMessagesNotVisible</code></p>
      </div>
      <div>
        <p>The approximate number of messages that are "in flight." Messages are considered in flight if they have been sent to a client but have not yet been deleted or have not yet reached the end of their visibility window.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>approximateNumberOfMessagesVisible</code></p>
      </div>
      <div>
        <p>The approximate number of messages available for retrieval from the queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>numberOfEmptyReceives</code></p>
      </div>
      <div>
        <p>The number of <code>ReceiveMessage</code> API calls that did not return a message.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>numberOfMessagesDeleted</code></p>
      </div>
      <div>
        <p>The number of messages deleted from the queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>numberOfMessagesReceived</code></p>
      </div>
      <div>
        <p>The number of messages returned by calls to the <code>ReceiveMessage</code> API action.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>numberOfMessagesSent</code></p>
      </div>
      <div>
        <p>The number of messages added to a queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>sentMessagesSize</code></p>
      </div>
      <div>
        <p>The size in bytes of messages added to a queue.</p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p>This integration reports the following SQS configuration options as inventory data. For more about inventory data, see <a href="https://docs.newrelic.com/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">Understand integration data</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>Data indicated with an asterisk <code>*</code> are only fetched if <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations#extended">extended inventory collection</a> is on.</p>
</div>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>awsRegion</code></p>
      </div>
      <div>
        <p>The AWS region for the queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>delaySeconds</code>*</p>
      </div>
      <div>
        <p>The number of seconds that a message placed into the queue should remain invisible to consumers before becoming available for consumption.</p>
        <p>Valid values: <code>0</code> and <code>900</code> (15 minutes).</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>maximumMessageSize</code>*</p>
      </div>
      <div>
        <p>The maximum amount of bytes a message can contain before Amazon SQS rejects it. For more information, see <a href="http://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_SetQueueAttributes.html">SetQueueAttributes</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>messageRetentionPeriod</code>*</p>
      </div>
      <div>
        <p>The number of seconds Amazon SQS retains a message. For more information, see <a href="http://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_SetQueueAttributes.html">SetQueueAttributes</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queue</code></p>
      </div>
      <div>
        <p>The name of the queue, which is a combination of the region, the AWS account ID and the customer specified queue name.</p>
        <p>For example, in <code>https://sqs.us-east-1.amazonaws.com/01234567890/new-car-orders</code>:</p>
        <ul>
          <li><code>us-east-1</code> is the region</li>
          <li><code>01234567890</code> is the AWS account ID</li>
          <li><code>new-car-orders</code> is the name of the queue</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p><code>queueArn</code>*</p>
      </div>
      <div>
        <p>The <a href="http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html">Amazon Resource Name</a> (ARN) for the queue.</p>
        <p>For example, in <code>arn:aws:sqs:us-east-1:01234567890/new-car-orders</code> the ARN is <code>aws</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>queueUrl</code></p>
      </div>
      <div>
        <p>The URL for the queue.</p>
        <p>For example, <code>https://sqs.us-east-1.amazonaws.com/01234567890/new-car-orders</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>receiveMessageWaitTimeSeconds</code>*</p>
      </div>
      <div>
        <p>The time in seconds for which a ReceiveMessage call will wait for a message to arrive.</p>
        <p>Valid values: <code>0</code> to <code>20</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>visibilityTimeout</code>*</p>
      </div>
      <div>
        <p>The visibility timeout for the queue, in seconds.</p>
        <p>Valid values: <code>0</code> to <code>43200</code> (12 hours).</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>createdTimestamp</code>*</p>
      </div>
      <div>
        <p>Returns the time when the queue was created in seconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>lastModifiedTimestamp</code>*</p>
      </div>
      <div>
        <p>Returns the time when the queue was last changed in seconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>redrivePolicy</code>*</p>
      </div>
      <div>
        <p>Returns the string that includes the parameters for dead letter queue functionality of the source queue.</p>
      </div>
    </div>
  </div>
</div>
