
<p><a href="/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations">New Relic's integrations</a> with the <a href="https://cloud.google.com">Google Cloud Platform (GCP)</a> include an integration to report <a href="https://cloud.google.com/spanner/">Google Cloud Spanner</a> data to New Relic. This document explains how to activate the GCP Cloud Spanner integration and describes the data that can be reported.</p>
<h2>Features</h2>
<p>Google Cloud Spanner service is a globally-distributed relational database service built for the cloud. Using the <a href="https://cloud.google.com/spanner/docs/quickstart-console">Google Spanner Console</a>, developers can create a Cloud Spanner instance, add schemas, write and modify data, and run queries.</p>
<h2>Activate integration [#activate]</h2>
<p>To enable the integration follow standard procedures to <a href="https://docs.newrelic.com/docs/connect-google-cloud-platform-services-infrastructure">connect your GCP service to New Relic</a>.</p>
<h2>Polling frequency [#polling]</h2>
<p>New Relic integrations query your GCP services according to a polling interval, which varies depending on the integration. The polling frequency for Google Cloud Spanner is five minutes. The resolution is 1 data point every minute.</p>
<h2>Find and use data [#find-data]</h2>
<p>After activating the integration and waiting a few minutes (based on the <a href="#polling">polling frequency</a>), data will appear in the New Relic UI. To <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">find and use your data</a>, including links to your dashboards and alert settings, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > GCP > (select an integration)</strong>.</p>
<h2>Metric data [#metrics]</h2>
<p>To view <a href="/docs/integrations/new-relic-integrations/getting-started/understand-use-data-infrastructure-integrations#metric">metric data</a> for your GCP Spanner integration in New Relic, <a href="/docs/integrations/new-relic-integrations/getting-started/use-integration-data-new-relic-insights#nrql">create NRQL queries</a> for <code>GcpSpannerInstanceSample</code> and <code>GcpSpannerDatabaseSample</code> <a href="/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">events</a> and their related attributes.</p>
<h3>GcpSpannerInstanceSample [#gcp-spanner-instance-sample]</h3>
<p>Query <code>GcpSpannerInstanceSample</code> events in New Relic to view data for the following attributes:</p>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Attribute</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>instance.cpu.Utilization</code></p>
        </div>
        <div>
          <p>Utilization of the provisioned CPU, between 0 and 1.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>instance.cpu.utilization_by_priority</code></p>
        </div>
        <div>
          <p>Utilization of the provisioned CPU by priority, between 0 and 1.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>instance.cpu.smoothed_utilization</code></p>
        </div>
        <div>
          <p>24-hour smoothed utilization of the provisioned CPU , between 0 and 1.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>instance.nodes</code></p>
        </div>
        <div>
          <p>Total number of nodes.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>instance.sessions</code></p>
        </div>
        <div>
          <p>Number of sessions in use.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>instance.storage.UsedBytes</code></p>
        </div>
        <div>
          <p>Storage used in bytes.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<h3>GcpSpannerDatabaseSample [#gcp-spanner-database-sample]</h3>
<p>Query <code>GcpSpannerDatabaseSample</code> events in New Relic to view data for the following attributes:</p>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Attribute</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>api.ReceivedBytes</code></p>
        </div>
        <div>
          <p>Uncompressed request bytes received by Cloud Spanner.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>api.Requests</code></p>
        </div>
        <div>
          <p>Rate of Cloud Spanner API requests.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>api.RequestLatencies</code></p>
        </div>
        <div>
          <p>Distribution of server request latencies for a database. This includes latency of request processing in Cloud Spanner backends and API layer. It does not include network or reverse-proxy overhead between clients and servers.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>api.SentBytes</code></p>
        </div>
        <div>
          <p>Uncompressed response bytes sent by Cloud Spanner.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data</h2>
<p>To view <a href="/docs/integrations/new-relic-integrations/getting-started/understand-use-data-infrastructure-integrations#inventory-data">inventory data</a> for GCP Spanner services, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > Inventory</strong> and search for or select the following:</p>
<h3>gcp/spanner/instance</h3>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Name</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>projectId</code></p>
        </div>
        <div>
          <p>The project where the instance is.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>zone</code></p>
        </div>
        <div>
          <p>The region where the instance is.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>name</code></p>
        </div>
        <div>
          <p>The Id of the instance (not the name).</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>state*</code></p>
        </div>
        <div>
          <p>The state of the instance.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>nodeCount*</code></p>
        </div>
        <div>
          <p>The number of nodes the instance has.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>instanceName*</code></p>
        </div>
        <div>
          <p>The name of the instance.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>labels*</code></p>
        </div>
        <div>
          <p>The labels set for the instance.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<p>* Only available if the GCP project is linked to New Relic through a <a href="https://docs.newrelic.com/docs/integrations/google-cloud-platform-integrations/getting-started/connect-google-cloud-platform-services-infrastructure">service account</a>.</p>
<h3>gcp/spanner/database</h3>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Name</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>projectId</code></p>
        </div>
        <div>
          <p>The project where the database is.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>zone</code></p>
        </div>
        <div>
          <p>The region where the database is.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>name</code></p>
        </div>
        <div>
          <p>The Id of the database (not the name).</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>instanceId</code></p>
        </div>
        <div>
          <p>The Id of the instance where the database is.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>dl*</code></p>
        </div>
        <div>
          <p>The SQL definition of the instance.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>state*</code></p>
        </div>
        <div>
          <p>The state of the database.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<p>* Only available if the GCP project is linked to New Relic through a <a href="https://docs.newrelic.com/docs/integrations/google-cloud-platform-integrations/getting-started/connect-google-cloud-platform-services-infrastructure">service account</a>.</p>
