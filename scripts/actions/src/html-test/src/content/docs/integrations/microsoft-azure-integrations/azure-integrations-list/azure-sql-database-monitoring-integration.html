
<p><a href="/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations">New Relic's integrations</a> include an integration for reporting your <a href="https://azure.microsoft.com/en-us/services/sql-database/">Microsoft Azure SQL Database</a> metrics and inventory data to New Relic. This document explains how to activate the integration and describes the data reported.</p>
<h2>Features</h2>
<p>New Relic gathers database data from Azure's fully-managed relational cloud database service. Azure SQL provides single databases with their own set of resources, and elastic pools that share a set of resources. Both are associated with an Azure SQL Database logical server. If databases are protected by a firewall, they can be replicated and restored to a previous point in time.</p>
<p>Using New Relic, you can:</p>
<ul>
  <li>View Azure SQL Database data in pre-built Infrastructure dashboards.</li>
  <li><a href="/docs/using-new-relic/data/understand-data/query-new-relic-data">Run custom queries and visualize the data</a>.</li>
  <li>Create alert conditions to notify you of changes in data.</li>
</ul>
<h2>Activate integration [#activate]</h2>
<p>To enable the integration follow standard procedures to <a href="/docs/infrastructure/microsoft-azure-integrations/getting-started/activate-azure-integrations">activate your Azure service in New Relic</a>.</p>
<h2>Configuration and polling [#polling]</h2>
<p>You can change the polling frequency and filter data using <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p>New Relic queries your Azure Database services according to a default <a href="/docs/integrations/microsoft-azure-integrations/getting-started/azure-integration-polling">polling</a> interval, which varies depending on the integration. Polling frequency for the Azure SQL Database integration:</p>
<ul>
  <li>Polling interval: 5 minutes</li>
  <li>Resolution: 1 data point per minute</li>
</ul>
<h2>Find and use data [#find-and-use]</h2>
<p>To <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">explore your integration data</a>, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure <a href="https://infrastructure.newrelic.com/"></a>> Azure > (select an integration)</strong>.</p>
<p>Data is organized like this:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Azure SQL Database data</strong></p>
      </div>
      <div>
        <p><strong>Organized in New Relic Insights</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Single database</p>
      </div>
      <div>
        <ul>
          <li>Data about a single database is attached to <code>AzureSqlDatabaseSample</code> event type.</li>
          <li>Inventory data has a <code>provider</code> value of <code>AzureSqlDatabase</code>.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Elastic pool</p>
      </div>
      <div>
        <ul>
          <li>Data about an elastic pool is attached to <code>AzureSqlElasticPoolSample</code>event type.</li>
          <li>Inventory data has a <code>provider</code> value of <code>AzureSqlElasticPool</code>.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Firewall</p>
      </div>
      <div>
        <ul>
          <li>Data about a firewall is attached to <code>AzureSqlFirewallSample</code> event type.</li>
          <li>Inventory data has a <code>provider</code> value of <code>AzureSqlFirewall</code>.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Database replication link</p>
      </div>
      <div>
        <ul>
          <li>Data about a database replication link is attached to <code>AzureSqlReplicationLinkSample</code> event type.</li>
          <li>Inventory data has a <code>provider</code> value of <code>AzureSqlReplicationLink</code>.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Database restore point</p>
      </div>
      <div>
        <ul>
          <li>Data about a database restore point is attached to <code>AzureSqlRestorePointSample</code> event type.</li>
          <li>Inventory data has a <code>provider</code> value of <code>AzureSqlRestorePoint</code>.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Logical server</p>
      </div>
      <div>
        <ul>
          <li>Data about a logical server is attached to <code>AzureSqlServerSample</code> event type.</li>
          <li>Inventory data has a <code>provider</code> value of <code>AzureSqlServer</code>.</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<h2>Metric data [#metrics]</h2>
<p>This integration collects the following <a href="/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#metric">metric data</a>.</p>
<h3>Database sample metrics [#database-sample]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>cpuPercent</code></p>
      </div>
      <div>
        <p>Average CPU percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>physicalDataReadPercent</code></p>
      </div>
      <div>
        <p>Average data IO percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>logWritePercent</code></p>
      </div>
      <div>
        <p>Average log IO percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dtuConsumptionPercent</code></p>
      </div>
      <div>
        <p>Average DTU percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>storage</code></p>
      </div>
      <div>
        <p>Total database size, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>connectionSuccessful</code></p>
      </div>
      <div>
        <p>Total number of successful connections.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>connectionFailed</code></p>
      </div>
      <div>
        <p>Total number of failed connections.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>blockedByFirewall</code></p>
      </div>
      <div>
        <p>Total number of requests blocked by firewall.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>deadlock</code></p>
      </div>
      <div>
        <p>Total number of deadlocks.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>storagePercent</code></p>
      </div>
      <div>
        <p>Database size percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>xtpStoragePercent</code></p>
      </div>
      <div>
        <p>Average in-memory OLTP storage percent.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>workersPercent</code></p>
      </div>
      <div>
        <p>Average workers percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>sessionsPercent</code></p>
      </div>
      <div>
        <p>Average sessions percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dtuLimit</code></p>
      </div>
      <div>
        <p>Average number of DTU limit.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dtuUsed</code></p>
      </div>
      <div>
        <p>Average number of used DTU.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dwuLimit</code></p>
      </div>
      <div>
        <p>DWU limit.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dwuConsumptionPercent</code></p>
      </div>
      <div>
        <p>Percentage of DWU.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dwuUsed</code></p>
      </div>
      <div>
        <p>Number of used DWU.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dwCpuPercent</code></p>
      </div>
      <div>
        <p>Average DW node level CPU percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dwPhysicalDataReadPercent</code></p>
      </div>
      <div>
        <p>Average DW node level data IO percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databaseSizeCurrentBytes</code></p>
      </div>
      <div>
        <p>Total current database size in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databaseSizeLimitBytes</code></p>
      </div>
      <div>
        <p>Database limit in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cpuLimit</code></p>
      </div>
      <div>
        <p>Average limit of CPUs. Applies to vCore-based databases.</p>
      </div>
    </div>
  </div>
</div>
<h3>Elastic pool sample metrics [#elastic-pool]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>cpuPercent</code></p>
      </div>
      <div>
        <p>Average CPU percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databaseCpuPercent</code></p>
      </div>
      <div>
        <p>Average CPU percentage, per database.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>physicalDataReadPercent</code></p>
      </div>
      <div>
        <p>Average data IO percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databasePhysicalDataReadPercent</code></p>
      </div>
      <div>
        <p>Average data IO percentage, per database.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>logWritePercent</code></p>
      </div>
      <div>
        <p>Average log IO percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databaseLogWritePercent</code></p>
      </div>
      <div>
        <p>Average log IO percentage, per database.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dtuConsumptionPercent</code></p>
      </div>
      <div>
        <p>Average DTU percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databaseDtuConsumptionPercent</code></p>
      </div>
      <div>
        <p>Average DTU percentage, per database.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>storagePercent</code></p>
      </div>
      <div>
        <p>Average storage percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>workersPercent</code></p>
      </div>
      <div>
        <p>Average workers percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databaseWorkersPercent</code></p>
      </div>
      <div>
        <p>Average workers percentage, per database.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>sessionsPercent</code></p>
      </div>
      <div>
        <p>Average sessions percentage.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databaseSessionsPercent</code></p>
      </div>
      <div>
        <p>Average sessions percentage, per database.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>eDTULimit</code></p>
      </div>
      <div>
        <p>Average DTU limit.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>storageLimitBytes</code></p>
      </div>
      <div>
        <p>Average storage limit, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>eDTUUsed</code></p>
      </div>
      <div>
        <p>Average used eDTU.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>storageUsedBytes</code></p>
      </div>
      <div>
        <p>Average used storage, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>databaseStorageUsedBytes</code></p>
      </div>
      <div>
        <p>Average used storage per database, in bytes.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>xtpStoragePercent</code></p>
      </div>
      <div>
        <p>Average in-memory OLTP storage percent.</p>
      </div>
    </div>
  </div>
</div>
<h3>Server sample metrics [#server-sample]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>dtuCurrent</code></p>
      </div>
      <div>
        <p>Average utilization percentage relative to the DTU of the database.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dtuLimit</code></p>
      </div>
      <div>
        <p>Database DTU limit.</p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p>This integration collects the following <a href="/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">inventory data</a> about your system's state and configuration.</p>
<h3>azure/sql/database/ [#inventory-sql-database]</h3>
<ul>
  <li><code>collation</code></li>
  <li><code>creationDate</code></li>
  <li><code>defaultSecondaryLocation</code></li>
  <li><code>earliestRestoreDate</code></li>
  <li><code>edition</code></li>
  <li><code>elasticPoolName</code></li>
  <li><code>isDataWarehouse</code></li>
  <li><code>maxSizeBytes</code></li>
  <li><code>name</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>sqlServerName</code></li>
  <li><code>status</code></li>
  <li><code>transparentDataEncryptionStatus</code></li>
  <li><code>type</code></li>
</ul>
<h3>azure/sql/elasticpool/ [#inventory-elasticpool]</h3>
<ul>
  <li><code>creationDate</code></li>
  <li><code>databaseDtuMax</code></li>
  <li><code>databaseDtuMin</code></li>
  <li><code>dtu</code></li>
  <li><code>edition</code></li>
  <li><code>name</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>sqlServerName</code></li>
  <li><code>state</code></li>
  <li><code>storageMb</code></li>
  <li><code>type</code></li>
</ul>
<h3>azure/sql/firewall [#inventory-firewall]</h3>
<ul>
  <li><code>endIpAddress</code></li>
  <li><code>name</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>sqlServerName</code></li>
  <li><code>startIpAddress</code></li>
</ul>
<h3>azure/sql/replication-link/ [#inventory-replication-link]</h3>
<ul>
  <li><code>databaseName</code></li>
  <li><code>name</code></li>
  <li><code>partnerDatabase</code></li>
  <li><code>partnerLocation</code></li>
  <li><code>regionName</code></li>
  <li><code>replicationState</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>role</code></li>
  <li><code>sqlServerName</code></li>
  <li><code>startTime</code></li>
</ul>
<h3>azure/sql/restore-point/ [#inventory-restore-point]</h3>
<ul>
  <li><code>databaseName</code></li>
  <li><code>earliestRestoreDate</code></li>
  <li><code>name</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>restorePointType</code></li>
  <li><code>sqlServerName</code></li>
</ul>
