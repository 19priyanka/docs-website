
<p><a href="/docs/infrastructure">New Relic infrastructure monitoring</a> provides an integration for <a href="https://docs.microsoft.com/en-us/azure/load-balancer/">Microsoft Azure Load Balancer</a> that reports data from your Azure Load Balancer service to New Relic. This document explains how to activate this integration and describes the data that can be captured.</p>
<h2>Features</h2>
<p>New Relic's integration for Azure Load Balancer reports metric data about TCP and UDP load balancers that distribute traffic among instances of services defined in a load-balanced set. Metric data include virtual IP and dynamic IP availability, and processed byte and packet counts. It also collects inventory data about the status and configuration of the service.</p>
<p>Using New Relic, you can:</p>
<ul>
  <li>View Azure Load Balancer data in pre-built Infrastructure dashboards.</li>
  <li><a href="/docs/using-new-relic/data/understand-data/query-new-relic-data">Run custom queries and visualize the data</a>.</li>
  <li>Create alert conditions to notify you of changes in data.</li>
</ul>
<h2>Requirements</h2>
<p>Load Balancer metrics are collected only if you use the Microsoft Load Balancer Standard SKU.</p>
<h2>Activate integration [#activate]</h2>
<p>To enable the integration:</p>
<ol>
  <li>Make sure you are using the <a href="#requirements">Microsoft Load Balancer Standard SKU</a>.</li>
  <li>Follow standard procedures to <a href="/docs/infrastructure/microsoft-azure-integrations/getting-started/activate-azure-integrations">activate your Azure service in New Relic Infrastructure</a>.</li>
</ol>
<h2>Configuration and polling [#polling]</h2>
<p>You can change the polling frequency and filter data using <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p>New Relic queries your Azure Load Balancer services according to a default <a href="/docs/integrations/microsoft-azure-integrations/getting-started/azure-integration-polling">polling</a> interval, which varies depending on the integration. Polling frequency for the Azure Load Balancer integration:</p>
<ul>
  <li>Polling interval: 5 minutes</li>
  <li>Resolution: 1 minute</li>
</ul>
<h2>Find and use data [#find-and-use]</h2>
<p>To <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">explore your integration data</a>, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure <a href="https://infrastructure.newrelic.com/"></a>> Azure > (select an integration)</strong>.</p>
<p>You can <a href="https://docs.newrelic.com/docs/using-new-relic/data/understand-data/query-new-relic-data">query and explore your data</a> using the <code>AzureLoadBalancerSample</code> <a href="/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>, with a <code>provider</code> value of <code>AzureLoadBalancer</code>.</p>
<h2>Metric data [#metrics]</h2>
<p>To view metrics reported by the Azure Load Balancer integration, query the <code>AzureLoadBalancerSample</code> event type. Use the metadata associated with each metric to <a href="/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#metric">filter and facet</a> the data being reported. For detailed metric information, see the <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/platform/metrics-supported#microsoftnetworkloadbalancers">Azure supported metrics</a> documentation.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Description</p>
      </div>
      <div>
        <p>Metadata</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>vipAvailability</code></p>
      </div>
      <div>
        <p>Average Load Balancer data path availability per time duration.</p>
      </div>
      <div>
        <p><code>frontendIPAddress</code></p>
        <p><code>frontendPort</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dipAvailability</code></p>
      </div>
      <div>
        <p>Average Load Balancer health probe status per time duration.</p>
      </div>
      <div>
        <p><code>frontendIPAddress</code></p>
        <p><code>frontendPort</code></p>
        <p><code>backendIPAddress</code></p>
        <p><code>backendPort</code></p>
        <p><code>protocolType</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>byteCount</code></p>
      </div>
      <div>
        <p>Total number of Bytes transmitted within time period.</p>
      </div>
      <div>
        <p><code>frontendIPAddress</code></p>
        <p><code>frontendPort</code></p>
        <p><code>direction</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>packetCount</code></p>
      </div>
      <div>
        <p>Total number of Packets transmitted within time period.</p>
      </div>
      <div>
        <p><code>frontendIPAddress</code></p>
        <p><code>frontendPort</code></p>
        <p><code>direction</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>synCount</code></p>
      </div>
      <div>
        <p>Total number of SYN Packets transmitted within time period.</p>
      </div>
      <div>
        <p><code>frontendIPAddress</code></p>
        <p><code>frontendPort</code></p>
        <p><code>direction</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>snatConnectionCount</code></p>
      </div>
      <div>
        <p>Total number of new SNAT connections, that is, outbound connections created within time period.</p>
      </div>
      <div>
        <p><code>frontendIPAddress</code></p>
        <p><code>backendIPAddress</code></p>
        <p><code>connectionState</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>allocatedSnatPorts</code></p>
      </div>
      <div>
        <p>Total number of SNAT ports allocated within time period.</p>
      </div>
      <div>
        <p><code>frontendIPAddress</code></p>
        <p><code>backendIPAddress</code></p>
        <p><code>protocolType</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>usedSnatPorts</code></p>
      </div>
      <div>
        <p>Total number of SNAT ports used within time period.</p>
      </div>
      <div>
        <p><code>frontendIPAddress</code></p>
        <p><code>backendIPAddress</code></p>
        <p><code>protocolType</code></p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p>This integration collects the following <a href="/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">inventory data</a> about your system's state and configuration.</p>
<h3>azure/loadbalancer [#inventory-load]</h3>
<ul>
  <li><code>name</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>sku</code></li>
  <li><code>type</code></li>
</ul>
<h3>azure/loadbalancer/backend-pool [#inventory-backend-pool]</h3>
<ul>
  <li><code>name</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>virtualMachineIds</code></li>
  <li><code>virtualMachineNames</code></li>
</ul>
<h3>azure/loadbalancer/frontend-ip [#inventory-frontend-ip]</h3>
<ul>
  <li><code>ipAddress</code></li>
  <li><code>ipAllocationMethod</code></li>
  <li><code>isPublicIp</code></li>
  <li><code>name</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
</ul>
<h3>azure/loadbalancer/inbound-nat-rule [#inventory-inbound-nat]</h3>
<ul>
  <li><code>backendPort</code></li>
  <li><code>floatingIpEnabled</code></li>
  <li><code>frontendPort</code></li>
  <li><code>name</code></li>
  <li><code>protocol</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>timeOutInMinutes</code></li>
</ul>
<h3>azure/loadbalancer/probe [#inventory-probe]</h3>
<ul>
  <li><code>intervalInSeconds</code></li>
  <li><code>name</code></li>
  <li><code>numberOfProbes</code></li>
  <li><code>port</code></li>
  <li><code>protocol</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
  <li><code>requestPath</code></li>
</ul>
<h3>azure/loadbalancer/rule [#inventory-rule]</h3>
<ul>
  <li><code>backendPort</code></li>
  <li><code>frontendPort</code></li>
  <li><code>idleTimeoutInMinutes</code></li>
  <li><code>isFloatingIp</code></li>
  <li><code>name</code></li>
  <li><code>protocol</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code></li>
</ul>
