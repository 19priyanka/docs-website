
<p><a href="/docs/infrastructure">New Relic infrastructure monitoring</a> provides an integration for <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/">Microsoft Azure Virtual Machines (VMs)</a> that reports data from your Azure VMs service to New Relic. This document explains how to activate this integration and describes the data that can be captured.</p>
<h2>Features</h2>
<p>New Relic's integration for Azure Virtual Machines reports data about your VMs service, like the VM ID, the VM size, the availability set, and the region name. You can monitor and alert on your Azure VMs data from <a href="/docs/infrastructure">New Relic</a>, and you can <a href="/docs/using-new-relic/data/understand-data/query-new-relic-data">create custom queries and chart dashboards</a>.</p>
<h2>Requirements</h2>
<p>Requirements include:</p>
<ul>
  <li><a href="/docs/infrastructure/new-relic-infrastructure/installation">New Relic infrastructure agent installed</a> with <a href="/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes">Infrastructure agent version 1.0.775</a> or higher. (<a href="/docs/infrastructure/new-relic-infrastructure/installation/update-infrastructure-agent">Update the infrastructure agent</a>.)</li>
  <li><a href="/docs/infrastructure/microsoft-azure-integrations/getting-started/activate-azure-integrations">New Relic Azure integrations activated</a></li>
</ul>
<h2>Activate integration [#requirements]</h2>
<p>To enable this integration follow standard procedures to <a href="/docs/infrastructure/microsoft-azure-integrations/getting-started/activate-azure-integrations">activate your Azure service in New Relic</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>You must install the infrastructure agent on each VM to see metrics from that host. Connecting your Azure subscription allows New Relic to access VM metadata.</p>
</div>
<h2>Configuration and polling [#polling]</h2>
<p>You can change the polling frequency and filter data using <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p>Default <a href="/docs/infrastructure/microsoft-azure-integrations/azure-integrations-list/azure-polling-intervals-infrastructure-integrations">polling</a> information for the Virtual Machines integration:</p>
<ul>
  <li>Polling interval: 5 minutes</li>
  <li>Resolution: 1 data point per minute</li>
</ul>
<h2>Find and use data [#find-and-use]</h2>
<p>To find your integration data, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > Azure</strong> and look for the integration.</p>
<p>You can <a href="https://docs.newrelic.com/docs/using-new-relic/data/understand-data/query-new-relic-data">query and explore your data</a> using the <code>AzureVirtualMachineSample</code> <a href="/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>. The <code>provider</code> value is <code>AzureVirtualMachine</code>.</p>
<p>For more on how to find and use integration data, see <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">Understand and use data</a>.</p>
<h2>Inventory data [#inventory]</h2>
<p>Inventory data is information about your system's state and configuration. For details on how to find and use inventory data, see <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data#inventory-data">Understand and use data</a>.</p>
<p>The Azure Virtual Machines integration reports this inventory data:</p>
<ul>
  <li><code>availabilitySet</code></li>
  <li><code>bootDiagnosticsEnabled</code></li>
  <li><code>image</code></li>
  <li><code>linuxConfiguration</code></li>
  <li><code>name</code></li>
  <li><code>networkInterfaces</code></li>
  <li><code>osDisk</code></li>
  <li><code>provisioningState</code></li>
  <li><code>regionName</code></li>
  <li><code>resourceGroupName</code> (deprecates <code>resourceGroup</code>)</li>
  <li><code>vmId</code></li>
  <li><code>vmSize</code></li>
  <li><code>windowsConfiguration</code></li>
</ul>
<h2>Other system data [#other-attributes]</h2>
<p>The Azure Virtual Machines integration also collects these <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#attribute">attributes</a> and others about the service and its configuration:</p>
<ul>
  <li>Region</li>
  <li>Availability zone</li>
  <li>Instance type</li>
  <li>Instance ID</li>
</ul>
<h2>Troubleshooting</h2>
<p>If you use <strong>Host not reporting</strong> alert conditions, the importing of Azure metadata for your VMs will change the hosts registry and result in false alert notifications. To prevent false positives:</p>
<ol>
  <li>For each Azure instance, <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-alert-conditions/infrastructure-alerts-add-edit-or-view-host-alert-information#maintain-alerts">disable</a> its <strong>Host not reporting</strong> alert condition.</li>
  <li><a href="/docs/infrastructure/new-relic-infrastructure/installation/update-infrastructure-agent">Update the infrastructure agent</a> for all instances that used this alert condition.</li>
  <li><a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-alert-conditions/infrastructure-alerts-add-edit-or-view-host-alert-information#maintain-alerts">Re-enable</a> each <strong>Host not reporting</strong> alert condition.</li>
</ol>
