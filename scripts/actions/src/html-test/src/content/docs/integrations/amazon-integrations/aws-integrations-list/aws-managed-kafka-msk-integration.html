
<p>New Relic offers an integration for collecting your <a href="https://aws.amazon.com/msk/">Amazon Web Services Managed Streaming for Apache Kafka</a> data. This document explains how to activate this integration and describes the data that can be reported.</p>
<h2>Activate integration [#activate]</h2>
<p>To enable this integration, follow standard procedures to <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure">connect AWS services to New Relic</a>.</p>
<h2>Configuration and polling [#polling]</h2>
<p>To change the polling frequency and filter data, use <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p>Default <a href="/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations">polling</a> information for the Amazon Managed Kafka integration:</p>
<ul>
  <li>New Relic polling interval: 5 minutes</li>
  <li>Amazon CloudWatch data interval: 1 minute</li>
</ul>
<h2>View and use data [#find-data]</h2>
<p>To view your integration data, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > AWS</strong> and select an integration.</p>
<p>You can <a href="https://docs.newrelic.com/docs/using-new-relic/data/understand-data/query-new-relic-data">query and explore your data</a> using the following <a href="https://docs.newrelic.com/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Entity</p>
      </div>
      <div>
        <p>Event Type</p>
      </div>
      <div>
        <p>Provider</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Cluster</p>
      </div>
      <div>
        <p><code>AwsMskClusterSample</code></p>
      </div>
      <div>
        <p><code>AwsMskCluster</code></p>
      </div>
    </div>
    <div>
      <div>
        <p>Broker</p>
      </div>
      <div>
        <p><code>AwsMskBrokerSample</code></p>
      </div>
      <div>
        <p><code>AwsMskBroker</code></p>
      </div>
    </div>
    <div>
      <div>
        <p>Topic</p>
      </div>
      <div>
        <p><code>AwsMskTopicSample</code></p>
      </div>
      <div>
        <p><code>AwsMskTopic</code></p>
      </div>
    </div>
  </div>
</div>
<p>For more on how to use your data, see <a href="https://docs.newrelic.com/docs/infrastructure/integrations/find-use-infrastructure-integration-data">Understand and use integration data</a>.</p>
<h2>Metric data [#metrics]</h2>
<p>This integration records Amazon Managed Kafka data for cluster, broker, and topic entities.</p>
<h3>Managed Kafka Cluster data</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Unit</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>activeControllerCount</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>Only one controller per cluster should be active at any given time.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>globalPartitionCount</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>Total number of partitions across all brokers in the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>globalTopicCount</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>Total number of topics across all brokers in the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>offlinePartitionsCount</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>Total number of partitions that are offline in the cluster.</p>
      </div>
    </div>
  </div>
</div>
<h3>Managed Kafka Broker data</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Unit</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>bytesInPerSec</code></p>
      </div>
      <div>
        <p>BytesPerSecond</p>
      </div>
      <div>
        <p>The number of bytes per second received from clients.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bytesOutPerSec</code></p>
      </div>
      <div>
        <p>BytesPerSecond</p>
      </div>
      <div>
        <p>The number of bytes per second sent to clients.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cpuSystem</code></p>
      </div>
      <div>
        <p>Percent</p>
      </div>
      <div>
        <p>The percentage of CPU in kernel space.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cpuUser</code></p>
      </div>
      <div>
        <p>Percent</p>
      </div>
      <div>
        <p>The percentage of CPU in user space.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>cpuIdle</code></p>
      </div>
      <div>
        <p>Percent</p>
      </div>
      <div>
        <p>The percentage of CPU idle time.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchConsumerLocalTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds that the consumer request is processed at the leader.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchConsumerRequestQueueTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds that the consumer request waits in the request queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchConsumerResponseQueueTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds that the consumer request waits in the response queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchConsumerResponseSendTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds for the consumer to send a response.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchConsumerTotalTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean total time in milliseconds that consumers spend on fetching data from the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchFollowerLocalTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds that the follower request is processed at the leader.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchFollowerRequestQueueTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds that the follower request waits in the request queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchFollowerResponseQueueTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds that the follower request waits in the response queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchFollowerResponseSendTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds for the follower to send a response.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchFollowerTotalTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean total time in milliseconds that followers spend on fetching data from the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchMessageConversionsPerSec</code></p>
      </div>
      <div>
        <p>CountPerSecond</p>
      </div>
      <div>
        <p>The number of fetch message conversions per second for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchThrottleTime</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The average fetch throttle time in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchThrottleByteRate</code></p>
      </div>
      <div>
        <p>BytesPerSecond</p>
      </div>
      <div>
        <p>The number of throttled bytes per second.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchThrottleQueueSize</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of messages in the throttle queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>kafkaAppLogsDiskUsed</code></p>
      </div>
      <div>
        <p>Percent</p>
      </div>
      <div>
        <p>The percentage of disk space used for application logs.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>kafkaDataLogsDiskUsed</code></p>
      </div>
      <div>
        <p>Percent</p>
      </div>
      <div>
        <p>The percentage of disk space used for data logs.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>leaderCount</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of leader replicas.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memoryBuffered</code></p>
      </div>
      <div>
        <p>Bytes</p>
      </div>
      <div>
        <p>The size in bytes of buffered memory for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memoryCached</code></p>
      </div>
      <div>
        <p>Bytes</p>
      </div>
      <div>
        <p>The size in bytes of cached memory for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memoryFree</code></p>
      </div>
      <div>
        <p>Bytes</p>
      </div>
      <div>
        <p>The size in bytes of memory that is free and available for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memoryUsed</code></p>
      </div>
      <div>
        <p>Bytes</p>
      </div>
      <div>
        <p>The size in bytes of memory that is in use for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>messagesInPerSec</code></p>
      </div>
      <div>
        <p>CountPerSecond</p>
      </div>
      <div>
        <p>The number of incoming messages per second for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>networkProcessorAvgIdlePercent</code></p>
      </div>
      <div>
        <p>Percent</p>
      </div>
      <div>
        <p>The average percentage of the time the network processors are idle.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>networkRxDropped</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of dropped receive packages.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>networkRxErrors</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of network receive errors for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>networkRxPackets</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of packets received by the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>networkTxDropped</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of dropped transmit packages.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>networkTxErrors</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of network transmit errors for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>networkTxPackets</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of packets transmitted by the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>partitionCount</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of partitions for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceLocalTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds for the follower to send a response.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceMessageConversionsPerSec</code></p>
      </div>
      <div>
        <p>CountPerSecond</p>
      </div>
      <div>
        <p>The number of produce message conversions per second for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceMessageConversionsTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds spent on message format conversions.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceRequestQueueTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds that request messages spend in the queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceResponseQueueTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds that response messages spend in the queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceResponseSendTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean time in milliseconds spent on sending response messages.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceTotalTimeMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The mean produce time in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceThrottleTime</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The average produce throttle time in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceThrottleByteRate</code></p>
      </div>
      <div>
        <p>BytesPerSecond</p>
      </div>
      <div>
        <p>The number of throttled bytes per second.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceThrottleQueueSize</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of messages in the throttle queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>requestBytesMean</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The mean number of request bytes for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>requestExemptFromThrottleTime</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The average time spent in broker network and I/O threads to process requests that are exempt from throttling.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>requestHandlerAvgIdlePercent</code></p>
      </div>
      <div>
        <p>Percent</p>
      </div>
      <div>
        <p>The average percentage of the time the request handler threads are idle.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>requestThrottleQueueSize</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of messages in the throttle queue.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>requestThrottleTime</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The average request throttle time in milliseconds.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>requestTime</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>The average time spent in broker network and I/O threads to process requests.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>rootDiskUsed</code></p>
      </div>
      <div>
        <p>Percent</p>
      </div>
      <div>
        <p>The percentage of the root disk used by the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>swapUsed</code></p>
      </div>
      <div>
        <p>Bytes</p>
      </div>
      <div>
        <p>The size in bytes of swap memory that is in use for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>swapFree</code></p>
      </div>
      <div>
        <p>Bytes</p>
      </div>
      <div>
        <p>The size in bytes of swap memory that is available for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>underMinIsrPartitionCount</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of under minIsr partitions for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>underReplicatedPartitions</code></p>
      </div>
      <div>
        <p>Count</p>
      </div>
      <div>
        <p>The number of under-replicated partitions for the broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>zooKeeperRequestLatencyMsMean</code></p>
      </div>
      <div>
        <p>Milliseconds</p>
      </div>
      <div>
        <p>Mean latency in milliseconds for ZooKeeper requests from broker.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>zooKeeperSessionState</code></p>
      </div>
      <div>
        <p>Other</p>
      </div>
      <div>
        <p>Connection status of broker's ZooKeeper session which may be one of the following: NOT_CONNECTED: '0.0', ASSOCIATING: '0.1', CONNECTING: '0.5', CONNECTEDREADONLY: '0.8', CONNECTED: '1.0', CLOSED: '5.0', AUTH_FAILED: '10.0'.</p>
      </div>
    </div>
  </div>
</div>
<h3>Managed Kafka Topic data</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Metric</p>
      </div>
      <div>
        <p>Unit</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>bytesInPerSec</code></p>
      </div>
      <div>
        <p>BytesPerSecond</p>
      </div>
      <div>
        <p>The number of bytes received per second.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>bytesOutPerSec</code></p>
      </div>
      <div>
        <p>BytesPerSecond</p>
      </div>
      <div>
        <p>The number of bytes sent per second.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>fetchMessageConversionsPerSec</code></p>
      </div>
      <div>
        <p>CountPerSecond</p>
      </div>
      <div>
        <p>The number of fetched messages converted per second.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>messagesInPerSec</code></p>
      </div>
      <div>
        <p>CountPerSecond</p>
      </div>
      <div>
        <p>The number of messages received per second.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>produceMessageConversionsPerSec</code></p>
      </div>
      <div>
        <p>CountPerSecond</p>
      </div>
      <div>
        <p>The number of conversions per second for produced messages.</p>
      </div>
    </div>
  </div>
</div>
