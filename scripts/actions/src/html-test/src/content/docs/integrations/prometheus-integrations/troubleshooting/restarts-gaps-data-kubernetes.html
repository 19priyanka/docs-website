
<h2>Problem</h2>
<p>When running the Prometheus OpenMetrics integration for Kubernetes, you notice restarts and gaps in data sent to New Relic.</p>
<h2>Solution</h2>
<p>When running the Prometheus OpenMetrics integration for Kubernetes with 500K data points per minute, be sure to set these limits:</p>
<ul>
  <li>CPU limit: 1 core</li>
  <li>Memory limit: 1Gb</li>
</ul>
<p><strong>Recommendation:</strong> Always run the Kubernetes scraper with <strong>one replica</strong>.</p>
<p>Adding more replicas will result in duplicated data. If the CPU and memory limits are not sufficient, this can result in restarts and gaps in the data.</p>
<p>To check the status and restart events for the scraper:</p>
<pre><code>kubectl describe pod -l "app=nri-prometheus"
</code></pre>
