
<h2>Problem</h2>
<p>You have installed the Prometheus OpenMetrics integration for Docker or Kubernetes, but no data appears in New Relic's UI.</p>
<h2>Solution</h2>
<p>Follow these troubleshooting tips for Docker or Kubernetes as applicable:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZG9ja2VyIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJEb2NrZXIgdHJvdWJsZXNob290aW5nIn1d">
    <div data-prop-text="title">Docker troubleshooting</div>
    <p>If you are having problems with the integration:</p>
    <ol>
      <li>
        <p>Check if the Prometheus OpenMetrics integration is running:</p>
        <pre><code>docker ps -f "name=nri-prometheus"
</code></pre>
      </li>
      <li>
        <p>Check the <code>Status</code> field for the container:</p>
        <pre><code>docker inspect nri-prometheus
</code></pre>
      </li>
      <li>
        <p>For more detailed information, use Docker <code>inspect</code>.</p>
        <p>If no data appears in New Relic's UI:</p>
      </li>
      <li>
        <p>Run this NRQL query:</p>
        <pre><code>docker logs nri-prometheus | grep "error emitting metrics"
</code></pre>
      </li>
      <li>
        <p>Check whether the log contains this:</p>
        <pre><code>metrics api responded with status code 403
</code></pre>
      </li>
      <li>
        <p>If yes, check the <code>LICENSE_KEY</code> in your Docker config file.</p>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoia3ViZXJuZXRlcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiS3ViZXJuZXRlcyB0cm91Ymxlc2hvb3RpbmcifV0=">
    <div data-prop-text="title">Kubernetes troubleshooting</div>
    <p>If you are having problems with the integration:</p>
    <ol>
      <li>
        <p>Check if the Prometheus OpenMetrics integration is running:</p>
        <pre><code>kubectl describe pod -l "app=nri-prometheus"
</code></pre>
      </li>
      <li>
        <p>Check the <code>Ready</code> field for the pod.</p>
      </li>
      <li>
        <p>If the pod is not ready, check the <code>Events</code>.</p>
        <p>If no data appears in New Relic's UI:</p>
      </li>
      <li>
        <p>Run this NRQL query:</p>
        <pre><code>kubectl logs deploy/nri-prometheus | grep "error emitting metrics"
</code></pre>
      </li>
      <li>
        <p>Check whether the log contains this message:</p>
        <pre><code>metrics api responded with status code 403
</code></pre>
      </li>
      <li>
        <p>If yes, check the <code>LICENSE_KEY</code> in your <code>nri-prometheus-latest.yaml</code> manifest file.</p>
      </li>
    </ol>
  </div>
</div>
