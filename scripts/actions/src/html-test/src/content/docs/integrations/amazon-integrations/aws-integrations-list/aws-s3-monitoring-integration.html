
<p><a href="https://docs.newrelic.com/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations">New Relic infrastructure integrations</a> include an integration for reporting your Amazon S3 data to New Relic. This document explains how to activate the integration and describes the data reported.</p>
<h2>Features</h2>
<p><a href="https://aws.amazon.com/s3">Amazon Simple Storage Service</a> (Amazon S3), provides developers and IT teams with secure, durable, highly-scalable cloud storage.</p>
<p>With New Relic's Amazon S3 integration, data reported includes S3 bucket size, bucket object counts, GET requests, POST requests, and other <a href="#metrics">metrics</a> and <a href="#inventory">inventory data</a>. S3 data is available in pre-built dashboards and you can also create custom queries and charts in <a href="https://docs.newrelic.com/docs/infrastructure/integrations-getting-started/getting-started/use-integration-data-new-relic-insights">New Relic One</a>. You can also create alert conditions to notify you of changes in S3 data.</p>
<h2>Activate integration [#activate]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p><a href="https://docs.aws.amazon.com/AmazonS3/latest/user-guide/configure-metrics.html">Request and Data Transfer</a> metrics are premium metrics and paid for separately through AWS. For Cloudwatch pricing information, see Amazon's <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/cloudwatch-monitoring.html">S3 enhanced monitoring</a> documentation.</p>
</div>
<p>To enable this integration follow standard procedures to <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure">Connect AWS services to New Relic</a>.</p>
<h2>Configuration and polling [#polling]</h2>
<p>You can change the polling frequency and filter data using <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p>Default <a href="/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations">polling</a> information for the Amazon S3 integration:</p>
<ul>
  <li>New Relic polling intervals:
    <ul>
      <li>S3 buckets: 1 hour</li>
      <li>S3 requests: 5 minutes</li>
    </ul>
  </li>
  <li>Amazon CloudWatch polling intervals:
    <ul>
      <li>S3 buckets: 24 hours</li>
      <li>S3 requests: 1 minute</li>
    </ul>
  </li>
</ul>
<p>Note that changing the polling interval for this integration will only affect data collection for S3 request metrics.</p>
<h2>Find and use data [#find-data]</h2>
<p>To find your integration data, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > AWS</strong> and select one of the S3 integration links.</p>
<p>You can <a href="https://docs.newrelic.com/docs/using-new-relic/data/understand-data/query-new-relic-data">query and explore your data</a> using the <code>DatastoreSample</code> <a href="https://docs.newrelic.com/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>, with a <code>provider</code> value of <code>S3Bucket</code>.</p>
<p>For more on how to use your data, see <a href="https://docs.newrelic.com/docs/infrastructure/integrations/find-use-infrastructure-integration-data">Understand integration data</a>.</p>
<h2>Metric data [#metrics]</h2>
<p>This integration collects the following Amazon S3 metrics. For more details about these metrics, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/cloudwatch-monitoring.html#s3-cloudwatch-metrics">Amazon's S3 documentation</a>.</p>
<h3>Amazon S3 data for buckets [#provider-S3Bucket]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Metric</strong></p>
      </div>
      <div>
        <p><strong>Description</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>BucketSizeBytes</code></p>
      </div>
      <div>
        <p>The amount of data in bytes stored in a bucket including Standard Storage, Reduced Redundancy Storage, Infrequent Access Storage (IAS), One zone IAS, and Glacier Storage including overheads.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>NumberOfObjects</code></p>
      </div>
      <div>
        <p>The total number of objects stored in a bucket for all storage classes except for the <code>GLACIER</code> storage class.</p>
      </div>
    </div>
  </div>
</div>
<h3>Amazon S3 data for request metrics [#provider-S3BucketRequests]</h3>
<p>To collect these metrics, you must enable request metrics for your S3 bucket:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Metric</strong></p>
      </div>
      <div>
        <p><strong>Description</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>AllRequests</code></p>
      </div>
      <div>
        <p>The total number of HTTP requests made to an Amazon S3 bucket, regardless of type. If youâ€™re using a metrics configuration with a filter, then this metric only counts HTTP requests from objects which meet the filter's requirements.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>GetRequests</code></p>
      </div>
      <div>
        <p>The number of HTTP GET requests made for objects in an Amazon S3 bucket. This doesn't include list operations.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>PutRequests</code></p>
      </div>
      <div>
        <p>The number of HTTP PUT requests made for objects in an Amazon S3 bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>DeleteRequests</code></p>
      </div>
      <div>
        <p>The number of HTTP DELETE requests made for objects in an Amazon S3 bucket. This also includes <a href="http://docs.aws.amazon.com/AmazonS3/latest/API/multiobjectdeleteapi.html">Delete Multiple Objects</a> requests. This metric shows the number of requests, not the number of objects deleted.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>HeadRequests</code></p>
      </div>
      <div>
        <p>The number of HTTP HEAD requests made to an Amazon S3 bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>PostRequests</code></p>
      </div>
      <div>
        <p>The number of HTTP POST requests made to an Amazon S3 bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>ListRequests</code></p>
      </div>
      <div>
        <p>The number of HTTP requests that list the contents of a bucket.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>BytesDownloaded</code></p>
      </div>
      <div>
        <p>The number bytes downloaded for requests made to an Amazon S3 bucket, where the response includes a body.</p>
        <p>Valid statistics: Average (bytes per request), Sum (bytes per period), Sample Count, Min, Max</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>BytesUploaded</code></p>
      </div>
      <div>
        <p>The number bytes uploaded that contain a request body, made to an Amazon S3 bucket.</p>
        <p>Valid statistics: Average (bytes per request), Sum (bytes per period), Sample Count, Min, Max</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>4xxErrors</code></p>
      </div>
      <div>
        <p>The number of HTTP 4xx client error status code requests made to an Amazon S3 bucket with a value of either <code>0</code> or <code>1</code>. The <code>average</code> statistic shows the error rate, and the <code>sum</code> statistic shows the count of that type of error, during each period.</p>
        <p>Valid statistics: Average (reports per request), Sum (reports per period), Min, Max, Sample Count</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>5xxErrors</code></p>
      </div>
      <div>
        <p>The number of HTTP 5xx server error status code requests made to an Amazon S3 bucket with a value of either <code>0</code> or <code>1</code>. The <code>average</code>statistic shows the error rate, and the <code>sum</code> statistic shows the count of that type of error, during each period.</p>
        <p>Valid statistics: Average (reports per request), Sum (reports per period), Min, Max, Sample Count</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>FirstByteLatency</code></p>
      </div>
      <div>
        <p>The per-request time, in milliseconds, from the time the S3 bucket received a complete request to the time the response started to be returned.</p>
        <p>Valid statistics: Average, Sum, Min, Max, Sample Count</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>TotalRequestLatency</code></p>
      </div>
      <div>
        <p>The elapsed per-request time, in milliseconds, from the first byte received to the last byte sent to an Amazon S3 bucket. This includes the time taken to receive the request body and send the response body, which is not included in <code>FirstByteLatency</code>.</p>
        <p>Valid statistics: Average, Sum, Min, Max, Sample Count</p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p>This integration collects the following inventory data. For more about inventory data, see <a href="https://docs.newrelic.com/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">Understand integration data</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>In order to fetch inventory data for the following items, you must have <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations#extended">extended inventory collection</a> turned on:</p>
  <ul>
    <li><code>/bucket/acl</code></li>
    <li><code>/bucket/loggingConfiguration</code></li>
    <li><code>/bucket/notificationConfiguration/configurations</code></li>
    <li><code>/bucket/policy</code></li>
    <li><code>/bucket/replicationConfiguration</code></li>
    <li><code>/bucket/versioningConfiguration</code></li>
    <li><code>/bucket/websiteConfiguration</code></li>
    <li><code>/bucket/lifecycleConfiguration</code></li>
    <li><code>/bucket/crossOriginConfiguration</code></li>
  </ul>
</div>
<h3>/bucket</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>region</code></p>
      </div>
      <div>
        <p>The AWS region this bucket is provisioned in.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>name</code></p>
      </div>
      <div>
        <p>Name of the S3 bucket.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/acl [#bucket-acl]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>grantList</code></p>
      </div>
      <div>
        <p>This property holds the list of accounts that have been granted access according to the S3 Access Control List (ACL) for the bucket. JSON format. For more about ACLs, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html">Amazon's ACL documentation</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>isRequesterCharged</code></p>
      </div>
      <div>
        <p>True if the requestor pays, false if not. For more information, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/RequesterPaysBuckets.html">Amazon's documentation on requester-pays buckets</a>.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/acl/owner [#bucket-acl-owner]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>displayName</code></p>
      </div>
      <div>
        <p>Name of the account that owns this bucket according to the S3 Acccess Control list (ACL). JSON format. For more about ACLs, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html">Amazon's ACL documentation</a>.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/crossOriginConfiguration [#bucket-crossOriginConfiguration]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>rules</code></p>
      </div>
      <div>
        <p>Cross origin resource sharing (CORS) rules defining what domains may share the data in the bucket. JSON format. For more about CORS, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html">Amazon's CORS documentation</a>.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/lifecycleConfiguration [#bucket-lifecycleConfiguration]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>rules</code></p>
      </div>
      <div>
        <p>Lifecycle configuration rules for data storage management. JSON format. For more about life-cycle configuration, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html">Amazon's lifecycle configuration documentation</a>.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/loggingConfiguration [#bucket-loggingConfiguration]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>rules</code></p>
      </div>
      <div>
        <p>Access logging configuration in JSON format. Access log records provide information about each access request, including the requester, bucket name, request time, and error code, if any. For more about logging configuration, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/ServerLogs.html">Amazon's server access logging documentation</a>.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/notificationConfiguration/configurations</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>events</code></p>
      </div>
      <div>
        <p>The bucket event for which to send notifications, for a certain notification configuration.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>*Arn</code></p>
      </div>
      <div>
        <p>Resource ARN that Amazon S3 will use when it detects events of the specified type (i.e, an SNS topic, an SQS queue or a Lambda function).</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/policy [#bucket-policy]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>policyText</code></p>
      </div>
      <div>
        <p>Bucket policy as well as user policy are two access policy options that you can use to grant permission to your Amazon S3 resources. JSON format. For more about bucket policy, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/using-iam-policies.html">Amazon's bucket policy documentation</a>.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/replicationConfiguration [#bucket-loggingConfiguration]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>rules</code></p>
      </div>
      <div>
        <p>Replication configuration of the bucket in JSON format.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/taggingConfiguration [#bucket-taggingConfiguration]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>tagSets</code></p>
      </div>
      <div>
        <p>Tags can be used to organize your AWS billing to reflect your own cost structure. JSON format. For more about tags, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketBilling.html">Amazon's tag documentation</a>.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/versioningConfiguration [#bucket-versioningConfiguration]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>status</code></p>
      </div>
      <div>
        <p>This indicates if versioning of the data in the S3 bucket is "Enabled" or "Suspended" For more about versioning, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/Versioning.html">Amazon's versioning documentation</a>.</p>
      </div>
    </div>
  </div>
</div>
<h3>/bucket/websiteConfiguration [#bucket-websiteConfiguration]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>indexDocumentSuffix</code></p>
      </div>
      <div>
        <p>When you configure your bucket as a website, you should provide the name of the index document. <code>indexDocumentSuffix</code> is the suffix appended to a request for a directory on the website endpoint. (For example, if the suffix is <code>index.html</code> and you make a request to <code>samplebucket/images/</code>, the data returned will be for the object with the key name <code>images/index.html</code>) The suffix must not be empty and must not include a slash character. For more on configuring a bucket as a static website, see <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/HostingWebsiteOnS3Setup.html">Amazon's example of setting up a static website</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>routingRules</code></p>
      </div>
      <div>
        <p><code>RedirectRule</code> is a property of the <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-websiteconfiguration-routingrules.html">Amazon S3 website configuration routing rules property</a> that describes how requests are redirected. You can specify a different error code to return in the event an error occurs.</p>
      </div>
    </div>
  </div>
</div>
