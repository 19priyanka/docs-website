
<p><a href="/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations">New Relic infrastructure integrations</a> include an integration for reporting your <a href="https://aws.amazon.com/emr/">Amazon EMR (Elastic MapReduce)</a> data to New Relic. This document explains how to activate this integration and describes the data that can be reported.</p>
<h2>Features</h2>
<p>You can monitor and alert on your EMR data directly from <a href="/docs/infrastructure">New Relic</a>, and query data and create dashboards.</p>
<h2>Activate integration [#activate]</h2>
<p>To enable this integration follow standard procedures to <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure">Connect AWS services to New Relic</a>.</p>
<h2>Configuration and polling [#polling]</h2>
<p>You can change the polling frequency and filter data using <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations">configuration options</a>.</p>
<p><a href="/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations">Default polling</a> information for the Amazon EMR integration:</p>
<ul>
  <li>New Relic polling interval: 5 minutes</li>
  <li>Resolution: 1 data point every 5 minutes</li>
</ul>
<h2>Explore integration data [#find-data]</h2>
<p>To use your <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">integration data</a>, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > AWS</strong> and select one of the EMR integration links.</p>
<p>You can <a href="https://docs.newrelic.com/docs/using-new-relic/data/understand-data/query-new-relic-data">query and explore your data</a> using the <code>ElasticMapReduceClusterSample</code> <a href="/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event type</a>, with a <code>provider</code> value of <code>ElasticMapReduceCluster</code>.</p>
<h2>Metric data [#metrics]</h2>
<p>This New Relic Infrastructure integration collects the following Amazon EMR data. For use cases and additional information, see <a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/UsingEMR_ViewingMetrics.html#UsingEMR_ViewingMetrics_MetricsReported">Amazon's EMR documentation</a>.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>isIdle</code></p>
      </div>
      <div>
        <p>Indicates that a cluster is no longer performing work, but is still alive and accruing charges. It is set to 1 if no tasks are running and no jobs are running, and set to 0 otherwise.</p>
        <p>This value is checked at five-minute intervals, and a value of 1 indicates only that the cluster was idle when checked, not that it was idle for the entire five minutes. <strong>Recommendation:</strong> To avoid false positives, raise an alerting threshold when this value has been 1 for more than one consecutive five-minute check. For example, raise an alert on this value if it has been 1 for thirty minutes or longer.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>coreNodesRunning</code></p>
      </div>
      <div>
        <p>The number of core nodes working. Data points for this metric are reported only when a corresponding instance group exists.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>coreNodesPending</code></p>
      </div>
      <div>
        <p>The number of core nodes waiting to be assigned. All of the core nodes requested may not be immediately available; this metric reports the pending requests. Data points for this metric are reported only when a corresponding instance group exists.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>liveDataNodesPercentage</code></p>
      </div>
      <div>
        <p>The percentage of data nodes that are receiving work from Hadoop.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>s3WrittenBytes</code></p>
      </div>
      <div>
        <p>The number of bytes written to Amazon S3. This metric aggregates MapReduce jobs only. It does not apply for other workloads on EMR.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>s3ReadBytes</code></p>
      </div>
      <div>
        <p>The number of bytes read from Amazon S3. This metric aggregates MapReduce jobs only, and does not apply for other workloads on EMR.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>hdfsUtilizationPercentage</code></p>
      </div>
      <div>
        <p>The percentage of HDFS storage currently used.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>hdfsReadBytes</code></p>
      </div>
      <div>
        <p>The number of bytes read from HDFS.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>hdfsWrittenBytes</code></p>
      </div>
      <div>
        <p>The number of bytes written to HDFS.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>missingBlocks</code></p>
      </div>
      <div>
        <p>The number of blocks in which HDFS has no replicas. These might be corrupt blocks.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>totalLoad</code></p>
      </div>
      <div>
        <p>The current, total number of readers and writers reported by all DataNodes in a cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mostRecentBackupDurationMinutes</code></p>
      </div>
      <div>
        <p>The amount of time it took the previous backup to complete. This metric is set regardless of whether the last completed backup succeeded or failed.</p>
        <p>While the backup is ongoing, this metric returns the number of minutes after the backup started. This metric is only reported for HBase clusters.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>timeSinceLastSuccessfulBackupMinutes</code></p>
      </div>
      <div>
        <p>The number of elapsed minutes after the last successful HBase backup started on your cluster. This metric is only reported for HBase clusters.</p>
      </div>
    </div>
  </div>
</div>
<p>The following metrics appear in the sample depending on the Hadoop version of the resource.</p>
<h3>Hadoop 1 AMIs metrics [#hadoop-1]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>jobsRunning</code></p>
      </div>
      <div>
        <p>The number of jobs in the cluster that are currently running.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>jobsFailed</code></p>
      </div>
      <div>
        <p>The number of jobs in the cluster that have failed.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mapTasksRunning</code></p>
      </div>
      <div>
        <p>The number of running map tasks for each job. If you have a scheduler installed and multiple jobs running, multiple graphs are generated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mapTasksRemaining</code></p>
      </div>
      <div>
        <p>The number of remaining map tasks for each job. If you have a scheduler installed and multiple jobs running, multiple graphs are generated. A remaining map task is one that is not in any of the following states: <code>Running</code>, <code>Killed</code>, or <code>Completed</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mapSlotsOpen</code></p>
      </div>
      <div>
        <p>The unused map task capacity. This is calculated as the maximum number of map tasks for a given cluster, less the total number of map tasks currently running in that cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>remainingMapTasksPerSlot</code></p>
      </div>
      <div>
        <p>The ratio of the total map tasks remaining to the total map slots available in the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>reduceTasksRunning</code></p>
      </div>
      <div>
        <p>The number of running reduce tasks for each job. If you have a scheduler installed and multiple jobs running, multiple graphs are generated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>reduceTasksRemaining</code></p>
      </div>
      <div>
        <p>The number of running reduce tasks for each job. If you have a scheduler installed and multiple jobs running, multiple graphs are generated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>reduceSlotsOpen</code></p>
      </div>
      <div>
        <p>Unused reduce task capacity. This is calculated as the maximum reduce task capacity for a given cluster, less the number of reduce tasks currently running in that cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>taskNodesRunning</code></p>
      </div>
      <div>
        <p>The number of task nodes working. Data points for this metric are reported only when a corresponding instance group exists.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>taskNodesPending</code></p>
      </div>
      <div>
        <p>The number of core nodes waiting to be assigned. All of the task nodes requested may not be immediately available; this metric reports the pending requests. Data points for this metric are reported only when a corresponding instance group exists.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>liveTaskTrackersPercentage</code></p>
      </div>
      <div>
        <p>The percentage of task trackers that are functional.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>backupFailed</code></p>
      </div>
      <div>
        <p>Whether the last backup failed. This is set to 0 by default and updated to 1 if the previous backup attempt failed. This metric is only reported for HBase clusters.</p>
      </div>
    </div>
  </div>
</div>
<h3>Hadoop 2 AMIs metrics [#hadoop-2]</h3>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>containerAllocated</code></p>
      </div>
      <div>
        <p>The number of resource containers allocated by the ResourceManager.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>containerReserved</code></p>
      </div>
      <div>
        <p>The number of resource containers allocated by the ResourceManager.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>containerPending</code></p>
      </div>
      <div>
        <p>The number of containers in the queue that have not yet been allocated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>containerPendingRatio</code></p>
      </div>
      <div>
        <p>The ratio of pending containers to containers allocated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>appsCompleted</code></p>
      </div>
      <div>
        <p>The number of applications submitted to YARN that have completed.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>appsFailed</code></p>
      </div>
      <div>
        <p>The number of applications submitted to YARN that have failed to complete.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>appsKilled</code></p>
      </div>
      <div>
        <p>The number of applications submitted to YARN that have been killed.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>appsPending</code></p>
      </div>
      <div>
        <p>The number of applications submitted to YARN that are in a pending state.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>appsRunning</code></p>
      </div>
      <div>
        <p>The number of applications submitted to YARN that are running.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>appsSubmitted</code></p>
      </div>
      <div>
        <p>The number of applications submitted to YARN.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mrTotalNodes</code></p>
      </div>
      <div>
        <p>The number of nodes presently available to MapReduce jobs.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mrActiveNodes</code></p>
      </div>
      <div>
        <p>The number of nodes presently running MapReduce tasks or jobs.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mrLostNodes</code></p>
      </div>
      <div>
        <p>The number of nodes allocated to MapReduce that have been marked in a LOST state.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mrUnhealthyNodes</code></p>
      </div>
      <div>
        <p>The number of nodes available to MapReduce jobs marked in an UNHEALTHY state.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mrDecommissionedNodes</code></p>
      </div>
      <div>
        <p>The number of nodes allocated to MapReduce applications that have been marked in a DECOMMISSIONED state.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>mrRebootedNodes</code></p>
      </div>
      <div>
        <p>The number of nodes available to MapReduce that have been rebooted and marked in a REBOOTED state.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>corruptBlocks</code></p>
      </div>
      <div>
        <p>The number of blocks that HDFS reports as corrupted.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memoryTotalBytes</code></p>
      </div>
      <div>
        <p>The total amount of memory in the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memoryReservedBytes</code></p>
      </div>
      <div>
        <p>The amount of memory reserved.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memoryAvailableBytes</code></p>
      </div>
      <div>
        <p>The amount of memory available to be allocated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>memoryAllocatedBytes</code></p>
      </div>
      <div>
        <p>The amount of memory allocated to the cluster.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>yarnMemoryAvailablePercentage</code></p>
      </div>
      <div>
        <p>The percentage of remaining memory available to YARN</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>underReplicatedBlocks</code></p>
      </div>
      <div>
        <p>The number of blocks that need to be replicated one or more times.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dfsPendingReplicationBlocks</code></p>
      </div>
      <div>
        <p>The status of block replication: blocks being replicated, age of replication requests, and unsuccessful replication requests.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>capacityRemainingBytes</code></p>
      </div>
      <div>
        <p>The amount of remaining HDFS disk capacity.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>hbaseBackupFailed</code></p>
      </div>
      <div>
        <p>Whether the last backup failed. This is set to 0 by default and updated to 1 if the previous backup attempt failed. This metric is only reported for HBase clusters.</p>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data [#inventory]</h2>
<p><a href="/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data">Inventory data</a> provides information about the service's state and configuration. EMR configuration options are reported as inventory data.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p><a href="#cluster_metadata">Cluster</a> data indicated with an <strong>*</strong> and all <a href="#instance_metadata">instance</a>, <a href="#instance_fleet_metadata">instance-fleet</a>, and <a href="#instance_group_metadata">instance-group</a> metadata are only fetched if <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations#extended">extended inventory collection</a> is on.</p>
</div>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Object</p>
      </div>
      <div>
        <p>Inventory data</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><strong><a href="https://docs.aws.amazon.com/emr/latest/APIReference/API_Cluster.html">aws/emr/cluster</a></strong></p>
      </div>
      <div>
        <p><code>id</code></p>
        <p><code>name</code></p>
        <p><code>status</code></p>
        <p><code>normalizedInstanceHours</code></p>
        <p><code>tags</code>*</p>
        <p><code>applications</code>*</p>
        <p><code>autoScalingRole</code>*</p>
        <p><code>autoTerminate</code>*</p>
        <p><code>configurations</code>*</p>
        <p><code>customAmiId</code>*</p>
        <p><code>ebsRootVolumeSize</code>*</p>
        <p><code>ec2InstanceAttributes</code>*</p>
        <p><code>instanceCollectionType</code>*</p>
        <p><code>logUri</code>*</p>
        <p><code>masterPublicDnsName</code>*</p>
        <p><code>releaseLabel</code>*</p>
        <p><code>repoUpgradeOnBoot</code>*</p>
        <p><code>requestedAmiVersion</code>*</p>
        <p><code>runningAmiVersion</code>*</p>
        <p><code>scaleDownBehavior</code>*</p>
        <p><code>securityConfiguration</code>*</p>
        <p><code>serviceRole</code>*</p>
        <p><code>terminationProtected</code>*</p>
        <p><code>visibleToAllUsers</code>*</p>
      </div>
    </div>
    <div>
      <div>
        <p><strong><a href="https://docs.aws.amazon.com/emr/latest/APIReference/API_Instance.html">aws/emr/instance</a></strong></p>
      </div>
      <div>
        <p><code>id</code></p>
        <p><code>ec2InstanceId</code></p>
        <p><code>instanceFleetId</code></p>
        <p><code>instanceGroupId</code></p>
        <p><code>instanceType</code></p>
        <p><code>privateDnsName</code></p>
        <p><code>privateIpAddress</code></p>
        <p><code>publicDnsName</code></p>
        <p><code>publicIpAddress</code></p>
        <p><code>status</code></p>
        <p><code>ebsVolumes</code></p>
        <p><code>market</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><strong><a href="https://docs.aws.amazon.com/emr/latest/APIReference/API_InstanceFleet.html">aws/emr/instance-fleet</a></strong></p>
      </div>
      <div>
        <p><code>id</code></p>
        <p><code>name</code></p>
        <p><code>status</code></p>
        <p><code>instanceFleetType</code></p>
        <p><code>instanceTypeSpecifications</code></p>
        <p><code>launchSpecifications</code></p>
        <p><code>provisionedOnDemandCapacity</code></p>
        <p><code>provisionedSpotCapacity</code></p>
        <p><code>targetOnDemandCapacity</code></p>
        <p><code>targetSpotCapacity</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><strong><a href="https://docs.aws.amazon.com/emr/latest/APIReference/API_InstanceGroup.html">aws/emr/instance-group</a></strong></p>
      </div>
      <div>
        <p><code>id</code></p>
        <p><code>name</code></p>
        <p><code>status</code></p>
        <p><code>instanceType</code></p>
        <p><code>instanceGroupType</code></p>
        <p><code>autoScalingPolicy</code></p>
        <p><code>bidPrice</code></p>
        <p><code>configurations</code></p>
        <p><code>ebsBlockDevices</code></p>
        <p><code>ebsOptimized</code></p>
        <p><code>market</code></p>
        <p><code>requestedInstanceCount</code></p>
        <p><code>runningInstanceCount</code></p>
        <p><code>shrinkPolicy</code></p>
      </div>
    </div>
  </div>
</div>
