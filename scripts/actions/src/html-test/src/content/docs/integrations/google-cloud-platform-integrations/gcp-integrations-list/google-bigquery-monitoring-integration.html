
<p>New Relic's integrations with the <a href="https://cloud.google.com/">Google Cloud Platform (GCP)</a> include an integration to report <a href="https://cloud.google.com/bigquery/">Google BigQuery</a> data to New Relic. This document explains how to activate the Google BigQuery integration and describes the data that can be reported.</p>
<h2>Features</h2>
<p>Google BigQuery is a data warehouse with no infrastructure to manage. With BigQuery you can specify the data schema, or allow the service to discover it for you. You can explore your data using SQL queries.</p>
<h2>Activate integration [#activate]</h2>
<p>To enable the integration follow standard procedures to <a href="https://docs.newrelic.com/docs/connect-google-cloud-platform-services-infrastructure">connect your GCP service to New Relic</a>.</p>
<h2>Polling frequency [#polling]</h2>
<p>New Relic integrations query GCP services according to a polling interval that varies depending on the integration. The polling frequency for the Google BigQuery integration is five minutes. For information about the resolution, see <a href="#metrics">metric data details</a>.</p>
<h2>Find and use data [#find-data]</h2>
<p>After activating the integration and waiting a few minutes (based on the <a href="#polling">polling frequency</a>), data will appear in the New Relic UI. To <a href="/docs/infrastructure/integrations/find-use-infrastructure-integration-data">find and use your data</a>, including links to your dashboards and alert settings, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > GCP > (select an integration)</strong>.</p>
<h2>Metric data [#metrics]</h2>
<p>To view <a href="/docs/integrations/new-relic-integrations/getting-started/understand-use-data-infrastructure-integrations#metric">metric data</a> for your Google BigQuery integration in New Relic, <a href="/docs/integrations/new-relic-integrations/getting-started/use-integration-data-new-relic-insights#nrql">create NRQL queries</a> for <code>GcpBigQueryProjectSample</code>, <code>GcpBigQueryDatasetSample</code>, and <code>GcpBigQueryTableSample</code> <a href="/docs/using-new-relic/welcome-new-relic/getting-started/glossary#event">events</a> and their attributes.</p>
<h3>GcpBigQueryProjectSample [#project-sample]</h3>
<p>Query <code>GcpBigQueryProjectSample</code> events in New Relic to view data for the following metrics. Resolution is one data point per minute with an 8-minute delay.</p>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Attribute</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>query.Count</code></p>
        </div>
        <div>
          <p>In-flight queries.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>query.ExecutionTimes</code></p>
        </div>
        <div>
          <p>Distribution of query execution times.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>slots.Allocated</code></p>
        </div>
        <div>
          <p>Number of slots currently allocated for project.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>slots.AllocatedForProject</code></p>
        </div>
        <div>
          <p>Number of slots currently allocated for query jobs in the project.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>slots.AllocatedForProjectAndJobType</code></p>
        </div>
        <div>
          <p>Number of slots currently allocated for the project and job type.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>slots.AllocatedForReservation</code></p>
        </div>
        <div>
          <p>Number of slots currently allocated for project in the reservation.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>slots.TotalAllocatedForReservation</code></p>
        </div>
        <div>
          <p>Number of slots currently allocated across projects in the reservation.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>slots.TotalAvailable</code></p>
        </div>
        <div>
          <p>Total number of slots available for the project.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<h3>GcpBigQueryDatasetSample [#dataset-sample]</h3>
<p>Query <code>GcpBigQueryDatasetSample</code> events in New Relic to view data for the following metrics. Resolution is one data point every 30 minutes with a 3-hour delay.</p>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Attribute</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>storage.StoredBytes</code></p>
        </div>
        <div>
          <p>Amount of stored bytes.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>storage.Tables</code></p>
        </div>
        <div>
          <p>Number of tables.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<h3>GcpBigQueryTableSample [#table-sample]</h3>
<p>Query <code>GcpBigQueryTableSample</code> events in Insights to view data for the following metrics. Resolution is one data point per minute with a 6-hour delay.</p>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Attribute</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>storage.UploadedBytes</code></p>
        </div>
        <div>
          <p>Uploaded bytes.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>storage.UploadedBytesBilled</code></p>
        </div>
        <div>
          <p>Uploaded bytes billed. Currently only streaming API is billed.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>storage.UploadedRowCount</code></p>
        </div>
        <div>
          <p>Uploaded rows.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<h2>Inventory data</h2>
<p>To view <a href="/docs/integrations/new-relic-integrations/getting-started/understand-use-data-infrastructure-integrations#inventory-data">inventory data</a> for Google BigQuery services, go to <a href="http://one.newrelic.com"><strong>one.newrelic.com</strong></a> <strong>> Infrastructure > Inventory</strong> and search for or select the following attributes.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>Data indicated with an asterisk <code>*</code> are only fetched when the GCP project is linked to New Relic through a service account, and when <a href="/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations#extended">extended inventory collection</a> is on.</p>
</div>
<h3>gcp/bigquery/project</h3>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Name</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>projectId</code></p>
        </div>
        <div>
          <p>The ID of the project.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<h3>gcp/bigquery/dataset</h3>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Name</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>projectId</code></p>
        </div>
        <div>
          <p>The ID of the project.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>name</code></p>
        </div>
        <div>
          <p>The region where the instance is.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>zone*</code></p>
        </div>
        <div>
          <p>The location of the dataset.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>description*</code></p>
        </div>
        <div>
          <p>Description of the dataset.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>creationTime*</code></p>
        </div>
        <div>
          <p>Timestamp when the dataset was created.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>lastModified*</code></p>
        </div>
        <div>
          <p>Last time the dataset or any of its tables was modified.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>defaultTableLifeTime*</code></p>
        </div>
        <div>
          <p>Default lifetime of all tables in the dataset in milliseconds.</p>
        </div>
      </div>
      <div>
        <div>
          <p>friendlyName*</p>
        </div>
        <div>
          <p>User-friendly name for the dataset.</p>
        </div>
      </div>
      <div>
        <div>
          <p>selfLink*</p>
        </div>
        <div>
          <p>URL to access the resource.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>labels*</code></p>
        </div>
        <div>
          <p>Labels of the dataset.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<h3>gcp/bigquery/table</h3>
<div>
  <div data-component="Table" data-prop="W10=">
    <div>
      <div>
        <div>
          <p>Name</p>
        </div>
        <div>
          <p>Description</p>
        </div>
      </div>
    </div>
    <div>
      <div>
        <div>
          <p><code>projectId</code></p>
        </div>
        <div>
          <p>The ID of the project.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>dataSetId</code></p>
        </div>
        <div>
          <p>The ID of the dataset.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>name</code></p>
        </div>
        <div>
          <p>The ID of the table.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>zone*</code></p>
        </div>
        <div>
          <p>The location of the table.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>creationTime*</code></p>
        </div>
        <div>
          <p>Timestamp when the table was created.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>type*</code></p>
        </div>
        <div>
          <p>The table type.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>description*</code></p>
        </div>
        <div>
          <p>The description of the table.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>expirationTime*</code></p>
        </div>
        <div>
          <p>Timestamp when the table will expire.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>friendlyName*</code></p>
        </div>
        <div>
          <p>User-friendly name for the table.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>selfLink*</code></p>
        </div>
        <div>
          <p>URL to access the resource.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>labels*</code></p>
        </div>
        <div>
          <p>Labels of the table.</p>
        </div>
      </div>
      <div>
        <div>
          <p><code>lastModified*</code></p>
        </div>
        <div>
          <p>Time when the table was last modified.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<h2>Notes</h2>
<p>As of November 20, 2018, for the metric <code>storage/uploaded_bytes_billed</code>, information is only available if data is uploaded to BigQuery via streaming.</p>
