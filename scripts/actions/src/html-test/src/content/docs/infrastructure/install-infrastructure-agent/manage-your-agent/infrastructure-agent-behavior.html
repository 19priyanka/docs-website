
<p>With the infrastructure agent, you can monitor not only individual servers, but also understand how your service performs as a whole. The agent supports Amazon Linux, CentOS, Debian, RHEL, and Ubuntu as well as <a href="https://docs.newrelic.com/docs/infrastructure-install-windows-server">Windows Server</a>. All of these agent versions exhibit a common set of behaviors.</p>
<h2>Agent service [#service]</h2>
<p>As of infrastructure agent <a href="/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1559">v1.5.59</a>, the agent bundles a binary named <code>newrelic-infra-service</code>. This binary can be managed by the OS service manager.</p>
<p>At service startup time, this binary spawns (executes) the usual <code>newrelic-infra</code> process and supervises its child execution. Therefore agent service process should never be restarted, unless triggered via OS service manager.</p>
<h2>Agent startup [#startup]</h2>
<p>During startup the agent will:</p>
<ul>
  <li>Register a signal handler.</li>
  <li>Set the loggers.</li>
  <li>Load the configuration from file, environment variables, and call arguments.</li>
  <li>Register plugins for harvesting inventory, samplers, and integrations.</li>
  <li>StatsD integration with <code>http_server_enabled</code>" Open an http port (by default, 8001) for receiving data.</li>
</ul>
<p>Startup duration before harvesting and sending data is usually less than six seconds.</p>
<h2>Monitoring and resource caps [#monitoring-resource-caps]</h2>
<p>By default, the infrastructure agent runs in a single core. Every second it checks if there are events to send and, if there are, it sends them to the <a href="/docs/using-new-relic/welcome-new-relic/getting-started/glossary#collector">New Relic collector</a>. Events that may be sent include:</p>
<ul>
  <li>Default infrastructure events</li>
  <li>Events recorded by <a href="/docs/integrations">New Relic integrations</a>.</li>
</ul>
<p>For descriptions of the default infrastructure events and their collection frequencies, see <a href="/docs/infrastructure/new-relic-infrastructure/data-instrumentation/default-infrastructure-attributes-events#h2-Infrastructure-events">Infrastructure events</a>.</p>
<h3>Integration data</h3>
<p>Integration monitoring is done by executing integration commands at given intervals (set in the config files) and reading their <code>stout/err</code>. The more integrations you enable, the greater the footprint of the agent. For more information, see the <a href="/docs/integrations">documentation for specific integrations</a>.</p>
<h2>Agent shutdown [#shutdown]</h2>
<p>When a shutdown signal is received, the agent stops all the registered plugins and integration processes.</p>
<h2>Maintenance</h2>
<p>The agent runs as a service. On installation, we set up all the service manager-required files, such as the <code>systemD.</code> service file. In case of a catastrophic failure, the service manager configuration will restart the agent.</p>
<p>There are no automatic updates to agents. To install a new agent version:</p>
<ul>
  <li>Linux: Manually install agent versions through the appropriate package manager (apt, yum, zypper).</li>
  <li>Windows: Manually download the <code>msi</code> package and install it with <code>msiexec.exe</code>.</li>
</ul>
<h2>Retry behavior [#retry]</h2>
<p>If a request made to the ingest service is unsuccessful, the payload is discarded; subsequent requests follow an exponential backoff pattern until one succeeds. For inventory, we store the deltas between system states in cache files. On failure, these deltas are not deleted but are reused on requests that follow.</p>
