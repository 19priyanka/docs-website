
<p>With New Relic's infrastructure monitoring, you can create <a href="https://docs.newrelic.com/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#alert-condition">alert conditions</a> directly within the context of what you are currently monitoring with New Relic. For example, if you are monitoring a <a href="/docs/infrastructure/new-relic-infrastructure/filter-group/organize-infrastructure-hosts-filter-sets">filter set</a> and notice a problem, you do not need to recreate those criteria from <a href="/docs/alerts/new-relic-alerts/getting-started/introduction-new-relic-alerts">New Relic Alerts</a>.</p>
<p>Instead, you can immediately select your filter set and tailor the alert condition directly from the chart you are viewing. This helps you proactively manage and monitor the alerting system for your environment. Any alert violations will be created per entity within the filter set.</p>
<h2>Create alert conditions for infrastructure [#create-condition]</h2>
<p>Alert conditions apply to alert <a href="/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#alert-policy">policies</a>. You can select an existing policy or create a new policy with email notifications from the Infrastructure monitoring UI. If you want to use other types of <a href="/docs/alerts/new-relic-alerts/managing-notification-channels/notification-channels-controlling-where-send-alerts">notification channels</a>, create a <a href="/docs/alerts/new-relic-alerts/configuring-alert-policies/name-or-rename-alert-policy">new policy</a> from within the Alerts UI.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicmVzdC1hcGktYWxlcnQtbGltaXQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidmFyaWFudCIsInZhbHVlIjoiaW1wb3J0YW50In1d">
  <p>The Infrastructure REST API has a limit of 3,700 alert conditions, including both active <strong>and</strong> disabled conditions. The API, whether used directly or via the UI, will reject all requests to add any additional alert conditions beyond the 3,700 alert condition limit.</p>
</div>
<p>To add an infrastructure alert condition to an alerts policy:</p>
<ol>
  <li>
    <p>Go to <strong><a href="http://one.newrelic.com">one.newrelic.com</a> > Infrastructure</strong>, then select any of these Infrastructure monitoring pages: <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-compute-page-measure-resource-usage"><strong>Hosts</strong></a>, <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-processes-page-inspect-process-performance"><strong>Processes</strong></a>, <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-network-page-measure-compare-capacity"><strong>Network</strong></a>, or <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-storage-page-evaluate-disk-usage-efficiency"><strong>Storage</strong></a>. Mouse over the chart you want to alert on, select the ellipses
      <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS1tb3JlLWhvcml6b250YWwifV0="></div>icon, and then select <strong>Create alert</strong>.
    </p>
  </li>
  <li>
    <p>Type a meaningful condition name.</p>
  </li>
  <li>
    <p>Select the <strong>Alert type</strong>, or refer to the <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-alert-conditions/infrastructure-alerting-examples">examples</a> to decide which type to select.</p>
  </li>
  <li>
    <p>Create individual filters, or copy all the filters from a <a href="/docs/infrastructure/new-relic-infrastructure/filter-group/filter-sets-organize-your-infrastructure-hosts">filter set</a> to identify the hosts that you want the alert condition to use.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>For more information about the rules behind filters, see <a href="/docs/infrastructure/new-relic-infrastructure/filter-group/filter-sets-organize-your-infrastructure-hosts#logic">Filter set logic</a>.</p>
    </div>
  </li>
  <li>
    <p>Define the <strong>Critical</strong> (required) and <strong>Warning</strong> (optional, if available) <a href="/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#alert-threshold">thresholds</a> for triggering the alert notification.</p>
  </li>
  <li>
    <p>Optional: To create the condition criteria proactively but not receive alert notifications at this time, turn off the <a href="/docs/infrastructure/new-relic-infrastructure/configuration/infrastructure-alerts-add-edit-or-view-host-alert-information#enabled"><strong>Enabled</strong> checkbox option</a>.</p>
  </li>
  <li>
    <p>Select an existing policy for the new condition.</p>
    <p>OR</p>
    <p>Select the option to create a new policy and identify the email for alert notifications.</p>
  </li>
  <li>
    <p>Optional: Add a <a href="#runbook-url-infrastructure">runbook url</a>.</p>
  </li>
  <li>
    <p>Optional: Set <a href="#violation-time-limit"><strong>Violation time limit</strong> for violations</a> (this defaults to 24 hours).</p>
  </li>
  <li>
    <p>Select <strong>Create</strong>.</p>
  </li>
</ol>
<h2>Create alert conditions for infrastructure integrations [#integration]</h2>
<p>To create an alert condition for your infrastructure integrations, use any of these options:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>UI options</p>
      </div>
      <div>
        <p>Alert conditions for infrastructure integrations</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>From <strong>Alerts &#x26; AI</strong></p>
      </div>
      <div>
        <p>Go to <strong><a href="http://one.newrelic.com">one.newrelic.com</a> > Alerts &#x26; AI</strong> <strong>> Alerts ></strong> <strong>Alert policies > New alert policy > Create new condition</strong>, then select <strong>Infrastructure</strong> as the product.</p>
        <p>OR</p>
        <p>Go to <strong><a href="http://one.newrelic.com">one.newrelic.com</a> > Alerts &#x26; AI</strong> <strong>> Alerts ></strong> <strong>Alert policies > (select a policy)</strong>, then select <strong>Add a condition</strong>.</p>
      </div>
    </div>
    <div>
      <div>
        <p>From <strong>Infrastructure</strong></p>
      </div>
      <div>
        <p>Go to <strong><a href="http://one.newrelic.com">one.newrelic.com</a> > Infrastructure</strong>, then select any of these Infrastructure monitoring pages: <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-compute-page-measure-resource-usage"><strong>Hosts</strong></a>, <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-processes-page-inspect-process-performance"><strong>Processes</strong></a>, <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-network-page-measure-compare-capacity"><strong>Network</strong></a>, or <a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-storage-page-evaluate-disk-usage-efficiency"><strong>Storage</strong></a>. Mouse over the chart you want to alert on, select the ellipses
          <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS1tb3JlLWhvcml6b250YWwifV0="></div>icon, and then select <strong>Create alert</strong>.
        </p>
      </div>
    </div>
  </div>
</div>
<p>Then continue with the procedures to <a href="#create-condition">add an alert condition</a> to Infrastructure.</p>
<h2>View host alert events [#view-alerts]</h2>
<p>Anyone included in the policy's <a href="#notification">notification channels</a> receive alert notifications directly. In addition, anyone with permissions for your New Relic account can view Infrastructure alert incidents and individual violations through the user interface.</p>
<ol>
  <li>Go to <strong><a href="http://one.newrelic.com">one.newrelic.com</a> > Infrastructure ></strong> <strong>Events</strong>.</li>
  <li>To change the hosts or time frame, use the search window, <strong>Filter set</strong>, or <strong>Time</strong> functions.</li>
  <li>From the <strong>Events</strong> list, select the alert violation.</li>
  <li>To <a href="/docs/alerts/new-relic-alerts/reviewing-alert-incidents/view-incident-violation-details">view detailed information in Alerts</a> about the selected violation, select the link.</li>
</ol>
<h2>Update or delete host alert information [#maintain-alerts]</h2>
<p>To edit, disable (or re-enable), or delete host alert information:</p>
<ol>
  <li>Go to <strong><a href="http://one.newrelic.com">one.newrelic.com</a> > Infrastructure ></strong> <strong>Settings > Alerts</strong>.</li>
  <li>Optional: Use the search window or <strong>Select all</strong> checkbox to locate one or more alert conditions.</li>
  <li>Select any of the available functions to
    <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS1lZGl0LTIifV0="></div>edit, disable, enable, or
    <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS10cmFzaC0yIn1d"></div>delete the selected conditions.
  </li>
</ol>
<h2>Use New Relic Alerts to monitor your entire infrastructure [#nr-alerts]</h2>
<p><a href="/docs/alerts/new-relic-alerts-beta/getting-started/new-relic-alerts">New Relic Alerts</a> provides a single, coordinated alerting tool across all of your New Relic products. This allows you to manage <a href="/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-policy">alert policies</a> and <a href="/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-condition">conditions</a> that focus on the metrics for <a href="/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-entity">entities</a> that you care about the most, such as Docker containers, JVMs, and more.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Alert features</strong></p>
      </div>
      <div>
        <p><strong>Features in Infrastructure</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Alert conditions</p>
      </div>
      <div>
        <ul>
          <li>Create: Use the <a href="#create-condition">Infrastructure</a> UI.</li>
          <li>View, change, disable (or re-enable), or delete: Use the <a href="#maintain-alerts">Infrastructure <strong>Settings > Alerts</strong></a> UI.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Information on alerts</p>
      </div>
      <div>
        <ul>
          <li>View summary information about <a href="/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#event">events</a>: Use the <a href="#view-alerts">Infrastructure <strong>Events</strong></a> UI.</li>
          <li>View detailed information about <a href="/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#alert-incident">alert incidents</a> or <a href="/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#alert-violation">individual violations</a>: Use the <a href="/docs/alerts/new-relic-alerts/reviewing-alert-incidents/explore-incident-history-incidents-index">Alerts</a> UI or the <a href="#notification">notification channel</a> integrated with the associated policy.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Alert policies</p>
      </div>
      <div>
        <p>View, add, change, disable, or delete:</p>
        <ul>
          <li>
            <p>For policies with a variety of notification channels: Use the <a href="/docs/alerts/new-relic-alerts/updating-alert-policies/change-alert-policies">Alerts</a> UI.</p>
          </li>
          <li>
            <p>For policies only needing <a href="#notification">email notifications</a>: Go to <strong><a href="http://one.newrelic.com">one.newrelic.com</a> > Infrastructure</strong> <strong>> Settings > Alerts > Create a new policy</strong>, and add one or more email addresses as needed.</p>
            <p>Add host conditions to an existing policy: Use the <a href="#create-condition">Infrastructure</a> UI.</p>
          </li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Notification channels</p>
      </div>
      <div>
        <p>To view, add, change, or delete <a href="#notification">available notification options</a>:</p>
        <ol>
          <li>Go to <strong><a href="http://one.newrelic.com">one.newrelic.com</a> > Infrastructure</strong> <strong>> Settings > Alerts</strong>.</li>
          <li>Optional: Search for the condition or policy name.</li>
          <li>From the list of conditions, select the policy link to view notification channel information in the Alerts UI.</li>
        </ol>
      </div>
    </div>
  </div>
</div>
<h2>Add a description [#description]</h2>
<p>The use of the <strong>Description</strong> field is available for these alert condition types:</p>
<ul>
  <li>NRQL conditions: add a description using the <a href="https://docs.newrelic.com/docs/alerts/alerts-nerdgraph/nerdgraph-examples/nerdgraph-api-alerts-nrql-conditions">NerdGraph API</a>.</li>
  <li>Infrastructure conditions: add a description using the UI or the REST API.</li>
</ul>
<p>The text you place in an alert condition's <strong>Description</strong> field is passed downstream to associated violations and notifications. A description can be used for several purposes, including:</p>
<ul>
  <li>Capturing the reason for the alert condition.</li>
  <li>Defining the signal being monitored.</li>
  <li>Defining next steps.</li>
  <li>Add metadata to downstream systems.</li>
</ul>
<p>You can use template substitution to insert values from the attributes in the associated violation event. The template format is <code>{{attributeName}}</code>. For the attributes you can use when creating a description, see <a href="https://docs.newrelic.com/docs/alerts/new-relic-alerts/defining-conditions/violation-event-attributes">Violation event attributes</a>.</p>
<p>One available attribute is the special <code>{{tag.*}}</code> attribute. This attribute prefix is used to access any of the tag values that are included with the target signal, or any of the entity tags that are associated with the target signal.</p>
<p>If there are entity tags associated with your violation, then they can be accessed using the entity tag name. An example of this would be <code>{{tag.aws.awsRegion}}</code>. When entity tags are available to use, you see them included with the violation, and displayed when you view the violations in an incident.</p>
<p>This field has a maximum character size of 4,000.</p>
<h2>Add or edit a runbook URL [#runbook-url-infrastructure]</h2>
<p>The <a href="#create-condition">alert condition creation process</a> includes an option for setting a URL for runbook instructions. This lets you link to information or standard procedures for handling a violation. Before adding or updating the link, make sure you use a valid URL.</p>
<p>To add, update, or delete an alert condition's runbook URL:</p>
<ol>
  <li>Select an alert condition, and make changes to the <strong>Runbook URL</strong> link.</li>
  <li>Save the condition.</li>
</ol>
<p>In order to be saved, the URL must be a valid URL.</p>
<h2>Violation time limit for violations [#violation-time-limit]</h2>
<p>The violation time limit allows you to define a time period after which violations will be force-closed. By default, violation time limit is 24 hours.</p>
<p>To add, update, or remove an alert condition's violation time limit:</p>
<ol>
  <li>Select an alert condition, and make changes to the violation time limit.</li>
  <li>To remove this limit, deselect the checkbox next to <strong>Close open violations after</strong> and select <code>--</code>.</li>
  <li>Save the condition.</li>
</ol>
<h2>Alert conditions that generate too-long NRQL queries [#alert-nrql-error]</h2>
<p>Alert conditions created for infrastructure rely on behind-the-scenes NRQL queries, and NRQL queries have a 4096-character limit. This means that if your condition generates a very complex NRQL query that filters on many elements (for example, including many hosts or many tags), it will exceed this limit and display an error message saying that the condition failed.</p>
<p>To solve this problem, reduce the number of elements you are using in your alert condition. For example:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Problem</p>
      </div>
      <div>
        <p>Solution</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Hosts</p>
      </div>
      <div>
        <ul>
          <li>If you entered a large number of hosts that caused the condition to fail, reduce the number of hosts.</li>
          <li>Use substrings to target hosts. For example, instead of targeting <code>prod-host-01</code>, <code>prod-host-02</code>, and <code>prod-host-03</code>, just target all hosts with <code>prod-host-0</code> in the name.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Entities</p>
      </div>
      <div>
        <ul>
          <li>Edit your alert condition to target specific attributes that apply to the entities you're trying to target.</li>
          <li>Create custom attributes for the entities you want to target, and use those attributes in your alert condition.</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<p>For more information, see <a href="https://discuss.newrelic.com/t/relic-solution-best-practice-for-filtering-in-infrastructure-alerts/58065">Best practices for filtering in infrastructure alerts</a> in New Relic's Explorers Hub.</p>
