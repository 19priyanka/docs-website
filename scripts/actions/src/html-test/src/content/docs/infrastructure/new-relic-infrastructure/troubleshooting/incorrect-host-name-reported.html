
<h2>Problem</h2>
<p>The agent is working, but the [New Relic Infrastructure monitoring UI](<a href="https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-compute-page-measure-resource-usage">https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-compute-page-measure-resource-usage</a>) shows the wrong hostname.</p>
<h2>Solution</h2>
<p>To set the correct hostname, try the following steps:</p>
<ol>
  <li>
    <p>Edit the <a href="https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent#config-file">newrelic-infra.yml</a> configuration file and add the <code>override_hostname</code> option, whose value is your expected hostname. For example:</p>
    <pre><code>override_hostname: correct-host.domain.com
</code></pre>
  </li>
  <li>
    <p>Use <a href="/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status#init-system">your init system</a> to restart the agent service:</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3lzdGVtZC12ZXJpZnktc3RhdHVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJSZXN0YXJ0IHRoZSBhZ2VudCB3aXRoIFN5c3RlbUQifV0=">
        <div data-prop-text="title">Restart the agent with SystemD</div>
        <p>Use SystemD commands with CentOS 7, Debian 8, RHEL 7, and Ubuntu 15.04 or higher:</p>
        <pre><code>sudo systemctl restart newrelic-infra

</code></pre>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3lzdGVtdi12ZXJpZnktc3RhdHVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJSZXN0YXJ0IHRoZSBhZ2VudCB3aXRoIFN5c3RlbSBWIn1d">
        <div data-prop-text="title">Restart the agent with System V</div>
        <p>Use System V commands with Debian 7:</p>
        <pre><code>sudo /etc/init.d/newrelic-infra restart

</code></pre>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidXBzdGFydC12ZXJpZnktc3RhdHVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJSZXN0YXJ0IHRoZSBhZ2VudCB3aXRoIFVwc3RhcnQifV0=">
        <div data-prop-text="title">Restart the agent with Upstart</div>
        <p>Use Upstart commands with Amazon Linux, CentOS 6, RHEL 6, and Ubuntu 14.10 or lower:</p>
        <pre><code>sudo initctl restart newrelic-infra

</code></pre>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoid2luZG93cy12ZXJpZnktc3RhdHVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJSZXN0YXJ0IHRoZSBhZ2VudCBpbiBXaW5kb3dzIn1d">
        <div data-prop-text="title">Restart the agent in Windows</div>
        <pre><code>net stop newrelic-infra
net start newrelic-infra

</code></pre>
      </div>
    </div>
  </li>
</ol>
<h2>Cause</h2>
<p>The New Relic infrastructure agent tries to resolve its <a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name">fully qualified domain name</a> against a domain name server, which may not be properly configured or not controlled by the same user as the New Relic infrastructure agent.</p>
