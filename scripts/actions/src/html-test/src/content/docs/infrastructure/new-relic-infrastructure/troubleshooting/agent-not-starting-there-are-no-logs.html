
<h2>Problem</h2>
<p>The infrastructure agent is not starting, and logs are not created.</p>
<h2>Solution</h2>
<p>Here are some troubleshooting options for <a href="/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes">non-root users</a> if the infrastructure agent is not starting and there are no logs:</p>
<h3>Check <code>requiretty</code></h3>
<p>To see if <code>requiretty</code> is causing logging issues:</p>
<ol>
  <li>
    <p>In <code>/var/log/messages</code> or <code>/var/log/syslog</code>, look for the message <code>sudo: sorry, you must have a tty to run sudo</code> .</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>When <a href="http://bugzilla.redhat.com/show_bug.cgi?id=1020147#c9">using old Linux versions</a>, sometimes the <code>nri-agent</code> user fails to execute a service because it does not have any TTY attached.</p>
    </div>
  </li>
  <li>
    <p>If you find this message, edit your <code>/etc/sudoers</code> file with the <code>visudo</code> command and comment or remove the following line: <code>Defaults requiretty</code></p>
  </li>
  <li>
    <p>Save and exit the file.</p>
  </li>
  <li>
    <p>Restart the <code>newrelic-infra</code> service.</p>
  </li>
</ol>
<h3>Review log permissions</h3>
<p>Check the agent's permission to open <code>log_file</code>. It's possible that the log file you are using was created when the agent was running as root, and now the <code>nri-agent</code> user does not have permissions to write it.</p>
<p>To solve this, try one of these options:</p>
<ul>
  <li>
    <p>Change the owner of the log file.</p>
  </li>
  <li>
    <p>Change the <code>log_file</code> entry in the <code>/etc/newrelic-infra.yml</code> configuration file. Our installation scripts create the <code>/var/log/newrelic-infra/</code> folder for that purpose, so we recommend the following value:</p>
    <pre><code>log_file: /var/log/newrelic-infra/newrelic-infra.log
</code></pre>
  </li>
</ul>
