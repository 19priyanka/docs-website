
<p>With the assisted install of the infrastructure agent for Windows, you can make the changes you need to the installation script we provide so you can adapt it to your environment. Before installation, make sure to check the <a href="/docs/infrastructure/new-relic-infrastructure/getting-started/compatibility-requirements-new-relic-infrastructure">compatibility and requirements</a>.</p>
<h2>Install the agent [#install]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>As of <a href="/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-140">version 1.4.0</a>, the infrastructure agent package includes the additional <code>newrelic-infra-ctl</code> binary, which is used to help troubleshoot a running agent. Although this binary is not required to execute the agent, we recommend to add it in your path. <a href="/docs/infrastructure/install-configure-manage-infrastructure/manage-your-agent/troubleshoot-running-agent">See our docs</a> for more information.</p>
</div>
<p>To install the agent:</p>
<ol>
  <li>
    <p>Download the <a href="https://download.newrelic.com/infrastructure_agent/binaries/windows/">packaged agent file</a>.</p>
  </li>
  <li>
    <p>Unpack the file.</p>
  </li>
  <li>
    <p>Make sure the file unpacks with the following structure:</p>
    <p>
      <img src="./images/Infra-windows-files.png" alt="Infra-windows-files.png" title="Infra-windows-files.png">
    </p>
  </li>
  <li>
    <p>Once it's unpacked, access and edit the installation PowerShell script <code>installer.ps1</code>.</p>
  </li>
  <li>
    <p>Update your license key.</p>
  </li>
  <li>
    <p>Optional: Update any other <a href="#parameters">parameters</a>.</p>
  </li>
  <li>
    <p>Execute <code>installer.ps1</code> with admin rights.</p>
  </li>
</ol>
<h2>Configure your installation [#parameters]</h2>
<p>You can configure the following parameters during the assisted install for Windows:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Variable</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>NRIA_AGENT_DIR</code></p>
        <p>Required at agent startup.</p>
      </div>
      <div>
        <p>The agent home directory.</p>
        <p>Default:</p>
        <pre><code>C:\Program Files\New Relic\newrelic-infra

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>NRIA_APP_DATA_DIR</code></p>
      </div>
      <div>
        <p>This configures the data directory to store inventory and other agent files.</p>
        <p>Default:</p>
        <pre><code>C:\%ProgramData%\New Relic\newrelic-infra

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>NRIA_CONFIG_FILE</code></p>
        <p>Required at installation.</p>
      </div>
      <div>
        <p>The agent configuration file's location.</p>
        <p>Default:</p>
        <pre><code>C:\Program Files\New Relic\newrelic-infra\newrelic-infra.yml

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>NRIA_LICENSE_KEY</code></p>
        <p>Only configuration option required at startup.</p>
      </div>
      <div>
        <p>The New Relic license key.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>NRIA_LOG_FILE</code></p>
        <p>Required at agent startup.</p>
      </div>
      <div>
        <p>The location where the agent will log.</p>
        <p>Default:</p>
        <pre><code>C:\Program Files\New Relic\newrelic-infra\newrelic-infra.log

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>NRIA_OVERWRITE</code></p>
      </div>
      <div>
        <p>By default and for security reasons, Windows does not install a service if there's another service with the same name already installed. To bypass this check, make sure this setting <code>NRIA_OVERWRITE</code> is <code>TRUE</code>.</p>
        <p>Default:</p>
        <pre><code>TRUE

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>NRIA_PLUGIN_DIR</code></p>
        <p>Required at agent startup.</p>
      </div>
      <div>
        <p>The directory containing the configuration files of the integrations.</p>
        <p>Default:</p>
        <pre><code>C:\Program Files\NewRelic\newrelic-infra\inregrations.d

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>NRIA_SERVICE_NAME</code></p>
      </div>
      <div>
        <p>This provides the name for the Windows service.</p>
      </div>
    </div>
  </div>
</div>
<h2>What's next? [#what-next]</h2>
<p>You may also want to:</p>
<ul>
  <li><a href="/docs/Infrastructure-configure-your-agent#conf-custom_attributes">Add custom attributes</a> to annotate your infrastructure data.</li>
  <li><a href="/docs/infrastructure-amazon-aws-ec2-integration#connect">Connect your AWS account</a> if your servers are hosted on Amazon EC2.</li>
  <li>Add other <a href="/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations">New Relic infrastructure integrations</a> to collect data from external services.</li>
  <li>Manually <a href="/docs/infrastructure-start-stop-restart-check-agent-status#linux">start, stop, restart, or check the agent status</a>.</li>
</ul>
