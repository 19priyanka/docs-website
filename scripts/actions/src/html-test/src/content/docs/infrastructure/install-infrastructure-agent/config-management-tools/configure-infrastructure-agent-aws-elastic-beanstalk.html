
<p>Amazon Web Services (AWS) <a href="https://aws.amazon.com/elasticbeanstalk">Elastic Beanstalk</a> is a dynamic service that allows easy deployment and scalability for your applications. Follow these instructions to deploy the infrastructure agent to the instances launched with your AWS Elastic Beanstalk applications.</p>
<p>In addition to deploying the infrastructure agent you can also integrate New Relic with AWS and bring Elastic Beanstalk monitoring information into New Relic. If you haven't already done so, follow these instructions for <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure">Amazon integrations with infrastructure monitoring</a>.</p>
<h2>Requirements</h2>
<p>Make sure you have a supported <a href="http://aws.amazon.com/elasticbeanstalk/">Amazon Web Services account</a>. In addition, for any New Relic installation, you will need your <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">New Relic license key</a>. This is a 40-character hexadecimal string that New Relic provides when you <a href="http://newrelic.com/signup" title="Link opens in a new window">sign up</a> for your account.</p>
<h2>Install the infrastructure agent [#download]</h2>
<p>To install the infrastructure agent on instances launched with AWS Elastic Beanstalk:</p>
<ol>
  <li>
    <p>In the <code>.ebextensions</code> folder inside your Elastic BeanStalk application, create a new file named <code>newrelic.config</code>.</p>
  </li>
  <li>
    <p>Based on the operating system, add the following content to the file, replacing <code>YOUR_LICENSE_KEY</code> with your New Relic <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">license key</a>.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGVwbG95LWFwbSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTGludXgifV0=">
        <div data-prop-text="title">Linux</div>
        <pre><code>files:
  "/etc/newrelic-infra.yml" :
    mode: "000644"
    owner: root
    group: root
    content: |
      license_key: YOUR_LICENSE_KEY

commands:
# Create the agentâ€™s yum repository
  "01-agent-repository":
    command: sudo curl -o /etc/yum.repos.d/newrelic-infra.repo https://download.newrelic.com/infrastructure_agent/linux/yum/el/6/x86_64/newrelic-infra.repo
#
# Update your yum cache
  "02-update-yum-cache":
    command: yum -q makecache -y --disablerepo='*' --enablerepo='newrelic-infra'
#
# Run the installation script
  "03-run-installation-script":
    command: sudo yum install newrelic-infra -y

</code></pre>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGVwbG95LWluZnJhc3RydWN0dXJlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJXaW5kb3dzIn1d">
        <div data-prop-text="title">Windows</div>
        <pre><code>packages:
  msi:
    infrastructure: https://download.newrelic.com/infrastructure_agent/windows/newrelic-infra.msi
files:
  "C:\\Program Files\\New Relic\\newrelic-infra\\newrelic-infra.yml":
    content: |
      license_key: YOUR_LICENSE_KEY
commands:
  01_stop-newrelic-infra:
    command: net stop newrelic-infra
    ignoreErrors: true
  02_start-newrelic-infra:
    command: net start newrelic-infra
    ignoreErrors: true

</code></pre>
      </div>
    </div>
  </li>
  <li>
    <p>Push your app to Elastic BeanStalk:</p>
    <ul>
      <li>In general, use <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-deploy.html"><code>eb deploy</code></a>.</li>
      <li>If you are still using <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli.html">Eb CLI 2.6</a> , use <code>git aws.push</code> if required.</li>
      <li>Optional: Use the AWS Console UI.</li>
    </ul>
  </li>
</ol>
<p>After a successful setup, it can take up to fifteen minutes before metrics begin to appear in New Relic. View your host's infrastructure pages at <a href="http://one.newrelic.com">one.newrelic.com</a>.</p>
<h2>Uninstall the infrastructure agent</h2>
<p>To uninstall the agent, remove <code>newrelic.config</code> from <code>.ebextensions</code>, then deploy using the CLI.</p>
