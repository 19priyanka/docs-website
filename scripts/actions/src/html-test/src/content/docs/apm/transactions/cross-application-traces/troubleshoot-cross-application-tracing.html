
<p>Here are troubleshooting tips when using <a href="/docs/apm/transactions/cross-application-traces/introduction-cross-application-traces">cross application traces</a>. This is not the same as using New Relic's <a href="/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing">distributed tracing</a> feature.</p>
<h2>Agent versions and protocols [#agents]</h2>
<p>Make sure you meet these requirements for your agent's version, protocols, interfaces, or message queue libraries. If you are using a protocol that is not listed here, you will not see a connection between your applications.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Agent version</strong></p>
      </div>
      <div>
        <p><strong>Notes</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>C SDK</p>
      </div>
      <div>
        <p>Use <a href="/docs/agents/c-sdk/instrumentation/enable-distributed-tracing-your-c-applications">distributed tracing</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/release-notes/agent-release-notes/go-release-notes/go-agent-111">Go 1.11 or higher</a></p>
      </div>
      <div>
        <p>HTTP, HTTPS</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/release-notes/agent-release-notes/java-release-notes">Java 3.9.0 or higher</a></p>
      </div>
      <div>
        <p>HTTP, HTTPs, JMS 1.1, RabbitMQ</p>
        <p>The Java agent also supports several message queue libraries, including those that use the JMS 1.1 interface.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/release-notes/agent-release-notes/net-release-notes">.NET 4.2 or higher</a></p>
      </div>
      <div>
        <p>HTTP, and <a href="/docs/agents/net-agent/getting-started/compatibility-requirements-net-agent#messaging">supported .NET messaging systems</a></p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/release-notes/agent-release-notes/nodejs-release-notes">Node.js 2.0.0 or higher</a></p>
      </div>
      <div>
        <p>HTTP, HTTPS, RabbitMQ</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/release-notes/agent-release-notes/php-release-notes">PHP 4.19.0 or higher</a></p>
      </div>
      <div>
        <p>HTTP, HTTPS, and <a href="/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#queuing">supported PHP message queuing systems</a></p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/release-notes/agent-release-notes/python-release-notes">Python 2.38.0.31 or higher</a></p>
      </div>
      <div>
        <p>HTTP, HTTPS, and <a href="/docs/agents/python-agent/supported-features/python-message-queues">supported Python message queuing systems</a></p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/release-notes/agent-release-notes/ruby-release-notes">Ruby 4.3.0 or higher</a></p>
      </div>
      <div>
        <p><a href="/docs/agents/ruby-agent/features/http-client-tracing-ruby">HTTP</a>, HTTPS, <a href="/docs/agents/ruby-agent/features/message-queues">RabbitMQ</a></p>
      </div>
    </div>
  </div>
</div>
<h2>Config file requirements [#requirements]</h2>
<p>In general, New Relic's cross application tracing feature is enabled by default. Requirements to change your configuration file vary, depending on your New Relic agent:</p>
<ul>
  <li>C SDK (not supported)</li>
  <li>Go (not supported)</li>
  <li><a href="/docs/agents/java-agent/configuration/java-agent-configuration-config-file#Cross_Application_Tracer">Java</a></li>
  <li><a href="/docs/agents/net-agent/installation-and-configuration/net-agent-configuration#cross_application_tracer">.NET</a></li>
  <li><a href="/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration">Node.js</a> (no specific config file settings needed for Node.js)</li>
  <li><a href="/docs/agents/php-agent/configuration/php-agent-configuration#inivar-cross-app-tracer-enabled">PHP</a></li>
  <li><a href="/docs/agents/python-agent/installation-configuration/python-agent-configuration#cross-application-tracer">Python</a></li>
  <li><a href="/docs/agents/ruby-agent/features/cross-application-tracing-ruby">Ruby</a></li>
</ul>
<h2>High throughput apps</h2>
<p>Cross application traces rely on transaction events to associate related transactions. If you have a high throughput application, your agent may reach the maximum number of events that it can record in a minute and will fall back to sampling events. If a transaction’s events are sampled, you may see an incomplete cross application trace, including sometimes only the transactions that you are focused on.</p>
<p>If your application has high throughput, some cross application traces will appear incomplete, sometimes with no links. Try viewing a different transaction trace. To reduce or eliminate sampling, you can also adjust the number of transaction events stored in your agent configuration.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>High throughput apps</strong></p>
      </div>
      <div>
        <p><strong>Troubleshooting tips</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Java</p>
      </div>
      <div>
        <p>From the <strong>transaction_events</strong> stanza, adjust the <a href="/docs/agents/java-agent/configuration/java-agent-configuration-config-file#ae-max_samples_stored">setting</a> for <code>max_samples_stored</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Ruby</p>
      </div>
      <div>
        <p>Adjust the <a href="/docs/agents/ruby-agent/installation-and-configuration/ruby-agent-configuration#analytics_events">setting</a> for <code>analytics_events.max_samples_stored</code>.</p>
      </div>
    </div>
  </div>
</div>
<h2>Proxies</h2>
<p>If you expect to see a cross application trace link but it consistently does not appear, there may be a proxy or broker between your application’s communication. Cross application tracing relies on HTTP headers and JMS properties being passed from one application to other. HTTP proxies and message brokers sometimes strip those headers.</p>
<h2>Multi-threaded processing (Java) [#multi-threaded-processing]</h2>
<p>If one or more of your Java applications uses an async or "reactive" programming model, a transaction's activity may span across multiple threads. New Relic supports the Play framework and Servlet Async but not all async frameworks. For unsupported frameworks, activity on other threads is not reported as part of the transaction. Calls to other applications will not be traced.</p>
<h2>Sub-accounts [#accounts]</h2>
<p>Currently cross application traces do not cross New Relic accounts. If you have multiple New Relic accounts (including sub-accounts), you will only see traces for applications within one account.</p>
