
<p>Deploying an app can be a risky eventâ€”when your app breaks, a bad deployment is often the cause. New Relic allows you to track deployments so you can correlate deploy to your app's performance. Tracking deployments creates deployment markers that appear in APM charts.</p>
<h2>Options for tracking deployments [#options]</h2>
<p>You can use the New Relic <a href="/docs/apis/rest-api-v2/requirements/new-relic-rest-api-v2-getting-started">REST API v2</a> to record new deployments, retrieve a list of past deployments, and delete past deployments on your APM application. In addition, some APM agents have agent-specific methods to record deployments automatically.</p>
<p>You can use your <a href="https://slack.com/">Slack</a> integration with New Relic, or a simple webhook, to notify your team in real time of deployments for applications monitored by APM. Slack provides a webhook URL that allows you to post generic JSON that will appear formatted in a chosen Slack channel.</p>
<p>There are a few places where you can view deployments in the New Relic UI after they have been recorded. You can <strong>view</strong> deployments in the UI:</p>
<ul>
  <li>In the activity feed of the <a href="/docs/apm/applications-menu/monitoring/apm-overview-page-view-transaction-apdex-usage-data">APM Summary</a>, New Relic One <strong>Service</strong> summary, and <a href="/docs/new-relic-one/use-new-relic-one/ui-data/new-relic-one-entity-explorer-view-performance-across-apps-services-hosts">entity summary</a> pages.</li>
  <li>On APM performance charts as a chart marker.</li>
  <li>On the <a href="/docs/apm/applications-menu/events/deployments-page-view-impact-your-app-users"><strong>Deployments</strong> page</a> for summary performance.</li>
</ul>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>Deployment markers are not available for Browser applications, but see <a href="https://docs.newrelic.com/docs/browser/new-relic-browser/browser-agent-spa-api/add-release">Browser releases</a> for a way to tag errors with release versions.</p>
</div>
<h2>Record deployments with the REST API [#api-instructions]</h2>
<p>You can use the New Relic REST API v2 to record deployments, get a list of past deployments, and delete deployments.</p>
<ul>
  <li>The examples in this document use <code>curl</code> as a command line tool. However, you can use any method to make your REST requests. You can also create, view, and delete deployments with the <a href="https://rpm.newrelic.com/api/explore/application_deployments/create">API Explorer</a>.</li>
  <li>JSON uses double quotes <code>"</code> for element names and content. Using single quotes <code>'</code> will cause errors.</li>
</ul>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicG9zdC1kZXBsb3ltZW50In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJSZWNvcmQgYSBkZXBsb3ltZW50IHdpdGggUE9TVCJ9XQ==">
    <div data-prop-text="title">Record a deployment with POST</div>
    <p>To record a new deployment, send a <code>POST</code> request that includes your <a href="/docs/apis/rest-api-v2/getting-started/introduction-new-relic-rest-api-v2#api_key">API key</a> to the deployments endpoint. Attach the payload in JSON format (see <a href="#deployment_limits">Character limits and JSON parameters</a>). All payload parameters are optional except <code>revision</code>.</p>
    <p>For example:</p>
    <pre><code>curl -X POST "https://api.newrelic.com/v2/applications/$APP_ID/deployments.json" \
     -H "Api-Key:$API_KEY" \
     -i \
     -H "Content-Type: application/json" \
     -d \
'{
  "deployment": {
    "revision": "REVISION",
    "changelog": "Added: /v2/deployments.rb, Removed: None",
    "description": "Added a deployments resource to the v2 API",
    "user": "datanerd@example.com",
    "timestamp": "2019-10-08T00:15:36Z"
  }
}'

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicG93ZXJzaGVsbCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUmVjb3JkIGEgZGVwbG95bWVudCB3aXRoIFBvd2VyU2hlbGwifV0=">
    <div data-prop-text="title">Record a deployment with PowerShell</div>
    <p>To record a deployment with PowerShell, send a <code>POST</code> request that includes your <a href="/docs/apis/rest-api-v2/getting-started/introduction-new-relic-rest-api-v2#api_key">API key</a> to the deployments endpoint. Attach the payload in JSON format (see <a href="#deployment_limits">Character limits and JSON parameters</a>). All payload parameters are optional except <code>revision</code>.</p>
    <p>This example uses PowerShell version 3 or higher:</p>
    <pre><code>Invoke-WebRequest -Uri https://api.newrelic.com/v2/applications/YOUR_APP_ID/deployments.json -Method POST -Headers @{'Api-Key'='$API_KEY'} -ContentType 'application/json' -Body '{
    "deployment": {
    "revision": "REVISION",
    "changelog": "Added: /v2/deployments.rb, Removed: None",
    "description": "Added a deployments resource to the v2 API",
    "user": "datanerd@example.com",
    "timestamp": "2019-10-08T00:15:36Z"
}
}'

</code></pre>
    <pre><code>
$encoding = [System.Text.Encoding]::GetEncoding("ASCII")
$data ='{
"deployment": {
    "revision": "REVISION",
    "changelog": "Added: /v2/deployments.rb, Removed: None",
    "description": "Added a deployments resource to the v2 API",
    "user": "datanerd@example.com",
    "timestamp": "2019-10-08T00:15:36Z"
}
}'
$postData = $encoding.GetBytes($data)
$request = [System.Net.WebRequest]::Create('https://api.newrelic.com/v2/applications/$APP_ID/deployments.json')
$request.Method = 'POST'
$request.Headers.add('Api-Key','$API_KEY')
$request.ContentType='application/json' 
$stream = $request.GetRequestStream()
$stream.Write($postData,0,$postData.Length)
$request.GetResponse()

</code></pre>This example uses PowerShell version 2 (requires .NET framework 3.5 or higher):
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZ2V0LWxpc3QifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlZpZXcgYSBsaXN0IG9mIGRlcGxveW1lbnRzIHdpdGggR0VUIn1d">
    <div data-prop-text="title">View a list of deployments with GET</div>
    <p>To retrieve a list of all past deployments for your app, send a <code>GET</code> request that includes your <a href="/docs/apis/rest-api-v2/getting-started/introduction-new-relic-rest-api-v2#api_key">API key</a> to the deployments endpoint. GET requests do not use a JSON payload.</p>
    <p>For example:</p>
    <pre><code>curl -X GET "https://api.newrelic.com/v2/applications/$APP_ID/deployments.json" \
     -H "Api-Key:$API_KEY" \
     -i

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    HTTP/1.1 200 OK
    ETag: "ABCDEFGHIJKabcdefghijk0123456789"
    Cache-Control: max-age=0, private, must-revalidate
    Content-Type: application/json
    {
      "deployments": [
        {
          "id": 1234567,
          "revision": "1234123412341234123412341234123412341234",
          "changelog": "Fixed the bugs for real this time",
          "description": "Example description two",
          "user": "Data Nerd",
          "timestamp": "2016-02-24T10:09:27-08:00",
          "links": {
            "application": 9999999
          }
        },
        {
          "id": 2345678,
          "revision": "7890789078907890789078907890789078907890",
          "changelog": "Think I fixed all the bugs",
          "description": null,
          "user": "Dren Atad",
          "timestamp": "2014-10-22T12:23:47-07:00",
          "links": {
            "application": 9999999
          }
        }
      ],
      "links": {
        "deployment.agent": "/v2/applications/{application_id}"
      }
    }
    
</code></pre>The API returns this list of deployments:
    <pre><code>
    curl -X GET "https://api.newrelic.com/v2/applications/9999999/deployments.json" \
         -H "Api-Key:ABCDEFGHIJKLMNOPQRSTUVWXabcdefghijklmnopqrstuvwx" \
         -i
    
</code></pre>&#x3C;CollapserGroup>
    &#x3C;Collapser
    id="sample-get-output"
    title="Sample output from GET"
    >
    This example requests a list of deployments for app ID `9999999`:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGVsZXRlLWRlcGxveW1lbnQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkRlbGV0ZSBhIGRlcGxveW1lbnQgd2l0aCBERUxFVEUifV0=">
    <div data-prop-text="title">Delete a deployment with DELETE</div>
    <p>To delete a deployment, send a <code>DELETE</code> request that includes your <a href="/docs/apis/rest-api-v2/getting-started/introduction-new-relic-rest-api-v2#api_key">API key</a> to the deployments endpoint. DELETE requests do not use a JSON payload, but you must specify the ID for the deployment you want to delete. To retrieve the ID for a deployment, use the <a href="#get-list">GET request</a>.</p>
    <p>For example:</p>
    <pre><code>curl -X DELETE "https://api.newrelic.com/v2/applications/$APP_ID/deployments/$EMPLOYMENT_ID.json" \
     -H "Api-Key:$API_KEY" \
     -i

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGVwbG95bWVudC1saW1pdHMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkNoYXJhY3RlciBsaW1pdHMgYW5kIEpTT04gcGFyYW1ldGVycyJ9XQ==">
    <div data-prop-text="title">Character limits and JSON parameters</div>
    <p>The JSON payload can include the following parameters.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>UTF-8 4 byte characters, such as Emojis and some non-Latin language glyphs, cannot be used in the deployment text.</p>
    </div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Parameter</p>
          </div>
          <div>
            <p>Data type</p>
          </div>
          <div>
            <p>Description</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>revision</code></p>
          </div>
          <div>
            <p>String, 127 character maximum</p>
          </div>
          <div>
            <p><strong>Required</strong>. A unique ID for this deployment, visible in the <a href="/docs/apm/applications-menu/monitoring/apm-overview-page">Summary</a> page and on the <a href="/docs/apm/applications-menu/events/deployments-page">Deployments</a> page. Can be any string, but is usually a version number or a Git checksum.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>changelog</code></p>
          </div>
          <div>
            <p>String, 65535 character maximum</p>
          </div>
          <div>
            <p><strong>Optional</strong>. A summary of what changed in this deployment, visible in the <a href="/docs/apm/applications-menu/events/deployments-page">Deployments</a> page when you select <strong>(selected deployment) > Change log</strong>.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>description</code></p>
          </div>
          <div>
            <p>String, 65535 character maximum</p>
          </div>
          <div>
            <p><strong>Optional</strong>. A high-level description of this deployment, visible in the <a href="/docs/apm/applications-menu/monitoring/apm-overview-page">Summary</a> page and on the <a href="/docs/apm/applications-menu/events/deployments-page">Deployments</a> page when you select an individual deployment.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>user</code></p>
          </div>
          <div>
            <p>String, 31 character maximum</p>
          </div>
          <div>
            <p><strong>Optional</strong>. A username to associate with the deployment, visible in the <a href="/docs/apm/applications-menu/monitoring/apm-overview-page">Summary</a> page and on the <a href="/docs/apm/applications-menu/events/deployments-page">Deployments</a> page.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>timestamp</code></p>
          </div>
          <div>
            <p>ISO 8601</p>
          </div>
          <div>
            <p><strong>Optional</strong>. When the deployment occurred, down to the second. If not specified, the deployment will be recorded at the time when the API call was received. Timestamp requirements:</p>
            <ul>
              <li>Must be in UTC time.</li>
              <li>Must be after the most recent deployment timestamp.</li>
              <li>Cannot be in the future.</li>
              <li>Must be in ISO8601 format; for example, <code>"2019-10-08T00:15:36Z"</code>.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h2>Record deployments using the New Relic agent [#agent]</h2>
<p>Some agents have additional methods to record deployments:</p>
<ul>
  <li><strong>All agents</strong>: Use the New Relic <a href="#api">REST API v2</a>.</li>
  <li><strong>C</strong>: No SDK-specific methods. Use the <a href="#api">REST API</a>.</li>
  <li><strong>Go</strong>: No agent-specific methods. Use the <a href="#api">REST API</a>.</li>
  <li><strong>Java</strong>: Call the <a href="/docs/agents/java-agent/instrumentation/recording-deployments-java-agent">Java agent <code>jar</code></a>.</li>
  <li><strong>.NET</strong>: Use <a href="#powershell">PowerShell and the REST API</a>.</li>
  <li><strong>Node.js</strong>: No agent-specific methods. Use the <a href="#api">REST API</a>.</li>
  <li><strong>PHP</strong>: Use a <a href="/docs/agents/php-agent/features/recording-deployments-using-php-script">PHP script</a>.</li>
  <li><strong>Python</strong>: Use the <a href="/docs/agents/python-agent/installation-configuration/python-agent-admin-script#record-deploy"><code>record-deploy</code></a> subcommand of the <code>newrelic-admin</code> script.</li>
  <li><strong>Ruby</strong>: Use a <a href="/docs/agents/ruby-agent/features/recording-deployments-ruby-agent#capistrano3">Capistrano recipe</a>.</li>
</ul>
<h2>Notify your team of deployments [#webhooks]</h2>
<p>After a deployment is recorded using the REST API, you can optionally notify a webhook endpoint of the deployment.</p>
<p>The destination of the webhook can be your Slack instance. To use webhooks to set up a deployment notification for a Slack channel:</p>
<ol>
  <li>Log in to your Slack account as an admin, then go to <strong>App directory > Manage > Apps</strong>.</li>
  <li>Search for your New Relic app, then select <strong>Add configuration</strong>.</li>
  <li>From <strong>Post to channel</strong>, select an existing Slack channel or add a new channel, then <strong>Add configuration</strong>.</li>
  <li>From the list of options, copy the webhook URL.</li>
  <li>Go to <strong><a href="https://one.newrelic.com">one.newrelic.com</a> > (<a href="/docs/using-new-relic/welcome-new-relic/get-started/glossary#account-dropdown">account dropdown</a>) > Account settings > Integrations > Deploy notifications > Webhook</strong>.</li>
  <li>Paste the Slack webhook URL, then save.</li>
  <li>Optional: Send a test message.</li>
</ol>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>You can also use webhooks, Slack channels, and other options for <a href="/docs/alerts/new-relic-alerts/managing-notification-channels/notification-channels-control-where-send-alerts">alert notifications with New Relic Alerts</a>.</p>
</div>
<h2>End of life notification: Hipchat, Campfire [#eol]</h2>
<p>As of September 9, 2019, integrations with Hipchat and Campfire for APM deployment notifications will no longer be available. <strong>Recommendation:</strong> If you are still using Hipchat or Campfire, use <a href="#webhooks">webhooks with Slack channels</a> instead. For more information, see the New Relic <a href="https://discuss.newrelic.com/t/end-of-life-for-campfire-and-hipchat-deployment-notifications/79927">Explorers Hub post</a>.</p>
