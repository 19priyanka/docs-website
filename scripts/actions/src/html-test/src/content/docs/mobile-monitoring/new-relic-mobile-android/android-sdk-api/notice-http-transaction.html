
<h2>Syntax</h2>
<pre><code>NewRelic.noticeHttpTransaction(string $url, string $httpMethod, int $statusCode, long $startTime, long $endTime, long $bytesSent, long $bytesReceived [, string $responseBody])
</code></pre>
<p>Tracks networks requests.</p>
<h2>Requirements</h2>
<p>Compatible with all agent versions.</p>
<h2>Description</h2>
<p>The New Relic Android SDK API provides several methods to track network requests and network failures. You can use <code>noticeHttpTransaction</code> to record HTTP transactions, with an option to also send a response body.</p>
<p>If a network request fails, you can record details about the failure with <a href="/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/noticenetworkfailure-android-agent-api"><code>noticeNetworkFailure()</code></a>.</p>
<p>For general info on using the New Relic Android SDK API, see the <a href="/docs/mobile-monitoring/new-relic-mobile-android/install-configure/work-android-sdk-api">usage guide</a>.</p>
<h2>Parameters</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Parameter</strong></p>
      </div>
      <div>
        <p><strong>Description</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>$url</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Required. The URL of the request.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$httpMethod</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Required. The HTTP method used, such as GET or POST.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$statusCode</code></p>
        <p><em>int</em></p>
      </div>
      <div>
        <p>Required. The statusCode of the HTTP response, such as 200 for <strong>OK</strong>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$startTime</code></p>
        <p><em>int</em></p>
      </div>
      <div>
        <p>Required. The start time of the request in milliseconds since the epoch.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$endTime</code></p>
        <p><em>int</em></p>
      </div>
      <div>
        <p>Required. The end time of the request in milliseconds since the epoch.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$bytesSent</code></p>
        <p><em>int</em></p>
      </div>
      <div>
        <p>Required. The number of bytes sent in the request.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$bytesReceived</code></p>
        <p><em>int</em></p>
      </div>
      <div>
        <p>Required. The number of bytes received in the response.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$responseBody</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. The response body of the HTTP response. The response body will be truncated and included in an HTTP Error metric if the HTTP transaction is an error.</p>
      </div>
    </div>
  </div>
</div>
<h2>Examples</h2>
<h3>Record HTTP transaction</h3>
<p>An example of tracking an HTTP transaction:</p>
<pre><code>public class CustomHttpMetricsLogger implements Interceptor {

    @Override
    public Response intercept(Chain chain) throws IOException {
        Request request = chain.request();
        //collect request start time
        long t1 = System.nanoTime();
        //get the size of the request body
        long requestSize = null == request.body() ? 0 : request.body().contentLength();
        //proceed with the request
        Response response = chain.proceed(request);
        //capture the time when response returns
        long t2 = System.nanoTime();
        long responseSize = null == response.body() ? 0 : response.body().contentLength();
        //tell new relic to notice this request
        NewRelic.noticeHttpTransaction(request.urlString(), request.method(), response.code(), t1, t2, requestSize, responseSize);
        //return response for processing
        return response;
    }
}
</code></pre>
