
<p>These procedures apply to iOS apps using Cocoapods. For other types, see <a href="/docs/mobile-monitoring-installation/ios-installation-and-configuration">iOS installation and configuration</a>.</p>
<h2>Install your iOS application [#installation]</h2>
<p>As part of the installation process, New Relic automatically generates an <a href="/docs/mobile-apps/viewing-your-application-token">application token</a>. This is a 40-character hexadecimal string for authenticating each mobile app you monitor in New Relic.</p>
<p>To install and configure your iOS application:</p>
<ol>
  <li>Go to <strong><a href="https://one.newrelic.com">one.newrelic.com</a></strong>.</li>
  <li>If applicable: From the Mobile Apps list, select <strong>Add a new app</strong>.</li>
  <li>From the <strong>Get Started</strong> page, select <strong>iOS</strong> as the platform for mobile monitoring.</li>
  <li>Type a name for your mobile app, then select <strong>Continue</strong>.</li>
</ol>
<p>Continue with the steps to configure New Relic for mobile monitoring.</p>
<h2>Configure using Objective-C [#objective-c]</h2>
<p>These procedures to configure your iOS app with CocoaPods and Objective-C also appear on the <strong>Get Started</strong> page in New Relic.</p>
<ol>
  <li>
    <p>In the <strong>Podfile</strong> for your project, add the following line:</p>
    <pre><code>pod 'NewRelicAgent'
</code></pre>
  </li>
  <li>
    <p>Close your project in Xcode, and update it by running this command from the <strong>Terminal</strong> in your project directory:</p>
    <pre><code>pod install
</code></pre>
  </li>
  <li>
    <p>Open your project in Xcode by running this command from the <strong>Terminal</strong> in your project directory:</p>
    <pre><code>open App.xcworkspace
</code></pre>
  </li>
  <li>
    <p>In your <code>APP_NAME-Prefix.pch</code> project file (generally found in the <code>Supporting Files</code> folder), include the New Relic header inside the <code>#ifdef __OBJC__ #endif</code> block:</p>
    <pre><code>#import &#x3C;NewRelic/NewRelic.h>
</code></pre>
  </li>
  <li>
    <p>In your <code>AppDelegate.m</code> file, add this call as the first line of <code>application:didFinishLaunchingWithOptions</code>, replacing <code>APP_TOKEN</code> with your <a href="/docs/mobile-apps/viewing-your-application-token">application token</a>:</p>
    <pre><code>[NewRelic startWithApplicationToken:@"APP_TOKEN"];
</code></pre>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>The agent must be on the first line of <code>didFinishLaunchingWithOptions</code> and run on the main thread to ensure proper instrumentation. Starting the call later, on a background thread, or asynchronously can cause unexpected or unstable behavior.</p>
    </div>
  </li>
  <li>
    <p>Add a build script to your target's <strong>Build Phases</strong>. Ensure the new build script is the very last build script. Then paste the following, replacing <code>APP_TOKEN</code> with your <a href="/docs/mobile-apps/viewing-your-application-token">application token</a>:</p>
    <pre><code>SCRIPT=`/usr/bin/find "${SRCROOT}" -name newrelic_postbuild.sh | head -n 1`
/bin/sh "${SCRIPT}" "APP_TOKEN"
</code></pre>
  </li>
  <li>
    <p>Clean and build your app, then run it in the simulator or other device.</p>
  </li>
</ol>
<h2>Configure using Swift [#configuration]</h2>
<p>These procedures to configure your iOS app with CocoaPods and Swift also appear on the <strong>Get Started</strong> page in New Relic.</p>
<ol>
  <li>
    <p>In the <strong>Podfile</strong> for your project, add the following line:</p>
    <pre><code>pod 'NewRelicAgent'
</code></pre>
  </li>
  <li>
    <p>Close your project in Xcode, and update it by running this command from the <strong>Terminal</strong> in your project directory:</p>
    <pre><code>pod install
</code></pre>
  </li>
  <li>
    <p>Open your project in Xcode by running this command from the <strong>Terminal</strong> in your project directory:</p>
    <pre><code>open App.xcworkspace
</code></pre>
  </li>
  <li>
    <p>Create a bridging header:</p>
    <ol>
      <li>Select <strong>File > New > File > Objective-C File</strong>.</li>
      <li>Name the file <code>Placeholder.m</code>, then select <strong>Next</strong>.</li>
      <li>Select <strong>Create</strong>, and confirm Xcode's prompt to generate the bridging header.</li>
    </ol>
  </li>
  <li>
    <p>In your <code>APP_NAME-Bridging-Header.h</code>, add the New Relic header:</p>
    <pre><code>#import "NewRelic/NewRelic.h"
</code></pre>
  </li>
  <li>
    <p>In your <code>AppDelegate.swift</code> file, add this call as the first line of <code>application:didFinishLaunchingWithOptions</code>, replacing <code>APP_TOKEN</code> with your <a href="/docs/mobile-apps/viewing-your-application-token">application token</a>:</p>
    <pre><code>NewRelic.start(withApplicationToken:"APP_TOKEN")
</code></pre>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>To ensure proper instrumentation, you must call the agent on the first line of <code>didFinishLaunchingWithOptions()</code>, and run the agent on the main thread. Starting the call later, on a background thread, or asynchronously can cause unexpected or unstable behavior.</p>
    </div>
  </li>
  <li>
    <p>Add a build script to your target's <strong>Build Phases</strong>. Ensure the new build script is the very last build script. Then paste the following, replacing <code>APP_TOKEN</code> with your <a href="/docs/mobile-apps/viewing-your-application-token">application token</a>:</p>
    <pre><code>SCRIPT=`/usr/bin/find "${SRCROOT}" -name newrelic_postbuild.sh | head -n 1`
/bin/sh "${SCRIPT}" "APP_TOKEN"
</code></pre>
  </li>
  <li>
    <p>Clean and build your app, then run it in the simulator or other device.</p>
  </li>
</ol>
<h2>Change the logging level (optional) [#logging]</h2>
<p>Six log levels are available for mobile apps monitoring:</p>
<ul>
  <li><code>none</code></li>
  <li><code>error</code></li>
  <li><code>warning</code></li>
  <li><code>info</code></li>
  <li><code>verbose</code></li>
  <li><code>ALL</code></li>
</ul>
<p>To increase your logging level in the app, add this method call before calling <code>NewRelic.start(withApplicationToken)</code>:</p>
<pre><code>[NRLogger setLogLevels:NRLogLevelALL];
</code></pre>
<p>For Swift apps:</p>
<pre><code>NRLogger.setLogLevels(NRLogLevelALL.rawValue)
</code></pre>
