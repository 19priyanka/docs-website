
<p>Your app's dSYM files are stored in Xcode's dSYM archive path folder. This is the folder where New Relic Mobile gets the dSYM files that are used to symbolicate your crash reports.</p>
<p>New Relic provides a post-build script as part of the New Relic Mobile's <a href="/docs/mobile-monitoring/mobile-monitoring-installation/getting-started/ios-installation-configuration">iOS agent's install process</a> and the <a href="/docs/mobile-monitoring/new-relic-mobile-ios/get-started/tvos-installation-configuration">tvOS agent's install process</a>. This script automatically uploads your app's dSYM files.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>This script uses Python 2. Starting October 2019 with <a href="https://developer.apple.com/documentation/macos_release_notes/macos_catalina_10_15_beta_10_release_notes#3318248">macOS 10.15 (Catalina)</a>, Python won't be installed by default. If you're using the automatic script (recommended), you may need to manually install <a href="https://www.python.org/downloads/mac-osx/">Python 2</a>. If you're using Homebrew, see <a href="https://docs.brew.sh/Homebrew-and-Python">Python on Homebrew</a>.</p>
</div>
<p>New Relic automatically uploads dSYM files <strong>only for release builds</strong>. Non-release builds must upload their files either <a href="#manual-dsym">manually</a> or through the <a href="#mobile-ui">New Relic Mobile UI</a>. Bitcode-enabled apps have their dSYM files generated by Apple. You must <a href="/docs/mobile-monitoring/new-relic-mobile-ios/install-configure/retrieve-upload-dsyms-bitcode-enabled-apps">download the dSYM files for Bitcode-enabled apps from Apple</a> and upload them to New Relic.</p>
<p>If you see unreadable machine code in the <a href="/docs/mobile-monitoring/mobile-monitoring-ui/crashes/mobile-apps-crashes-dashboard"><strong>Crashes</strong> page</a>, your dSYM files may not be uploaded correctly. In some cases, you may need to <a href="#manual-dsym">manually upload dSYM files</a>.</p>
<h2>Identify missing dSYMs [#IdentifyingMissingdSYMs]</h2>
<p>When a Bitcode-enabled app is uploaded to Apple for App Store review or ad-hoc distribution, dSYMs need to be manually downloaded from Apple and uploaded to New Relic to allow the <a href="/docs/mobile-monitoring/new-relic-mobile/getting-started/ios-agent-crash-reporting">mobile crash reports</a> to be properly symbolicated. These dSYMs can be downloaded through the archives organizer in Xcode within several minutes of uploading the app. In this situation follow the procedures to <a href="#Archive">find the archive and download dSYMs</a>.</p>
<p>If an app is missing a dSYM file, a few indicators are available in the New Relic Mobile UI:</p>
<ul>
  <li>
    <p><strong>Banner notification</strong>: A banner warning appears on the <a href="https://docs.newrelic.com/docs/mobile-monitoring/mobile-monitoring-ui/crashes/mobile-apps-crash-report-dashboard"><strong>Crash report</strong> page</a>. The warning reads:</p>
    <pre><code>We were unable to locate your dsym.
</code></pre>
  </li>
  <li>
    <p><strong>Upload prompt</strong>: from the <strong>Crash type summary</strong> page you will be automatically prompted to upload a dSYM file if it is missing.</p>
  </li>
  <li>
    <p><strong>Machine code</strong>: The crash stack trace on the <strong>Crash report</strong> page displays machine code and not a human-readable error message.</p>
  </li>
</ul>
<h2>Upload dSYM files through the New Relic Mobile UI [#mobile-ui]</h2>
<p>
  <img src="./images/Mobile-Crash-dsym_file.png" alt="Automatically upload dSYM files form the New Relic Mobile UI." title="Mobile-Crash-dsym_file.png">
</p>
<p><strong>Crash analysis > Crash list > Crash type summary > Upload dSYM</strong>: You can quickly upload your dSYM files directly from the New Relic Mobile UI.</p>
<p>You can easily upload your dSYM files directly form the New Relic Mobile UI. To upload your dSYM files:</p>
<ol>
  <li>
    <p>From <a href="https://rpm.newrelic.com/mobile">rpm.newrelic.com/mobile</a>, select your mobile application from the app index.</p>
  </li>
  <li>
    <p>View <strong>Crash analysis</strong>.</p>
  </li>
  <li>
    <p>Select a specific crash from the <strong>Crash types</strong> list.</p>
  </li>
  <li>
    <p>Click <strong>Upload dSYM</strong>. You can either drag and drop your dSYMs directly, or select the file form your computer.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>The maximum file size is 600 MB.</p>
    </div>
  </li>
</ol>
<h2>Manually upload dSYM files [#manual-dsym]</h2>
<p>In some circumstances, New Relic's automatic upload of dSYM files may fail. If a dSYM upload is attempted and fails, it creates a build error with a detailed message. For example, if there's a network failure and the dSYM upload isn't completed, Xcode will report an error. For additional information about how New Relic handles dSYM uploads, see <a href="https://discuss.newrelic.com/t/relic-solution-ios-dsym-upload-deep-dive/42513">New Relic's Online Technical Community</a>.</p>
<p>If the automatic upload fails, you can manually upload your dSYM file. If you have multiple dSYM files, they can be within a single zip with a maximum file size of 600 MB. The YOUR_NEW_RELIC_APPLICATION_TOKEN value in the commands below is the same key used for <code>+[NewRelic startWithApplicationToken:]</code> (in Objective-C) or <code>NewRelic.start(withApplicationToken:)</code> (in Swift).</p>
<p>To manually upload your dSYM files:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicHl0aG9uLW1hbnVhbC11cGxvYWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlZpYSBQeXRob24gc2NyaXB0IChhZ2VudCB2ZXJzaW9ucyA2LjAuMCBvciBoaWdoZXIpIn1d">
    <div data-prop-text="title">Via Python script (agent versions 6.0.0 or higher)</div>
    <p>In iOS agent versions 6.0.0 or higher, the agent includes a Python script that automatically processes and uploads symbols. You can call this script from the command line:</p>
    <pre><code>NewRelicAgent.framework/Resources/generateMap.py "DSYM_ARCHIVE_PATH" "YOUR_NEW_RELIC_APPLICATION_TOKEN"

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY29tbWFuZC1saW5lLW1hbnVhbC11cGxvYWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlZpYSBjb21tYW5kIGxpbmUifV0=">
    <div data-prop-text="title">Via command line</div>
    <p>To manually upload individual dSYM files from the command line:</p>
    <ol>
      <li>
        <p>Zip up your dSYM file or files using the following command. Replace '~'/ZIPPED_DSYM_PATH with your new dSYM archive path and file name (for example, Users/my-name/desktop). Also replace '~'/dSYM_PATH with your existing dSYM file path.</p>
        <pre><code>/usr/bin/zip --recurse-paths --quiet "~/ZIPPED_DSYM_PATH" "~/dSYM_PATH"
</code></pre>
      </li>
      <li>
        <p>Upload the dSYM zip file using the following command:</p>
        <ul>
          <li>
            <p>For a <strong>US account</strong>:</p>
            <pre><code>curl -F dsym=@"~/DSYM_ZIP_PATH" -H "X-APP-LICENSE-KEY: YOUR_NEW_RELIC_APPLICATION_TOKEN" https://mobile-symbol-upload.newrelic.com/symbol
</code></pre>
          </li>
          <li>
            <p>For a <strong>EU account</strong>:</p>
            <pre><code>curl -F dsym=@"~/DSYM_ZIP_PATH" -H "X-APP-LICENSE-KEY: YOUR_NEW_RELIC_APPLICATION_TOKEN" https://mobile-symbol-upload.eu01.nr-data.net/symbol
</code></pre>
          </li>
        </ul>
      </li>
    </ol>
  </div>
</div>
<h2>Troubleshooting [#auto-upload-fail-troubleshooting]</h2>
<h3>Auto-upload failure [#troubleshooting-auto-upload]</h3>
<p>If a dSYM auto-upload failed, the <strong>Report Navigator</strong> may have a fully formed cURL command. You can use this cURL command to reattempt an upload. Depending on the error, you may also need to follow some of the <a href="#manual-dsym">dSYM manual upload steps</a>.</p>
<p>Here is an example of a successful dSYM upload in the <strong>Report Navigator</strong>:</p>
<p>
  <img src="./images/Screen-Shot-2014-09-23-at-11.30.35-AM_0.png" alt="iOS-Agent-PostBuildScript-Example.png" title="iOS-Agent-PostBuildScript-Example.png">
</p>
<p><strong>Example:</strong> A successful dSYM upload in the <strong>Report Navigator</strong>.</p>
<h3>Missing dSYMs [#troubleshooting-missing-dsyms]</h3>
<p>If dSYM files are missing, you may need to check Xcode build settings to ensure the file is being generated. Frameworks which are built locally have separate build settings and may need to be updated as well.</p>
<p>Build settings:</p>
<pre><code>Debug Information Format : Dwarf with dSYM File
Deployment Postprocessing: Yes
Strip Linked Product: Yes
Strip Debug Symbols During Copy : Yes
</code></pre>
