
<h2>Problem</h2>
<p>Your Android app exceeds the 64k limit for the total number of methods that can be referenced within a single <a href="https://developer.android.com/studio/build/multidex.html">Dalvik Executable file (DEX)</a>, including methods for frameworks, libraries, and your own Android app code. You see error messages from New Relic Mobile such as these:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGV4LWJ1aWxkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJCdWlsZCB0aW1lIGVycm9yIG1lc3NhZ2UgZXhhbXBsZSJ9XQ==">
    <div data-prop-text="title">Build time error message example</div>
    <pre><code>> com.android.build.api.transform.TransformException: com.android.ide.common.process.ProcessException: 
java.util.concurrent.ExecutionException: com.android.dex.DexException: Too many classes in --main-dex-list, main dex capacity exceeded

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicnVudGltZS1jcmFzaC1kZXgifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlJ1biB0aW1lIGNyYXNoIG1lc3NhZ2UgZXhhbXBsZSJ9XQ==">
    <div data-prop-text="title">Run time crash message example</div>
    <pre><code>E/AndroidRuntime: FATAL EXCEPTION: main
Process: com.example.mobile.debug, PID: 12345
java.lang.NoClassDefFoundError: com.example.foobar.myapp.MainActivity

</code></pre>
  </div>
</div>
<p>These exception errors typically occur with Android devices prior to <a href="https://developer.android.com/about/versions/android-5.0.html">Android 5.0 (API level 21)</a>, which requires the <a href="https://developer.android.com/studio/build/multidex.html">multidex</a> support library.</p>
<h2>Solution</h2>
<p>To fix build errors or runtime exceptions when using the latest Android build tool:</p>
<ol>
  <li>Make sure you have the <a href="/docs/release-notes/mobile-release-notes/android-release-notes">latest Android agent version</a> for New Relic Mobile.</li>
  <li>Enable <a href="https://developer.android.com/studio/build/multidex.html">multidex</a>.</li>
  <li>Enable <a href="/docs/mobile-monitoring/new-relic-mobile-android/install-configure/configure-proguard-or-dexguard-android-apps">Proguard or Dexguard</a> to optimize classes and methods in your DEX.</li>
  <li>If you still have problems with keeping your Android app under the 64k limit, use a <a href="https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.BuildType.html#com.android.build.gradle.internal.dsl.BuildType:multiDexKeepProguard">keepfile</a>.</li>
</ol>
