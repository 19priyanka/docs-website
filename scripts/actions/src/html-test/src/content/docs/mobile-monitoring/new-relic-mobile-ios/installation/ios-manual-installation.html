
<p>To install and configure New Relic functionality with your iOS applications, follow these procedures. If your iOS app uses Cocoapods, follow the <a href="/docs/mobile-monitoring-installation/cocoapods-installation-and-configuration">Cocoapods installation procedures</a>.</p>
<h2>Install your iOS application [#installation]</h2>
<p>As part of the installation process, New Relic automatically generates an <a href="/docs/mobile-apps/viewing-your-application-token">application token</a>. This is a 40-character hexadecimal string for authenticating each mobile app you monitor in New Relic.</p>
<p>To install and configure your iOS application:</p>
<ol>
  <li>Go to <strong><a href="https://one.newrelic.com">one.newrelic.com</a></strong>.</li>
  <li>If applicable: From the <a href="/docs/mobile-apps/mobile-apps-menu">Mobile Apps index</a>, select
    <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS1wbHVzLWNpcmNsZSJ9XQ=="></div><strong>Add a new app</strong>.
  </li>
  <li>From the <strong>Get started</strong> page, select <strong>iOS</strong> as the platform for mobile monitoring.</li>
  <li>Type a name for your mobile app, and select <strong>Continue</strong>.</li>
</ol>
<p>Continue with the steps to configure New Relic.</p>
<h2>Add the New Relic framework to your app [#configuration]</h2>
<ol>
  <li>
    <p>Download and unzip the <a href="https://docs.newrelic.com/docs/release-notes/mobile-release-notes/ios-release-notes">iOS SDK for New Relic</a>.</p>
  </li>
  <li>
    <p>To add the New Relic framework to your Xcode project: Use <strong>Finder</strong> to drag the <code>NewRelicAgent.framework</code> folder into your Xcode project, and drop it onto your project in the <strong>Project navigator</strong> window.</p>
  </li>
  <li>
    <p>Follow the prompts to copy items into the destination and to create folder references.</p>
  </li>
  <li>
    <p>In the <strong>General</strong> settings of your project, add the following libraries to <strong>Linked frameworks and libraries</strong>:</p>
    <ul>
      <li><code>CoreTelephony.framework</code></li>
      <li><code>SystemConfiguration.framework</code></li>
      <li><code>libc++.tbd</code></li>
      <li><code>libz.tbd</code></li>
    </ul>
  </li>
  <li>
    <p>Implement the agent using the appropriate method:</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>To ensure proper instrumentation, you must call the agent on the first line of <code>didFinishLaunchingWithOptions()</code>, and run the agent on the main thread. Starting the call later, on a background thread, or asynchronously can cause unexpected or unstable behavior.</p>
    </div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p><strong>Language</strong></p>
          </div>
          <div>
            <p><strong>Procedure</strong></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Objective-C</p>
          </div>
          <div>
            <ol>
              <li>To start the agent: Import the New Relic header at the top of your <code>prefix.pch</code>.</li>
              <li>Add <code>+[NewRelic startWithApplicationToken:@"&#x3C;appToken>"]</code> to the top of <code>-application:didFinishLaunchingWithOptions:</code> in your <code>AppDelegate.m</code>, using the unique <a href="/docs/mobile-apps/viewing-your-application-token">application token</a> that is automatically generated.</li>
            </ol>
          </div>
        </div>
        <div>
          <div>
            <p>Swift</p>
          </div>
          <div>
            <ol>
              <li>
                <p>Create a bridging header file:</p>
                <ol>
                  <li>Select <strong>File > New > File > Objective-C File</strong>.</li>
                  <li>Name the file <code>Placeholder.m</code>, then select <strong>Next</strong>.</li>
                  <li>Select <strong>Create</strong>, and confirm Xcode's prompt to generate the bridging header.</li>
                  <li>Delete <code>Placeholder.m</code>.</li>
                </ol>
              </li>
              <li>
                <p>Import the New Relic agent by adding <code>#import "NewRelic/NewRelic.h"</code> to the top of <code>MyApp-Bridging-Header.h</code>.</p>
              </li>
              <li>
                <p>Add <code>NewRelic.start(withApplicationToken: ">appToken>")</code> to the top of <code>application(_:didFinishLaunchingWithOptions:)</code> in your <code>AppDelegate.swift</code> using the unique <a href="/docs/mobile-apps/viewing-your-application-token">application token</a> that is automatically generated.</p>
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </li>
  <li>
    <p>Add a build script to your target's <strong>Build Phases</strong>. Ensure the new build script is the very last build phase, then paste the following, replacing PUT_NEW_RELIC_APP_TOKEN_HERE with your application token:</p>
    <pre><code>SCRIPT=`/usr/bin/find "${SRCROOT}" -name newrelic_postbuild.sh | head -n 1`
/bin/sh "${SCRIPT}" "PUT_NEW_RELIC_APP_TOKEN_HERE"
</code></pre>
  </li>
  <li>
    <p>Clean and build your app, and then run it in the simulator or other device.</p>
  </li>
</ol>
<h2>Optional: Execute a demo crash [#demo]</h2>
<p>If you have trouble getting your app to crash, the New Relic agent provides an API to execute a demo crash.</p>
<p><strong>Recommendation:</strong> Add one of these lines of code to a button click event handler as applicable:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Language</strong></p>
      </div>
      <div>
        <p><strong>Code</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Objective-C</p>
      </div>
      <div>
        <p>Crash:</p>
        <pre><code>[NewRelic crashNow];

</code></pre>
        <pre><code>
[NewRelic crashNow:@"&#x3C;reason>"];

</code></pre>Crash with log message:
      </div>
    </div>
    <div>
      <div>
        <p>Swift</p>
      </div>
      <div>
        <p>Crash:</p>
        <pre><code>NewRelic.crashNow()

</code></pre>
        <pre><code>
NewRelic.crashNow(_ message:)

</code></pre>Crash with log message:
      </div>
    </div>
  </div>
</div>
<h2>Optional: Change the logging level [#logging]</h2>
<p>Six log levels are available for mobile apps monitoring:</p>
<ul>
  <li><code>none</code></li>
  <li><code>error</code></li>
  <li><code>warning</code></li>
  <li><code>info</code></li>
  <li><code>verbose</code></li>
  <li><code>ALL</code></li>
</ul>
<p>To increase your logging level in the app, add the following method:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Language</strong></p>
      </div>
      <div>
        <p><strong>Code</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Objective-C</p>
      </div>
      <div>
        <p>Just before calling <code>startWithApplicationToken</code> in <code>AppDelegate.m</code>, add:</p>
        <pre><code>[NRLogger setLogLevels:NRLogLevelALL];

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p>Swift</p>
      </div>
      <div>
        <p>Just before calling <code>start(withApplicationToken:)</code> in <code>AppDelegate.swift</code>, add:</p>
        <pre><code>NRLogger.setLogLevels(NRLogLevelALL.rawValue)

</code></pre>
      </div>
    </div>
  </div>
</div>
