
<p>For performance reasons the New Relic REST API (v2) paginates the response output. This is because returning the entire data set might be feasible for some queries but prohibitive for others that return a very large amount of data.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>The sort order for returned data is indeterminate. Do not assume or rely on a particular order.</p>
</div>
<h2>Objects returned per page [#return_count]</h2>
<p>The data returned per page depends on what data is requested. The number of pages depends on the number of JSON objects necessary to complete the list.</p>
<p>The following limits are not configurable:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Metrics</strong></p>
      </div>
      <div>
        <p><strong>Limits</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Data values</p>
      </div>
      <div>
        <p>200 JSON objects per page.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Names</p>
      </div>
      <div>
        <p>1000 JSON objects per page.</p>
        <p>This applies to the following commands in the API Explorer:</p>
        <ul>
          <li><a href="https://rpm.newrelic.com/api/explore/applications/metric_names">Applications > Metric Names</a></li>
          <li><a href="https://rpm.newrelic.com/api/explore/application_hosts/names">Applications Host > Metric Names</a></li>
          <li><a href="https://rpm.newrelic.com/api/explore/application_instances/names">Applications Instances > Metric Names</a></li>
          <li><a href="https://rpm.newrelic.com/api/explore/mobile_applicatios/metric_names">Mobile Applications > Metric Names</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Before listing metric names, see <a href="#metric_name_cursor_paging">Paging for metric names</a> and the <a href="/docs/apis/rest-api-v2/application-examples-v2/listing-your-app-id-metric-data-v2#name_list_guidelines">Metric name listing guidelines</a>.</p>
</div>
<h2>Request a specific page [#requesting_page]</h2>
<p>To specify a page, add the <code>page=</code> parameter to the query. The following example requests page 15:</p>
<pre><code>curl -X GET 'https://api.newrelic.com/v2/applications/$APP_ID/metrics.xml?page=15' \
     -H 'Api-Key:$API_KEY' -i
</code></pre>
<p>In the REST API Explorer, you can quickly <a href="/docs/apm/apis/api-explorer-v2/parts-api-explorer#data_page">change the page being viewed</a>.</p>
<h2>Link header examples showing page count [#link-header]</h2>
<p>The API call returns the <code>Link</code> header if the data is paginated. This indicates the number of pages and the page being viewed. This line also appears at the top of the <code>Response</code> in the REST API Explorer.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>The Link header will only appear if the output data is paginated.</p>
</div>
<p>To obtain this line using some implementations of cURL, you may need to include the <code>-v</code> option.</p>
<pre><code>curl -v -X GET 'https://api.newrelic.com/v2/applications/$APP_ID/...'
</code></pre>
<p>New Relic uses the <a href="http://www.rfc-editor.org/rfc/rfc5988.txt">RFC 5988</a> standard format for links.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiMy1wYWdlcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRXhhbXBsZTogUmV0dXJuIDMgcGFnZXMifV0=">
    <div data-prop-text="title">Example: Return 3 pages</div>
    <p>The API output will contain a <code>Link</code> line similar to this. Lines are wrapped to improve readability.</p>
    <pre><code>Link: &#x3C;https://api.newrelic.com/v2/alert_policies.xml?page=2>;rel="next", 
&#x3C;https://api.newrelic.com/v2/alert_policies.xml?page=3>;rel="last"

</code></pre>This indicates there are three pages and you are viewing the first one.
    &#x3C;Table>
    &#x3C;thead>
    &#x3C;tr>
    &#x3C;th>
    Parameter
    &#x3C;/th>
    &#x3C;th>
    Description
    &#x3C;/th>
    &#x3C;/tr>
    &#x3C;/thead>
    &#x3C;tbody>
    &#x3C;tr>
    &#x3C;td>
    `...page=2>;rel="next"`
    &#x3C;/td>
    &#x3C;td>
    Page 2 is the next page
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `...page=3>;rel="last"`
    &#x3C;/td>
    &#x3C;td>
    Page 3 is the last page
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;/tbody>
    &#x3C;/Table>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiMjAtcGFnZXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkV4YW1wbGU6IFJldHVybiAyMCBwYWdlcyJ9XQ==">
    <div data-prop-text="title">Example: Return 20 pages</div>
    <p>The API output will contain a <code>Link</code> line similar to this. Lines are wrapped to improve readability.</p>
    <pre><code>Link: &#x3C;https://api.newrelic.com/v2/applications/5313884/metrics.xml?page=1>;rel="first", 
&#x3C;https://api.newrelic.com/v2/applications/5313884/metrics.xml?page=18>;rel="prev", 
&#x3C;https://api.newrelic.com/v2/applications/5313884/metrics.xml?page=20>;rel="next", 
&#x3C;https://api.newrelic.com/v2/applications/5313884/metrics.xml?page=20>;rel="last"

</code></pre>This indicates there are 20 pages and you are viewing page 19.
    &#x3C;Table>
    &#x3C;thead>
    &#x3C;tr>
    &#x3C;th>
    Parameter
    &#x3C;/th>
    &#x3C;th>
    Description
    &#x3C;/th>
    &#x3C;/tr>
    &#x3C;/thead>
    &#x3C;tbody>
    &#x3C;tr>
    &#x3C;td>
    `...page=1>;rel="first"`
    &#x3C;/td>
    &#x3C;td>
    This is the first page.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `...page=18>;rel="prev"`
    &#x3C;/td>
    &#x3C;td>
    Page 18 is the previous page.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `...page=20>;rel="next"`
    &#x3C;/td>
    &#x3C;td>
    Page 20 is the next page.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `...page=20>;rel="last"`
    &#x3C;/td>
    &#x3C;td>
    Page 20 is the last page.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;/tbody>
    &#x3C;/Table>
  </div>
</div>
<h2>Pagination for metric names [#metric_name_cursor_paging]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>New Relic recommends using this pagination technique when listing multiple pages of metric names.</p>
</div>
<p>Listing metric names requires intensive database computations when there are multiple pages. The process consumes resources on the New Relic collector as well as pushing the time consumed to the <a href="/docs/apis/rest-api-v2/requirements/api-overload-protection-handling-429-errors">Overload protection limit</a>. However, there is a <strong>cursor-based technique</strong>, which allows for easier pagination through the metric names.</p>
<p>When New Relic returns the first page (1000 metric names), the link header line will show <a href="#3-pages">page=2 rel=next</a>, indicating that <strong>page 1</strong> is being reported. It will also show a <strong>cursor</strong> entry that can be used to acquire the next page of data. The last page, <strong>page=x rel=last</strong>, is still reported to provide the page count as needed.</p>
<p>When the cursor value is submitted, the next page of metric names being shown will contain a new cursor value in the Link line referring to the next page. This process can continue until the last page is reached. On the last page, no new cursor value will appear.</p>
<p>The cursor paging technique is available for any API call that lists the metric names, but <strong>not</strong> for the metric values. The <strong>cursor</strong> parameter in the <a href="http://rpm.newrelic.com/api/explore/applications/metric_names">API explorer metric name endpoints</a> implements this feature.</p>
<p>The following example shows the use of the cursor technique to request several pages of metric names:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWV0cmljLW5hbWUtcGFnaW5hdGlvbi1leGFtcGxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJNZXRyaWMgbmFtZSBwYWdpbmF0aW9uIGV4YW1wbGUifV0=">
    <div data-prop-text="title">Metric name pagination example</div>
    <h3>First request</h3>
    <p>This example shows filtering for all metric names that may contain the string "View" by specifying name=View. The output for this example is 3 pages long:</p>
    <pre><code>curl -X GET 'https://api.newrelic.com/v2/applications/$APP_ID/metrics.json' \
     -H 'Api-Key:$API_KEY' -i \
     -G -d 'name=View'

</code></pre>
    <pre><code>
Link: &#x3C;https://api.newrelic.com/v2/applications/12345/metrics.json>; rel=first, 
      &#x3C;https://api.newrelic.com/v2/applications/12345/metrics.json?cursor=>; rel=next

</code></pre>The output Link line indicates the end of the list by the non-existent cursor, "cursor=" value for "rel=next".
    <pre><code>
curl -X GET 'https://api.newrelic.com/v2/applications/12345/metrics.json' \
     -H 'Api-Key:$API_KEY' -i \
     -G -d 'name=View&#x26;cursor=REF3TURBd05ibURTOHc9PQ'

</code></pre>### Third and final request
    This request is for the 3rd and final page with filtering name=View and uses the cursor value from the second response above.
    <pre><code>
Link: &#x3C;https://api.newrelic.com/v2/applications/12345/metrics.json>; rel=first, 
      &#x3C;https://api.newrelic.com/v2/applications/12345/metrics.json?cursor=REF3TURBd05ibURTOHc9PQ%3D%3D>; rel=next

</code></pre>The output Link line (wrapped for display purposes) shows a new cursor value for the "rel=next" page but does not indicate the current line.
    <pre><code>
curl -X GET 'https://api.newrelic.com/v2/applications/12345/metrics.json' \
     -H 'Api-Key:$API_KEY' -i \
     -G -d 'name=View&#x26;cursor=a1pHUmtaR1JiR1krYmc9PQ%3D%3D'

</code></pre>The use of the filter is not necessary, it is included in this example to demonstrate that filtering and pagination may be used simultaneously.
    ### Second request
    This request is for the next page with filtering name=View and shows the use of the the cursor value from the first response above.
    <pre><code>
Link: &#x3C;https://api.newrelic.com/v2/applications/${APP_ID}/metrics.json?name=View&#x26;page=2&#x26;cursor=a1pHUmtaR1JiR1krYmc9PQ%3D%3D>; rel="next", 
      &#x3C;https://api.newrelic.com/v2/applications/${APP_ID}/metrics.json?name=View&#x26;page=3>; rel="last"

</code></pre>The output Link line (wrapped for display purposes) shows the total page count indicated by "page=3" and "rel=last" as well as the cursor value that can be used to acquire the next page, page=2.:
  </div>
</div>
