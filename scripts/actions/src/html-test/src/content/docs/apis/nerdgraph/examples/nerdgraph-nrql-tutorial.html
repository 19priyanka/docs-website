
<p>You can use the <a href="/docs/introduction-new-relic-graphql">New Relic NerdGraph GraphiQL explorer</a> to make <a href="/docs/insights/nrql-new-relic-query-language/using-nrql/introduction-nrql">New Relic Query Language (NRQL)</a> queries. To learn how to construct these queries and see responses, go to the NerdGraph GraphiQL explorer at <a href="https://api.newrelic.com/graphiql">https://api.newrelic.com/graphiql</a>. This document explains some of the available functions for NRQL queries.</p>
<h2>Basic NRQL queries with NerdGraph [#basic-queries]</h2>
<p>To make NRQL queries using NerdGraph:</p>
<ol>
  <li>Go to the NerdGraph GraphiQL explorer at <a href="https://api.newrelic.com/graphiql">https://api.newrelic.com/graphiql</a>.</li>
  <li>Pass the NRQL query as a string argument to the NRQL object, and include the <code>results</code> field in your NerdGraph query.</li>
</ol>
<p>For example, to get a count of all <a href="/docs/insights/insights-data-sources/default-data/apm-default-event-attributes-insights#transaction-event">transaction events</a> in the last hour, use the following query:</p>
<pre><code>{
   actor {
      account(id: YOUR_ACCOUNT_ID) {
         nrql(query: "SELECT count(*) FROM Transaction SINCE 1 HOUR AGO") {
            results
         }
      }
   }
}
</code></pre>
<p>This NerdGraph query example returns the following results:</p>
<pre><code>{
   "data": {
      "actor": {
         "account": {
            "nrql": {
               "results": [
                 {
                  "count": 1000
                 }
                ]
            }
         }
      }
   }
}
</code></pre>
<p>The actual value of the count varies depending on your transaction data. Use the NerdGraph GraphiQL explorer to experiment with queries.</p>
<h2>Create embeddable charts [#embeddable-charts]</h2>
<p>In addition to returning raw data, you can fetch embeddable chart links for the data to use in an application. For example, instead of a single count of <a href="/docs/insights/insights-data-sources/default-data/apm-default-event-attributes-insights#transaction-event">transaction</a>, you can create a <a href="/docs/insights/use-insights-ui/manage-dashboards/chart-types#widget-types">chart</a> that illustrates a timeseries of bucketed counts over time. Add <code>TIMESERIES</code> to your query with <code>embeddedChartUrl</code>:</p>
<pre><code>{
   actor {
      account(id: YOUR_ACCOUNT_ID) {
         nrql(query: "SELECT count(*) from Transaction TIMESERIES") {
            embeddedChartUrl
         }
      }
   }
}
</code></pre>
<p>This NerdGraph query example returns the URL for the chart in the following response:</p>
<pre><code>{
   "data": {
      "actor": {
         "account": {
            "nrql": {
               "embeddedChartUrl": "https://chart-embed.service.newrelic.com/charts/EMBEDDABLE-CHART-ID"
            }
         }
      }
   }
}
</code></pre>
<p>If you view the embedded chart URL using any standard HTTP client, it returns an image showing a visualization of the response to the query you submitted. These charts follow the same <a href="/docs/using-new-relic/user-interface-functions/share-your-data/embed-charts-external-webpages#rules">embedded chart rules</a> as embedded charts that are created elsewhere. To change the style of the data visualization, pass a <code>chartType</code> argument to <code>embeddedChartUrl</code>.</p>
<h2>Suggested facets [#suggest-facets]</h2>
<p>When using NerdGraph to explore your data, you can use the <code>suggestedFacets</code> field to return suggested attributes for use in <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-syntax-components-functions#sel-facet">faceted NRQL queries</a>.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3VnZ2VzdGVkLWZhY2V0LXJ1bGVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJSdWxlcyBnb3Zlcm5pbmcgc3VnZ2VzdGVkIGZhY2V0cyJ9XQ==">
    <div data-prop-text="title">Rules governing suggested facets</div>
    <p>Here are some of the rules that govern what attributes are suggested:</p>
    <ul>
      <li>
        <p><strong>Built-in suggestions.</strong> Each <a href="/docs/using-new-relic/welcome-new-relic/getting-started/glossary#event">event type</a> comes with its own set of recommended attributes. These are attributes chosen by New Relic for their importance and popularity.</p>
      </li>
      <li>
        <p><strong>Usage-based suggestions.</strong> Some attribute suggestions are based on the queries that have been frequently used by your account. These suggestions can include custom attributes.</p>
      </li>
      <li>
        <p><strong>Role restriction.</strong> <a href="/docs/accounts/accounts/roles-permissions/users-roles">Restricted users</a> do not have access to account-related facet suggestions.</p>
        <p>To disable the use of account data for determining suggested queries, <a href="/docs/using-new-relic/welcome-new-relic/getting-started/find-help-or-file-support-ticket#support_tickets">contact Support</a>.</p>
      </li>
    </ul>
  </div>
</div>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1zdWdnZXN0ZWQtcXVlcnkifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkV4YW1wbGUgb2YgcmV0dXJuaW5nIHN1Z2dlc3RlZCBhdHRyaWJ1dGVzIn1d">
    <div data-prop-text="title">Example of returning suggested attributes</div>
    <p>Here's an example of returning suggested attributes for faceting <a href="https://docs.newrelic.com/docs/insights/insights-data-sources/default-data/apm-default-event-attributes-insights#transaction-event">transaction</a> counts. The response suggests the <code>host</code> attribute. Faceting by <code>host</code> can reveal that one host is servicing more requests than other hosts.</p>
    <pre><code>{
   actor {
      account(id: YOUR_ACCOUNT_ID) {
         nrql(query: "SELECT count(*) from Transaction TIMESERIES") {
            suggestedFacets {
               attributes
            }
         }
      }
   }
}

</code></pre>
    <pre><code>
{
   "data": {
      "actor": {
         "account": {
            "nrql": {
               "suggestedFacets": [
       	          "attributes": ["host"]
               ]
            }
         }
      }
   }
}

</code></pre>This NerdGraph query example returns a response similar to this:
  </div>
</div>
