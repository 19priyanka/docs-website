
<p>This is an example of how to use the New Relic Data API (v2) to get your application's average error rate over a specific time period. This value appears as a percentage above the <a href="#avg-error-image">Error rate chart</a> on your <a href="/docs/apm/applications-menu/monitoring/apm-overview-page">APM <strong>Summary</strong> page</a>.</p>
<p>To use the API, you need:</p>
<ul>
  <li>An <a href="https://docs.newrelic.com/docs/apis/rest-api-v2/getting-started/introduction-new-relic-rest-api-v2#api_key">API key</a>.</li>
  <li>Your New Relic application ID (from the URL that your browser shows from the APM user interface, or from the <a href="/docs/apis/api-explorer-examples-metric-data#app_id">API Explorer user interface</a>)</li>
</ul>
<h2>Formula [#avg-error-time-formula]</h2>
<p>The average percentage appears above the <strong>Error rate</strong> chart on your app's <a href="/docs/apm/applications-menu/monitoring/apm-overview-page"><strong>Summary</strong> page</a>. New Relic uses this formula to calculate it:</p>
<pre><code>Application Error Rate = 100 * Errors/all:error_count / (HttpDispatcher:call_count + OtherTransaction/all:call_count)
</code></pre>
<p>Here is an example of the <strong>Error rate</strong> chart that appears on your app's APM Summary page.</p>
<p>
  <img src="./images/crop-apm-overview-error.png" alt="New Relic APM Overview page: Error rate percentage" title="New Relic APM Overview page: Error rate percentage">
</p>
<p><strong>APM > (selected app) > Monitoring > Summary:</strong> You can use the New Relic REST API v2 to return the average error rate percentage that appears on your app's <strong>APM Summary</strong> page.</p>
<h2>API commands [#avg-error-time-commands]</h2>
<p>To obtain the <a href="/docs/data-analysis/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data#timeslice-data">metric timeslice</a> values, use the following three commands. This example uses the same time period for each command, and they are all summarized.</p>
<p>To obtain the <strong>error count:</strong></p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQ2FsbCB0byBvYnRhaW4gZXJyb3IgY291bnQifV0=">
    <div data-prop-text="title">Call to obtain error count</div>
    <pre><code>curl -X GET "https://api.newrelic.com/v2/applications/$APP_ID/metrics/data.xml" \
    -H "Api-Key:$API_KEY" -i \
   -d 'names[]=Errors/all&#x26;values[]=error_count&#x26;from=2014-04-01T00:00:00+00:00&#x26;to=2014-04-01T23:35:00+00:00&#x26;summarize=true'

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRXhhbXBsZSBvdXRwdXQgZnJvbSBlcnJvciBjb3VudCBjYWxsIn1d">
    <div data-prop-text="title">Example output from error count call</div>
    <pre><code>{
    "metric_data": {
        "from": "2014-04-01T00:00:00+00:00",
        "metrics": [
            {
                "name": "Errors/all",
                "timeslices": [
                    {
                        "from": "2014-04-01T00:35:00+00:00",
                        "to": "2014-04-01T23:35:00+00:00",
                        "values": {
                            "error_count": 5
                        }
                    }
                ]
            }
        ],
        "metrics_found": [
            "Errors/all"
        ],
        "metrics_not_found": [],
        "to": "2014-04-01T23:35:00+00:00"
    }
}

</code></pre>
  </div>
</div>
<p>To get the <strong>HttpDispatcher call count</strong> (web application):</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQ2FsbCB0byBvYnRhaW4gSHR0cERpc3BhdGNoZXIgY2FsbCBjb3VudCJ9XQ==">
    <div data-prop-text="title">Call to obtain HttpDispatcher call count</div>
    <pre><code>curl -X GET "https://api.newrelic.com/v2/applications/$APP_ID/metrics/data.xml" \
    -H "Api-Key:$API_KEY" -i \
   -d 'names[]=HttpDispatcher&#x26;values[]=call_count&#x26;from=2014-04-01T00:00:00+00:00&#x26;to=2014-04-01T23:35:00+00:00&#x26;summarize=true'

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRXhhbXBsZSBvdXRwdXQgZnJvbSBIdHRwRGlzcGF0Y2hlciBjYWxsIGNvdW50IGNhbGwifV0=">
    <div data-prop-text="title">Example output from HttpDispatcher call count call</div>
    <pre><code>{
    "metric_data": {
        "from": "2014-04-01T00:00:00+00:00",
        "metrics": [
            {
                "name": "HttpDispatcher",
                "timeslices": [
                    {
                        "from": "2014-04-01T00:35:00+00:00",
                        "to": "2014-04-01T23:35:00+00:00",
                        "values": {
                            "call_count": 19608
                        }
                    }
                ]
            }
        ],
        "metrics_found": [
            "HttpDispatcher"
        ],
        "metrics_not_found": [],
        "to": "2014-04-01T23:35:00+00:00"
    }
}

</code></pre>
  </div>
</div>
<p>To get the <strong>OtherTransaction call count</strong> (non-web app):</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQ2FsbCB0byBvYnRhaW4gT3RoZXJUcmFuc2FjdGlvbiBjYWxsIGNvdW50In1d">
    <div data-prop-text="title">Call to obtain OtherTransaction call count</div>
    <pre><code>curl -X GET "https://api.newrelic.com/v2/applications/$APP_ID/metrics/data.xml" \
    -H "Api-Key:$API_KEY" -i \
   -d 'names[]=OtherTransaction/all&#x26;values[]=call_count&#x26;from=2014-04-01T00:00:00+00:00&#x26;to=2014-04-01T23:35:00+00:00&#x26;summarize=true'

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRXhhbXBsZSBvdXRwdXQgZnJvbSBPdGhlclRyYW5zYWN0aW9uIGNhbGwgY291bnQgY2FsbCJ9XQ==">
    <div data-prop-text="title">Example output from OtherTransaction call count call</div>
    <pre><code>{
    "metric_data": {
        "from": "2014-04-01T00:00:00+00:00",
        "metrics": [
            {
                "name": "OtherTransaction/all",
                "timeslices": [
                    {
                        "from": "2014-04-01T00:35:00+00:00",
                        "to": "2014-04-01T23:35:00+00:00",
                        "values": {
                            "call_count": 4
                        }
                    }
                ]
            }
        ],
        "metrics_found": [
            "OtherTransaction/all"
        ],
        "metrics_not_found": [],
        "to": "2014-04-01T23:35:00+00:00"
    }
}

</code></pre>
  </div>
</div>
