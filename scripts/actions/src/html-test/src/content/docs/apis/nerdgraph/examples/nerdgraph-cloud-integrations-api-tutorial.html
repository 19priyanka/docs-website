
<p>This document provides examples of how to use <a href="/docs/apis/graphql-api/get-started/introduction-new-relic-nerdgraph">New Relic NerdGraph</a> to query and modify your <a href="/docs/integrations/new-relic-integrations/getting-started/introduction-infrastructure-integrations#integration-types">cloud integration configuration data</a>, including Amazon AWS, Microsoft Azure, and Google Cloud Platform (GCP). Using the <a href="https://api.newrelic.com/graphiql">NerdGraph GraphiQL explorer</a>, you can also <a href="/docs/query-nrql-through-new-relic-graphql-api">query NRQL data</a>.</p>
<p>These examples for querying cloud integration configuration data use <a href="https://graphql.org/learn/queries/">GraphQL queries and mutations</a>:</p>
<ul>
  <li><a href="#queries">Queries</a>: requests that are intended to only fetch data</li>
  <li><a href="#mutations">Mutations</a>: requests that create or update data on the server</li>
</ul>
<h2>Requirements</h2>
<p>Before querying cloud integration data with NerdGraph, ensure you have:</p>
<ul>
  <li>Followed the instructions to <a href="/docs/integrations/new-relic-integrations/getting-started/introduction-infrastructure-integrations#installation-instructions">connect cloud integrations with New Relic</a>.</li>
  <li>Created an <a href="https://docs.newrelic.com/docs/apis/getting-started/intro-apis/understand-new-relic-api-keys#user-api-key">API key</a>.</li>
</ul>
<h2>Access the NerdGraph GraphiQL explorer [#access]</h2>
<p>To access the NerdGraph GraphiQL explorer:</p>
<ol>
  <li>Go to <a href="https://api.newrelic.com/graphiql">https://api.newrelic.com/graphiql</a>.</li>
  <li>Add any of the following examples.</li>
</ol>
<h2>Query examples [#queries]</h2>
<p>Queries are requests that are intended to only fetch data (no side effects). Queries in NerdGraph are not static, meaning that you can ask for more or less data depending on your needs. For each query, you can specify exactly what data you want to retrieve, as long as it is supported by the schema.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGlzdC1jbG91ZC1wcm92aWRlcnMtYXZhaWxhYmxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJBdmFpbGFibGUgcHJvdmlkZXIgYWNjb3VudHMifV0=">
    <div data-prop-text="title">Available provider accounts</div>
    <p>This query returns a list of all provider accounts available in your infrastructure data. Depending on the provider, additional properties can be requested. For example, for GCP, you can also ask for the <code>serviceAccountId</code> property, which is needed when linking a new GCP project to New Relic.</p>
    <p><strong>Anonymous:</strong></p>
    <pre><code>{
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        providers {
          id
          name
          slug
          ... on CloudGcpProvider {
            serviceAccountId
          }
        }
      }
    }  
  }
}

</code></pre>
    <pre><code>
query cloudProviders {
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        providers {
          id
          name
          slug
        }
      }
    }
  }
}

</code></pre>**Named:**
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3BlY2lmaWMtcHJvdmlkZXItaW5mbyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU3BlY2lmaWMgcHJvdmlkZXIgYWNjb3VudCBpbmZvcm1hdGlvbiJ9XQ==">
    <div data-prop-text="title">Specific provider account information</div>
    <p>This query returns information about a specific provider account for your Amazon AWS integration. The properties <code>id</code>, <code>name</code>, <code>slug</code> are requested, along with a list of integrations available to be monitored.</p>
    <pre><code>{
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        provider(slug: "aws") {
          id
          slug
          name
          services {
            id
            slug
            name
          }
        }
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3BlY2lmaWMtY2xvdWQtc2VydmljZS1pbnRlZ3JhdGlvbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU3BlY2lmaWMgaW50ZWdyYXRpb24gZGF0YSBmcm9tIGEgc3BlY2lmaWMgY2xvdWQgcHJvdmlkZXIifV0=">
    <div data-prop-text="title">Specific integration data from a specific cloud provider</div>
    <p>This query returns information about a specific cloud service integration of a provider. In this example, the integration is the <a href="/docs/integrations/amazon-integrations/aws-integrations-list/aws-alb-monitoring-integration">Amazon AWS ALB monitoring integration</a> and the provider is AWS. The properties <code>id</code>, <code>name</code>, <code>slug</code>, and <code>isAllowed</code> are requested with the available configuration parameters.</p>
    <pre><code>{
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        provider(slug: "aws") {
          service(slug: "alb") {
            id
            name
            slug
            isEnabled
          }
        }
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGlzdC1lbmFibGVkLXByb3ZpZGVyLWFjY291bnRzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJMaXN0IG9mIGVuYWJsZWQgY2xvdWQgYWNjb3VudHMifV0=">
    <div data-prop-text="title">List of enabled cloud accounts</div>
    <p>This query returns the list of cloud accounts enabled with your New Relic account. (Your cloud account associates your New Relic account and a specific provider account with your integration.) You can enable multiple cloud provider accounts in the same New Relic account, even with the same cloud provider.</p>
    <pre><code>{
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        linkedAccounts {
          id
          name    
          createdAt
          provider {
            id
            name      
          }
        }
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZW5hYmxlZC1wcm92aWRlci1hY2NvdW50In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJTcGVjaWZpYyBsaW5rZWQgYWNjb3VudCBkYXRhIn1d">
    <div data-prop-text="title">Specific linked account data</div>
    <p>This query returns information about a linked account, including the properties <code>name</code>, <code>providerId</code>, and a list of the cloud integrations enabled for monitoring.</p>
    <pre><code>{
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        linkedAccount(id: &#x3C;LINKED_CLOUD_ACCOUNT_ID>) {
          name
          provider {
            id
            name
          }
          integrations {
            id
            name
            createdAt
            updatedAt
          }
        }
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYWxsLXByb3ZpZGVyLWFjY291bnRzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJFbmFibGVkIGNsb3VkIGludGVncmF0aW9ucyBmb3IgYWxsIGxpbmtlZCBhY2NvdW50cyJ9XQ==">
    <div data-prop-text="title">Enabled cloud integrations for all linked accounts</div>
    <p>This query returns all monitored integrations for all the provider cloud accounts.</p>
    <pre><code>{
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        linkedAccounts {
          name
          provider {
            id
            name
          }
          integrations {
            id
            name
            service {
              id
              name        
            }
            createdAt
            updatedAt
          }
        }
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xvdWQtaW50ZWdyYXRpb24tcHJvdmlkZXItYWNjb3VudCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU3BlY2lmaWMgY2xvdWQgaW50ZWdyYXRpb24gZGF0YSBmb3IgYSBzcGVjaWZpYyBsaW5rZWQgYWNjb3VudCJ9XQ==">
    <div data-prop-text="title">Specific cloud integration data for a specific linked account</div>
    <p>This query returns information about a specific integration from a specific linked account.</p>
    <pre><code>{
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        linkedAccount(id: &#x3C;LINKED_CLOUD_ACCOUNT_ID>) {
          name
          provider {
            id
            name
          }
          integration(id: &#x3C;INTEGRATION_ID>) {
            id
            name
            service {
              id
              name        
            }
            createdAt
            updatedAt     
          }
        }
      }
    }
  }
}

</code></pre>
  </div>
</div>
<h2>Mutation examples [#mutations]</h2>
<p>Mutations are requests that are intended to have side effects, such as creating or updating data on the server. Mutations require the keyword <code>mutation</code> and the name of the mutation. NerdGraph mutations are restricted to a subset of all possible mutations.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGluay1hY2NvdW50In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJMaW5rIGFuIGFjY291bnQifV0=">
    <div data-prop-text="title">Link an account</div>
    <p>This mutation allows linking cloud provider accounts to a New Relic account, creating one or more linked accounts. It can link one specific cloud provider account (for example <code>aws</code>) to the New Relic account or multiple cloud provider accounts to one New Relic account.</p>
    <p><strong>Required:</strong></p>
    <ul>
      <li>
        <p>The parameter <code>&#x3C;PROVIDER_ACCOUNT_NAME></code> is required and cannot be empty. It must be unique in your New Relic account.</p>
      </li>
      <li>
        <p>Other parameters are specific to the provider (AWS, GCP, and Azure) and are also required. In the following sections, you can see which parameters are required for each provider account. After linking an account the <code>createdAt</code> and <code>updatedAt</code> values are equal.</p>
        <pre><code>mutation {
  cloudLinkAccount(
      accounts: {
        accountId: &#x3C;NR_ACCOUNT_ID>,
        aws: [{
          name: &#x3C;PROVIDER_ACCOUNT_NAME>,
          &#x3C;other_params>
        }]
        azure: [{
          name: &#x3C;PROVIDER_ACCOUNT_NAME>,
          &#x3C;other_params>
        }]
        gcp: [{
          name: &#x3C;PROVIDER_ACCOUNT_NAME>,
          &#x3C;other_params>
        }]
      }
    ) {
      linkedAccounts {
        id
        name
        authLabel
        createdAt
        updatedAt
      }
    }
  }
}
</code></pre>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGluay1hd3MifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkxpbmsgYW4gQW1hem9uIEFXUyBhY2NvdW50In1d">
    <div data-prop-text="title">Link an Amazon AWS account</div>
    <p>This mutation links an Amazon AWS provider account to your New Relic account.</p>
    <pre><code>mutation {
  cloudLinkAccount(
      accountId: &#x3C;NR_ACCOUNT_ID>,
      accounts: {
        aws: [{
          name: &#x3C;PROVIDER_ACCOUNT_NAME>,
          arn: &#x3C;AWS_ROLE_ARN>
        }]
      }
    ) {
      linkedAccounts {
        id
        name
        authLabel
        createdAt
        updatedAt
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGluay1henVyZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTGluayBhIE1pY3Jvc29mdCBBenVyZSBhY2NvdW50In1d">
    <div data-prop-text="title">Link a Microsoft Azure account</div>
    <p>This mutation links a Microsoft Azure cloud subscription to the New Relic account.</p>
    <pre><code>mutation {
  cloudLinkAccount(
    accountId: &#x3C;NR_ACCOUNT_ID>,
    accounts: {
      azure: [{        
        name: &#x3C;PROVIDER_ACCOUNT_NAME>, 
        applicationId: &#x3C;azure_application_id>, 
        clientSecret: &#x3C;azure_application_key>, 
        tenantId: &#x3C;azure_tenant_id>, 
        subscriptionId: &#x3C;azure_subscription_id>
       }]          
    }
  ) {
    linkedAccounts {
      id
      name
      authLabel
      createdAt
      updatedAt
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGluay1nY3AifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkxpbmsgYSBHb29nbGUgQ2xvdWQgUGxhdGZvcm0gKEdDUCkgcHJvamVjdCJ9XQ==">
    <div data-prop-text="title">Link a Google Cloud Platform (GCP) project</div>
    <p>This mutation links a GCP project to the New Relic account.</p>
    <pre><code>mutation {
  cloudLinkAccount(
    accountId: &#x3C;NR_ACCOUNT_ID>,
    accounts: {
      gcp: [{        
        name: &#x3C;PROVIDER_ACCOUNT_NAME>,
        projectId: &#x3C;GCP_PROJECT_ID>
       }]
    }
  ) {
    linkedAccounts {
      id
      name
      authLabel
      createdAt
      updatedAt
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicmVuYW1lLWNsb3VkLWFjY291bnQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlJlbmFtZSBvbmUgb3IgbW9yZSBjbG91ZCBhY2NvdW50cyJ9XQ==">
    <div data-prop-text="title">Rename one or more cloud accounts</div>
    <p>This mutation allows you to rename one or more linked provider accounts. The <code>name</code> parameter is required, cannot be empty, and must be unique within your New Relic account.</p>
    <pre><code>mutation {
  cloudRenameAccount(
    accountId: &#x3C;NR_ACCOUNT_ID>,
    accounts: [
      {        
        id: &#x3C;linked_cloud_account_id_1>,
        name: &#x3C;new_provider_account_name>
      },
      {
        id: &#x3C;linked_cloud_account_id_2>,
        name: &#x3C;new_provider_account_name>
      }
    ]
  ) {
    linkedAccounts {
      id          
      name
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZW5hYmxlLWluLWNsb3VkLWFjY291bnQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkVuYWJsZSBhbiBpbnRlZ3JhdGlvbiBpbiBhIGNsb3VkIGFjY291bnQifV0=">
    <div data-prop-text="title">Enable an integration in a cloud account</div>
    <p>This mutation allows you to enable the monitoring of one or more specific cloud integrations in an existing cloud account. With this mutation, New Relic records data for the enabled integration from the provider account. For each provider account you have access to different input parameters, matching each available service.</p>
    <pre><code>mutation {
  cloudConfigureIntegration (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      &#x3C;provider_slug> : {
        &#x3C;integration_slug>: [{            
            linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID>,
            &#x3C;other_parameters> 
        }]
      }
    }
  ) {
    integrations {
      id
      name
      integration {
        id
        slug
      }
      ... on SqsIntegration {
        awsRegions
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZW5hYmxlLWluLW11bHRpcGxlLWFjY291bnRzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJFbmFibGUgYW4gaW50ZWdyYXRpb24gaW4gbXVsdGlwbGUgY2xvdWQgYWNjb3VudHMifV0=">
    <div data-prop-text="title">Enable an integration in multiple cloud accounts</div>
    <p>If you have many provider accounts linked, you can enable the same integration in the many cloud accounts at the same time.</p>
    <p>For the output of the operation, you can use <a href="https://graphql.org/learn/queries/#fragments">GraphQL fragments</a> for integration specific configuration parameters.</p>
    <pre><code>mutation {
  cloudConfigureIntegration (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      &#x3C;provider_slug> : {
        &#x3C;integration_slug> : [
          { linkedAccountId: &#x3C;linked_cloud_account_id_1>  }, 
          { linkedAccountId: &#x3C;linked_cloud_account_id_2>  }
        ]
      } 
    }
  ) {
    integrations {
      id
      name
      integration {
        id 
        name
      }
      ... on SqsIntegration {
            awsRegions
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZW5hYmxlLW11bHRpcGxlLWludGVncmF0aW9ucy1tdWx0aXBsZS1hY2NvdW50cyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRW5hYmxlIG11bHRpcGxlIGludGVncmF0aW9ucyBpbiBtdWx0aXBsZSBjbG91ZCBhY2NvdW50cyJ9XQ==">
    <div data-prop-text="title">Enable multiple integrations in multiple cloud accounts</div>
    <p>If you have multiple cloud accounts linked, you can also enable multiple integrations in multiple linked cloud accounts at the same time.</p>
    <p>For the output of the operation, you can use <a href="https://graphql.org/learn/queries/#fragments">GraphQL fragments</a> to ask for integration specific configuration parameters.</p>
    <pre><code>mutation {
  cloudConfigureIntegration (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      &#x3C;provider_slug_1>: {
        &#x3C;integration_slug_1>: [
          { linkedAccountId: &#x3C;linked_cloud_account_id_1> }
        ]
        &#x3C;integration_slug_2>: [
          { linkedAccountId: &#x3C;linked_cloud_account_id_2> }
        ]
      },
      &#x3C;provider_slug_2>: {
        &#x3C;integration_slug_3>: [
          { linkedAccountId: &#x3C;linked_cloud_account_id_3>},
          { linkedAccountId: &#x3C;linked_cloud_account_id_4>}
        ]
      } 
    }
  ) {
    integrations {
      id
      name
      service {
        id 
        name
      }
      ... on SqsIntegration {
            awsRegions
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibW9kaWZ5LWludGVncmF0aW9uIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJNb2RpZnkgYW4gaW50ZWdyYXRpb24ncyBjb25maWd1cmF0aW9uIChyZWdpb25zLCBwb2xsaW5nIGludGVydmFscywgZXRjLikifV0=">
    <div data-prop-text="title">Modify an integration's configuration (regions, polling intervals, etc.)</div>
    <p>This mutation also allows you to modify one or more cloud integrations and change one or more configuration parameters. Each service will have specific parameters that you can modify.</p>
    <p>For parameters of a type list (for example, <code>awsRegion</code>) supply the full list. For the output of the operation, you can use <a href="https://graphql.org/learn/queries/#fragments">GraphQL fragments</a> to ask for integration specific configuration parameters.</p>
    <pre><code>mutation {
  cloudConfigureIntegration (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      &#x3C;provider_slug>: {
        &#x3C;integration_slug>: [{          
          linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID>,
          metricsPollingInterval: &#x3C;new_polling_interval>,
          &#x3C;parameter_1>: &#x3C;value_1>,
          &#x3C;parameter_N>: &#x3C;value_N>,
        }]
      }
    }
  ) {
    integrations {
      id
      name
      service {
        id
        slug
      }
      ... on SqsIntegration {            
        metricsPollingInterval,
        &#x3C;parameter_1>,
        &#x3C;parameter_N>
      }
    }
    errors {
      type
      message
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGlzYWJsZS1pbnRlZ3JhdGlvbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRGlzYWJsZSAocmVtb3ZlKSBhbiBpbnRlZ3JhdGlvbiJ9XQ==">
    <div data-prop-text="title">Disable (remove) an integration</div>
    <p>This mutation allows you to disable an integration and stop data collection for the specific cloud integration.</p>
    <pre><code>mutation {
  cloudDisableIntegration (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      : {
        : [
          { linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID> }
        ]
      }
    }
  ) {
    disabledIntegrations {
      id
      name
      authLabel
      provider {
        id
      }
    }
    errors {
      type
      message
    }
  }
}&#x3C;/integration_slug>&#x3C;/provider_slug>

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGlzYWJsZS1pbnRlZ3JhdGlvbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiVW5saW5rIGFjY291bnQifV0=">
    <div data-prop-text="title">Unlink account</div>
    <p>This mutation allows you to unlink cloud provider accounts from New Relic account.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJjYXV0aW9uIn1d">
      <p>This action can not be undone. However, you can link the account again, but account history will still be lost.</p>
    </div>
    <pre><code>mutation {
  cloudUnlinkAccount (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    accounts: {
      { linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID> }
    }
  ) {
    unlinkedAccounts {
      id
      name
    }
    errors {
      type
      message
    }
  }
}&#x3C;/integration_slug>&#x3C;/provider_slug>

</code></pre>
  </div>
</div>
<h2>Enable an Amazon AWS integration [#enable-aws-sqs]</h2>
<p>This example uses an <a href="/docs/integrations/amazon-integrations/aws-integrations-list/aws-sqs-monitoring-integration">Amazon AWS SQS</a> integration and assumes you have <a href="/docs/integrations/amazon-integrations/get-started/connect-aws-services-infrastructure">connected an AWS account to New Relic</a>.</p>
<p>To enable an Amazon AWS integration:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VuZC1xdWVyeS1mZXRjaCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU2VuZCBxdWVyeSB0byBmZXRjaCBhY2NvdW50IGRhdGEifV0=">
    <div data-prop-text="title">Send query to fetch account data</div>
    <p>Send a query to fetch data about the account, specifically available providers and already created provider accounts:</p>
    <pre><code>{
  actor {
    account(id: &#x3C;NR_ACCOUNT_ID>) {
      cloud {
        providers {
          id 
          name
          slug
        }     
        linkedAccounts {
          name
          integrations {
            id
            name
          }
        }
      }
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZW5hYmxlLWxpbmstYXdzLXNxcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTGluayBBV1MgcHJvdmlkZXIgYWNjb3VudCJ9XQ==">
    <div data-prop-text="title">Link AWS provider account</div>
    <p>Link an AWS provider account, if there is not one already linked or if you want to link another AWS account:</p>
    <ol>
      <li>
        <p>Use your New Relic account identifier in the <code>&#x3C;NR_ACCOUNT_ID></code> parameter.</p>
      </li>
      <li>
        <p>Provide a name for the provider account in the <code>&#x3C;PROVIDER_ACCOUNT_NAME></code>.</p>
      </li>
      <li>
        <p>Include the ARN of the AWS role used to fetch data from your AWS account.</p>
        <pre><code>mutation {
  cloudLinkAccount(
    accountId: &#x3C;NR_ACCOUNT_ID>,
    accounts: {
      aws: [{        
        name: &#x3C;PROVIDER_ACCOUNT_NAME>,
        arn: &#x3C;AWS_ROLE_ARN> }]
    }
  ) {
    linkedAccounts {
      id
      name
      authLabel
      createdAt
      updatedAt
    }
    errors {
      type
      message
    }
  }
}
</code></pre>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZW5hYmxlLXNxcy1pbnRlZ3JhdGlvbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRW5hYmxlIEFtYXpvbiBBV1MgU1FTIGludGVncmF0aW9uIn1d">
    <div data-prop-text="title">Enable Amazon AWS SQS integration</div>
    <p>Use your New Relic account ID in the <code>&#x3C;NR_ACCOUNT_ID></code> parameter and the ID of the provider account in the <code>&#x3C;LINKED_CLOUD_ACCOUNT_ID></code> parameter value.</p>
    <pre><code>mutation {
  cloudConfigureIntegration (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      aws: {
        sqs: [
          { linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID> }
        ]
      }
    } 
  ) {
    integrations {
      id
      name
      service {
        id 
        name
      }
    }
    errors {
      type
      message
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZW5hYmxlLXNxcy1tdWx0aXBsZS1wcm92aWRlci1hY2NvdW50cyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRW5hYmxlIGludGVncmF0aW9uIGluIG11bHRpcGxlIHByb3ZpZGVyIGFjY291bnRzIn1d">
    <div data-prop-text="title">Enable integration in multiple provider accounts</div>
    <p>If you have multiple accounts with the same provider account, you can enable the same integration in multiple provider accounts at the same time. Use your New Relic account ID in the <code>&#x3C;NR_ACCOUNT_ID></code> parameter and the ID of the provider accounts in the <code>&#x3C;LINKED_CLOUD_ACCOUNT_ID_n></code> parameter value.</p>
    <pre><code>mutation {
  cloudConfigureIntegration (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      aws: {
        sqs: [
          { linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID_1> }, 
          { linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID_2>, configuration_param_1: value_1, configuration_param_2: value_2 }
        ]
      } 
    }
  }) {
    integrations {
      id
      name
      service {
        id 
        name
      }
    }
    errors {
      type
      message
    }
  }
}

</code></pre>
  </div>
</div>
<h2>Change polling interval for Amazon AWS integration [#alter-polling-interval]</h2>
<p>This example uses an <a href="/docs/integrations/amazon-integrations/aws-integrations-list/aws-sqs-monitoring-integration">Amazon AWS SQS</a> integration and assumes you have <a href="/docs/integrations/amazon-integrations/get-started/connect-aws-services-infrastructure">connected an AWS account to New Relic</a>. To change the polling interval of an AWS integration:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidXBkYXRlLXNxcy1wb2xsaW5nIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJVcGRhdGUgdGhlIHBvbGxpbmcgaW50ZXJ2YWwifV0=">
    <div data-prop-text="title">Update the polling interval</div>
    <p>To update the polling interval for an Amazon AWS SQS integration, use your New Relic account ID in the <code>&#x3C;NR_ACCOUNT_ID></code> parameter and the <code>id</code> of the linked provider account in the <code>&#x3C;LINKED_ACCOUNT_ID></code> parameter value:</p>
    <pre><code>mutation {
  cloudConfigureIntegration( 
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      aws : {
        sqs: [
          { linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID>, metricsPollingInterval: 300 }
        ]
      }
    }
  ) {
    integrations {
      id
      name            
      service {
        id
        slug
      }
      ... on SqsIntegration {
        metricsPollingInterval
      }
    }
    errors {
      type
      message
    }
  }
}

</code></pre>
  </div>
</div>
<h2>Disable Amazon AWS integration [#disable-sqs]</h2>
<p>This example uses an <a href="/docs/integrations/amazon-integrations/aws-integrations-list/aws-sqs-monitoring-integration">Amazon AWS SQS</a> integration and assumes you have <a href="/docs/integrations/amazon-integrations/get-started/connect-aws-services-infrastructure">connected an AWS account to New Relic</a>. To disable an AWS integration:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGlzYWJsZS1zcXMtc2NlbmFyaW8ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkRpc2FibGUgdGhlIFNRUyBpbnRlZ3JhdGlvbiJ9XQ==">
    <div data-prop-text="title">Disable the SQS integration</div>
    <p>Use your New Relic account identifier in the <code>&#x3C;NR_ACCOUNT_ID></code> parameter and the ID of the linked cloud account the <code>&#x3C;LINKED_ACCOUNT_ID></code> parameter value.</p>
    <pre><code>mutation {
  cloudDisableIntegration (
    accountId: &#x3C;NR_ACCOUNT_ID>,
    integrations: {
      aws: {
        sqs: [
          { linkedAccountId: &#x3C;LINKED_CLOUD_ACCOUNT_ID> }
        ]
      }
    }
  ) {
  disabledIntegrations {
    id
      accountId
      name 
    }
    errors {
      type
      message
    }
  }
}

</code></pre>
  </div>
</div>
