
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>The Provisioning API is only available for <a href="/docs/new-relic-partnerships/partner-integration-guide/getting-started/partner-integration-requirements">Partner accounts</a>.</p>
</div>
<p>The Provisioning NerdGraph API allows you, as a <a href="/docs/new-relic-partnerships/partner-integration-guide/getting-started/partner-integration-requirements">New Relic partner</a> to create subscriptions for your accounts containing a more extensive range of New Relic products than the <a href="/docs/new-relic-partnerships/partner-integration-guide/partner-account-maintenance/partner-api">Partner API</a>.</p>
<p>The Provisioning API and Partnership API are compatible when it comes to the products supported by both (APM, Mobile, Insights, Browser, Synthetics, and Infrastructure). If you use the Provisioning API to create a subscription for any of the newer products, you will no longer be able to update the account using the Partnership API V2.</p>
<p>The Provisioning API is a GraphQL mutation field named <code>organizationProvisioningUpdatePartnerSubscription</code>. To learn more about how to use this mutation, see <a href="https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph">Introduction to NerdGraph</a>.</p>
<h2>Get started: endpoint and API key [#endpoint]</h2>
<p>The provisioning API uses your <a href="/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key">user key</a>.</p>
<p>The endpoint for the Provisioning API is:</p>
<pre><code>https://api.newrelic.com/graphql
</code></pre>
<p>To get started, run the following command:</p>
<pre><code>curl -v -d'{"query": "mutation { organizationProvisioningUpdatePartnerSubscription(accountId: PARTNER_ACCOUNT_ID, affectedAccountId: ACCOUNT_ID, 
products: [{id: 9200, name: \"Traces\", unitsOfMeasure: [{unit: SPANS_IN_MILLIONS, quantity: 40}]}]) {enqueued errors {message path } } }"}' -H'Content-type: application/json' -H'Api-key: PERSONAL_API_KEY' https://api.newrelic.com/graphql
</code></pre>
<h2>Product subscriptions for an account [#subscriptions]</h2>
<p>The Provisioning API does not allow you to upgrade or downgrade individual product subscriptions for an account. Instead, the API requires you to replace (<a href="https://docs.newrelic.com/docs/new-relic-partnerships/partnerships/partner-api/partnership-api-subscription-object#example-create">add</a>) the configuration for all product subscriptions for the account.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>If any product configurations are not included, the Provisioning API automatically provisions the account with a free product (when available).</p>
</div>
<h2>Mapping for products (productId) [#mapping]</h2>
<p>With each account creation call, you must supply at least one New Relic product type. The mutation query only accepts the numeric <code>productId</code> for the type.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1hcG0ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkFQTSJ9XQ==">
    <div data-prop-text="title">APM</div>
    <p>The number of allowable hosts per account and the data retention period vary by subscription level within <a href="http://newrelic.com/application-monitoring/pricing">New Relic APM’s pricing structure</a>. For example, New Relic APM allows an unlimited number of allowable hosts for Lite accounts, but only a 24-hour data retention period.</p>
    <p>In addition, pricing and data retention depend on whether you select <a href="https://docs.newrelic.com/docs/accounts-partnerships/accounts/account-billing-usage/compute-unit-pricing-host-pricing">pricing plans based on hosts or compute units (CU)</a>. Use the product ID’s integer format to identify the subscription level and type of plan.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Lite</p>
          </div>
          <div>
            <p>18</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
        </div>
        <div>
          <div>
            <p>Standard</p>
          </div>
          <div>
            <p>41</p>
          </div>
          <div>
            <p><code>HOSTS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Standard Annual</p>
          </div>
          <div>
            <p>38</p>
          </div>
          <div>
            <p><code>HOSTS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Pro (Host)</p>
          </div>
          <div>
            <p>42</p>
          </div>
          <div>
            <p><code>HOSTS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Pro Annual (Host)</p>
          </div>
          <div>
            <p>39</p>
          </div>
          <div>
            <p><code>HOSTS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Enterprise</p>
          </div>
          <div>
            <p>43</p>
          </div>
          <div>
            <p><code>HOSTS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Enterprise Annual</p>
          </div>
          <div>
            <p>40</p>
          </div>
          <div>
            <p><code>HOSTS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Enterprise Annual</p>
          </div>
          <div>
            <p>40</p>
          </div>
          <div>
            <p><code>HOSTS</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>If you select pricing plans based on compute units (CU), use these product ID integer formats to identify the subscription level and type of plan.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Pro CU</p>
          </div>
          <div>
            <p>126</p>
          </div>
          <div>
            <p><code>COMPUTE_UNIT</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Pro Annual CU</p>
          </div>
          <div>
            <p>127</p>
          </div>
          <div>
            <p><code>COMPUTE_UNIT</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>APM Essentials CU</p>
          </div>
          <div>
            <p>128</p>
          </div>
          <div>
            <p><code>COMPUTE_UNIT</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>APM Essentials Annual CU</p>
          </div>
          <div>
            <p>129</p>
          </div>
          <div>
            <p><code>COMPUTE_UNIT</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Requests</h4>
    <p>APM Pro with 5 hosts</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: :PARTNER_ACCOUNT_ID,
    affectedAccountId: :ACCOUNT_ID,
    products: [
      {
        id: 42,
        unitsOfMeasure: [
          {
            unit: HOSTS,
            quantity: 5
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
    <pre><code>
mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 126,
        unitsOfMeasure: [
          {
            unit: COMPUTE_UNIT,
            quantity: 3000
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>APM Pro CU with 3000 Compute Units
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1tb2JpbGUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Ik1vYmlsZSJ9XQ==">
    <div data-prop-text="title">Mobile</div>
    <p><a href="http://newrelic.com/mobile-monitoring/pricing">New Relic Mobile’s pricing structure</a> allows 100,000 monthly active users per account at the Enterprise subscription level. Data retention varies by subscription level. Use the product ID’s integer format to identify the subscription level.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.1</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.2</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Lite</p>
          </div>
          <div>
            <p>49</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
        </div>
        <div>
          <div>
            <p>Enterprise</p>
          </div>
          <div>
            <p>54</p>
          </div>
          <div>
            <p><code>APPS</code></p>
          </div>
          <div>
            <p><code>USERS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Enterprise Annual</p>
          </div>
          <div>
            <p>55</p>
          </div>
          <div>
            <p><code>APPS</code></p>
          </div>
          <div>
            <p><code>USERS</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Request</h4>
    <p>Mobile Enterprise with 1 App and 100,000 Monthly Active user</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 54,
        unitsOfMeasure: [
          {
            unit: APPS,
            quantity: 1
          },
          {
            unit: USERS,
            quantity: 100000
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1pbnNpZ2h0cyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiSW5zaWdodHMifV0=">
    <div data-prop-text="title">Insights</div>
    <p>New Relic Insights bases the pricing structure on the number of allowable events stored and the associated data retention policy. For example, data retention for Insights Free is one day.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.1</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.2</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Free</p>
          </div>
          <div>
            <p>67</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
        </div>
        <div>
          <div>
            <p>None</p>
          </div>
          <div>
            <p>65</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
        </div>
        <div>
          <div>
            <p>Pro</p>
          </div>
          <div>
            <p>66</p>
          </div>
          <div>
            <p><code>DATA_RETENTION_IN_DAYS</code></p>
          </div>
          <div>
            <p><code>EVENTS_IN_MILLIONS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Pro Annual</p>
          </div>
          <div>
            <p>69</p>
          </div>
          <div>
            <p><code>DATA_RETENTION_IN_DAYS</code></p>
          </div>
          <div>
            <p><code>EVENTS_IN_MILLIONS</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Request</h4>
    <p>Insights Pro with 7 days data retention and 25 million events</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 66,
        unitsOfMeasure: [
          {
            unit: DATA_RETENTION_IN_DAYS,
            quantity: 7
          },
          {
            unit: EVENTS_IN_MILLIONS,
            quantity: 25
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1icm93c2VyIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJCcm93c2VyIn1d">
    <div data-prop-text="title">Browser</div>
    <p><a href="http://newrelic.com/browser-monitoring/pricing">New Relic Browser’s pricing structure</a> allows an unlimited number of app users, regardless of subscription level. However, the number of allowable page views per month and the data retention period vary by subscription level. For example:</p>
    <ul>
      <li>
        <p>Lite accounts include an unlimited number of page views per month and 24-hour data retention.</p>
      </li>
      <li>
        <p>Pro account pricing starts at 500,000 page views per month and three months data retention.</p>
        <p>Use the product ID’s integer format to identify the subscription level.</p>
        <div data-component="Table" data-prop="W10=">
          <div>
            <div>
              <div>
                <p>Subscription level</p>
              </div>
              <div>
                <p><code>products.id</code></p>
              </div>
              <div>
                <p><code>unitsOfMeasure.unit</code></p>
              </div>
            </div>
          </div>
          <div>
            <div>
              <div>
                <p>Lite</p>
              </div>
              <div>
                <p>20</p>
              </div>
              <div>
                <p>Not applicable</p>
              </div>
            </div>
            <div>
              <div>
                <p>Pro</p>
              </div>
              <div>
                <p>21</p>
              </div>
              <div>
                <p><code>PAGE_VIEWS</code></p>
              </div>
            </div>
            <div>
              <div>
                <p>Pro Annual</p>
              </div>
              <div>
                <p>22</p>
              </div>
              <div>
                <p><code>PAGE_VIEWS</code></p>
              </div>
            </div>
          </div>
        </div>
        <h4>Example Request</h4>
        <p>Browser Pro with 500,000 page views</p>
        <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 42,
        unitsOfMeasure: [
          {
            unit: PAGE_VIEWS,
            quantity: 500000
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}
</code></pre>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1zeW50ZWh0aWNzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJTeW50aGV0aWNzIn1d">
    <div data-prop-text="title">Synthetics</div>
    <p>With <a href="http://newrelic.com/synthetics/pricing">New Relic Synthetics' pricing structure</a>, the default number of allowable monitoring checks and the data retention period vary by subscription level. Use the product ID’s integer format to identify the subscription level.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.1</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Lite</p>
          </div>
          <div>
            <p>81</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
        </div>
        <div>
          <div>
            <p>Pro</p>
          </div>
          <div>
            <p>77</p>
          </div>
          <div>
            <p><code>CHECKS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Pro Annual</p>
          </div>
          <div>
            <p>78</p>
          </div>
          <div>
            <p><code>CHECKS</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Request</h4>
    <p>Synthetics Pro with 10,000 checks</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 77,
        unitsOfMeasure: [
          {
            unit: CHECKS,
            quantity: 10000
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1pbmZyYXN0cnVjdHVyZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiSW5mcmFzdHJ1Y3R1cmUifV0=">
    <div data-prop-text="title">Infrastructure</div>
    <p>With <a href="https://newrelic.com/infrastructure">New Relic Infrastructure’s pricing structure</a>, the default number of instances and the data retention period vary by subscription level. <a href="https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/data-instrumentation/default-infrastructure-attributes-events">Infrastructure events</a> do not count against your New Relic Insights quota, even though you can query them in Insights.</p>
    <p>New Relic Infrastructure offers <a href="https://newrelic.com/calculator">pricing plans based on Compute Units (CU) only</a>. Use the product ID’s integer format to identify the subscription level.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Infrastructure None</p>
          </div>
          <div>
            <p>142</p>
          </div>
          <div>
            <p>Not applicable</p>
          </div>
        </div>
        <div>
          <div>
            <p>Infrastructure Pro (CU)</p>
          </div>
          <div>
            <p>134</p>
          </div>
          <div>
            <p><code>COMPUTE_UNIT</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Infrastructure Pro Annual (CU)</p>
          </div>
          <div>
            <p>135</p>
          </div>
          <div>
            <p><code>COMPUTE_UNIT</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Infrastructure Essentials (CU)</p>
          </div>
          <div>
            <p>136</p>
          </div>
          <div>
            <p><code>COMPUTE_UNIT</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Infrastructure Essentials Annual (CU)</p>
          </div>
          <div>
            <p>137</p>
          </div>
          <div>
            <p><code>COMPUTE_UNIT</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Request</h4>
    <p>Infrastructure Pro with 5,000 Compute Units</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 134,
        unitsOfMeasure: [
          {
            unit: COMPUTE_UNIT,
            quantity: 5000
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1sYW1iZGEifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlNlcnZlcmxlc3MgZm9yIExhbWJkYSJ9XQ==">
    <div data-prop-text="title">Serverless for Lambda</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.1</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Serverless Annual</p>
          </div>
          <div>
            <p>9010</p>
          </div>
          <div>
            <p><code>INGESTED_EVENTS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Serverless Monthly</p>
          </div>
          <div>
            <p>9000</p>
          </div>
          <div>
            <p><code>INGESTED_EVENTS</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Request</h4>
    <p>Serverless Monthly with 3,000 ingested events in millions</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 9000,
        unitsOfMeasure: [
          {
            unit: INGESTED_EVENTS,
            quantity: 3000
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy10cmFjZXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlRyYWNlcyJ9XQ==">
    <div data-prop-text="title">Traces</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.1</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Traces Annual</p>
          </div>
          <div>
            <p>9200</p>
          </div>
          <div>
            <p><code>SPANS_IN_MILLIONS</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Traces Monthly</p>
          </div>
          <div>
            <p>9210</p>
          </div>
          <div>
            <p><code>SPANS_IN_MILLIONS</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Request</h4>
    <p>Traces Annual with 3,000 spans in millions</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 9200,
        unitsOfMeasure: [
          {
            unit: SPANS_IN_MILLIONS,
            quantity: 3000
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1sb2dzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJMb2dzIn1d">
    <div data-prop-text="title">Logs</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.1</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Logs Annual Commit - 8 Days</p>
          </div>
          <div>
            <p>9110</p>
          </div>
          <div>
            <p><code>GB_PER_DAY</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Logs Annual Commit - 15 Days</p>
          </div>
          <div>
            <p>9111</p>
          </div>
          <div>
            <p><code>GB_PER_DAY</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Logs Annual Commit - 30 Days</p>
          </div>
          <div>
            <p>9112</p>
          </div>
          <div>
            <p><code>GB_PER_DAY</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Logs Monthly Commit - 8 Days</p>
          </div>
          <div>
            <p>9100</p>
          </div>
          <div>
            <p><code>GB_PER_DAY</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Logs Monthly Commit - 15 Days</p>
          </div>
          <div>
            <p>9101</p>
          </div>
          <div>
            <p><code>GB_PER_DAY</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Logs Monthly Commit - 30 Days</p>
          </div>
          <div>
            <p>9102</p>
          </div>
          <div>
            <p><code>GB_PER_DAY</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Request</h4>
    <p>Logs with 8 days data retention and 100 Gigabytes per day</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 9100,
        unitsOfMeasure: [
          {
            unit: GB_PER_DAY,
            quantity: 100
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWFwcGluZy1tZXRyaWNzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJNZXRyaWNzIn1d">
    <div data-prop-text="title">Metrics</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Subscription level</p>
          </div>
          <div>
            <p><code>products.id</code></p>
          </div>
          <div>
            <p><code>unitsOfMeasure.unit.1</code></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>Metrics Annual Commit</p>
          </div>
          <div>
            <p>9310</p>
          </div>
          <div>
            <p><code>DPM</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Metrics Monthly Commit</p>
          </div>
          <div>
            <p>9300</p>
          </div>
          <div>
            <p><code>DPM</code></p>
          </div>
        </div>
      </div>
    </div>
    <h4>Example Request</h4>
    <p>Metrics Monthly Commitment with 50 Data Points Per Minute</p>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 9300,
        unitsOfMeasure: [
          {
            unit: DPM,
            quantity: 50
          }
        ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
  </div>
</div>
<h2>GraphQL Types</h2>
<p>The Provisioning API uses the following GraphQL types:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHlwZS1zdWJzY3JpcHRpb24ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlN1YnNjcmlwdGlvbiJ9XQ==">
    <div data-prop-text="title">Subscription</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Name</p>
          </div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Description</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>account_id</code></p>
          </div>
          <div>
            <p>Integer</p>
          </div>
          <div>
            <p>Numeric ID of the partner account for the partnership to which the affected account belongs.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>affected_account_id</code></p>
          </div>
          <div>
            <p>Integer</p>
          </div>
          <div>
            <p>Numeric ID of the account to which the changes described in the products field will be applied.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>products</code></p>
          </div>
          <div>
            <p>Array of Product</p>
          </div>
          <div>
            <p>Collection of type Product representing the values that will compose the new Subscription for the Affected Account.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHlwZS1wcm9kdWN0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJQcm9kdWN0In1d">
    <div data-prop-text="title">Product</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Name</p>
          </div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Description</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>Id</code></p>
          </div>
          <div>
            <p>Integer</p>
          </div>
          <div>
            <p>Numeric ID for the Product to be added to the Subscription.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Name</code></p>
          </div>
          <div>
            <p>String</p>
          </div>
          <div>
            <p>Name of the Product to be added to the Subscription.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>Unit of Measure</code></p>
          </div>
          <div>
            <p>Array of Unit of Measure</p>
          </div>
          <div>
            <p>Collection of type Unit of Measure for this single product.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHlwZS11bml0LW1lYXN1cmUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlVuaXQgb2YgbWVhc3VyZSJ9XQ==">
    <div data-prop-text="title">Unit of measure</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Name</p>
          </div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Description</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>quantity</code></p>
          </div>
          <div>
            <p>Integer</p>
          </div>
          <div>
            <p>Numeric value for the amount of units to be applied to the Subscription.</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>unit</code></p>
          </div>
          <div>
            <p>String</p>
          </div>
          <div>
            <p>Name of the unit to be applied to the product (varies by product line).</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h2>Examples</h2>
<p>Here are examples of an API call to create a subscription and the JSON response.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1yZXBsYWNlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJDcmVhdGUgKHJlcGxhY2UgZXhpc3RpbmcpIHN1YnNjcmlwdGlvbiB3aXRoIG1hbnkgcHJvZHVjdHMifV0=">
    <div data-prop-text="title">Create (replace existing) subscription with many products</div>
    <pre><code>mutation {
  organizationProvisioningUpdatePartnerSubscription (
    accountId: PARTNER_ACCOUNT_ID,
    affectedAccountId: ACCOUNT_ID,
    products: [
      {
        id: 9410,
        unitsOfMeasure: [{unit: INCIDENT_EVENTS, quantity: 50}]
      },
      {
        id: 42,
        unitsOfMeasure: [{unit: HOSTS, quantity: 5 }]
      },
      {
        id: 42,
        unitsOfMeasure: [{unit: PAGE_VIEWS, quantity: 500000}]
      },
      {
        id: 134,
        unitsOfMeasure: [{unit: COMPUTE_UNIT, quantity: 5000}]
      },
      {
        id: 66,
        unitsOfMeasure: [
          {unit: DATA_RETENTION_IN_DAYS, quantity: 7 },
          {unit: EVENTS_IN_MILLIONS, quantity: 25 }
        ]
      },
      {
        id: 9100,
        unitsOfMeasure: [{unit: GB_PER_DAY, quantity: 100 } ]
      },
      {
        id: 9300,
        unitsOfMeasure: [{unit: DPM, quantity: 50 }
        ]
      },
      {
        id: 54,
        unitsOfMeasure: [
          {unit: APPS, quantity: 1 },
          {unit: USERS, quantity: 100000 }
        ]
      },
      {
        id: 9000,
        unitsOfMeasure: [{unit: INGESTED_EVENTS, quantity: 3000 } ]
      },
      {
        id: 77,
        unitsOfMeasure: [{unit: CHECKS, quantity: 10000 } ]
      },
      {
        id: 9200,
        unitsOfMeasure: [{unit: SPANS_IN_MILLIONS, quantity: 3000 } ]
      }
    ]
  ) {
    enqueued
    errors {
      message
      path
    }
  }
}

</code></pre>
    <pre><code>
{
  "data": {
    "organizationProvisioningUpdatePartnerSubscription": {
      "enqueued": true,
      "errors": []
    }
  }
}

</code></pre>This query returns the following:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1yZXBsYWNlLWxvZ3MifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkNyZWF0ZSAocmVwbGFjZSBleGlzdGluZykgc3Vic2NyaXB0aW9uIHdpdGggb25lIHByb2R1Y3QgLSBMb2dzIn1d">
    <div data-prop-text="title">Create (replace existing) subscription with one product - Logs</div>
    <pre><code>mutation {
    organizationProvisioningUpdatePartnerSubscription (
      accountId: :PARTNER_ACCOUNT_ID,
      affectedAccountId: :ACCOUNT_ID,
      products: [
        {
          id: 9110,
          unitsOfMeasure: [
            {
              unit: GB_PER_DAY,
              quantity: 100
            },
            {
              unit: DATA_RETENTION_IN_DAYS,
              quantity: 8
            }

          ]
        }
      ]
    ) {
      enqueued
      errors {
        message
        path
      }
  }
}

</code></pre>
    <pre><code>
{
  "data": {
    "organizationProvisioningUpdatePartnerSubscription": {
      "enqueued": true,
      "errors": []
    }
  }
}

</code></pre>**Response**: Once the Provisioning API has received your request and has validated it is in the right format it will respond with a message like this. This does not mean that your message has been successfully processed or applied; but it has been validated to be in the right format and it enqueued for processing.
    <pre><code>
{
  "data": {
    "organizationProvisioningUpdatePartnerSubscription": {
      "enqueued": true,
      "errors": []
    }
  }
}

</code></pre>This query returns the following:
  </div>
</div>
<h2>Variations from the Partnership API [#variations-from-partner-api]</h2>
<p>These are some key differences between the Provisioning API and the Partner API that frequent Partner API users should know:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Feature</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>API keys</p>
      </div>
      <div>
        <p>The Provisioning API uses a <a href="/docs/apis/get-started/intro-apis/types-new-relic-api-keys#personal-api-key">Personal API key</a>.</p>
        <p>The Partner API uses the <a href="/docs/new-relic-partnerships/partnerships/partner-api/partnership-api-keys">Partnership API key</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>productId</code> and <code>product_id</code></p>
      </div>
      <div>
        <p>The product id’s used for the Provisioning API are different than the ones documented for the <a href="/docs/new-relic-partnerships/partnerships/partner-api/partnership-api-subscription-object#api-product-mapping">Partner API</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Curl request format</p>
      </div>
      <div>
        <p>To make a curl request to the Provisioning API, the format will be different than the Partner API:</p>
        <ol>
          <li>The url endpoint is different</li>
          <li>The required api key is your personal API key</li>
          <li>Provisioning API responds only to HTTP POST requests</li>
        </ol>
      </div>
    </div>
    <div>
      <div>
        <p>Serverless <code>INGESTED_EVENTS</code> units are in millions</p>
      </div>
      <div>
        <p>sending <code>unitsOfMeasure: [{unit: INGESTED_EVENTS, quantity: 3000 } ]</code> will be interpreted by the Provisioning API as 3,000 million events.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Insights and Mobile require 2 units of measure</p>
      </div>
      <div>
        <p>Insights requires <code>DATA_RETENTION_IN_DAYS</code> and <code>EVENTS_IN_MILLIONS</code> Mobile requires <code>APPS</code> and <code>USERS</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Logs data retention unit of measure is determined by productID</p>
      </div>
      <div>
        <p>This is specified in the product name:</p>
        <ul>
          <li>Logs Annual Commit - 8 Days | product ID: 9110</li>
          <li>Logs Annual Commit - 15 Days | product ID: 9111</li>
          <li>Logs Annual Commit - 30 Days | product ID: 9112</li>
          <li>Logs Monthly Commit - 8 Days | product ID: 9100</li>
          <li>Logs Monthly Commit - 15 Days | product ID: 9101</li>
          <li>Logs Monthly Commit - 30 Days | product ID: 9102</li>
        </ul>
      </div>
    </div>
  </div>
</div>
