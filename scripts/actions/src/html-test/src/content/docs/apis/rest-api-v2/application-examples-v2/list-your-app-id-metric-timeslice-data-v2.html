
<p>Here are examples of how to use the New Relic REST API (v2) to get metric names and <a href="/docs/apm/apis/requirements/calculating-average-metric-values-summarize">average</a> values for a specific <a href="/docs/apm/apis/requirements/identification-code">application ID</a> and <a href="/docs/apis/rest-api-v2/requirements/rest-api-key#viewing">API key</a>. The examples also show different <a href="/docs/apm/apis/api-v2-examples/specifying-time-range-v2">time ranges</a>.</p>
<p>When acquiring data, the values returned may be affected by the time period you specify and the way the data is stored. For more information, see <a href="/docs/apis/extracting-metric-data">Extracting metric timeslice data</a>.</p>
<h2>List all application IDs [#view_all_app_id]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>You can also use New Relic's REST <a href="/docs/apm/apis/api-explorer-v2/parts-api-explorer">API Explorer</a> to get the same <a href="/docs/apm/apis/api-v2-examples/metric-data-examples-api-v2">metric timeslice data for your app</a> information as this example.</p>
</div>
<p>To view all of your apps' IDs:</p>
<pre><code>curl -X GET 'https://api.newrelic.com/v2/applications.json' \
     -H "X-Api-Key:${APIKEY}" -i
</code></pre>
<p>The output will be an array of data where the element is an application and the data associated with it. For example, here are the first two elements for app ID 96785 ("GreatTimes Staging") and 1622 ("GreatTimes Prod"):</p>
<pre><code>{
  "applications": [
    {
      "id": 96785,
      "name": "GreatTimes Staging",
      "language": "ruby",
      "health_status": "gray",
      ...
    },
    {
      "id": 1622,
      "name": "GreatTimes Prod",
      "language": "ruby",
      "health_status": "green",
      ...
</code></pre>
<h2>List app ID by name [#view_single_app_id]</h2>
<p>To view a specific app's ID if you know the name, substitute the name for ${NAME} in the following command:</p>
<pre><code>curl -X GET 'https://api.newrelic.com/v2/applications.json' \
     -H "X-Api-Key:${APIKEY}" -i \
     -d "filter[name]=${NAME}"
</code></pre>
<p>The output will be the same as shown in the previous example but for the selected application.</p>
<h2>Metric name listing guidelines [#name_list_guidelines]</h2>
<p>Listing the available metric names for your application can be a very compute intensive operation and should only be used as necessary. Listing a large number of metric names may have a detrimental effect on your responsiveness, as well as that of other uses and may lead to invoking <a href="/docs/apis/rest-api-v2/requirements/api-overload-protection-handling-429-errors">Overload protection</a>.</p>
<p>Follow these guidelines to optimize your use:</p>
<ul>
  <li>Carefully consider the metric names you need. If you know any part of the metric name, use the <code>name=</code> filter to limit the amount of data returned. This filter is a simple character match (no regular expression is available) but can significantly reduce the amount of data retrieved.</li>
  <li>If multiple pages of output are required, request the pages and process them serially, obtaining a single page and processing the results before requesting another. Utilize the <a href="/docs/apis/rest-api-v2/requirements/pagination-api-output#metric_name_cursor_paging">Cursor pagination</a> feature available for all the List > Metric name endpoints.</li>
  <li><strong>Do NOT</strong> make parallel requests for multiple pages using the <strong>page=</strong> option. This will result in multiple database queries against the same data. These requests will then be in contention with one another, slowing the response time further.</li>
  <li>Once you have acquired your metric name list, consider caching this list for future use. In most cases the metric names are not volatile and can be reused, saving processing time.</li>
</ul>
<h2>List metric names for your app [#view_app_metrics_names]</h2>
<p>To view the metric names available for your application:</p>
<pre><code>curl -X GET "https://api.newrelic.com/v2/applications/${APPID}/metrics.json" \
     -H "X-Api-Key:${APIKEY}' -i "
</code></pre>
<p>The output will be similar to the following. This shows two of the many metric names available and their values. These lists can be long, so the output is <a href="/docs/apis/pagination-for-api-output">paginated</a>. You may need to look at several pages before locating your metric name. Please consider the <a href="#name_list_guidelines">guidelines</a> for listing your metric names.</p>
<pre><code>{
  "metrics": [
    {
      "name": "ActiveRecord/Account/create",
      "values": [
        "average_response_time",
        "calls_per_minute",
        "call_count",
        "min_response_time",
        "max_response_time",
        "average_exclusive_time",
        "average_value",
        "requests_per_minute",
        "standard_deviation"
      ]
    },
    ...
    {
      "name": "Apdex/members/destroy",
      "values": [
        "s",
        "t",
        "f",
        "count",
        "score",
        "value",
        "threshold",
        "threshold_min"
      ]
    },
    ...
</code></pre>
<p>Filter your metric name output, to return a smaller list, by specifying the <strong>name=</strong> filter like this:</p>
<pre><code>curl -X GET "https://api.newrelic.com/v2/applications/${APPID}/metrics.json" \
     -H "X-Api-Key:${APIKEY}" -i \
     -d 'name=Controller/welcome/index'
</code></pre>
<h2>Retrieving your app's metric timeslice data values [#app_metric_data_values]</h2>
<p>To view the metric timeslice data available for your application:</p>
<pre><code>curl -X GET 'https://api.newrelic.com/v2/applications/${APPID}/metrics/data.json' \
     -H 'X-Api-Key:${APIKEY}' -i \
     -d 'names[]=EndUser&#x26;values[]=call_count&#x26;values[]=average_response_time&#x26;summarize=true'
</code></pre>
<p>You can acquire <strong>multiple</strong> <strong>values</strong> from the <strong>same metric name</strong> in a single call, as shown in this example.</p>
<pre><code>"metric_data": {
    "from": "2014-05-20T23:41:15+00:00",
    "to": "2014-05-21T00:11:15+00:00",
    "metrics": [
      {
        "name": "EndUser",
        "timeslices": [
          {
            "from": "2014-05-20T23:39:00+00:00",
            "to": "2014-05-21T00:08:59+00:00",
            "values": {
              "call_count": 724,
              "average_response_time": 2110
            }
          }
        ]
      }
    ]
  }
</code></pre>
<p>However, if you request values from <strong>multiple metrics</strong> that don't share all requested value fields, you can only obtain the values from <strong>one metric name</strong> at a time.</p>
<p>For example, if you change the above command so it contains two metric names (this is, two <code>"names[]="</code> conditions and corresponding <code>"values[]="</code> conditions), only the associated values for the first metric name (<code>EndUser</code>) will be returned.</p>
<pre><code>curl -X GET 'https://api.newrelic.com/v2/applications/${APPID}/metrics/data.json' \
     -H 'X-Api-Key:${APIKEY}' -i \
     -d 'names[]=EndUser&#x26;names[]=EndUser/Apdex&#x26;values[]=call_count&#x26;values[]=average_response_time&#x26;values[]=score&#x26;summarize=true'
</code></pre>
<pre><code>"metric_data": {
    "from": "2014-05-20T23:41:15+00:00",
    "to": "2014-05-21T00:11:15+00:00",
    "metrics": [
      {
        "name": "EndUser",
        "timeslices": [
          {
            "from": "2014-05-20T23:39:00+00:00",
            "to": "2014-05-21T00:08:59+00:00",
            "values": {
              "call_count": 724,
              "average_response_time": 2110
            }
          }
        ]
      },
      {
        "name": "EndUser/Apdex",
        "timeslices": [
          {
            "from": "2015-03-31T20:33:00+00:00",
            "to": "2015-03-31T21:02:59+00:00",
            "values": {}
          }
        ]
      }
    ]
  }
</code></pre>
<p>The <code>EndUser</code> name in this example has <code>call_count</code> and <code>average_response_time</code> values associated with it, but not <code>score.</code></p>
