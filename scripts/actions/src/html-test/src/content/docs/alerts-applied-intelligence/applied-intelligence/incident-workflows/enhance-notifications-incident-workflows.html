
<p>Incident Workflows (or "workflows") is a flexible notification system that works within Applied Intelligence with the purpose of enhancing and enriching Alerts' notifications. Incident Workflows uses a friendly user interface to build rich notification message templates and customize how, when, and where they’re sent.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>Incident Workflows is currently in BETA. If you haven't signed up yet, go to <a href="https://one.newrelic.com/launcher/nrai.launcher?pane=eyJuZXJkbGV0SWQiOiJucmFpLm5yYWktaG9tZSIsIm5hdiI6IkhvbWUifQ==&#x26;sidebars%5B0%5D=eyJuZXJkbGV0SWQiOiJucmFpLm5hdmlnYXRpb24tYmFyIiwibmF2IjoiSG9tZSJ9c-ai/one.newrelic.com">one.newrelic.com > <strong>Alerts &#x26; AI</strong></a> and click <strong>Incident Workflows Request access</strong>.</p>
</div>
<h2>Why it matters</h2>
<p>Incident Workflows sends alerts events to many destinations in any format, enriched with additional context.</p>
<p>The destinations include various notification platforms, like webhooks and Jira. Before being sent to a destination, a notification is enriched with extra information, including from the New Relic database (NRDB). Not only that, workflows creates a two-way connection between your notification platforms and New Relic. All of your alerts policies can be grouped into a single incident workflow.</p>
<h2>How it works</h2>
<p>Workflows are a collection of triggers and actions for alerts incidents. A workflow is a set of instructions that defines enriched notification templates, chooses triggers, and connects to multiple notification platforms:</p>
<ul>
  <li>A notification template maps the workflows fields to your notification platform.</li>
  <li>Triggers are alerts policies that start workflow processes.</li>
  <li>Actions are operations that execute when workflows trigger. Actions include enriching a notification with extra information or configuring your notification platform to define the notification message format.</li>
</ul>
<p>Each workflow has a single account and uses that account’s conditions for its triggers.</p>
<h2>When notifications are sent [#notifications-sent]</h2>
<p>Workflows uses the same incidents you defined in your <a href="/docs/alerts-applied-intelligence/new-relic-alerts/alert-policies/create-edit-or-find-alert-policy">alerts policies</a>.</p>
<p>In alerts, <a href="/docs/alerts/new-relic-alerts/configuring-alert-policies/specify-when-new-relic-creates-incidents">incident preferences</a> define how incidents and notifications are created when conditions in the policy are violated.</p>
<h2>Create or edit a workflow [#create-edit-workflow]</h2>
<p>Use the workflows dashboard to create, edit, enable, or disable your workflows. Here’s a basic overview:</p>
<ol>
  <li><a href="#add-workflow">Add and name the workflow</a>.</li>
  <li><a href="#select-triggers">Select triggers</a>.</li>
  <li><a href="#add-nrql-enrich-notifications">Enrich your notifications with NRQL</a>.</li>
  <li><a href="#create-notification-actions">Create notification actions</a>.</li>
  <li><a href="#test-workflow">Test your workflow</a>.</li>
  <li><a href="#activate-workflow">Activate your workflow</a>.</li>
</ol>
<p>From <a href="https://one.newrelic.com/">one.newrelic.com</a>, click <strong>Alerts &#x26; AI</strong>. In the left pane, click <strong>Incident Workflows</strong> to open the workflows dashboard.</p>
<h2>Step 1. Add and name a workflow [#add-workflow]</h2>
<p>When you add a workflow, give it a unique, descriptive name that will help you remember its purpose later.</p>
<h2>Step 2. Select your triggers [#select-triggers]</h2>
<p>An alerts condition defines a violation. Violations are workflow triggers. These violations are either Warning or Critical thresholds defined in the Alert policy.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>Each workflow must have at least one trigger. If you select more than one, only one of them needs to be true to trigger the actions that follow.</p>
</div>
<h2>Step 3. Optional: Add NRQL query data to enrich your notifications [#add-nrql-enrich-notifications]</h2>
<p>After you select triggers, enrich your notification data with NRQL queries.</p>
<p>The workflows enrich tool is similar to the <a href="/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder">query builder</a>.</p>
<p>The NRQL query's results are included in the notification message.</p>
<p>If you create queries for your workflows, they run in real time.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>You can save any valid, or error free, query into your workflow, even if they return an empty result.</p>
</div>
<p>
  <img src="./images/build-enricher-query.png" alt="Screen capture showing where to add a query to enrich a notification." title="build-enricher-query.png">
</p>
<p>An example of a NRQL query you might use to enrich your workflow.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>You can query with violation specific variables, for example <code>{{entity.id}}</code>.</p>
</div>
<h3>NRQL query enrichment examples</h3>
<p>Here are some examples of how to set up enrichment queries.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3ludGhldGljLW1vbml0b3JpbmcifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkNoZWNrIG92ZXJhbGwgU3ludGhldGljIG1vbml0b3JpbmcgaGVhbHRoIn1d">
    <div data-prop-text="title">Check overall Synthetic monitoring health</div>
    <p>If you're using Synthetic monitoring to measure your website, you can define the number of unsuccessful health checks that will trigger a violation.</p>
    <p>This query lets your site reliability team track your unsuccessful health checks.</p>
    <pre><code>SELECT count(*) FROM SyntheticCheck WHERE result != 'SUCCESS' since since 10 minutes FACET monitorName

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXBwbGljYXRpb24tdHJhZmZpYyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiS25vdyB3aGVuIHZpb2xhdGlvbi1yZWxhdGVkIHRyYWZmaWMgZm9yIGFuIGFwcGxpY2F0aW9uIGRyb3BzIn1d">
    <div data-prop-text="title">Know when violation-related traffic for an application drops</div>
    <p>This query tracks the number of transactions on the entity with a condition violation, using the custom variable <code>entity.name</code>:</p>
    <pre><code>SELECT count(*) FROM Transaction WHERE appName = '{{entity.name}}' since 10 minutes ago

</code></pre>
    <pre><code>
SELECT uniqueCount(displayName), sum(nr.ingestTimeMs) from K8sServiceSample where entityName = '{{entity.name}}' since 1 hour ago

</code></pre>This query gets the number and ingest time by product running within a Kubernetes pod so you can find a potential remedy:
    <pre><code>
From Transaction select latest(httpResponsepre), average(duration) where appName = '{{entity.name}}'

</code></pre>This query tracks the latest HTTP status code response, filtered by the entity that violated the condition’s threshold:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY3VzdG9tLXZhcmlhYmxlcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQWRkIGN1c3RvbSB2YXJpYWJsZXMgdG8geW91ciBxdWVyeSJ9XQ==">
    <div data-prop-text="title">Add custom variables to your query</div>
    <p>Custom variables are properties you can add to violations when you configure a workflow action. You can get information about the alert, such as condition, violation, and entity, using double curly brackets: <code>{{variable_name}}</code>.</p>
    <p>To get information about the entity that violated a condition, you can use custom variables as part of the WHERE statement of the query. For example, here's a query using an <code>entity.name</code> variable to get the state of an Amazon EC2 instance:</p>
    <pre><code>SELECT latest(ec2State) FROM ComputeSample where provider = 'Ec2Instance' where entityName = '{{entity.name}}'

</code></pre>This query has a single value result (stopped) because it only selects a single field. The `entity.name` is the entity identifier. You can also use `entity.id` and any other entity properties like this.
  </div>
</div>
<h2>Step 4. Create notification actions [#create-notification-actions]</h2>
<p>You can use the monitoring platforms ServiceNow, Atlassian Jira Cloud, and AWS EventBridge with workflows. You can also configure a webhook to other destinations.</p>
<p>Every workflow requires at least one notification action. To create an action:</p>
<ol>
  <li>Configure the notifier</li>
  <li>Build the message</li>
  <li>Test the notifier</li>
</ol>
<h3>Configure the notifier</h3>
<p>To configure your notifier, choose a notification platform, and then configure its destination fields.</p>
<ol>
  <li>Click <strong>Add an action</strong>, and then under <strong>Notify your channels</strong>, click <strong>Add</strong>.</li>
  <li>Choose your notification platform.</li>
  <li>Complete the destination fields based on your notification platform.</li>
</ol>
<p>To acknowledge and close an alerts incident with Jira or ServiceNow, check <strong>Allow two-way integration</strong>. For example configurations, see <a href="#jira">Jira</a> and <a href="#servicenow">ServiceNow</a>.</p>
<h3>Configure your notification message</h3>
<p>The notification message is delivered to your notification platform. A notification message includes one or more key-value fields.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>When using Jira and ServiceNow, you must map a workflows <code>field name</code> value to its corresponding field in your notification platform.</p>
</div>
<p>A field’s value can be any combination of the following:</p>
<ul>
  <li>Free text</li>
  <li>Output enriched with NRQL queries results</li>
  <li>Output enriched with Custom variables</li>
</ul>
<p>In each notifier, the payload is populated with your query results and some custom variables. You can remove those and add other custom variables, using the <code>#</code> sign.<br>Type <code>#</code> to see a list of available outputs and custom variables.</p>
<p>You can also write the custom variables manually:</p>
<ul>
  <li><code>{{enricher_name.result}}</code> is replaced with its result.</li>
  <li><code>{{variable_name}}</code> is replaced with the variable’s value.</li>
</ul>
<p>Choose the variable name from a list of common fields or create a custom string.</p>
<p>
  <img src="./images/build-message_0.png" alt="Screenshot showing the fields for building a notification message." title="build-message.png">
</p>
<p>ServiceNow notification message example</p>
<h3>Optional: Test the notifier</h3>
<p>Send a notification message to verify that you have a good connection to your platform.</p>
<p>A workflow test creates a ticket with placeholders for the final values. You get live results from the NRQL queries used to enrich the notifications, but N/A when referring to violations-related data. This is expected behavior.</p>
<p>Updated variables are rendered on your notification platform when a real violation triggers the workflow. These values are part of the violation event. If you use variables as part of the notification message, the variables value uses the variable name (for example, <code>entity.name</code>) as a placeholder.</p>
<p>If the notifier test fails, check the following:</p>
<ul>
  <li>Make sure to use the proper domain, username, and password/token for your platform.</li>
  <li>Confirm your destination is live/awake.</li>
  <li>Make sure to use different names for your notifiers.</li>
</ul>
<h3>Specific examples for Notifiers configurations</h3>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiamlyYSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQXRsYXNzaWFuIEppcmEgbm90aWZpZXIifV0=">
    <div data-prop-text="title">Atlassian Jira notifier</div>
    <p>Using Jira as a notifier enables you to push valuable violation data into a new Jira Cloud ticket.</p>
    <p>With two-way integration you can also make sure that state-updates are mirrored back to New Relic.</p>
    <p>Atlassian Jira notifiers need:</p>
    <ul>
      <li>
        <p>Notifier name</p>
      </li>
      <li>
        <p>Jira endpoint</p>
      </li>
      <li>
        <p>Jira API key</p>
      </li>
      <li>
        <p>A user with write permission</p>
      </li>
      <li>
        <p>Optional: Assignee and watchers for the ticket</p>
      </li>
      <li>
        <p>A notification message where every field name of the message has a corresponding field name in the project schema (text field or multi-line text field)</p>
        <p>
          <img src="./images/atlassian-jira-notifier_0.png" alt="Screenshot showing an Atlassian Jira setup." title="atlassian-jira-notifier.png">
        </p>
        <p>An example Jira configuration with two-way notification enabled.</p>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXZlbnRicmlkZ2UifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkFXUyBFdmVudEJyaWRnZSBub3RpZmllciJ9XQ==">
    <div data-prop-text="title">AWS EventBridge notifier</div>
    <p>Use workflows to hook New Relic events into AWS services with <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/what-is-amazon-eventbridge.html">EventBridge</a>, Amazon's serverless event bus. Then use EventBridge to deliver notification messages to route data to targets like AWS Lambda, SNS queues, CloudWatch logs, etc.</p>
    <p>Configure an EventBridge integration:</p>
    <ol>
      <li>
        <p>Complete the AWS account ID, the AWS region, the name of the event bus, and the notification message (JSON).</p>
      </li>
      <li>
        <p>Send a test notification, which creates a partner event source in your EventBridge service page.</p>
      </li>
      <li>
        <p>On Partner event sources, select Associate with event bus.</p>
        <p>
          <img src="./images/event-bus.png" alt="A screenshot showing how to associate the event source with an event bus." title="event-bus.png">
        </p>
        <p>The Associate with event bus button.</p>
      </li>
      <li>
        <p>Set an event rule to forward the events to whatever AWS service you need:</p>
        <ul>
          <li>Select the custom or partner event bus option, and then select the name of the event bus.</li>
          <li>Choose an AWS service to run when triggered by a workflow.</li>
        </ul>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VydmljZW5vdyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU2VydmljZU5vdyBub3RpZmllciJ9XQ==">
    <div data-prop-text="title">ServiceNow notifier</div>
    <p>Using ServiceNow as a notifier enables you to push valuable violation data into a new ServiceNow Incidents tickets.</p>
    <p>With two-way integrations, you can also make sure that status updates are mirrored back to New Relic.</p>
    <p>ServiceNow notifier needs:</p>
    <ul>
      <li>
        <p>Notifier name</p>
      </li>
      <li>
        <p>ServiceNow endpoint</p>
      </li>
      <li>
        <p>A user with write permission</p>
      </li>
      <li>
        <p>A workflow notification where every field name has a matching field name in the ServiceNow incident table</p>
        <p>
          <img src="./images/enriched-ticket.png" alt="Screenshot showing the  fields for an enriched ServiceNow notifier." title="enriched-ticket.png">
        </p>
        <p>A comprehensive example of a ServiceNow notification message configuration.</p>
        <p>Here's what that configuration would look like in ServiceNow:</p>
        <p>
          <img src="./images/service-now-test.png" alt="Screenshot showing a ServiceNow test." title="service-now-test.png">
        </p>
        <p>ServiceNow ticket created when testing the above example (populated with text placeholders when testing)</p>
        <p>Here are some notes about this example:</p>
      </li>
      <li>
        <p>We used ServiceNow’s default field incident configuration, you or your company may have configured additional fields and values.</p>
      </li>
      <li>
        <p>Default configurations:</p>
        <ul>
          <li>Severity, Impact, Urgency are numeric values 1/2/3 that correspond with High/Medium/Low.</li>
          <li>State field: new, in progress, on hold, resolved, closed, canceled.</li>
          <li>The Category and Subcategory fields are text fields with a limited value set. See <a href="https://docs.servicenow.com/bundle/orlando-it-service-management/page/product/incident-management/reference/r_CategorizingIncidents.html">ServiceNow</a> for more detail.</li>
        </ul>
      </li>
      <li>
        <p>Description, Short-Description, and Work_notes are free text fields and can be enriched as part of the notification message</p>
        <h3>ServiceNow two-way integration</h3>
        <p>You can configure a two-way integration with ServiceNow incidents so that when state updates for the incident (resolved or closed), it triggers an update in the corresponding New Relic alerts incident state.</p>
        <p>To enable auto-sync between the ServiceNow incident state and a workflow incident:</p>
        <p>
          <img src="./images/allow-two-way-integration.png" alt="Screenshot showing how to enable a two-way integration." title="allow-two-way-integration.png">
        </p>
        <p>When you enable two-way integration, changes to ServiceNow incidents will update Alerts' incident state.</p>
      </li>
    </ul>
    <ol>
      <li>
        <p>Check Allow two-way integration when you create the Notifier.</p>
      </li>
      <li>
        <p>Open and download this <a href="https://storage.cloud.google.com/newrelic-connect/workflows-proxy-production.xml">XML file</a> (which includes the business rule for Incident Workflows).</p>
      </li>
      <li>
        <p>In the ServiceNow sidebar menu, go to System Definition > Business Rule.</p>
      </li>
      <li>
        <p>Click the menu icon in one of the column headers, select Import XML, and upload the XML file you downloaded.</p>
        <p>After you enable the auto-sync process, an incident state in ServiceNow changes to Resolved or Closed, and the corresponding workflow incident changes to Closed. For any state other than New, the workflow incident state changes to Acknowledged.</p>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoid2ViaG9vayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiV2ViaG9vayBub3RpZmllciJ9XQ==">
    <div data-prop-text="title">Webhook notifier</div>
    <p>Use the webhook notifier to send notification messages to any endpoint. The webhook configuration requires:</p>
    <ul>
      <li>
        <p>A channel name</p>
      </li>
      <li>
        <p>The endpoint of the target application</p>
      </li>
      <li>
        <p>Authorization</p>
      </li>
      <li>
        <p>Custom headers (if needed)</p>
      </li>
      <li>
        <p>The notification message</p>
        <p>Make sure to use valid JSON payloads. As suggested above, type "#" to add variables to the payload.</p>
        <p>
          <img src="./images/webhook-notifier.png" alt="Screenshot showing the fields to set up a webhook notifier." title="webhook-notifier.png">
        </p>
        <p>This is an example of a webhook configuration you might use.</p>
        <div data-component="CollapserGroup" data-prop="W10=">
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2xhY2std2ViaG9vayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU2xhY2sifV0=">
            <div data-prop-text="title">Slack</div>
            <p>You can use a webhook to send workflows content to Slack.</p>
            <ul>
              <li>
                <p>Read Slack documentation on how to set up <a href="https://slack.com/help/articles/115005265063-Incoming-webhooks-for-Slack">incoming webhooks</a>.</p>
              </li>
              <li>
                <p>You can send a basic webhook.</p>
                <pre><code>{
    “text”: “The {{violation.id}}\n led to this result:{{enricher.result}} ”
    }
</code></pre>
              </li>
              <li>
                <p>You can also send enriched webhooks.</p>
                <pre><code>{
    "text": "Example for larger block example - for {{alert.id}}",
    "blocks": [
        {
            "type": "section",
            "text": {
                "type": "mrkdwn",
                "text": "{{alert.description}} - {{alert.threshold}}"
            }
        },
        {
            "type": "section",
            "block_id": "section567",
            "text": {
                "type": "mrkdwn",
                "text": " \n :star: \n {{violation.threshold}}"
                    },
            "accessory": {
                "type": "image",
                "image_url": "https://usercontent2.hubstatic.com/13785369.jpg",
                "alt_text": "Troubled cat image, or a PNG image for your NRQL chart"
            }
        },
        {
            "type": "section",
            "block_id": "section789",
            "fields": [
                {
                    "type": "mrkdwn",
                    "text": "*bolded text*"     
                }
            ]
        }
    ]
}
</code></pre>
              </li>
            </ul>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibXN0ZWFtcy13ZWJob29rIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJNaWNyb3NvZnQgVGVhbXMifV0=">
            <div data-prop-text="title">Microsoft Teams</div>
            <p>You can use a webhook to send workflows content to Microsoft Teams.</p>
            <ul>
              <li>
                <p>Read Microsoft documentation on how to <a href="https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook">create an incoming webhook</a>.</p>
              </li>
              <li>
                <p>Use your Microsoft Teams URL as the webhook domain name.</p>
              </li>
              <li>
                <p>You can use this payload example JSON for testing.</p>
                <pre><code>{
    "summary": "{{violation.title}} - New Relic Alert Test Policy",
    "themeColor": "0076D7",
    "@type": "MessageCard",
    "potentialAction": [
        {
            "@type": "openUri",
            "name": "Go To Alert Details",
            "targets": [
                {
                    "os": "default",
                    "uri": "{{alert.link}}"
                }
            ]
        },
        {
            "@type": "openUri",
            "name": "Go To Condition (deep link)",
            "targets": [
                {
                    "os": "default",
                    "uri": "{{condition.deep_link_url}}"
                }
            ]
        },
        {
            "@type": "openUri",
            "name": "Go To Alert Condition (definition)",
            "targets": [
                {
                    "os": "default",
                    "uri": "{{alert.condition}}"
                }
            ]
        },
        {
            "@type": "openUri",
            "name": "Go To Violation Details",
            "targets": [
                {
                    "os": "default",
                    "uri": "{{violation.detail_url}}"
                }
            ]
        },
        {
            "@type": "openUri",
            "name": "Go To Runbook",
            "targets": [
                {
                    "os": "default",
                    "uri": "{{violation.runbook_url}}"
                }
            ]
        },
        {
            "@type": "openUri",
            "name": "Application Dashboard",
            "targets": [
                {
                    "os": "default",
                    "uri": "http://…"
                }
            ]
        },
        {
            "@type": "ActionCard",
            "name": "Add a comment",
            "inputs": [
                {
                    "@type": "TextInput", "id": "comment", "title": "Enter your comment",
                    "isMultiline": true
                }
            ],
            "actions": [ { "@type": "HttpPOST",  "name": "OK",  "target": "http://…"  }  ]
        }
    ],
    "@context": "http://schema.org/extensions",
    "sections": [
        {
            "activitySubtitle": "{{alert.message}}",
            "activityTitle": "New Relic Alert: {{alert.description}}"
        },
        {
            "images": [
                {
                    "image": "https://embed-ssl.wistia.com/deliveries/7d647fc03b31bafcfe1e88146629c5d8379d76c5.png?image_resize=580x114%3E"
                }
            ]
        },
        {
            "markdown": true,
            "facts": [
                {
                    "name": "Assigned to",
                    "value": "harry@potter.com"
                },
                {
                    "name": "Due date",
                    "value": "Mon May 01 2017 17:07:18 GMT-0700 (Pacific Daylight Time)"
                },
                {
                    "name": "Status",
                    "value": "Not started yet, but maybe later"
                },
                {
                    "name": "Severity",
                    "value": "1.1"
                },
                {
                    "name": "Account ID",
                    "value": "{{account.id}}"
                },
                {
                    "name": "alert.description",
                    "value": "{{alert.description}}"
                },
                {
                    "name": "alert.id",
                    "value": "{{alert.id}}"
                },
                {
                    "name": "alert.labels",
                    "value": "{{alert.labels}}"
                },
                {
                    "name": "alert.link",
                    "value": "{{alert.link}}"
                },
                {
                    "name": "alert.message",
                    "value": "{{alert.message}}"
                },
                {
                    "name": "alert.metric_name",
                    "value": "{{alert.metric_name}}"
                },
                {
                    "name": "alert.name",
                    "value": "{{alert.name}}"
                },
                {
                    "name": "alert.priority",
                    "value": "{{alert.priority}}"
                },
                {
                    "name": "alert.state",
                    "value": "{{alert.state}}"
                },
                {
                    "name": "alert.threshold",
                    "value": "{{alert.threshold}}"
                },
                {
                    "name": "condition.deep_link_url",
                    "value": "{{condition.deep_link_url}}"
                },
                {
                    "name": "condition.id",
                    "value": "{{condition.id}}"
                },
                {
                    "name": "condition.name",
                    "value": "{{condition.name}}"
                },
                {
                    "name": "entity.id",
                    "value": "{{entity.id}}"
                },
                {
                    "name": "entity.kind",
                    "value": "{{entity.kind}}"
                },
                {
                    "name": "entity.name",
                    "value": "{{entity.name}}"
                },
                {
                    "name": "entity.type",
                    "value": "{{entity.type}}"
                },
                {
                    "name": "evaluation.analyzer",
                    "value": "{{evaluation.analyzer}}"
                },
                {
                    "name": "evaluation.expected_groups",
                    "value": "{{evaluation.expected_groups}}"
                },
                {
                    "name": "evaluation.label",
                    "value": "{{evaluation.label}}"
                },
                {
                    "name": "evaluation.name",
                    "value": "{{evaluation.name}}"
                },
                {
                    "name": "evaluation.operator",
                    "value": "{{evaluation.operator}}"
                },
                {
                    "name": "evaluation.threshold",
                    "value": "{{evaluation.threshold}}"
                },
                {
                    "name": "evaluation.threshold_duration_seconds",
                    "value": "{{evaluation.threshold_duration_seconds}}"
                },
                {
                    "name": "evaluation.threshold_occurrences",
                    "value": "{{evaluation.threshold_occurrences}}"
                },
                {
                    "name": "evaluation.value_function",
                    "value": "{{evaluation.value_function}}"
                },
                {
                    "name": "evaluation.violate_on_overlap",
                    "value": "{{evaluation.violate_on_overlap}}"
                },
                {
                    "name": "health_check.id",
                    "value": "{{health_check.id}}"
                },
                {
                    "name": "health_check.name",
                    "value": "{{health_check.name}}"
                },
                {
                    "name": "host.id",
                    "value": "{{host.id}}"
                },
                {
                    "name": "host.name",
                    "value": "{{host.name}}"
                },
                {
                    "name": "nrql.event_type",
                    "value": "{{nrql.event_type}}"
                },
                {
                    "name": "policy.id",
                    "value": "{{policy.id}}"
                },
                {
                    "name": "policy.name",
                    "value": "{{policy.name}}"
                },
                {
                    "name": "product",
                    "value": "{{product}}"
                },
                {
                    "name": "signal.nrql.query",
                    "value": "{{signal.nrql.query}}"
                },
                {
                    "name": "signal.units",
                    "value": "{{signal.units}}"
                },
                {
                    "name": "source",
                    "value": "{{source}}"
                },
                {
                    "name": "system",
                    "value": "{{system}}"
                },
                {
                    "name": "templatized_title",
                    "value": "{{templatized_title}}"
                },
                {
                    "name": "violation.close_time",
                    "value": "{{violation.close_time}}"
                },
                {
                    "name": "violation.degradation_time",
                    "value": "{{violation.degradation_time}}"
                },
                {
                    "name": "violation.detail_url",
                    "value": "{{violation.detail_url}}"
                },
                {
                    "name": "violation.incident_key",
                    "value": "{{violation.incident_key}}"
                },
                {
                    "name": "violation.muted",
                    "value": "{{violation.muted}}"
                },
                {
                    "name": "violation.open_time",
                    "value": "{{violation.open_time}}"
                },
                {
                    "name": "violation.policy.id",
                    "value": "{{violation.policy.id}}"
                },
                {
                    "name": "violation.policy.name",
                    "value": "{{violation.policy.name}}"
                },
                {
                    "name": "violation.priority",
                    "value": "{{violation.priority}}"
                },
                {
                    "name": "violation.recovery_time",
                    "value": "{{violation.recovery_time}}"
                },
                {
                    "name": "violation.runbook_url",
                    "value": "{{violation.runbook_url}}"
                },
                {
                    "name": "violation.status",
                    "value": "{{violation.status}}"
                },
                {
                    "name": "violation.time_limit",
                    "value": "{{violation.time_limit}}"
                },
                {
                    "name": "violation.title",
                    "value": "{{violation.title}}"
                },
                {
                    "name": "violation.chart_url",
                    "value": "{{violation.chart_url}}"
                {
                    "name": "label.owning_team",
                    "value": "{{label.owning_team}}"
                },
                {
                    "name": "label.product",
                    "value": "{{label.product}}"
                },
                {
                    "name": "label.service_name",
                    "value": "{{label.service_name}}"
                },
                {
                    "name": "tag.account",
                    "value": "{{tag.account}}"
                },
                {
                    "name": "tag.cluster_name",
                    "value": "{{tag.cluster_name}}"
                },
                {
                    "name": "tag.cluster_role",
                    "value": "{{tag.cluster_role}}"
                },
                {
                    "name": "tag.display_name",
                    "value": "{{tag.display_name}}"
                },
                {
                    "name": "tag.full_hostname",
                    "value": "{{tag.full_hostname}}"
                },
                {
                    "name": "tag.hostname",
                    "value": "{{tag.hostname}}"
                },
                {
                    "name": "aws.ec2.instance_type",
                    "value": "{{aws.ec2.instance_type}}"
                },
                {
                    "name": "enricher",
                    "value": "{{enricher-200716-1010.result}}"
                }
            ]
        }
    ]
}
</code></pre>
              </li>
            </ul>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>
<h2>Step 5. Optional: Test your workflow</h2>
<p>When you test the workflow, it runs <a href="#add-nrql-enrich-notifications">NRQL queries</a> to enrich your notifications and send test notification messages to your notification platforms.</p>
<p>If your workflow test fails, check the following:</p>
<ul>
  <li>There's a unique name for your workflow and notifiers.</li>
  <li>The queries are valid (without error messages in the NRQL query).</li>
  <li>The notifiers passed their test.</li>
</ul>
<h2>Step 6. Activate your workflow [#activate-workflow]</h2>
<p>Make sure your workflow has at least one trigger and one notification channel, then save and activate the workflow.</p>
