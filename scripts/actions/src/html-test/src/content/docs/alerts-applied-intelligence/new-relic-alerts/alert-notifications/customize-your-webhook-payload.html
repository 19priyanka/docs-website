
<p>If you use webhooks as your <a href="/docs/alerts/new-relic-alerts-beta/managing-notification-channels/notification-channels-controlling-where-send-alerts#webhook">alerts notification channel</a>, you can use the default values. You can also customize the payload in the POST message for further integration into your system.</p>
<h2>Define webhooks [#ssl]</h2>
<p>When defining JSON webhooks, use the format <code>"name":"value",</code>. For example:</p>
<pre><code>"current_state":"acknowledged",
</code></pre>
<p>When defining static webhook variables in a form payload, use the format <code>name="value"</code>. For example:</p>
<pre><code>current_state="acknowledged"
</code></pre>
<p>Do not include any custom, self-signed SSL certificates in your webhook. Our agents <a href="/docs/accounts-partnerships/accounts/security/data-security">enable SSL by default</a>. Due to our security policy, custom SSL certificates will not be imported into our Trust store.</p>
<h2>Webhook values [#variables]</h2>
<p>We support these default dynamic webhook values. For your convenience, they are listed in alphabetical order, but you can define your webhook values in any order. You may also add custom variables by using your own key/value pairs.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Key</strong></p>
      </div>
      <div>
        <p><strong>Variable</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>"account_id"</code></p>
      </div>
      <div>
        <p><code>$ACCOUNT_ID</code></p>
        <p><strong>Possible values:</strong> New Relic account ID (string)</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"account_name"</code></p>
      </div>
      <div>
        <p><code>$ACCOUNT_NAME</code></p>
        <p><strong>Possible values:</strong> New Relic account name (string)</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"closed_violations_count_critical"</code></p>
      </div>
      <div>
        <p><code>$CLOSED_VIOLATIONS_COUNT_CRITICAL</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"closed_violations_count_warning"</code></p>
      </div>
      <div>
        <p><code>$CLOSED_VIOLATIONS_COUNT_WARNING</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"condition_id"</code></p>
      </div>
      <div>
        <p><code>$CONDITION_ID</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"condition_description"</code></p>
      </div>
      <div>
        <p><code>$DESCRIPTION</code></p>
        <p>This includes the <a href="/docs/alerts/new-relic-alerts/defining-conditions/alert-condition-descriptions">description field</a> from the alert condition, if there is one.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"condition_name"</code></p>
      </div>
      <div>
        <p><code>$CONDITION_NAME</code></p>
        <p><strong>Possible values:</strong> (user-defined string)</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"current_state"</code></p>
      </div>
      <div>
        <p><code>$EVENT_STATE</code></p>
        <p><strong>Possible values:</strong> <code>[open|acknowledged|closed]</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"details"</code></p>
      </div>
      <div>
        <p><code>$EVENT_DETAILS</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"duration"</code></p>
      </div>
      <div>
        <p><code>$DURATION</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"event_type"</code></p>
      </div>
      <div>
        <p><code>$EVENT_TYPE</code></p>
        <p><strong>Possible values: [</strong><code>INCIDENT]</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"incident_acknowledge_url"</code></p>
      </div>
      <div>
        <p><code>$INCIDENT_ACKNOWLEDGE_URL</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"incident_id"</code></p>
      </div>
      <div>
        <p><code>$INCIDENT_ID</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"incident_url"</code></p>
      </div>
      <div>
        <p><code>$INCIDENT_URL</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"metadata"</code></p>
      </div>
      <div>
        <p><code>$METADATA</code></p>
        <p>Currently used only for Synthetic monitoring multi-location failure conditions.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"open_violations_count_critical"</code></p>
      </div>
      <div>
        <p><code>$OPEN_VIOLATIONS_COUNT_CRITICAL</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"open_violations_count_warning"</code></p>
      </div>
      <div>
        <p><code>$OPEN_VIOLATIONS_COUNT_WARNING</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"owner"</code></p>
      </div>
      <div>
        <p><code>$EVENT_OWNER</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"policy_name"</code></p>
      </div>
      <div>
        <p><code>$POLICY_NAME</code></p>
        <p><strong>Possible values:</strong> (user-defined string)</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"policy_url"</code></p>
      </div>
      <div>
        <p><code>$POLICY_URL</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"runbook_url"</code></p>
      </div>
      <div>
        <p><code>$RUNBOOK_URL</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"severity"</code></p>
      </div>
      <div>
        <p><code>$SEVERITY</code></p>
        <p><strong>Possible values:</strong> [<code>CRITICAL]</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"targets"</code></p>
      </div>
      <div>
        <p><code>$TARGETS</code></p>
        <p>The <code>$TARGETS</code> variable cannot be used with FORM data, but is compatible with JSON data.</p>
        <p>For <a href="/docs/alerts/new-relic-alerts/defining-conditions/create-alert-conditions-nrql-queries#threshold-types">static NRQL faceted alerts</a>, the name of the facet that triggered the alert will be populated in the targetâ€™s <strong>name</strong> field.</p>
        <p>For a description of the available fields, see <a href="/docs/alerts/new-relic-alerts/managing-notification-channels/customize-your-webhook-payload#target-values">Target values</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"timestamp"</code></p>
      </div>
      <div>
        <p><code>$TIMESTAMP</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"version"</code></p>
      </div>
      <div>
        <p><code>$VERSION</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"violation_callback_url"</code></p>
      </div>
      <div>
        <p><code>$VIOLATION_CALLBACK_URL</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"violation_chart_url"</code></p>
      </div>
      <div>
        <p><code>$VIOLATION_CHART_URL</code></p>
      </div>
    </div>
  </div>
</div>
<h2>Targets values [#target-values]</h2>
<p>This section describes the <code>$TARGETS</code> field in your webhook. This data is not customizable and is provided here for reference. Your <code>$TARGETS</code> contain a list of zero or more targets (entities). Each target is described by a JSON object with the following fields.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Key</strong></p>
      </div>
      <div>
        <p><strong>Variable</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>"id"</code></p>
      </div>
      <div>
        <p>ID of the target or entity</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"name"</code></p>
      </div>
      <div>
        <p>Name of the target or entity</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"labels"</code></p>
      </div>
      <div>
        <p>Combined entity tags and NRQL facets that are derived from the condition evaluation and available entity tags.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"link"</code></p>
      </div>
      <div>
        <p>URL link to this target or entity.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"product"</code></p>
      </div>
      <div>
        <p>Type of product for this target or entity; for example, <code>APM</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>"type"</code></p>
      </div>
      <div>
        <p>Type of target or entity under <code>product</code>; for example, <code>Application</code></p>
      </div>
    </div>
  </div>
</div>
<h2>Webhook format example [#webhook-format-examples]</h2>
<p>The following examples show a webhook payload using both the default dynamic variables and a custom variable. You can use some or all of the dynamic variables, along with any custom variables, to define your own payload.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoianNvbi1leGFtcGxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJKU09OIHdlYmhvb2sgZXhhbXBsZSJ9XQ==">
    <div data-prop-text="title">JSON webhook example</div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>The following webhook example has extra spaces and line breaks for readability. Actual webhook responses are delivered as one continuous line of text.</p>
    </div>
    <pre><code>{
"account_id": "$ACCOUNT_ID",
"account_name": "$ACCOUNT_NAME",
"closed_violations_count_critical": "$CLOSED_VIOLATIONS_COUNT_CRITICAL",
"closed_violations_count_warning": "$CLOSED_VIOLATIONS_COUNT_WARNING",
"condition_family_id": "$CONDITION_FAMILY_ID",
"condition_id": "$CONDITION_ID",
"condition_name": "$CONDITION_NAME",
"current_state": "$EVENT_STATE",
"details": "$EVENT_DETAILS",
"duration": "$DURATION",
"event_type": "$EVENT_TYPE",
"incident_acknowledge_url": "$INCIDENT_ACKNOWLEDGE_URL",
"incident_id": "$INCIDENT_ID",
"incident_url": "$INCIDENT_URL",
"open_violations_count_critical": "$OPEN_VIOLATIONS_COUNT_CRITICAL",
"open_violations_count_warning": "$OPEN_VIOLATIONS_COUNT_WARNING",
"owner": "$EVENT_OWNER",
"policy_name": "$POLICY_NAME",
"policy_url": "$POLICY_URL",
"runbook_url": "$RUNBOOK_URL",
"severity": "$SEVERITY",
"targets": "$TARGETS",
"timestamp": "$TIMESTAMP",
"violation_callback_url": "$VIOLATION_CALLBACK_URL",
"violation_chart_url": "$VIOLATION_CHART_URL",
"team": "DevOps"  &#x3C;--[example of custom variable]
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoianNvbi1leGFtcGxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJGb3JtIHdlYmhvb2sgZXhhbXBsZSJ9XQ==">
    <div data-prop-text="title">Form webhook example</div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>The following webhook example has extra spaces and line breaks for readability. Actual webhook responses are delivered as one continuous line of text.</p>
    </div>
    <pre><code>account_id=$ACCOUNT_ID
account_name=$ACCOUNT_NAME
closed_violations_count_critical=$CLOSED_VIOLATIONS_COUNT_CRITICAL
closed_violations_count_warning=$CLOSED_VIOLATIONS_COUNT_WARNING
condition_family_id=$CONDITION_FAMILY_ID
condition_id=$CONDITION_ID
condition_name=$CONDITION_NAME
current_state=$EVENT_STATE
details=$EVENT_DETAILS
duration=$DURATION
event_type=$EVENT_TYPE
incident_acknowledge_url=$INCIDENT_ACKNOWLEDGE_URL
incident_id=$INCIDENT_ID
incident_url=$INCIDENT_URL
open_violations_count_critical=$OPEN_VIOLATIONS_COUNT_CRITICAL
open_violations_count_warning=$OPEN_VIOLATIONS_COUNT_WARNING
owner=$EVENT_OWNER
policy_name=$POLICY_NAME
policy_url=$POLICY_URL
runbook_url=$RUNBOOK_URL
severity=$SEVERITY
timestamp=$TIMESTAMP
violation_callback_url=$VIOLATION_CALLBACK_URL
violation_chart_url=$VIOLATION_CHART_URL
team="DevOps"  &#x3C;--[example of custom variable]

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidGV4dC1leGFtcGxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJQbGFpbiB0ZXh0IG91dHB1dCJ9XQ==">
    <div data-prop-text="title">Plain text output</div>
    <pre><code>New Relic Alert
Incident open: CPU > 50% for 5 minutes
Policy: http://alerts.newrelic.com/accounts/1234/policies/5678
Chart URL: http://gorgon.nr-assets.net/image/12345678-abcd-efgh-ijkl-1234567890

For more details, see:
http://alerts.newrelic.com/accounts/1234/incidents/3456

</code></pre>
  </div>
</div>
