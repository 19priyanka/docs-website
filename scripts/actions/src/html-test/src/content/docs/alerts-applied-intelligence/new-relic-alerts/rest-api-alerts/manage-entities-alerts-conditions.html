
<p>In alerts, an <strong>entity</strong> is defined as any target for monitoring, such as an application, a browser, or a plugin. The <a href="/docs/alerts/new-relic-alerts/defining-conditions/select-product-targets-alert-condition">alerts UI</a> shows available entities that you can select. You can also use the REST API and API Explorer to <a href="https://rpm.newrelic.com/api/explore/alerts_entity_conditions/add">add</a> or <a href="https://rpm.newrelic.com/api/explore/alerts_entity_conditions/remove">remove</a> entities for a condition.</p>
<h2>Requirements</h2>
<p>Modifying the list of entities in a condition requires you to know:</p>
<ul>
  <li>Your <a href="/docs/apis/rest-api-v2/getting-started/introduction-new-relic-rest-api-v2#api_key">API key</a></li>
  <li>The <a href="/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#alert-entity">{entity_ID}</a> of the entity you want to monitor</li>
  <li>The <a href="/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#alert-condition">{condition_ID}</a> of the condition you want to modify</li>
</ul>
<h2>General procedure [#basic_process]</h2>
<p>To update the entity list for a condition:</p>
<ol>
  <li>Locate the appropriate <a href="/docs/alerts/new-relic-alerts/getting-started/alerts-glossary#alert-entity">entity ID</a>; for example, <a href="/docs/apis/rest-api-v2/requirements/listing-host-instance-application-server-ids">Application ID</a> and <a href="/docs/apis/rest-api-v2/browser-examples-v2/adding-or-listing-browser-apps-api-v2#specific-browser-app">Browser ID</a>.</li>
  <li><a href="/docs/apm/apis/alert-examples-v2/listing-policies-api-v2#single_policy">Identify the policy ID by name or type</a>.</li>
  <li>Get the list of conditions associated with the policy and choose the one you want to modify for the appropriate category:
    <ul>
      <li><a href="/docs/alerts/new-relic-alerts/rest-api-alerts/rest-api-calls-new-relic-alerts#conditions">APM, Browser, and Mobile</a></li>
      <li><a href="/docs/alerts/new-relic-alerts/rest-api-alerts/rest-api-calls-new-relic-alerts#ext-services-conditions">External services</a></li>
      <li><a href="/docs/alerts/new-relic-alerts/rest-api-alerts/rest-api-calls-new-relic-alerts#synthetics-conditions">Synthetic monitoring</a></li>
      <li><a href="/docs/alerts/new-relic-alerts/rest-api-alerts/rest-api-calls-new-relic-alerts#plugins-conditions">Plugins</a></li>
    </ul>
  </li>
  <li>Modify the condition using the <a href="/docs/alerts/new-relic-alerts/rest-api-alerts/rest-api-calls-new-relic-alerts#add-entity">add</a> or <a href="/docs/alerts/new-relic-alerts/rest-api-alerts/rest-api-calls-new-relic-alerts#remove_entity">remove</a> API requests.</li>
</ol>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Follow the requirements for the <a href="/docs/alerts/new-relic-alerts/configuring-alert-policies/minimum-maximum-values">minimum and maximum number of entities</a> you can add to conditions.</p>
</div>
<h2>Example: Add/remove an entity [#example]</h2>
<p>The following example shows how to add a Ruby application named <code>TimberTime</code> in a condition and how to remove an entity from that same condition.</p>
<p>Only the first step in this example is unique to choosing the Ruby app as the entity. The remaining steps will be the same for whichever entity you choose.</p>
<ol>
  <li>
    <p>Get the <code>entity_id</code>; for example, <code>{application_id}</code>:</p>
    <pre><code>curl -X GET 'https://api.newrelic.com/v2/applications.json' \
     -H 'Api-Key:$API_KEY' -i
</code></pre>
    <p>OR</p>
    <p>If you know the application name, use this command and specify the <code>app_name</code>:</p>
    <pre><code>curl -X GET 'https://api.newrelic.com/v2/applications.json' \
     -H 'Api-Key:$API_KEY' -i \
     -d 'filter[name]=TimberTime'
</code></pre>
  </li>
  <li>
    <p>Review the output to find the <code>{application_id}</code>, and use it as the <code>{entity_id}</code>:</p>
    <pre><code>{
  "applications": [
    {
      "id": 12345,    &#x3C;---&#x3C;&#x3C;&#x3C;  {application_id} == {entity_id}
      "name": "TimberTime",
      "language": "ruby",
      "health_status": "gray",
      ...
    },
</code></pre>
  </li>
  <li>
    <p>Get the <code>policy_id</code> you want to update; for example, the <code>TimberTime</code> app's <code>Logjam Alert</code> policy. To get the <code>policy_id</code>, use this command:</p>
    <pre><code>curl -X GET 'https://api.newrelic.com/v2/alerts_policies.json' \
     -H 'Api-Key:$API_KEY' -i \
     -G -d 'filter[name]= Logjam Alert'    &#x3C;---&#x3C;&#x3C;&#x3C;  {policy_name}
</code></pre>
  </li>
  <li>
    <p>Review the policy output; for example:</p>
    <pre><code>{
  "policies": [
    {
      "id": 85,      &#x3C;---&#x3C;&#x3C;&#x3C;  {policy_id}
      "incident_preference": "PER_POLICY",
      "name": "Logjam Alert",
      "created_at": 1461176510393,
      "updated_at": 1461176510393
    },
</code></pre>
  </li>
  <li>
    <p>List all of this policy's conditions and locate the <code>{condition_id}</code>:</p>
    <pre><code>curl -X GET 'https://api.newrelic.com/v2/alerts_conditions.json' \
     -H 'Api-Key:$API_KEY' -i \
     -G -d 'policy_id=85'
</code></pre>
    <p>Review the policy conditions; for example:</p>
    <pre><code>{
  "conditions": [
    {
      "id": 234567,       &#x3C;---&#x3C;&#x3C;&#x3C; {condition_id}
      "type": "apm_app_metric",
      "name": "Throughput (web) (High)",
      "enabled": true,
      "entities": [
        "8288171"        &#x3C;---&#x3C;&#x3C;&#x3C; Entity currently included in the policy
      ],
      "metric": "response_time_web",
      "terms": [
        {
          "duration": "5",
          "operator": "above",
          "priority": "critical",
          "threshold": "500",
          "time_function": "all"
        }
      ]
    }
  ]
}
</code></pre>
  </li>
  <li>
    <p>Use API requests to add entities to or remove entities from the policy's condition:</p>
    <p>To add <code>{entity_id}</code> 12345 to <code>{condition_id}</code> 234567, with <code>{entity_type}</code> set as <code>application</code>:</p>
    <pre><code>curl -X PUT 'https://api.newrelic.com/v2/alerts_entity_conditions/12345.json' \
     -H 'Api-Key:$API_KEY' -i \
     -H 'Content-Type: application/json' \
     -G -d 'entity_type=Application&#x26;condition_id=234567'
</code></pre>
    <p>To remove <code>{entity_id}</code> 8288171 from <code>{condition_id}</code> 234567, with <code>{entity_type}</code> set as <code>application</code>:</p>
    <pre><code>curl -X DELETE 'https://api.newrelic.com/v2/alerts_entity_conditions/8288171.json' \
     -H 'Api-Key:$API_KEY' -i \
     -G -d 'entity_type=Application&#x26;condition_id=234567'
</code></pre>
  </li>
</ol>
