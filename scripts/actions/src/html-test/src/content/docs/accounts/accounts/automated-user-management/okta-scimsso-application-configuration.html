
<p>This supplemental guide provides Okta specific details on how to configure the New Relic Okta SCIM/SSO application. This connects your organization's users to New Relic, and allows them to easily use single sign-on into New Relic. This supplemental guide is meant to be used along with the <a href="https://docs.newrelic.com/docs/assign-users-automated-provisioning-allow-single-sign">main automated provisioning guide</a>.</p>
<h2>Add SCIM/SSO application [#add-application]</h2>
<p>Add the New Relic SCIM/SSO application to your Okta applications.</p>
<ol>
  <li>Go to <a href="https://www.okta.com/">okta.com/</a> and sign in with an account that has administrator permissions.</li>
  <li>From the Okta home page, click on <strong>Admin</strong>.</li>
  <li>From the Okta admin <strong>Dashboard</strong>, choose the <strong>Applications</strong> page. Click <strong>Add Application</strong>.</li>
  <li>In the search field on the Okta <strong>Add Applications</strong> page, enter "New Relic by Organization" and then click on the application when it shows in the search results.</li>
  <li>From the New Relic by Organization page, click on <strong>Add</strong>.</li>
  <li>From the Add New Relic by Organization page, check the two <strong>Application Visibility "Do not display..."</strong> checkboxes and click on <strong>Done</strong>. We will make the application visible later after configuration is complete and provisioning has begun.</li>
</ol>
<h2>Configure provisioning</h2>
<p>Configure the New Relic SCIM/SSO application to automatically provision your users to New Relic.</p>
<ol>
  <li>From the New Relic SCIM/SSO application page, click on the <strong>Provisioning</strong> tab.</li>
  <li>From the Integration form, click on <strong>Configure API Integration</strong>.</li>
  <li>Check the <strong>Enable API integration</strong> checkbox.</li>
  <li>In the API Token field, enter the SCIM Bearer Token provided by your account representative.</li>
  <li>Optional: click on <strong>Test API Credentials</strong> to verify a SCIM connection can be established to New Relic. If a connection can be established, a success message is displayed. If a connection was not established, re-enter the API Token and try the test again.</li>
  <li>Click <strong>Save</strong>. Note that the save process does a test of the API credentials. If a connection is not established to New Relic, the save will fail.</li>
  <li>On the newly displayed To App form, click on <strong>Edit</strong>.</li>
  <li>Check the Enable checkbox in the <strong>Create Users</strong>, <strong>Update User Attributes</strong>, and <strong>Deactivate Users</strong> sections.</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<h2>Assign users and groups [#assign-users]</h2>
<p>After the New Relic SCIM/SSO application provisioning configuration and the New Relic side SSO configuration is finished, you can assign users to the application.</p>
<p>Assigning users is done using two different tabs on the the New Relic SCIM/SSO application page. We recommend having your New Relic users selected on the <strong>Assignments</strong> tab and their associated groups selected on the <strong>Push Groups</strong> tab.</p>
<h3>Assignments Tab</h3>
<ol>
  <li>From the New Relic SCIM/SSO application page, click on the <strong>Assignments</strong> tab.</li>
  <li>From the <strong>Assignments</strong> form, click on <strong>Assign</strong>.</li>
  <li>From the pop up menu, click on <strong>Assign to Groups</strong>.</li>
  <li>From the <strong>Assign ... to Groups</strong> form, click on Assign for the group you wish to assign to the application.</li>
  <li>Optional: in the <strong>Time zone</strong> field, enter the default time zone for members of the group. Members without a time zone configured, will use the group time zone. Time zone affects how date/times are shown in New Relic. Time zone is specified in IANA Time Zone database format, also known as the "Olson" time zone database format (e.g., "America/Los_Angeles").</li>
  <li>Click on <strong>Save and Go Back</strong>.</li>
  <li>Repeat the steps to add a group until all desired groups have been assigned to the application.</li>
  <li>Click <strong>Done</strong>.</li>
</ol>
<h3>Push Groups Tab</h3>
<ol>
  <li>From the New Relic SCIM/SSO application page, click on the <strong>Push Groups</strong> tab.</li>
  <li>From the Push Groups form, click on <strong>Push Groups</strong>.</li>
  <li>From the pop up menu, click on <strong>Find groups by name</strong>.</li>
  <li>From the <strong>Push Groups to...</strong> form, in the search field enter the first few characters of the name of the group you want to send to New Relic. Leave the <strong>Push group memberships immediately</strong> checkbox checked.</li>
  <li>Click on your group in the pop up search results list.</li>
  <li>In the <strong>Match result &#x26; push action</strong> section, <strong>No Match found</strong> should be displayed, meaning that the group does not yet exist at New Relic. Leave the selector set to <strong>Create Group</strong> and leave the default name for the group. The intent here is to have a group of the same name created at New Relic.</li>
  <li>If this is the last group you wish to send to New Relic, click on <strong>Save</strong>. Otherwise, if you have more groups to configure, click on <strong>Save &#x26; Add Another</strong> and repeat the steps to add a group.</li>
</ol>
<h2>Additional considerations</h2>
<p>In this section we discuss other important things to know when using the New Relic SCIM/SSO application. This section includes tips to work around potential issues that could cause undesired results when integrating between Okta and New Relic.</p>
<h3>Moving users between groups [#moving-users]</h3>
<p>When moving a user between groups, you must manually synchronize the old group's membership with New Relic. This is because Okta does not send a SCIM request to remove a user from a group. So, the admin needs to push the old group's membership to New Relic manually to inform New Relic that the user is no longer a member of the old group.</p>
<p>Here are the steps to manually synchronize a group's membership:</p>
<ol>
  <li>From the New Relic SCIM/SSO application page, click on the <strong>Push Groups</strong> tab.</li>
  <li>From the <strong>Push Groups</strong> form, open the pick list on the desired group's button under the <strong>Push Status</strong> column.</li>
  <li>From the displayed pick list on the button, click <strong>Push now</strong>. This causes an immediate synchronization of the group's membership with New Relic.</li>
</ol>
