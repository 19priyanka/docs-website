
<p><a href="https://devcenter.heroku.com/articles/newrelic">Heroku</a> is a Platform as a Service (PaaS) solution for hosting web applications in various agent languages. With New Relic, you can extend Heroku with metrics from our monitoring solutions, like APM and browser monitoring. The New Relic add-on supports Java, Node.js, PHP, Python, and Ruby.</p>
<h2>Install the New Relic add-on [#addon-installation]</h2>
<p>To set up the New Relic add-on, see <a href="https://devcenter.heroku.com/articles/newrelic">Heroku's documentation</a>, including available plan levels and Toolbelt procedures. If you have problems, use the <a href="https://devcenter.heroku.com/articles/support-channels">Heroku support channels</a>.</p>
<h2>Configure the agent [#agent-installation]</h2>
<p>After you install the <a href="https://devcenter.heroku.com/articles/newrelic">New Relic add-on for Heroku</a>, follow the configuration procedures for your New Relic APM agent.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LWphdmEifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkphdmEifV0=">
    <div data-prop-text="title">Java</div>
    <p>The minimum agent version for Java is 3.17.1 or higher. To install and configure New Relic's Java agent for your add-on, see our <a href="/docs/agents/java-agent/installation/java-agent-heroku">Java agent and Heroku</a> documentation.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LW5vZGVqcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTm9kZS5qcyJ9XQ==">
    <div data-prop-text="title">Node.js</div>
    <p>To install and configure our Node.js agent for your add-on, see:</p>
    <ul>
      <li>New Relic's <a href="/docs/agents/nodejs-agent/hosting-services/nodejs-agent-heroku">Node.js and Heroku</a> documentation</li>
      <li><a href="//beachape.com/blog/2013/02/04/nodejs-on-heroku-with-newrelic/">Blog post</a> (2013) with a "real world" example of installing our Node.js agent for a Heroku app</li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LXBocCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUEhQIn1d">
    <div data-prop-text="title">PHP</div>
    <p>To install and configure our PHP agent for your add-on, see our <a href="/docs/agents/php-agent/advanced-installation/php-agent-heroku">PHP agent and Heroku</a> documentation.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LXB5dGhvbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUHl0aG9uIn1d">
    <div data-prop-text="title">Python</div>
    <p>To install and configure our Python agent for your add-on, see our <a href="/docs/agents/python-agent/hosting-services/python-agent-heroku">Python agent and Heroku</a> documentation.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LXJ1YnkifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlJ1YnkifV0=">
    <div data-prop-text="title">Ruby</div>
    <p>To install and configure our Ruby agent for your add-on, see our <a href="/docs/agents/ruby-agent/installation-configuration/ruby-agent-heroku">Ruby agent and Heroku</a> documentation.</p>
    <p>If you are using our Ruby agent with a non-Rails application, Heroku users need to install the plugin in your repository manually. For example, in a Sinatra app, add the <code>newrelic</code> gem to your <strong>Gemfile</strong>, and then add the following code to your app:</p>
    <pre><code>configure :production do
 require 'newrelic_rpm'
 end

</code></pre>
  </div>
</div>
<h2>Manage your Heroku add-on accounts [#add-on-account]</h2>
<p>Every time you install the New Relic add-on for Heroku, New Relic will automatically create a new account, complete with a unique <a href="#heroku-add-on-license-key">license key</a>, <a href="#heroku-add-on-account-url">account URL</a>, and <a href="#heroku-add-on-account">account ID</a>. These three types of information are important for managing each of your Heroku add-on accounts.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LWFkZC1vbi1saWNlbnNlLWtleSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTGljZW5zZSBrZXkifV0=">
    <div data-prop-text="title">License key</div>
    <p>The <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">license key</a> identifies the account where your application reports. To check the license key your app is using:</p>
    <ol>
      <li>
        <p>From a command line, run:</p>
        <pre><code>heroku config | grep -i relic
</code></pre>
      </li>
      <li>
        <p>Look for the value of <code>NEW_RELIC_LICENSE_KEY</code>.</p>
        <p>This license key environment variable will override any other license key that you hard-code into your New Relic config file.</p>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LWFkZC1vbi1hY2NvdW50LXVybCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQWNjb3VudCBVUkwifV0=">
    <div data-prop-text="title">Account URL</div>
    <p>If you install the New Relic add-on multiple times and need to verify the URL your Heroku app uses for reporting to New Relic, look in your agent logs for a line indicating <code>reporting to</code> following by a URL using this format:</p>
    <pre><code>rpm.newrelic.com/accounts/###/applications/######

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LWFkZC1vbi1hY2NvdW50In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJBY2NvdW50IElEIn1d">
    <div data-prop-text="title">Account ID</div>
    <p>You cannot change your add-on's <a href="/docs/accounts-partnerships/accounts/account-setup/account-id">account ID</a> directly. If you need to change the New Relic account your Heroku app uses for reporting to New Relic, change the current license key environment variable in its config file so that it points to the license key of the New Relic account you want to use:</p>
    <pre><code>heroku config:set NEW_RELIC_LICENSE_KEY=changed_account_license_key

</code></pre>
  </div>
</div>
<h2>Log on to New Relic [#signon]</h2>
<p>Heroku customers may have two different types of accounts with New Relic:</p>
<ul>
  <li>Add-on accounts: New Relic accounts that customers installed on their Heroku application by using <a href="https://addons.heroku.com/newrelic">Heroku's New Relic add-on</a></li>
  <li>"Regular" accounts: Other New Relic accounts that customers did not install with Heroku's add-on</li>
</ul>
<p>Regular accounts provide a wider range of features than do add-on accounts, and are installed and managed differently. Different procedures apply, depending on which type of account you want to sign into.</p>
<p>In accordance with the terms of New Relic's partnership with Heroku, customers who install New Relic via the Heroku add-on can only access their New Relic add-on accounts by signing in through Heroku. For this reason, if you have both add-on accounts and regular New Relic accounts, you cannot switch directly between them.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGVyb2t1LWFkZC1vbi1sb2dpbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU2lnbiBpbiB0byBOZXcgUmVsaWMgYWRkLW9uIGFjY291bnQgdGhyb3VnaCBIZXJva3UifV0=">
    <div data-prop-text="title">Sign in to New Relic add-on account through Heroku</div>
    <p>To sign in to your New Relic add-on accounts:</p>
    <ol>
      <li>
        <p>Sign in through Heroku's login page at <a href="https://id.heroku.com/login">id.heroku.com/login</a>.</p>
      </li>
      <li>
        <p>Select the application that has the New Relic add-on installed.</p>
      </li>
      <li>
        <p>Select New Relic from your list of add-ons.</p>
        <p>If you sign in through Heroku, you will not see any of your regular New Relic accounts when you select <strong><a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#account-dropdown">account dropdown</a> > Switch account</strong>.</p>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicmVndWxhci1sb2dpbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU2lnbiBpbiB0byByZWd1bGFyIE5ldyBSZWxpYyBhY2NvdW50cyJ9XQ==">
    <div data-prop-text="title">Sign in to regular New Relic accounts</div>
    <p>To sign into or switch between your regular New Relic accounts:</p>
    <ol>
      <li>
        <p>Sign in to New Relic's login page at <a href="https://rpm.newrelic.com/login">newrelic.com/login</a>.</p>
      </li>
      <li>
        <p>To switch from one regular New Relic account to another: Go to: <strong><a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#account-dropdown">account dropdown</a> > Switch account</strong>, and select an account.</p>
        <p>If you sign in directly through New Relic, you will not see any of your New Relic add-on accounts from Heroku when you select <strong><a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#account-dropdown">account dropdown</a> > Switch account</strong>.</p>
      </li>
    </ol>
  </div>
</div>
<h2>Set up deployment notifications [#deployment]</h2>
<p>The Heroku add-on automatically sends deployment notifications to New Relic for <strong>one application</strong> per account. If you add multiple applications to your add-on account, you must use the New Relic REST API to manually send deployment notifications for your additional applications.</p>
<p>You cannot use a post-deploy hook, because the New Relic REST API call requires a header, and Heroku's post-deploy hook does not allow headers. However, you can write a script that generates this API call whenever you deploy on Heroku. For instructions on recording deployments via the REST API, see <a href="/docs/apm/new-relic-apm/maintenance/recording-deployments#api">Recording deployments</a>.</p>
