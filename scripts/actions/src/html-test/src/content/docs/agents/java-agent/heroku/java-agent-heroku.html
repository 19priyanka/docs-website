
<p><a href="https://devcenter.heroku.com/articles/newrelic">Heroku</a> is a Platform as a Service (PaaS) solution for hosting web applications in various agent languages, including Java. With New Relic, you can extend Heroku with metrics from <a href="/docs/apm/new-relic-apm">APM</a> or <a href="/docs/browser/new-relic-browser">Browser</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>If you use Scala, see <a href="/docs/agents/java-agent/heroku/java-agent-scala-heroku">Java agent Scala procedures for Heroku</a>.</p>
</div>
<h2>Compatibility and requirements [#requirements]</h2>
<ul>
  <li>Java 7 or higher</li>
  <li><a href="http://maven.apache.org/download.cgi">Maven 3</a> or higher (if you are using Maven)</li>
  <li>Latest New Relic <a href="/docs/release-notes/agent-release-notes/java-release-notes">Java agent version</a></li>
</ul>
<h2>1. Enable the New Relic agent add-on in Heroku [#enable]</h2>
<p>After you ensure that you <a href="#requirements">meet the requirements</a>, enable the New Relic agent add-on in Heroku.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJjYXV0aW9uIn1d">
  <p>You must <a href="https://devcenter.heroku.com/articles/getting-started-with-java#introduction">deploy your Java app to Heroku</a>, following the Heroku instructions at least through the <a href="https://devcenter.heroku.com/articles/getting-started-with-java#deploy-the-app">Deploy the app</a> step, before you can enable the New Relic agent add-on.</p>
</div>
<ol>
  <li>Log in to your Heroku account.</li>
  <li>From the <a href="https://addons.heroku.com/newrelic">APM Add-On Page</a>, select a subscription plan.</li>
  <li>Select <strong>Install New Relic APM</strong>, and then select your target app from the dropdown.</li>
</ol>
<p>Installing the add-on automatically creates a New Relic account and configures access for Heroku servers.</p>
<h2>2. Provide the path to the jar file [#provide-path]</h2>
<p>After you <a href="#enable">enable the New Relic agent add-on</a>, pass the <code>javaagent</code> flag to the <code>java</code> process and provide the path to the jar file by editing your <code>Procfile</code>.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGVwbG95LWhlcm9rdSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRGVwbG95IHRvIEhlcm9rdSJ9XQ==">
    <div data-prop-text="title">Deploy to Heroku</div>
    <p>If you deploy to Heroku, the location of the jar file for both Maven and manual configuration is in the app's root folder in a directory called <code>newrelic</code>.</p>
    <p>Example:</p>
    <pre><code>web: java -javaagent:/app/newrelic/newrelic.jar -jar target/HELLOWORLD.jar

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGVwbG95LWxvY2FsbHkifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkRlcGxveSBsb2NhbGx5In1d">
    <div data-prop-text="title">Deploy locally</div>
    <p>If you deploy locally, your jar file might be in a different directory. If it is, replace PATH/TO/NEWRELIC.JAR with the path to the jar file in your local directory.</p>
    <p>Example:</p>
    <pre><code>web: java -javaagent:PATH/TO/NEWRELIC.JAR -jar target/HELLOWORLD.jar

</code></pre>
  </div>
</div>
<h2>3. Configure your Heroku environment for New Relic [#configure-heroku-environment]</h2>
<p>After you <a href="#provide-path">provide the path to the jar file</a>, configure your Heroku environment for New Relic, depending on your platform:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWF2ZW4tY29uZmlnIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJNYXZlbiBjb25maWd1cmF0aW9uIn1d">
    <div data-prop-text="title">Maven configuration</div>
    <ol>
      <li>
        <p>Give your app a <a href="/docs/agents/manage-apm-agents/app-naming/name-your-application">meaningful name</a> with this Heroku toolbelt command:</p>
        <pre><code>heroku config:set NEW_RELIC_APP_NAME="APP_NAME"
</code></pre>
      </li>
      <li>
        <p>Add your <a href="/docs/accounts/install-new-relic/account-setup/license-key">New Relic license key</a>:</p>
        <pre><code>heroku config:set NEW_RELIC_LICENSE_KEY="LICENSE_KEY"
</code></pre>
      </li>
      <li>
        <p>In your <code>pom.xml</code>, add the <code>newrelic-agent</code> dependency, substituting <code>X.Y.Z</code> with the <a href="/docs/agents/java-agent/getting-started/java-release-notes">latest Java agent version</a>. Recommended: To ensure proper formatting is applied and contents do not contain sensitive information, format the syntax using <a href="http://codebeautify.org/xmlviewer">http://codebeautify.org/xmlviewer</a>.</p>
        <pre><code>&#x3C;dependency> 
 &#x3C;groupId>com.newrelic.agent.java&#x3C;/groupId>
 &#x3C;artifactId>newrelic-java&#x3C;/artifactId>
 &#x3C;version>X.Y.Z&#x3C;/version>
 &#x3C;scope>provided&#x3C;/scope>
 &#x3C;type>zip&#x3C;/type>
&#x3C;/dependency>
</code></pre>
      </li>
      <li>
        <p>In the <code>&#x3C;build></code> element of <code>pom.xml</code>, customize the build so it downloads the agent:</p>
        <pre><code>&#x3C;plugin>
        &#x3C;groupId>org.apache.maven.plugins&#x3C;/groupId>
        &#x3C;artifactId>maven-dependency-plugin&#x3C;/artifactId>
        &#x3C;version>3.0.2&#x3C;/version>
        &#x3C;executions>
          &#x3C;execution>
            &#x3C;id>unpack-newrelic&#x3C;/id>
            &#x3C;phase>package&#x3C;/phase>
            &#x3C;goals>
              &#x3C;goal>unpack-dependencies&#x3C;/goal>
            &#x3C;/goals>
            &#x3C;configuration>
              &#x3C;includeGroupIds>com.newrelic.agent.java&#x3C;/includeGroupIds>
              &#x3C;includeArtifactIds>newrelic-java&#x3C;/includeArtifactIds>
              &#x3C;overWriteReleases>false&#x3C;/overWriteReleases>
              &#x3C;overWriteSnapshots>false&#x3C;/overWriteSnapshots>
              &#x3C;overWriteIfNewer>true&#x3C;/overWriteIfNewer>
              &#x3C;outputDirectory>${project.basedir}&#x3C;/outputDirectory>
              &#x3C;destFileName>newrelic&#x3C;/destFileName>
            &#x3C;/configuration>
          &#x3C;/execution>
        &#x3C;/executions>
      &#x3C;/plugin>
</code></pre>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTWFudWFsIGNvbmZpZ3VyYXRpb24ifV0=">
    <div data-prop-text="title">Manual configuration</div>
    <ol>
      <li>Log in to <a href="https://dashboard.heroku.com">dashboard.heroku.com</a>.</li>
      <li>Select your app.</li>
      <li>Select <strong>Add-ons > New Relic APM</strong>.</li>
      <li>From the New Relic UI's <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#account-dropdown">account dropdown</a>, select <strong>Account settings</strong>.</li>
      <li>In the <strong>Update your New Relic agent</strong> section, download the latest agent release for your <strong>Java SE</strong> release.</li>
      <li>Unzip the file into your app root.</li>
      <li>Edit <code>newrelic.yml</code> to customize the <a href="/docs/agents/java-agent/configuration/java-agent-configuration-config-file#cfg-app_name"><code>app_name</code></a> setting with a <a href="/docs/agents/manage-apm-agents/app-naming/name-your-application">descriptive app name</a>.</li>
      <li>Also in <code>newrelic.yml</code>, add your <a href="/docs/accounts/install-new-relic/account-setup/license-key">license key</a> to the <a href="/docs/agents/java-agent/configuration/java-agent-configuration-config-file#cfg-license_key"><code>license_key</code></a> setting.</li>
    </ol>
  </div>
</div>
<h2>4. Push your changes and open the app [#push-changes]</h2>
<p>After you <a href="#configure-heroku-environment">configure your Heroku environment for New Relic</a>, push your changes and open the app to monitor it with New Relic.</p>
<ol>
  <li>
    <p>Push your changes to the dyno with this Heroku toolbelt command:</p>
    <pre><code>git add .
git commit -m 'YOUR COMMIT MESSAGE'
git push heroku master
</code></pre>
  </li>
  <li>
    <p>Open your app in your browser with this Heroku toolbelt command:</p>
    <pre><code>heroku open
</code></pre>
  </li>
  <li>
    <p>Generate some traffic to your app and wait a few minutes.</p>
  </li>
  <li>
    <p>Check your app's performance in Heroku by selecting your app and then selecting the New Relic add-on.</p>
  </li>
</ol>
<p>If no data appears or if you have problems, follow the <a href="#troubleshooting">troubleshooting</a> tips.</p>
<h2>Troubleshoot [#troubleshooting]</h2>
<p>Here are some tips to help you troubleshoot:</p>
<ul>
  <li>If you don't see the New Relic add-on after you generate traffic, go to Heroku, select <strong>Find More Add Ons</strong>, and add the APM add-on.</li>
  <li>If no data appears after waiting a few minutes, follow the <a href="/docs/agents/java-agent/heroku/no-data-appears-heroku-java">troubleshooting procedures for Heroku (Java)</a>.</li>
</ul>
<h2>For more help [#more_help]</h2>
<p>Additional documentation resources include:</p>
<ul>
  <li><a href="/docs/accounts-partnerships/partnerships/heroku-new-relic">Heroku and New Relic</a> (additional topics for Heroku users)</li>
  <li><a href="//devcenter.heroku.com/articles/newrelic">Heroku Dev Center</a> (information on the Heroku site on installing New Relic)</li>
</ul>
