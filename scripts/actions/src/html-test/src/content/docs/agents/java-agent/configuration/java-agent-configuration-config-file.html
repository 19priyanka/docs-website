
<p>The New Relic Java agent reads its configuration from the <code>newrelic.yml</code> file. By default the agent looks for this file in the <a href="/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent">directory</a> that contains <code>newrelic.jar</code>. You can override the config file's location by setting the <a href="#newrelic-config-file"><code>newrelic.config.file</code></a> system property to a fully qualified file name.</p>
<h2>Configuration file structure [#Structure]</h2>
<p>The <code>newrelic.yml</code> file is split into stanzas corresponding to different environments:</p>
<ul>
  <li>Test</li>
  <li>Development</li>
  <li>Staging</li>
  <li>Production (default)</li>
</ul>
<p>New Relic applies settings in the common stanza to each of these environments. You can select other environments as the default by setting the <a href="#newrelic-environment"><code>newrelic.environment</code></a> system property to the environment name.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>A <a href="/docs/java/java-agent-config-file-template"><code>newrelic.yml</code> template</a> is available.</p>
</div>
<p>If you edit <code>newrelic.yml</code>, be careful to conform to the <a href="https://en.wikipedia.org/wiki/YAML">YAML format</a>. Use a YAML validator to ensure the syntax is accurate before using the file with New Relic's Java agent, and follow these rules:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Java agent newrelic.yml</strong></p>
      </div>
      <div>
        <p><strong>Requirements</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Format</p>
      </div>
      <div>
        <p>YML files are case sensitive.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Indentations</p>
      </div>
      <div>
        <p>All indentations must be in increments of two characters. Other indentations will result in an <code>Unable to parse configuration file</code> error upon agent startup.</p>
        <ul>
          <li>Use the same level of indentation for data in the same stanza of the file.</li>
          <li>Indent any sub-stanzas by an additional two spaces.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Changes to file</p>
      </div>
      <div>
        <p>You must restart your JVM host process for changes to take effect.</p>
        <p><strong>Exception:</strong> Property changes to <code>log_level</code> and <code>audit_mode</code> do not require a restart. Property changes under circuit breaker don't require a restart.</p>
      </div>
    </div>
  </div>
</div>
<h2>Configuration settings precedence [#config-options-precedence]</h2>
<p>To override any setting in the config file, use a <a href="#System_Properties">system property override</a>. In certain environments, <a href="#Environment_Variables">environment variables</a> can also be used to override both the config file and the system properties. The environment variables primarily exist to support Heroku. When used, <a href="/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration">server-side configuration</a> overrides all other configuration settings.</p>
<p>
  <img src="./images/java-config-cascade.png" alt="java-config-order.png" title="java-config-order.png">
</p>
<p>With the Java agent, server-side configuration overrides all other settings. Environment variables override Java system properties. Java properties override user configuration settings in your <code>newrelic.yml</code> file. User settings override the <code>newrelic.yml</code> default settings.</p>
<h2>Configuring the Java extensions directory [#extensions-directory]</h2>
<p>The Java agent reads the configuration files on process startup. To identify the directory where the files are located, either create a new or specify an existing extensions directory:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY3JlYXRlLWV4dGVuc2lvbnMtZGlyZWN0b3J5In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJDcmVhdGUgYW4gZXh0ZW5zaW9ucyBkaXJlY3RvcnkifV0=">
    <div data-prop-text="title">Create an extensions directory</div>
    <p>To create the extensions directory:</p>
    <ol>
      <li>Navigate to the directory where <code>newrelic.jar</code> and <code>newrelic.yml</code> are located. Create a directory named <code>extensions</code>.</li>
      <li>In <code>newrelic.yml</code>, check that the property <a href="#cfg-extensions-dir"><code>extensions.dir</code></a> is not set.</li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3BlY2lmeS1leHRlbnNpb25zLWRpcmVjdG9yeSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU3BlY2lmeSBhbiBleGlzdGluZyBleHRlbnNpb25zIGRpcmVjdG9yeSJ9XQ==">
    <div data-prop-text="title">Specify an existing extensions directory</div>
    <p>To use an existing Java extensions directory:</p>
    <ol>
      <li>In your <code>newrelic.yml</code> file, locate the <code>common</code> section.</li>
      <li>Use the property <a href="#cfg-extensions-dir"><code>extensions.dir</code></a> to specify the location of the file.</li>
    </ol>
  </div>
</div>
<h2>General configuration settings [#General]</h2>
<p>Set these options in the <code>common</code> stanza. To <a href="#System_Properties">override</a> any of these options, use a <code>newrelic.config</code> prefixed system property.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWxpY2Vuc2Vfa2V5In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJsaWNlbnNlX2tleSAoUkVRVUlSRUQpIn1d">
    <div data-prop-text="title">license_key (REQUIRED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting is <strong>required</strong>. You must specify the <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">license key</a> associated with your New Relic account. This key binds your agent's data to your account in the New Relic service.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWFwcF9uYW1lIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJhcHBfbmFtZSAoUkVRVUlSRUQpIn1d">
    <div data-prop-text="title">app_name (REQUIRED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting is <strong>required</strong>. Defines the <a href="/docs/site/naming-your-application">application name</a> used to report data to New Relic.</p>
    <p>If <a href="#cfg-enable_auto_app_naming"><code>enable_auto_app_naming</code></a> is false, the agent reports all data to this application. Otherwise, the agent reports only background tasks (transactions for non-web applications) to this application.</p>
    <p>To report data to <a href="/docs/java/multiple-application-names">more than one application</a>, separate the application names with a semicolon. For example, to report data to <strong>My Application</strong> and <strong>My Application 2</strong> use this:</p>
    <pre><code>app_name: My Application;My Application 2

</code></pre>For more methods of naming your application, see [Name your Java application](/docs/agents/java-agent/configuration/name-your-java-application).
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWFnZW50X2VuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImFnZW50X2VuYWJsZWQifV0=">
    <div data-prop-text="title">agent_enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Flag to enable the agent. Use this setting to force the agent to run or not run.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWFwZGV4X3QifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImFwZGV4X3QgKERFUFJFQ0FURUQpIn1d">
    <div data-prop-text="title">apdex_t (DEPRECATED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Float</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>1.0</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The <code>apdex_t</code> threshold in seconds for the application's <a href="/docs/site/apdex-measuring-user-satisfaction">Apdex</a> score. For Java agent versions 1.2.008 or higher, the <code>apdex_t</code> value is set in the UI and the value in <code>newrelic.yml</code> is ignored.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWFwcHNlcnZlcl9wb3J0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJhcHBzZXJ2ZXJfcG9ydCJ9XQ==">
    <div data-prop-text="title">appserver_port</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Number to differentiate JVMs for the same app on the same machine. New Relic <a href="/docs/agents/java-agent/configuration/hostname-logic-java#unique-identifier">uses host/port for uniqueness</a>, so you can distinguish the JVMs by putting a switch like this into the startup arguments for each JVM:</p>
    <pre><code>-Dnewrelic.config.appserver_port=8081

</code></pre>Once you have used `appserver_port` to name the JVMs and restart them, you should be able to see them individually in the dropdown and in the profiling interface.
    &#x3C;Callout variant="important">
    This is only a change for New Relic; it doesn't actually affect the port on which the host communicates in any way.
    &#x3C;/Callout>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWF1ZGl0X21vZGUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImF1ZGl0X21vZGUifV0=">
    <div data-prop-text="title">audit_mode</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enables plain text logging of all data sent to New Relic to the agent logfile. This setting is dynamic, so running agents will notice changes to <code>newrelic.yml</code> without a JVM restart.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2FfY29uZmlnX2J1bmRsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiY2FfYnVuZGxlX3BhdGgifV0=">
    <div data-prop-text="title">ca_bundle_path</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Value Format</p>
          </div>
          <div>
            <p><code>/path/to/ca/cert/bundle.pem</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Specifies a path to a custom SSL certificate bundle that will be used by the agent to establish a secure connection to New Relic. If your custom SSL certificate bundle doesn't include certificates that are sufficient to connect to New Relic then you'll need to <a href="https://docs.newrelic.com/docs/agents/java-agent/troubleshooting/ssl-or-connection-errors-java">merge the required certs into your custom certificate bundle</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidXNlX3ByaXZhdGVfc3NsIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJ1c2VfcHJpdmF0ZV9zc2wifV0=">
    <div data-prop-text="title">use_private_ssl</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The following SSL certificates are bundled into the agent jar:</p>
    <pre><code>META-INF/certs/eu-newrelic-com.pem
  META-INF/certs/eu01-nr-data-net.pem
  META-INF/certs/newrelic-com.pem

</code></pre>By default (`use_private_ssl: false`) the agent will use the SSL certificates bundled into the JDK to establish a secure connection to New Relic or the custom SSL certificates bundle specified by `ca_bundle_path`. If you want to use the SSL certificates bundled with the agent, set `use_private_ssl: true`.
    Note: `use_private_ssl` will be ignored if `ca_bundle_path` is set.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWVuYWJsZV9hdXRvX2FwcF9uYW1pbmcifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImVuYWJsZV9hdXRvX2FwcF9uYW1pbmcifV0=">
    <div data-prop-text="title">enable_auto_app_naming</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enables the reporting of data separately for each web app. Set to <code>true</code> to enable support for auto app naming. The name of each web app is detected automatically and the agent reports data separately for each one. This provides a finer-grained performance breakdown for web apps in New Relic.</p>
    <p>For more information, see <a href="/docs/agents/java-agent/configuration/automatic-application-naming">Automatic application naming</a>.</p>
    <p>For more methods of naming your application, see <a href="/docs/agents/java-agent/configuration/name-your-java-application">Name your Java application</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWVuYWJsZV9hdXRvX3RyYW5zYWN0aW9uX25hbWluZyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlX2F1dG9fdHJhbnNhY3Rpb25fbmFtaW5nIn1d">
    <div data-prop-text="title">enable_auto_transaction_naming</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enables component-based transaction naming. Set to <code>true</code> to enable component-based transaction naming. Set to <code>false</code> to use the URI of a web request as the name of the transaction. For more information, see <a href="/docs/agents/java-agent/instrumentation/naming-web-transactions">Naming web transactions</a>.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJjYXV0aW9uIn1d">
      <p>Unless you implement API calls to name your transactions, disabling auto-transaction naming is very likely to cause <a href="/docs/features/metric-grouping-issues">Metric grouping issues</a>.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWVuYWJsZV9jdXN0b21fdHJhY2luZyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlX2N1c3RvbV90cmFjaW5nIn1d">
    <div data-prop-text="title">enable_custom_tracing</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enables all instrumentation <a href="/docs/agents/java-agent/custom-instrumentation/java-instrumentation-annotation">using an <code>@Trace</code> annotation</a>. Disabling this causes <code>@Trace</code> annotations to be ignored.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWV4dGVuc2lvbnMtZGlyIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJleHRlbnNpb25zLmRpciJ9XQ==">
    <div data-prop-text="title">extensions.dir</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Defines the location of the optional <a href="#extensions-directory">extensions directory</a>. If this property is not set, the agent will look for a subdirectory named <code>extensions</code> in the same directory as <code>newrelic.jar</code> and <code>newrelic.yml</code>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWVuYWJsZV9oaWdoX3NlY3VyaXR5In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJoaWdoX3NlY3VyaXR5In1d">
    <div data-prop-text="title">high_security</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>In order for <a href="/docs/subscriptions/high-security">high security</a> to be enabled, this property must be set to <code>true</code> and the high security property in the New Relic user interface must be enabled. Enabling high security means SSL is turned on, request and message queue parameters are not collected, and queries cannot be sent to New Relic in their raw form.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>As of <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes/java-agent-3480">Java agent 3.48.0</a>, SSL is enabled by default and the config option to disable it has been deprecated. As of <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes/java-agent-400">Java agent 4.0.0</a>, the ability to disable SSL has been removed.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWluc2VydF9hcGlfa2V5In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJpbnNlcnRfYXBpX2tleSJ9XQ==">
    <div data-prop-text="title">insert_api_key</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>A valid <a href="https://docs.newrelic.com/docs/apis/get-started/intro-apis/types-new-relic-api-keys#event-insert-key">Insert API Key</a> for your account. This is only required for <a href="https://docs.newrelic.com/docs/agents/java-agent/features/real-time-java-profiling-using-jfr-metrics">Real-time Java profiling using JFR metrics</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGFiZWxzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJsYWJlbHMifV0=">
    <div data-prop-text="title">labels</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>""</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Attach <a href="/docs/apm/new-relic-apm/maintenance/labels-categories-organize-your-apps-servers">tags</a> to this app.</p>
    <p>Note that this option now enables tags, which replaced the label feature. You can still query your historical <a href="/docs/new-relic-one/use-new-relic-one/core-concepts/tagging-use-tags-organize-group-what-you-monitor#labels">labels</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibWF4LXN0YWNrLXRyYWNlLWxpbmVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJtYXhfc3RhY2tfdHJhY2VfbGluZXMifV0=">
    <div data-prop-text="title">max_stack_trace_lines</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>30</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Limits the number of lines the agent collects from each stack trace. Increasing this value may impact performance, because it increases the amount of memory the agent uses and the amount of data sent to New Relic.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXByb3h5X2hvc3QifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6InByb3h5X2hvc3QifV0=">
    <div data-prop-text="title">proxy_host</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>The proxy host through which to connect to the <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector">New Relic collector</a>. If a proxy is used, the host setting is required. Other proxy settings are optional.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXByb3h5X3Bhc3N3b3JkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJwcm94eV9wYXNzd29yZCJ9XQ==">
    <div data-prop-text="title">proxy_password</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>The password for proxy authentication. If a proxy is used, the host setting is required. Other proxy settings are optional. The username and password settings will be used to authenticate to Basic Auth challenges from a proxy server.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>The Java agent supports Basic (clear text) authentication.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXByb3h5X3BvcnQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6InByb3h5X3BvcnQifV0=">
    <div data-prop-text="title">proxy_port</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>8080</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The proxy host port number. If a proxy is used, the host setting is required. Other proxy settings are optional.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXByb3h5X3VzZXIifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6InByb3h5X3VzZXIifV0=">
    <div data-prop-text="title">proxy_user</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>The username for proxy authentication, such as Basic (clear text) authentication. If a proxy is used, the host setting is required. Other proxy settings are optional. The username and password settings will be used to authenticate to Basic Auth challenges from a proxy server.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXByb3h5X3NjaGVtZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoicHJveHlfc2NoZW1lIn1d">
    <div data-prop-text="title">proxy_scheme</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>The proxy scheme used. Setting <code>proxy_scheme: "https"</code> will allow the agent to connect through proxies using the HTTPS scheme.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNlbmRfZGF0YV9vbl9leGl0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJzZW5kX2RhdGFfb25fZXhpdCJ9XQ==">
    <div data-prop-text="title">send_data_on_exit</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enable delayed JVM shutdown to give the agent a chance to send latest metric data to New Relic before JVM shutdown.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VuZF9kYXRhX29uX2V4aXRfdGhyZXNob2xkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJzZW5kX2RhdGFfb25fZXhpdF90aHJlc2hvbGQifV0=">
    <div data-prop-text="title">send_data_on_exit_threshold</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>60</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The number of seconds after which the agent will use the <a href="#cfg-send_data_on_exit"><code>send_data_on_exit</code></a> setting.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNlbmRfZW52aXJvbm1lbnRfaW5mbyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoic2VuZF9lbnZpcm9ubWVudF9pbmZvIn1d">
    <div data-prop-text="title">send_environment_info</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enable reporting of JVM settings to New Relic.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNlbmRfanZtX3Byb3BzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJzZW5kX2p2bV9wcm9wcyJ9XQ==">
    <div data-prop-text="title">send_jvm_props</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>When set to <code>true</code>, JVM properties will be sent to New Relic.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNzbCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoic3NsIChERVBSRUNBVEVEKSJ9XQ==">
    <div data-prop-text="title">ssl (DEPRECATED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Requires connections to the New Relic collector to go over SSL.</p>
    <p>The agent communicates with New Relic via HTTPS by default, and New Relic <a href="/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls">requires HTTPS</a> for all traffic to APM and the New Relic REST API.</p>
    <p>This work is done asynchronously to the threads that process your application code, so response times will not be directly affected by this change.</p>
  </div>
  <div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>As of <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes/java-agent-3480">Java agent 3.48.0</a>, SSL is enabled by default and the config option to disable it has been deprecated. As of <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes/java-agent-400">Java agent 4.0.0</a>, the ability to disable SSL has been removed.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXN5bmNfc3RhcnR1cCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoic3luY19zdGFydHVwIn1d">
    <div data-prop-text="title">sync_startup</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enable the agent to connect the New Relic collector immediately upon app startup.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2NhbGEtZnV0dXJlcy1zZWdtZW50In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJzY2FsYV9mdXR1cmVzX2FzX3NlZ21lbnRzIn1d">
    <div data-prop-text="title">scala_futures_as_segments</div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>This applies to Java agent <a href="/docs/release-notes/agent-release-notes/java-release-notes">version 3.44.0 or higher</a>.</p>
    </div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>For more concise transaction trace details, the agent does not report Scala Futures as transaction segments, and those Futures do not contribute to the <a href="/docs/data-analysis/user-interface-functions/view-your-data/response-time#response-time-total-time">transaction’s total time</a>.</p>
    <p>Enabling <code>scala_futures_as_segments</code> increases your overhead. If you want Scala Futures to report as transaction segments so you can view them in a transaction trace, you can enable it:</p>
    <pre><code>scala_futures_as_segments:
        enabled: true

</code></pre>
  </div>
</div>
<h2>Logging configuration [#Logging-Configuration]</h2>
<p>These are part of the general configuration variables. They are broken out here because they are frequently tweaked for debugging.</p>
<p>Some of the logging configuration variables are dynamic and do not need a host restart for them to take effect. For instance, if log files are growing too quickly, <a href="#cfg-log_level"><code>log_level</code></a> can be set to a less verbose setting to reduce the reporting rate.</p>
<p>Here is the order of precedence for configuration variables affecting log rotation.</p>
<ul>
  <li>If <code>log_daily</code> is <code>true</code>, other log rotation settings are ignored.</li>
  <li>If <code>log_file_count</code> is <code>1</code> or <code>0</code>, the size limit is ignored.</li>
  <li>Finally, the agent applies <code>log_limit_in_kbytes</code>.</li>
</ul>
<p>Depending on the growth rate, it is possible for the log file size to exceed the configured value by a small amount.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWxvZ19maWxlX2NvdW50In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJsb2dfZGFpbHkifV0=">
    <div data-prop-text="title">log_daily</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Set to <code>true</code> to roll the logs daily. Overrides the other configuration variables that affect log rotation.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWxvZ19maWxlX2NvdW50In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJsb2dfZmlsZV9jb3VudCJ9XQ==">
    <div data-prop-text="title">log_file_count</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>1</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The maximum number of log files to keep when using log rotation.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWxvZ19maWxlX25hbWUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImxvZ19maWxlX25hbWUifV0=">
    <div data-prop-text="title">log_file_name</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>newrelic_agent.log</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The unqualified log file name or the string <code>STDOUT</code> which will log to standard out.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWxvZ19maWxlX3BhdGgifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImxvZ19maWxlX3BhdGgifV0=">
    <div data-prop-text="title">log_file_path</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>logs</code> subdirectory where <code>newrelic.jar</code> is located</p>
          </div>
        </div>
      </div>
    </div>
    <p>The log file path.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>If <code>log_file_path</code> is specified, the directory must already exist. If the default value is used, the agent will attempt to create the directory.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWxvZ19sZXZlbCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoibG9nX2xldmVsIn1d">
    <div data-prop-text="title">log_level</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>info</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The log verbosity level.</p>
    <p>The agent uses its own log file to keep its logging separate from that of your application. Valid options, in order of verboseness, are:</p>
    <ul>
      <li>
        <p><code>off</code></p>
      </li>
      <li>
        <p><code>severe</code></p>
      </li>
      <li>
        <p><code>warning</code></p>
      </li>
      <li>
        <p><code>info</code></p>
      </li>
      <li>
        <p><code>fine</code></p>
      </li>
      <li>
        <p><code>finer</code></p>
      </li>
      <li>
        <p><code>finest</code></p>
        <p>This setting is dynamic, so running agents will notice changes to <code>newrelic.yml</code> without a JVM restart.</p>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWxvZ19saW1pdF9pbl9rYnl0ZXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImxvZ19saW1pdF9pbl9rYnl0ZXMifV0=">
    <div data-prop-text="title">log_limit_in_kbytes</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>0</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The log file size in kilobytes at which log files are rotated. Set to <code>0</code> for no limit.</p>
  </div>
</div>
<h2>JMX</h2>
<p>To set these options, use the <code>jmx</code> stanza. To <a href="#System_Properties">override</a> them, use a <code>newrelic.config.jmx</code> prefixed system property.</p>
<p>The Java agent uses JMX to collect JVM data as well as to communicate with the JFR (Java Flight Recorder) daemon for <a href="http://docs.newrelic.com/docs/agents/java-agent/features/real-time-java-profiling-using-jfr-metrics">Real-time Java profiling</a>.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWF0dHJpYnV0ZXMtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlZCJ9XQ==">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to turn on or off all JMX functionality.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWF0dHJpYnV0ZXMtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoibGlua2luZ01ldGFkYXRhTUJlYW4ifV0=">
    <div data-prop-text="title">linkingMetadataMBean</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be enabled to allow the Java agent to expose linking metadata to the <a href="https://github.com/newrelic/newrelic-jfr-core">JFR daemon</a>. Doing so allows the JFR daemon to obtain the entity GUID generated by the Java agent and link JFR data with the same APM application that is being monitored by the agent instead of as a separate entity.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>This applies to Java agent <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes">version 6.1.0 or higher</a>.</p>
    </div>
  </div>
</div>
<h2>Attributes</h2>
<p>To set these options, use the <code>attributes</code> stanza. To <a href="#System_Properties">override</a> them, use a <code>newrelic.config.attributes</code> prefixed system property.</p>
<p>Attributes are key-value pairs that provide information for transaction traces, traced errors, browser monitoring, and transaction events. There is also an attribute stanza under each destination. For more information, see <a href="/docs/java/java-agent-attributes">Java agent attributes</a>, <a href="/docs/java/enabling-and-disabling-attributes">Enabling and disabling attributes</a> and <a href="/docs/java/attribute-examples">Attribute examples</a>.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWF0dHJpYnV0ZXMtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlZCJ9XQ==">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to turn on or off all attributes.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>For security reasons, capturing custom attributes using the <a href="/docs/agents/java-agent/custom-instrumentation/custom-instrumentation-editor-instrument-ui#options">Custom Instrumentation Editor</a> is set to <code>false</code> by default.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWF0dHJpYnV0ZXMtaW5jbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiaW5jbHVkZSJ9XQ==">
    <div data-prop-text="title">include</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If attributes are enabled, attribute keys found in this list will be sent to New Relic. Separate the keys in the list with a comma; for example:</p>
    <pre><code>key1, key2, key3

</code></pre>Also refer to the [agent attribute rules](/docs/subscriptions/agent-attributes).
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWF0dHJpYnV0ZXMtZXhjbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZXhjbHVkZSJ9XQ==">
    <div data-prop-text="title">exclude</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>All attribute keys found in this list will not be sent to New Relic. Separate the keys in the list with a comma; for example:</p>
    <pre><code>key1, key2, key3

</code></pre>Also refer to the [agent attribute rules](/docs/subscriptions/agent-attributes).
  </div>
</div>
<h2>Transaction tracer</h2>
<p>These options are set in the <code>transaction_tracer</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.transaction_tracer</code> prefixed system property.</p>
<p><a href="/docs/traces/transaction-traces">Transaction tracing</a> captures deep information about slow transactions and sends this to the New Relic service. The transaction includes the exact call sequence of the transactions, including any query statements issued.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Do not use brackets <code>[suffix]</code> at the end of your transaction name. New Relic automatically strips brackets from the name. Instead, use parentheses <code>(suffix)</code> or other symbols if needed.</p>
</div>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlZCJ9XQ==">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The transaction tracer is enabled by default. Set this to <code>false</code> to turn it off.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtZXhwbGFpbl9lbmFibGVkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJleHBsYWluX2VuYWJsZWQifV0=">
    <div data-prop-text="title">explain_enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Determines whether the agent will capture the <code>EXPLAIN</code> plan for slow queries. <a href="https://docs.newrelic.com/docs/agents/java-agent/getting-started/compatibility-requirements-java-agent#JDBC">Only supported for MySQL and PostgreSQL.</a></p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtZXhwbGFpbl90aHJlc2hvbGQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImV4cGxhaW5fdGhyZXNob2xkIn1d">
    <div data-prop-text="title">explain_threshold</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Float</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>0.5</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Threshold in seconds for query execution time below which the slow query and the <code>EXPLAIN</code> plan (<a href="https://docs.newrelic.com/docs/agents/java-agent/getting-started/compatibility-requirements-java-agent#JDBC">if supported</a>) will not be captured. Relevant to slow queries only when <code>record_sql</code> is set to <code>raw</code> or <code>obfuscated</code>. Relevant to <code>EXPLAIN</code> plans only when <code>explain_enabled</code> is set to <code>true</code>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtbG9nX3NxbCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoibG9nX3NxbCJ9XQ==">
    <div data-prop-text="title">log_sql</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Set to <code>true</code> to enable logging of queries to the agent log file instead of uploading to New Relic. Queries are logged using the <code>record_sql</code> mode.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtcmVjb3JkX3NxbCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoicmVjb3JkX3NxbCJ9XQ==">
    <div data-prop-text="title">record_sql</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>obfuscated</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>When the transaction tracer is on, query statements can optionally be recorded. The recorder has three modes:</p>
    <ul>
      <li><code>off</code>: Send no queries.</li>
      <li><code>raw</code>: Send the query statement in its original form.</li>
      <li><code>obfuscated</code>: Strips out numeric and string literals.</li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtc3RhY2tfYmFzZWRfbmFtaW5nIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJzdGFja19iYXNlZF9uYW1pbmcgKFBsYXkgMi54KyBvbmx5KSJ9XQ==">
    <div data-prop-text="title">stack_based_naming (Play 2.x+ only)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>False</code></p>
            <p>Defaulted to <code>true</code> until Java agent version 3.12.1, when it was changed to <code>false</code>.</p>
          </div>
        </div>
      </div>
    </div>
    <p>This option is for Play 2.x+ only. Play/Scala instrumentation can use <code>Thread.getStackTrace()</code> to improve tracer naming, but at the cost of increased overhead.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtc3RhY2tfdHJhY2VfdGhyZXNob2xkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJzdGFja190cmFjZV90aHJlc2hvbGQifV0=">
    <div data-prop-text="title">stack_trace_threshold</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>0.5</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This is the threshold at which segments will be given a stack trace in the transaction trace.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtdG9wX24ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6InRvcF9uIn1d">
    <div data-prop-text="title">top_n</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>20</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Use this setting to control the variety of your transaction traces. <code>top_n</code> is an integer that represents the number of unique, slow transactions that traces will be created for.</p>
    <ul>
      <li>
        <p>If you want transaction traces to more accurately reflect the actual slowest transactions in your app, make this value <strong>lower</strong>.</p>
      </li>
      <li>
        <p>If you want to sample a more diverse array of transactions, make the value <strong>higher</strong>.</p>
        <p>A value of 0 would mean that <strong>only</strong> the slowest transaction is always traced. This is considered not to be optimal, though, because you may have one or two transactions that are always the slowest, and repeatedly seeing those same transaction traces will probably not give you much value.</p>
        <p>If the same transaction is often the slowest, the <code>top_n</code> setting allows the Java agent (over time) to sample the slowest <code>n</code> transactions. This gives you greater variety and more insight into your application.</p>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtdHJhbnNhY3Rpb25fdGhyZXNob2xkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJ0cmFuc2FjdGlvbl90aHJlc2hvbGQifV0=">
    <div data-prop-text="title">transaction_threshold</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String (float)</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>apdex_f</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The time threshold used to determine when a transaction is eligible to be traced. When the transaction's response time exceeds this threshold, a <a href="/docs/apm/transactions/transaction-traces/transaction-traces">transaction trace</a> will be recorded and sent to New Relic.</p>
    <p>The default is <code>apdex_f</code> (default), which sets the threshold to be the <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#apdex_f">"Frustrated"</a> <a href="/docs/site/apdex-measuring-user-satisfaction">Apdex</a> level (four times the apdex_t value). You can also set a specific time threshold by entering a float value that represents a number of seconds.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtc2xvd19xdWVyeV93aGl0ZWxpc3QifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6InNsb3dfcXVlcnlfd2hpdGVsaXN0IChERVBSRUNBVEVEKSJ9XQ==">
    <div data-prop-text="title">slow_query_whitelist (DEPRECATED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>This config has been deprecated as of agent version 5.10.0 and will be removed in a future agent version. Instead use <code>collect_slow_queries_from</code>.</p>
    </div>
    <p>By default, <a href="/docs/accounts-partnerships/accounts/security/high-security">high security mode</a> does not allow the agent to collect <a href="/docs/apm/applications-menu/monitoring/viewing-slow-query-details">slow queries</a>. Enable this option to collect Cassandra queries from the DataStax driver, even with high security enabled. If you don't use high security, the agent collects slow queries automatically.</p>
    <p>For DataStax driver 2.1.2, add this rule to your allow list:</p>
    <pre><code>transaction_tracer:
          slow_query_whitelist: 
           'com.newrelic.instrumentation.cassandra-datastax-2.1.2'

</code></pre>
    <pre><code>
transaction_tracer:
          slow_query_whitelist: 
           'com.newrelic.instrumentation.cassandra-datastax-3.0.0'

</code></pre>For DataStax driver 3.0.0, add this rule to your allow list:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtY29sbGVjdF9zbG93X3F1ZXJpZXNfZnJvbSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiY29sbGVjdF9zbG93X3F1ZXJpZXNfZnJvbSJ9XQ==">
    <div data-prop-text="title">collect_slow_queries_from</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>By default, <a href="/docs/accounts-partnerships/accounts/security/high-security">high security mode</a> does not allow the agent to collect <a href="/docs/apm/applications-menu/monitoring/viewing-slow-query-details">slow queries</a>. Enable this option to collect Cassandra queries from the DataStax driver, even with high security enabled. If you don't use high security, the agent collects slow queries automatically.</p>
    <p>For DataStax driver 2.1.2, add this rule to your allow list:</p>
    <pre><code>transaction_tracer:
          collect_slow_queries_from: 
           'com.newrelic.instrumentation.cassandra-datastax-2.1.2'

</code></pre>
    <pre><code>
transaction_tracer:
          collect_slow_queries_from: 
           'com.newrelic.instrumentation.cassandra-datastax-3.0.0'

</code></pre>For DataStax driver 3.0.0, add this rule to your allow list:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXR0LWF0dHJpYnV0ZXMtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5lbmFibGVkIn1d">
    <div data-prop-text="title">attributes.enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to turn on or off all attributes for transaction traces. If <code>attributes.enabled</code> at the root level is <code>false</code>, no attributes will be sent to transaction traces regardless on how this property (<code>transaction_tracer.attributes.enabled</code>) is set.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXR0LWF0dHJpYnV0ZXMtaW5jbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5pbmNsdWRlIn1d">
    <div data-prop-text="title">attributes.include</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If attributes are enabled for transaction traces, all attribute keys found in this list will be sent to New Relic in transaction traces. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXR0LWF0dHJpYnV0ZXMtZXhjbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5leGNsdWRlIn1d">
    <div data-prop-text="title">attributes.exclude</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>All attribute keys found in this list will not be sent to New Relic in transaction traces. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXR0LXRva2VuX2xpbWl0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJ0b2tlbl9saW1pdCJ9XQ==">
    <div data-prop-text="title">token_limit</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>3000</p>
          </div>
        </div>
      </div>
    </div>
    <p>Limits the number of Tokens that can be created per Transaction. Increasing this value may impact performance, because it increases the amount of memory the agent uses and the amount of data sent to New Relic.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXR0LXNlZ21lbnRfbGltaXQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6InNlZ21lbnRfbGltaXQifV0=">
    <div data-prop-text="title">segment_limit</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>3000</p>
          </div>
        </div>
      </div>
    </div>
    <p>Limits the number of segments that can be created per transaction. Increasing this value may impact performance, because it increases the amount of memory the agent uses and the amount of data sent to New Relic.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtZ2MtdGltZS1lbmFibGVkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJnY190aW1lX2VuYWJsZWQifV0=">
    <div data-prop-text="title">gc_time_enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Records time spent waiting for garbage collection during the duration of a transaction and includes the GC time in the corresponding transaction trace. Enabled by default as of Java agent 5.2.0.</p>
  </div>
</div>
<h2>Transaction segments</h2>
<p>These options are set in the <code>transaction_segments</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.transaction_segments</code> prefixed system property.</p>
<p>Transaction segments represent discrete pieces of work (generally method calls) and are displayed within <a href="/docs/traces/transaction-traces">transaction traces</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Transaction segment attribute filtering requires <a href="/docs/agents/java-agent/installation/upgrade-java-agent">Java agent version 4.10.0 or higher</a>.</p>
</div>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXRzLWF0dHJpYnV0ZXMtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5lbmFibGVkIn1d">
    <div data-prop-text="title">attributes.enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to turn on or off all attributes for transaction segments. If <code>attributes.enabled</code> at the root level is <code>false</code>, no attributes will be sent to transaction segments regardless on how this property (<code>transaction_segments.attributes.enabled</code>) is set.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXRzLWF0dHJpYnV0ZXMtaW5jbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5pbmNsdWRlIn1d">
    <div data-prop-text="title">attributes.include</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If attributes are enabled for transaction segments, all attribute keys found in this list will be sent to New Relic in transaction segments. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXRzLWF0dHJpYnV0ZXMtZXhjbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5leGNsdWRlIn1d">
    <div data-prop-text="title">attributes.exclude</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>All attribute keys found in this list will not be sent to New Relic in transaction segments. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
</div>
<h2>Browser monitoring [#Browser_Monitoring]</h2>
<p>These options are set in the <code>browser_monitoring</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.browser_monitoring</code> prefixed system property.</p>
<p>Browser monitoring gives you insight into the performance real users are experiencing with your website. This is accomplished by measuring the time it takes for your users' browsers to download and render your web pages by injecting a small amount of JavaScript code into the header and footer of each page.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYm0tYXV0b19pbnN0cnVtZW50In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJhdXRvX2luc3RydW1lbnQifV0=">
    <div data-prop-text="title">auto_instrument</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>By default the agent automatically inserts API calls in compiled JSPs to inject the monitoring JavaScript into web pages. Set this attribute to <code>false</code> to turn off this behavior.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYm0tZGlzYWJsZWRfYXV0b19wYWdlcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZGlzYWJsZWRfYXV0b19wYWdlcyJ9XQ==">
    <div data-prop-text="title">disabled_auto_pages</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Comma-separated list of strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>When <a href="#bm-auto_instrument"><code>auto_instrument</code></a> is <code>true</code>, by default all pages are instrumented. List all pages that you want the auto instrumentation to skip here. You can still use manual instrumentation on these pages.</p>
    <p>For example:</p>
    <pre><code>browser_monitoring:
      disabled_auto_pages: /WEB-INF/jsp/testpage_1.jsp, /WEB-INF/jsp/testpage_2.jsp

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWJyb3dzZXItYXR0cmlidXRlcy1lbmFibGVkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJhdHRyaWJ1dGVzLmVuYWJsZWQifV0=">
    <div data-prop-text="title">attributes.enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to turn on or off all attributes for browser monitoring. This is the <a href="/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data">data you can query</a>. If <code>attributes.enabled</code> is false at the root level, no attributes will be sent up in browser monitoring regardless on how this property under <code>browser_monitoring</code> is set.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWJtLWF0dHJpYnV0ZXMtaW5jbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5pbmNsdWRlIn1d">
    <div data-prop-text="title">attributes.include</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If attributes are enabled for <code>browser_monitoring</code>, all attribute keys found in this list will be sent to New Relic in page views. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWJtLWF0dHJpYnV0ZXMtZXhjbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5leGNsdWRlIn1d">
    <div data-prop-text="title">attributes.exclude</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>All attribute keys found in this list will not be sent to New Relic in page views. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
</div>
<h2>External tracer [#External_Tracer]</h2>
<p>The external tracing options are set in the <code>external_tracer</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.external_tracer</code> prefixed system property.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2F0LWVuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImV4Y2x1ZGVfcmVxdWVzdF91cmkifV0=">
    <div data-prop-text="title">exclude_request_uri</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to control the collection of outgoing request URIs for errors and transaction traces. Set this to true to disable collecting this information.</p>
  </div>
</div>
<h2>Cross application tracer [#Cross_Application_Tracer]</h2>
<p>The cross application tracing options are set in the <code>cross_application_tracer</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.cross_application_tracer</code> prefixed system property.</p>
<p><a href="/docs/apm/transactions/cross-application-traces/cross-application-tracing">Cross application tracing</a> adds request and response headers to external calls using the Apache HttpClient libraries. This provides better performance data when calling applications monitored by other New Relic Agents.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2F0LWVuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImVuYWJsZWQifV0=">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p><a href="/docs/apm/transactions/cross-application-traces/cross-application-tracing">Cross application tracing</a> is enabled by default. Set this to false to turn it off.</p>
  </div>
</div>
<h2>Error collector [#Error_Collector]</h2>
<p>These options are set in the <code>error_collector</code> stanza and unless noted otherwise can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.error_collector</code> prefixed system property. The error collector captures information about uncaught exceptions and sends them to New Relic for viewing.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>For how to configure errors for the Java agent, including how to configure errors via the UI, see <a href="/docs/agents/java-agent/configuration/java-agent-error-configuration">Java agent error configuration</a>.</p>
</div>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWMtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlZCJ9XQ==">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enable error collection.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWMtaWdub3JlX2NsYXNzZXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Imlnbm9yZV9jbGFzc2VzIn1d">
    <div data-prop-text="title">ignore_classes</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Stanza containing a list of fully qualified <code>class_name</code> strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Specified exception class names will be ignored and will not affect error rate or Apdex score, or be reported to APM. <strong>Cannot be specified by system property.</strong></p>
    <p>This setting is dynamic, so running agents will notice changes to <code>newrelic.yml</code> without a JVM restart.</p>
    <p>For example:</p>
    <pre><code>error_collector:
      ignore_classes:
        - "com.example.MyException"
        - "com.example.DifferentException"

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWMtaWdub3JlX21lc3NhZ2VzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJpZ25vcmVfbWVzc2FnZXMifV0=">
    <div data-prop-text="title">ignore_messages</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Stanza containing a fully qualified <code>class_name</code> and a list of <code>messages</code> per error class</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Specify exception class names the agent should ignore. Ignored messages will not affect error rate or Apdex score, or be reported to APM. Contains <code>yaml</code> pairs consisting of:</p>
    <ul>
      <li>
        <p>A fully qualified exception class name that should not be reported to APM</p>
        <p>AND</p>
      </li>
      <li>
        <p>A list of exception <code>message</code>s to match against (at least one is required)</p>
        <p>If the exception class name matches an error but the message does not, then that error <strong>will not</strong> be ignored. Message strings use <code>contains</code> for matching. A message cannot be provided on its own and must always be paired with a fully qualified class name. <strong>Cannot be specified by system property.</strong></p>
        <p>This setting is dynamic, so running agents will notice changes to <code>newrelic.yml</code> without a JVM restart.</p>
        <p>For example:</p>
        <pre><code>error_collector:
      ignore_messages:
        com.example.MyException:
          - "Some error message to ignore"
          - "Some other error message to ignore"
        com.example.DifferentException:
          - "Some different error message to ignore"
</code></pre>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWMtaWdub3JlX3N0YXR1c19jb2RlcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiaWdub3JlX3N0YXR1c19jb2RlcyJ9XQ==">
    <div data-prop-text="title">ignore_status_codes</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Comma-separated list of strings and ranges</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>404</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>A comma-separated list comprised of individual and dashed ranges of HTTP status codes that should not be treated as errors.</p>
    <p>If this property is commented out in the <code>newrelic.yml</code> configuration file, then the 404 status code will automatically be ignored. When using <a href="/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration">server-side configuration</a>, the status code 404 must be specified in order for it to be ignored.</p>
    <p>This setting is dynamic, so running agents will notice changes to <code>newrelic.yml</code> without a JVM restart.</p>
    <p>For example:</p>
    <pre><code>error_collector:
      ignore_status_codes: 404,507-511

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWMtZXhwZWN0ZWRfY2xhc3NlcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZXhwZWN0ZWRfY2xhc3NlcyJ9XQ==">
    <div data-prop-text="title">expected_classes</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Stanza containing a List of fully qualified <code>class_name</code> strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Prevents specified exception classes from affecting error rate or Apdex score while still reporting the errors to APM. <strong>Cannot be specified by system property.</strong></p>
    <p>This setting is dynamic, so running agents will notice changes to <code>newrelic.yml</code> without a JVM restart.</p>
    <p>For example:</p>
    <pre><code>error_collector:
      expected_classes:
        - "com.example.MyException"
        - "com.example.DifferentException"

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWMtZXhwZWN0ZWRfbWVzc2FnZXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImV4cGVjdGVkX21lc3NhZ2VzIn1d">
    <div data-prop-text="title">expected_messages</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Stanza containing a fully qualified <code>class_name</code> and a List of <code>messages</code> per error class</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Contains yaml pairs consisting of a fully qualified exception class name that should be marked as expected and thus prevented from affecting error rate or Apdex score and a List of exception <code>message</code>s to match against, the latter of which at least one is required. If the exception class name matches an error but the message does not, then that error <strong>will not</strong> be marked as expected and therefore will affect error rate and Apdex score.</p>
    <p>Message strings use <code>contains</code> for matching. A message cannot be provided on its own and must always be paired with a fully qualified class name. <strong>Cannot be specified by system property.</strong></p>
    <p>This setting is dynamic, so running agents will notice changes to <code>newrelic.yml</code> without a JVM restart.</p>
    <p>For example:</p>
    <pre><code>error_collector:
      expected_messages:
        com.example.MyException:
          - "Some expected error message"
          - "Some other expected error message"
        com.example.DifferentException:
          - "Some different expected error message"​

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWMtZXhwZWN0ZWRfc3RhdHVzX2NvZGVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJleHBlY3RlZF9zdGF0dXNfY29kZXMifV0=">
    <div data-prop-text="title">expected_status_codes</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Comma-separated list of strings and ranges</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>A comma-separated list comprised of individual and dashed ranges of HTTP status codes to be marked as expected and thus prevented from affecting error rate or Apdex score.</p>
    <p>This setting is dynamic, so running agents will notice changes to <code>newrelic.yml</code> without a JVM restart.</p>
    <p>For example:</p>
    <pre><code>error_collector:
      expected_status_codes: 415,500-506

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWVycm9yLWF0dHJpYnV0ZXMtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5lbmFibGVkIn1d">
    <div data-prop-text="title">attributes.enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to turn on or off all attributes for traced errors. If <code>attributes.enabled</code> is <code>false</code> at the root level, then no attributes will be sent to traced errors regardless of how this property is set under <code>error_collector</code>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWVjLWF0dHJpYnV0ZXMtaW5jbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5pbmNsdWRlIn1d">
    <div data-prop-text="title">attributes.include</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If attributes are enabled for traced errors, all attribute keys found in this list will be sent to New Relic in traced errors. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWVjLWF0dHJpYnV0ZXMtZXhjbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5leGNsdWRlIn1d">
    <div data-prop-text="title">attributes.exclude</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Attribute keys found in this list will not be sent to New Relic in traced errors. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZWMtaWdub3JlX2Vycm9ycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiaWdub3JlX2Vycm9ycyAoREVQUkVDQVRFRCkifV0=">
    <div data-prop-text="title">ignore_errors (DEPRECATED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Comma-separated list of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>All specified exception class names specified will not be treated as errors. Deprecated as of Java agent 3.40.0 and replaced by <a href="#ec-ignore_classes"><code>ignore_classes</code></a>.</p>
    <p>For example:</p>
    <pre><code>error_collector:
      ignore_errors: some.other.MyException

</code></pre>
  </div>
</div>
<h2>Strip exceptions [#strip_exceptions]</h2>
<p>These options are set in the <code>strip_exception_messages</code> stanza and unless noted otherwise can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.strip_exception_messages​</code>prefixed system property. This configuration can be enabled to control whether Java exception messages are reported to New Relic.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3RyaXBfZXhjZXB0aW9uX21lc3NhZ2VzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJlbmFibGVkIn1d">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>By default, this is set to <code>false</code>, which means that the agent sends messages from all exceptions to the <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector">New Relic collector</a>.</p>
    <ul>
      <li>If you set this to <code>true</code>, the agent strips the messages from exceptions in order to prevent it from inadvertently capturing sensitive information.</li>
      <li>If you enable <a href="/docs/agents/manage-apm-agents/configuration/high-security-mode">high security mode</a>, this is automatically set to <code>true</code>.</li>
      <li>If you set <code>enabled</code> to <code>true</code> but you want the agent to capture messages from specific exceptions, add the exceptions to your <a href="#strip_exception_messages_whitelist">allow list</a>.</li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3RyaXBfZXhjZXB0aW9uX21lc3NhZ2VzX3doaXRlbGlzdCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoid2hpdGVsaXN0IChERVBSRUNBVEVEKSJ9XQ==">
    <div data-prop-text="title">whitelist (DEPRECATED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>This config has been deprecated as of agent version 5.10.0 and will be removed in a future agent version. Instead use <code>allowed_classes</code>.</p>
    </div>
    <p>If you set <code>enabled</code> to <code>true</code> but you want the agent to capture messages for specific exceptions, add each exception to the <code>whitelist</code>, separated by a comma.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3RyaXBfZXhjZXB0aW9uX21lc3NhZ2VzX2FsbG93ZWRfY2xhc3NlcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYWxsb3dlZF9jbGFzc2VzIn1d">
    <div data-prop-text="title">allowed_classes</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If you set <code>enabled</code> to <code>true</code> but you want the agent to capture messages for specific exceptions, add each exception to <code>allowed_classes</code>, separated by a comma.</p>
  </div>
</div>
<h2>Thread profiler [#Thread_Profiler]</h2>
<p>These options are set in the <code>thread_profiler</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.thread_profiler</code> prefixed system property.</p>
<p>Thread profiler measures wall clock time, CPU time, and method call counts in your application's threads as they run.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHAtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlZCJ9XQ==">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enable the thread profiler.</p>
  </div>
</div>
<h2>Transaction events [#Transaction_Events]</h2>
<p>These options are set in the <code>transaction_events</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.transaction_events</code> prefixed system property.</p>
<p>Transaction events provide the data for displaying histograms and percentiles in the UI.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Previously this stanza was called <code>analytics_events</code>. If your configuration file still uses <code>analytics_events</code>, update your agent to use <code>transaction_events</code>.</p>
</div>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYWUtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlZCJ9XQ==">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enable the transaction events service.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYWUtbWF4X3NhbXBsZXNfc3RvcmVkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJtYXhfc2FtcGxlc19zdG9yZWQifV0=">
    <div data-prop-text="title">max_samples_stored</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>2000</code></p>
          </div>
        </div>
        <div>
          <div>
            <p>Max</p>
          </div>
          <div>
            <p><code>10000</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The maximum number of sampled transaction events reported every 60 seconds.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtY3VzdG9tLXJlcXVlc3QtaGVhZGVycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiY3VzdG9tX3JlcXVlc3RfaGVhZGVycyJ9XQ==">
    <div data-prop-text="title">custom_request_headers</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of maps</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>None</p>
          </div>
        </div>
      </div>
    </div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>Unlike other settings, <code>custom_request_headers</code> have to be paired together and must be set in the <code>newrelic.yml</code> file. They can't be overwritten by Java virtual machine arguments (system property) or environment variables.</p>
    </div>
    <p>A list of maps with the paired keys <code>header_name</code> and the optional <code>header_alias. Choose one or more custom HTTP request headers to add as transaction attributes.</code></p>
    <p>You can list multiple header configurations:</p>
    <pre><code>transaction_events:
       custom_request_headers:
          -
            header_name: "X-Custom-Header-1"
          -
            header_name: "X-Custom-Header-2"
            header_alias: "CustomHeader2alias"

</code></pre>In the first map set, `X-Custom-Header-1` is captured and reported by the agent as the header name for a corresponding value from the request object. The `header_name` will also be the name of the attribute sent to New Relic.
    In the second map set, the request header is `X-Custom-Header-2`, but the `CustomHeader2alias` is the name sent to New Relic.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWV2ZW50cy1hdHRyaWJ1dGVzLWVuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImF0dHJpYnV0ZXMuZW5hYmxlZCJ9XQ==">
    <div data-prop-text="title">attributes.enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to turn on or off all attributes for transaction events. If <code>attributes.enabled</code> is <code>false</code> at the root level, then no attributes will be sent to transaction events regardless of how this property is set under <code>transaction_events</code>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXRlLWF0dHJpYnV0ZXMtaW5jbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5pbmNsdWRlIn1d">
    <div data-prop-text="title">attributes.include</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If attributes are enabled for transaction events, all attribute keys found in this list will be sent to New Relic in transaction events. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXRlLWF0dHJpYnV0ZXMtZXhjbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5leGNsdWRlIn1d">
    <div data-prop-text="title">attributes.exclude</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of Strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>All attribute keys found in this list will not be sent to New Relic in transaction events. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
</div>
<h2>Custom events [#Custom_Events]</h2>
<p>Custom events are set in the <code>custom_insights_events</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.custom_insights_events</code> prefixed system property.</p>
<p>APM lets you <a href="https://docs.newrelic.com/docs/insights/insights-data-sources/custom-data/insert-custom-events-new-relic-apm-agents">record custom event data</a> via the New Relic language agent APIs, which <a href="/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data">you can then query</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>For Java agent versions prior to 4.1.0, the following YAML configuration is recognized:</p>
  <pre><code>custom_insights_events.enabled: true 
    custom_insights_events.max_samples_stored: 5000
</code></pre>
  <p>For agent versions 4.1.0 and above, the YAML configuration uses the nested stanza formatting:</p>
  <pre><code>custom_insights_events:
      enabled: false
      max_samples_stored: 5000
</code></pre>
</div>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2llLWVuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImVuYWJsZWQifV0=">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This enables the custom event service.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2llLW1heF9zYW1wbGVzX3N0b3JlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoibWF4X3NhbXBsZXNfc3RvcmVkIn1d">
    <div data-prop-text="title">max_samples_stored</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default/Max</p>
          </div>
          <div>
            <p><code>10000</code></p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div>
    <p>The maximum number of sampled custom events reported every 60 seconds.</p>
  </div>
</div>
<h2>Hostname configuration [#hostname_configuration]</h2>
<p>These options are set in the <code>process_host</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.process_host</code> prefixed system property.</p>
<p>These properties are used for configuring the hostname displayed in the UI:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGlzcGxheV9uYW1lIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJkaXNwbGF5X25hbWUifV0=">
    <div data-prop-text="title">display_name</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Set a <a href="/docs/agents/java-agent/configuration/hostname-logic-java#display-name">display name</a> to decorate the "host:port" label in the New Relic UI.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYWUtbWF4X3NhbXBsZXNfc3RvcmVkIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJpcHZfcHJlZmVyZW5jZSJ9XQ==">
    <div data-prop-text="title">ipv_preference</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>4</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>If the hostname cannot be determined, then the IP address of the host will be used. This property determines whether the IPv4 or IPv6 address should be used. The default is IPv4.</p>
  </div>
</div>
<h2>Custom instrumentation [#Custom_Instrumentation]</h2>
<p>These options set in the <code>class_transformer</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.class_transformer</code> prefixed system property.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ktdHJhY2VfYW5ub3RhdGlvbl9jbGFzc19uYW1lIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJ0cmFjZV9hbm5vdGF0aW9uX2NsYXNzX25hbWUifV0=">
    <div data-prop-text="title">trace_annotation_class_name</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>String containing the full class name of the annotation class the agent uses to determine which user-specified methods to instrument. For more information about custom annotations, see <a href="/docs/java/java-custom-metric-collection">Java custom metric collection</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VydmxldC11c2VyIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJjb20ubmV3cmVsaWMuaW5zdHJ1bWVudGF0aW9uLnNlcnZsZXQtdXNlciJ9XQ==">
    <div data-prop-text="title">com.newrelic.instrumentation.servlet-user</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Enable this option to capture the <code>userPrincipal</code> name. This name is included as a transaction trace attribute, and <a href="/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data">can be queried</a>.</p>
  </div>
</div>
<h2>System properties [#System_Properties]</h2>
<p>You can override any setting in the <code>newrelic.yml</code> file by setting a system property. The system property corresponding to a given setting in the config file is the setting name prefixed by <code>newrelic.config</code>. For example, the system property for the <code>log_level</code> setting is <code>newrelic.config.log_level</code>.</p>
<p>For settings nested in stanzas, prepend the stanza name to the setting name. For example, the system property for the <code>enabled</code> setting in the transaction_tracer stanza is <code>newrelic.config.transaction_tracer.enabled</code>.</p>
<p>In addition to overriding configuration settings, the following system properties are recognized by the agent:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibmV3cmVsaWMtYm9vdHN0cmFwX2NsYXNzcGF0aCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoibmV3cmVsaWMuY29uZmlnLnByb2Nlc3NfaG9zdC5kaXNwbGF5X25hbWUifV0=">
    <div data-prop-text="title">newrelic.config.process_host.display_name</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>(none)</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Set a <a href="/docs/agents/java-agent/configuration/hostname-logic-java#display-name">display name</a> to decorate the "host:port" label in the New Relic UI. Requires Java agent 3.17 or higher.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibmV3cmVsaWMtY29uZmlnLWZpbGUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Im5ld3JlbGljLmNvbmZpZy5maWxlIn1d">
    <div data-prop-text="title">newrelic.config.file</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>String containing a fully qualified path to the newrelic configuration file. If empty, the agent assumes <code>newrelic.yml</code> is in the same directory as <code>newrelic.jar</code>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibmV3cmVsaWMtZGVidWcifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Im5ld3JlbGljLmRlYnVnIn1d">
    <div data-prop-text="title">newrelic.debug</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Enable debug logging.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibmV3cmVsaWMtZW52aXJvbm1lbnQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Im5ld3JlbGljLmVudmlyb25tZW50In1d">
    <div data-prop-text="title">newrelic.environment</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>String containing the environment configuration for the agent to use.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibmV3cmVsaWMtaG9tZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoibmV3cmVsaWMuaG9tZSJ9XQ==">
    <div data-prop-text="title">newrelic.home</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>String containing the home directory of agent. This defaults to the same directory as the agent jarfile.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibmV3cmVsaWMtbG9nZmlsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoibmV3cmVsaWMubG9nZmlsZSJ9XQ==">
    <div data-prop-text="title">newrelic.logfile</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>newrelic_agent.log</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>String containing the name of the agent log file.</p>
  </div>
</div>
<h2>Environment variables [#Environment_Variables]</h2>
<p>Environment variables take the highest precedence and override the system properties and yml config settings.</p>
<ul>
  <li>To set environment variables, use the <code>export VARNAME=value</code> command.</li>
  <li>To permanently set environment variables, add the export line to a file such as <code>~/.bashrc</code> or <code>~/.bash_profile</code>.</li>
</ul>
<p>You can override any setting from a system property or in the <code>newrelic.yml</code> by setting an environment variable. The environment variable corresponding to a given setting in the config file is the setting name prefixed by <code>NEW_RELIC</code> with all dots (<code>.</code>) and dashes (<code>-</code>) replaced by underscores (<code>_</code>). For example, the environment variable for the <code>log_level</code> setting is <code>NEW_RELIC_LOG_LEVEL</code>.</p>
<p>For settings nested in stanzas, prepend the stanza name to the setting name. For example, the environment variable for the <code>enabled</code> setting in the <code>transaction_tracer</code> stanza is <code>NEW_RELIC_TRANSACTION_TRACER_ENABLED</code>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Agent configuration via environment variables requires <a href="/docs/agents/java-agent/installation/upgrade-java-agent">Java agent version 4.10.0 or higher</a>.</p>
</div>
<p>For agent versions older than 4.10.0 the following environment variables are available:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXYtTkVXX1JFTElDX0FQUF9OQU1FIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJORVdfUkVMSUNfQVBQX05BTUUgKFJFUVVJUkVEKSJ9XQ==">
    <div data-prop-text="title">NEW_RELIC_APP_NAME (REQUIRED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting is <strong>required</strong>. Contains the application name under which to report data to New Relic. Set the name of your application as you want it to appear in New Relic.</p>
    <p>If <code>enable_auto_app_naming</code> is false, the agent reports all data to this application. Otherwise, the agent reports only background tasks (transactions for non-web applications) to this application.</p>
    <p>To report data to more than one application, separate the application names with a semicolon <code>;</code>. For example, to report data to <strong>My Application</strong> and <strong>My Application 2</strong>:</p>
    <pre><code>app_name: My Application;My Application 2

</code></pre>For more methods of naming your application, see [Name your Java application](/docs/agents/java-agent/configuration/name-your-java-application).
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXYtTkVXX1JFTElDX0RJU1RSSUJVVEVEX1RSQUNJTkdfRU5BQkxFRCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTkVXX1JFTElDX0RJU1RSSUJVVEVEX1RSQUNJTkdfRU5BQkxFRCJ9XQ==">
    <div data-prop-text="title">NEW_RELIC_DISTRIBUTED_TRACING_ENABLED</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>false</p>
          </div>
        </div>
      </div>
    </div>
    <p>Enables distributed tracing. Case sensitive: use <code>true</code> or <code>false</code>. For more information, see the <a href="#distributed-tracing">distributed tracing section</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiTkVXX1JFTElDX1BST0NFU1NfSE9TVF9ESVNQTEFZX05BTUUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Ik5FV19SRUxJQ19QUk9DRVNTX0hPU1RfRElTUExBWV9OQU1FIn1d">
    <div data-prop-text="title">NEW_RELIC_PROCESS_HOST_DISPLAY_NAME</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>Set a <a href="/docs/agents/java-agent/configuration/hostname-logic-java#display-name">display name</a> to decorate the "host:port" label in the New Relic UI.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXYtTkVXX1JFTElDX0xJQ0VOU0VfS0VZIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJORVdfUkVMSUNfTElDRU5TRV9LRVkgKFJFUVVJUkVEKSJ9XQ==">
    <div data-prop-text="title">NEW_RELIC_LICENSE_KEY (REQUIRED)</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting is <strong>required</strong>. Contains your New Relic account license.</p>
    <p>You must specify the license key associated with your New Relic account. This key binds your agent's data to your account in the New Relic service.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXYtTkVXX1JFTElDX0xPRyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTkVXX1JFTElDX0xPRyJ9XQ==">
    <div data-prop-text="title">NEW_RELIC_LOG</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>newrelic_agent.log</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The unqualified log file name or the string <code>STDOUT</code> which will log to standard out.</p>
  </div>
</div>
<h2>Cloud platform utilization [#utilization]</h2>
<p>These options are set in the <code>utilization</code> stanza and can be overridden by using a <code>newrelic.config.utilization</code> prefixed system property.</p>
<p>The agent collects utilization information and sends it to the New Relic service. The agent can collect information from Amazon Web Services (AWS) EC2 instances and Docker containers.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXdzLWVuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImRldGVjdF9hd3MifV0=">
    <div data-prop-text="title">detect_aws</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Determines whether the agent polls AWS metadata API.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZG9ja2VyLWVuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImRldGVjdF9kb2NrZXIifV0=">
    <div data-prop-text="title">detect_docker</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Determines whether the agent reads Docker information from the file system.</p>
  </div>
</div>
<h2>Async instrumentation [#async_config]</h2>
<p>These options are set directly in the <code>common</code> stanza and can be <a href="#System_Properties">overridden</a> by using a prefixed system property.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXRva2VuX3RpbWVvdXQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6InRva2VuX3RpbWVvdXQifV0=">
    <div data-prop-text="title">token_timeout</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default (seconds)</p>
          </div>
          <div>
            <p><code>180</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The number of seconds after which the agent will automatically expire an async token that has not been explicitly expired with <code>token.expire()</code>. For usage instructions, see <a href="/docs/agents/java-agent/java-agent-api/java-agent-api-asynchronous-applications#tokens">Tokens: Connect async threads</a>.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>Increasing this value may impact performance, because it increases the amount of memory the agent uses and prevents transactions from being reported due to unexpired tokens.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNlZ21lbnRfdGltZW91dCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoic2VnbWVudF90aW1lb3V0In1d">
    <div data-prop-text="title">segment_timeout</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default (seconds)</p>
          </div>
          <div>
            <p><code>600</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>The number of seconds after which the agent will automatically end a segment that has not been explicitly ended with <code>segment.end()</code> or <code>segment.ignore()</code>. For usage instructions, see <a href="/docs/agents/java-agent/java-agent-api/java-agent-api-asynchronous-applications#segments">Segments: Time arbitrary async activity</a>.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>Increasing this value may impact performance, because it increases the amount of memory the agent uses and prevents transactions from being reported due to un-ended segments.</p>
    </div>
  </div>
</div>
<h2>Circuit breaker</h2>
<p>These settings customize the behavior of the <a href="/docs/agents/java-agent/custom-instrumentation/circuit-breaker-java-custom-instrumentation">Java circuit breaker</a>. These settings are not included in <code>newrelic.yml</code> by default. You do not need to restart your JVM after changing them.</p>
<p>If you want to customize the circuit breaker, add the stanza under the <code>common</code> stanza:</p>
<pre><code>common: &#x26;default_settings​
    ​  OTHER_CONFIG_SETTINGS
      circuitbreaker:
        enabled: true
        memory_threshold: 20
        gc_cpu_threshold: 10
</code></pre>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWNpcmN1aXRicmVha2VyX2VuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImVuYWJsZWQifV0=">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>If your application is behaving as expected, you may want to disable the circuit breaker.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWNpcmN1aXRicmVha2VyX21lbW9yeV90aHJlc2hvbGQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Im1lbW9yeV90aHJlc2hvbGQifV0=">
    <div data-prop-text="title">memory_threshold</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer (0 to 100)</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>20</p>
          </div>
        </div>
      </div>
    </div>
    <p>Customize the precentage of free heap memory below which the circuit breaker should trip. When the percentage of free heap memory is less than <code>memory_threshold</code>, and the CPU time spent doing garbage collection is greater than <code>gc_cpu_threshold</code>, the circuit breaker trips. In order to make the circuit breaker less likely to trip, decrease <code>memory_threshold</code> and/or increase <code>gc_cpu_threshold</code>. Adjust these values as needed, based on your application's operating performance and behavior.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLWNpcmN1aXRicmVha2VyX2djX2NwdV90aHJlc2hvbGQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImdjX2NwdV90aHJlc2hvbGQifV0=">
    <div data-prop-text="title">gc_cpu_threshold</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Integer (0 to 100)</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>10</p>
          </div>
        </div>
      </div>
    </div>
    <p>Customize the precentage of garbage collection CPU time above which the circuit breaker should trip. When the percentage of free heap memory is less than <code>memory_threshold</code>, and the CPU time spent doing garbage collection is greater than <code>gc_cpu_threshold</code>, the circuit breaker trips. In order to make the circuit breaker less likely to trip, decrease <code>memory_threshold</code> and/or increase <code>gc_cpu_threshold</code>. Adjust these values as needed, based on your application's operating performance and behavior.</p>
  </div>
</div>
<h2>Message tracer [#Transaction_Tracer]</h2>
<p>These options are set in the <code>message_tracer</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.message_tracer</code> prefixed system property.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidHQtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoic2VnbWVudF9wYXJhbWV0ZXJzLmVuYWJsZWQifV0=">
    <div data-prop-text="title">segment_parameters.enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Adds message properties to tracer attributes. Set this to <code>false</code> to turn it off.</p>
  </div>
</div>
<h2>Distributed tracing</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Enabling distributed tracing disables <a href="#Cross_Application_Tracer">cross application tracing</a>, and has other effects on APM features. Before enabling, read the <a href="https://docs.newrelic.com/docs/transition-guide-distributed-tracing">transition guide</a>.</p>
  <p>Requires <a href="/docs/agents/java-agent/installation/upgrade-java-agent">Java agent version 4.3.0 or higher</a>.</p>
</div>
<p><a href="/docs/understand-dependencies/distributed-tracing/get-started/introduction-distributed-tracing">Distributed tracing</a> lets you see the path that a request takes as it travels through a distributed system. In the config file, it can be set in the <code>distributed_tracing</code> stanza. It can be overridden using a <code>newrelic.config.distributed_tracing</code> prefixed system property.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZHQtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiZW5hYmxlZCJ9XQ==">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Set this to <code>true</code> to enable distributed tracing.</p>
    <p>For example, to enable this in the config file, you would use:</p>
    <pre><code>distributed_tracing:
       enabled: true

</code></pre>
    <pre><code>
-Dnewrelic.config.distributed_tracing.enabled=true

</code></pre>To enable this using a [system property](/docs/agents/java-agent/configuration/java-agent-configuration-config-file#System_Properties), you would use:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZHQtZXhjbHVkZV9uZXdyZWxpY19oZWFkZXIifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImV4Y2x1ZGVfbmV3cmVsaWNfaGVhZGVyIn1d">
    <div data-prop-text="title">exclude_newrelic_header</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>false</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>By default, supported versions of the agent utilize both the <code>newrelic</code> header and W3C Trace Context headers for distributed tracing. The <code>newrelic</code> distributed tracing header allows interoperability with older agents that don't support W3C Trace Context headers. Agent versions that support W3C Trace Context headers will prioritize them over <code>newrelic</code> headers for distributed tracing.</p>
    <p>If you do not want to utilize the <code>newrelic</code> header, setting this to <code>true</code> will result in the agent excluding the <code>newrelic</code> header and only using W3C Trace Context headers for distributed tracing.</p>
    <p>For example, to exclude <code>newrelic</code> headers in the config file, you would use:</p>
    <pre><code>distributed_tracing:
       exclude_newrelic_header: true

</code></pre>
    <pre><code>
-Dnewrelic.config.distributed_tracing.exclude_newrelic_header=true

</code></pre>To exclude `newrelic` headers using a [system property](/docs/agents/java-agent/configuration/java-agent-configuration-config-file#System_Properties), you would use:
  </div>
</div>
<h2>Infinite Tracing</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Requirements:</p>
  <ul>
    <li><a href="https://docs.newrelic.com/docs/agents/java-agent/installation/update-java-agent">Java Agent 5.12.1 or higher</a>.</li>
    <li>Infinite Tracing does not work if <code>enable_auto_app_naming</code> is enabled.</li>
  </ul>
</div>
<p>To turn on Infinite Tracing, enable distributed tracing and add the additional setting below. For an example, see <a href="https://docs.newrelic.com/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#java-config">Language Agents: Configure Distributed Tracing</a>.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaW5maW5pdGUtdHJhY2luZy10cmFjZS1vYnNlcnZlci1ob3N0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJ0cmFjZV9vYnNlcnZlci5ob3N0In1d">
    <div data-prop-text="title">trace_observer.host</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>String</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>None</p>
          </div>
        </div>
      </div>
    </div>
    <p>For help getting a valid Infinite Tracing trace observer host entry, see <a href="https://docs.newrelic.com/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#provision-trace-observer">find or create a Trace Observer</a>.</p>
    <p>You can configure this via YAML:</p>
    <pre><code>infinite_tracing:
    trace_observer:
      host: YOUR_TRACE_OBSERVER_HOST

</code></pre>You can also use the system property `newrelic.config.infinite_tracing.trace_observer.host` or the environment variable `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST`.
  </div>
</div>
<h2>Span events</h2>
<p><a href="https://docs.newrelic.com/docs/apm/distributed-tracing/ui-data/span-event">Span events</a> are reported for <a href="#distributed-tracing">distributed tracing</a>. Distributed tracing must be enabled to report span events.</p>
<p>Span configuration is set in the <code>span_events</code> stanza and can be <a href="#System_Properties">overridden</a> by using a <code>newrelic.config.span_events</code> prefixed system property. Options include:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNwYW4tZXZlbnRzLWVuYWJsZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6ImVuYWJsZWQifV0=">
    <div data-prop-text="title">enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>Used to enable/disable span event reporting.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNwYW4tZXZlbnRzLWF0dHJpYnV0ZXMtZW5hYmxlZCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5lbmFibGVkIn1d">
    <div data-prop-text="title">attributes.enabled</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>Boolean</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p><code>true</code></p>
          </div>
        </div>
      </div>
    </div>
    <p>This setting can be used to turn on or off all attributes for span events. If <code>attributes.enabled</code> at the root level is <code>false</code>, no attributes will be sent to span events regardless on how this property (<code>span_events.attributes.enabled</code>) is set.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNwYW4tZXZlbnRzLWF0dHJpYnV0ZXMtaW5jbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5pbmNsdWRlIn1d">
    <div data-prop-text="title">attributes.include</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>If attributes are enabled for span events, all attribute keys found in this list will be sent to New Relic in <code>span_events</code>. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2ZnLXNwYW4tZXZlbnRzLWF0dHJpYnV0ZXMtZXhjbHVkZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiYXR0cmlidXRlcy5leGNsdWRlIn1d">
    <div data-prop-text="title">attributes.exclude</div>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p>Type</p>
          </div>
          <div>
            <p>List of strings</p>
          </div>
        </div>
        <div>
          <div>
            <p>Default</p>
          </div>
          <div>
            <p>(none)</p>
          </div>
        </div>
      </div>
    </div>
    <p>All attribute keys found in this list will not be sent to New Relic in span events. For more information, see the <a href="/docs/apm/other-features/attributes/agent-attributes">agent attribute rules</a>.</p>
  </div>
</div>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Span event attribute filtering requires <a href="/docs/agents/java-agent/installation/upgrade-java-agent">Java agent version 4.10.0 or higher</a>.</p>
</div>
