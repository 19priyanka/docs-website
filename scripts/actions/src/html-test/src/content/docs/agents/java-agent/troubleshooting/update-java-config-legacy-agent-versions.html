
<h2>Problem</h2>
<p>You use Java agent version 3.16.1 or lower and need to upgrade to the <a href="/docs/release-notes/agent-release-notes/java-release-notes">latest version</a>, but you use deprecated configuration options to configure agent attributes.</p>
<h2>Solution</h2>
<p>In <code>newrelic.yml</code>, edit the configuration properties you use for compatiblity with the latest versions:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Deprecated property</strong></p>
      </div>
      <div>
        <p><strong>New property</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>analytics_events</code></p>
      </div>
      <div>
        <p><code>transaction_events</code></p>
        <p>The stanza in the <strong>newrelic.yml</strong> configuration file called <code>analytics_events</code> has been deprecated. Use the <code>transaction_events</code> stanza instead.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>capture_params</code></p>
      </div>
      <div>
        <p><code>attributes.include: request.parameters.*</code></p>
        <p>By default, request parameters are not sent to New Relic. Add <code>request.parameters.*</code> to the <code>attributes.include</code> list to turn on all request parameters. The <code>capture_params</code> property has been deprecated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>ignored_params</code></p>
      </div>
      <div>
        <p><code>attributes.exclude: request.parameters.{name}</code></p>
        <p>Add each request parameter key to the <code>attributes.exclude</code> list. Be sure to prepend the key with <code>request.parameters</code>. The <code>ignored_params</code> property has been deprecated.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>capture_messaging_params</code></p>
      </div>
      <div>
        <p><code>attributes.include: message.parameters.*</code></p>
        <p>By default, message queue parameters are not sent to New Relic. Previously, setting <code>capture_messaging_params</code> to <code>true</code> would enable message queue parameters. Now you must add <code>message.parameters.*</code> to the <code>attributes.include</code> list.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>ignored_messaging_params</code></p>
      </div>
      <div>
        <p><code>attributes.exclude: message.parameters.{name}</code></p>
        <p>Previously, you could set <code>ignored_messaging_params</code> to a list of message queue parameter keys to exclude. Now you must add each message queue parameter key to the <code>attributes.exclude</code> list. Be sure to prepend the key with <code>message.parameters</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>capture_attributes</code></p>
      </div>
      <div>
        <p><code>attributes.enabled</code></p>
        <p>The old <code>capture_attributes</code> flag would turn off user attribute collection. This has been deprecated. Use <code>attributes.enabled</code> instead.</p>
      </div>
    </div>
  </div>
</div>
<p>In this example, the Java agent collects request parameters and records them to the transaction tracer and error collector destinations. This emulates enabling the legacy <a href="/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration">server-side configuration options</a> for <code>Capture attributes</code> or <code>Capture parameters</code>.</p>
<p>To customize the <a href="/docs/agents/java-agent/configuration/java-agent-configuration-config-file#attributes"><code>attributes</code></a> element in your Java agent configuration file:</p>
<pre><code>attributes.enabled: true
  attributes.include: request.parameters.*
</code></pre>
