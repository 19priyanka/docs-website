
<p>New Relic's PHP agent includes support for automatic transaction naming for the Community and Enterprise editions of Magento 1 and 2. This document describes how this works and how you can use the automated names to track issues on your Magento application.</p>
<h2>Magento 1</h2>
<p>Transactions in Magento 1 applications are named based on the module, controller, and action that handle the request. For example, a transaction for the default customer account page will be named <code>customer/account/index</code>, which indicates that the <a href="https://github.com/OpenMage/magento-mirror/blob/1.9.3.2/app/code/core/Mage/Customer/controllers/AccountController.php#L109-L120"><code>indexAction()</code> method in <code>Mage_Customer_AccountController</code></a> (the <code>account</code> controller in the <code>customer</code> module) was responsible for the transaction.</p>
<h2>Magento 2</h2>
<p>Normal web transactions in Magento 2 applications are named similarly to Magento 1 transactions: the transaction name encodes the module, controller, and action that handled the request. For example, a request handled by the <a href="https://github.com/magento/magento2/blob/2.1.4/app/code/Magento/Customer/Controller/Account/Index.php"><code>Magento\Customer\Controller\Account\Index</code></a> controller class will also be named <code>customer/account/index</code>.</p>
<h2>Web APIs</h2>
<p>Magento 2 also includes built-in support for <a href="http://devdocs.magento.com/guides/v2.1/get-started/bk-get-started-api.html">web APIs</a>. These are web services that are made available through REST and SOAP.</p>
<p>As of <a href="/docs/release-notes/agent-release-notes/php-release-notes/php-agent-700186">PHP agent version 7.0</a>, New Relic supports automatically naming transactions that use this functionality. Previous versions of the PHP agent named web API transactions as <code>unknown</code> by default.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Magento 2 web APIs</strong></p>
      </div>
      <div>
        <p><strong>Comments</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>SOAP</p>
      </div>
      <div>
        <p>SOAP transactions are named based on the service class and method that handled the request. For example, the transaction name <code>Webapi/Soap/Magento\Catalog\Api\CategoryManagementInterface/getTree</code> indicates that a SOAP request was handled by the <code>getTree()</code> method on the model implementing <code>Magento\Catalog\Api\CategoryManagementInterface</code>.</p>
        <p>WSDL transactions are also named automatically: <code>Webapi/Soap/WsdlList</code> is used for transactions that return the list of available APIs, whereas <code>Webapi/Soap/Wsdl</code> is used for transactions that get the WSDL for a specific SOAP API.</p>
      </div>
    </div>
    <div>
      <div>
        <p>REST</p>
      </div>
      <div>
        <p>From Magento 2.1 onwards, REST transactions are named similarly to <a href="#soap">SOAP</a> transactions. The only difference is that REST requests are prefixed with <code>Webapi/Rest</code> instead of <code>Webapi/Soap</code>.</p>
        <p>On Magento 2.0, the PHP agent is unable to automatically name the specific service class and method that handled the transaction. Instead, REST requests currently receive the generic name <code>FrontController/Magento\Webapi\Controller\Rest\Interceptor</code>. This may be improved in a future PHP agent release. As a workaround, New Relic recommends using <a href="https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-api#api-name-wt"><code>newrelic_name_transaction()</code></a> in the service method if greater resolution is required.</p>
      </div>
    </div>
  </div>
</div>
<h2>FrontControllerInterface plugins [#front-controller-interface-plugins]</h2>
<p>It is possible in Magento 2 to register a <a href="http://devdocs.magento.com/guides/v2.1/extension-dev-guide/plugins.html">plugin or interceptor</a> for the <code>Magento\Framework\App\FrontControllerInterface</code> interface to replace the default routing engine. For example, this is how the <a href="#web-apis">web API features</a> operate.</p>
<p>If an interceptor is registered for <code>Magento\Framework\App\FrontControllerInterface</code>, the name of that class will be used as the default transaction name when using New Relic's PHP agent version 7.0 or higher. You can also use <a href="https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-api#api-name-wt"><code>newrelic_name_transaction()</code></a> for manual naming if needed.</p>
<h2>Escape automatic transaction naming [#problems]</h2>
<p>If automatic transaction naming is not useful, you can override the PHP agent's automatic transaction naming by using the <a href="/docs/agents/php-agent/configuration/php-agent-api#api-name-wt"><code>newrelic_name_transaction()</code></a> API function.</p>
