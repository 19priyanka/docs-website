
<h2>Problem</h2>
<p>The New Relic PHP agent was previously reporting data but then stopped reporting. In addition:</p>
<ul>
  <li>When you checked your agent daemon log file <code>/var/log/newrelic/newrelic-daemon.log</code>, you saw the message <code>Lack of activity within 10ms</code>.</li>
  <li>The health status for the application is grey.</li>
  <li>The option to delete the application appears in the application's <strong>Settings</strong> menu when you select the
    <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS1zZXR0aW5ncyJ9XQ=="></div>icon.
  </li>
</ul>
<h2>Solution</h2>
<p>Use either of these methods to keep your application from entering an idle state:</p>
<ul>
  <li>Set the timeout value for <a href="/docs/agents/php-agent/configuration/php-agent-configuration#inivar-daemon-app_timeout"><code>newrelic.daemon.app_timeout</code></a> to at least twice the interval of your transactions. For example, for an hourly background job, set the timeout to two hours.</li>
  <li><strong>Recommendation:</strong> If you have long or infrequent processes, run a cron job every five minutes with a simple transaction, such as <code>phpinfo()</code>. This will help ensure the application does not enter an idle state.</li>
</ul>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Do not set <code>newrelic_ignore_transaction</code> to ignore the cron job. The PHP agent will enter an idle state if the job does not run and report.</p>
</div>
<h2>Cause</h2>
<p>If an application's transactions take longer than ten minutes, or occur less frequently than once every ten minutes, the application enters and remains in an idle state.</p>
<p>When the PHP agent is in an idle state, <strong>two</strong> transactions must occur before it will start reporting again:</p>
<ul>
  <li>The first transaction wakes up the daemon and re-establishes the connection to New Relic.</li>
  <li>The second transaction reports data to New Relic.</li>
</ul>
