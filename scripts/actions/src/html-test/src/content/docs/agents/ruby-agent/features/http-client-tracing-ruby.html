
<p>The Ruby agent can trace outgoing HTTP requests made by your application or script in order to:</p>
<ul>
  <li>Record metrics about how long your HTTP requests are taking and which hosts they're hitting.</li>
  <li>Annotate transaction traces with nodes for each HTTP request.</li>
  <li>Provide <a href="/docs/agents/ruby-agent/features/cross-application-tracing-ruby">cross application tracing</a> for requests between applications instrumented with New Relic.</li>
</ul>
<h2>Supported HTTP client libraries [#supported_libraries]</h2>
<p>The following HTTP client libraries are currently supported by the Ruby agent:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Name</p>
      </div>
      <div>
        <p>Minimum supported version</p>
      </div>
      <div>
        <p>Notes</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Net::HTTP</p>
      </div>
      <div>
        <p>N/A (part of the Ruby standard library)</p>
      </div>
      <div>
        <p>Also includes libraries built upon Net::HTTP, such as <a href="http://johnnunemaker.com/httparty/">httparty</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="https://github.com/geemus/excon">Excon</a></p>
      </div>
      <div>
        <p>0.10.1</p>
      </div>
      <div>
        <p>See <a href="#excon">Excon notes</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="https://github.com/typhoeus/typhoeus">Typhoeus</a></p>
      </div>
      <div>
        <p>0.5.3</p>
      </div>
      <div>
        <p>Hydra requests get partial instrumentation, 1.8.7 stability. See <a href="#typhoeus">Typhoeus notes</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="https://github.com/nahi/httpclient">HTTPClient</a></p>
      </div>
      <div>
        <p>2.2.0</p>
      </div>
      <div>
        <p>Instrumentation of asynchronous requests is not supported.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="https://github.com/taf2/curb">Curb</a></p>
      </div>
      <div>
        <p>0.8.1</p>
      </div>
      <div>
        <p>Curl::Multi requests get partial instrumentation. See <a href="#curb">Curb notes</a>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="https://github.com/httprb/http">http.rb</a></p>
      </div>
      <div>
        <p>0.9.9</p>
      </div>
      <div></div>
    </div>
  </div>
</div>
<h2>Excon notes [#excon]</h2>
<p>The Ruby agent supports Excon version <strong>0.10.1 or higher.</strong> Excon instrumentation for Excon versions 0.19.0 and up relies on the ability to add an Excon middleware to the <code>:middlewares</code> key of <code>Excon.defaults</code>, so if your application modifies <code>Excon.defaults</code> you should ensure that you preserve the value of the <code>:middlewares</code> key.</p>
<h2>Typhoeus notes [#typhoeus]</h2>
<p>The Ruby agent supports Typhoeus version <strong>0.5.3 or higher</strong>.</p>
<p>Parallel requests made via the <code>Hydra</code> mechanism in Typhoeus currently only have partial tracing support. For such requests, the Ruby agent will record a single transaction trace node representing the entire batch, but you will not be able to see the details about each individual request in the batch. Requests made via the <code>Hydra</code> mechanism will also not get cross application tracing support.</p>
<p>Testing has shown significant issues with segfaults when running Typhoeus on MRI 1.8.7.<br><strong>Recommendation:</strong> Use Ruby Enterprise Edition or MRI 1.9.3 or higher to avoid these problems.</p>
<h2>Curb notes [#curb]</h2>
<p>The Ruby agent supports Curb version <strong>0.8.1 or higher.</strong> Curb instrumentation on JRuby is <strong>not</strong> supported.</p>
<p>Requests made via the <code>Curl::Multi</code> API currently only have partial tracing support (equivalent to what is offered for requests made via the Typhoeus <code>Hydra</code> API). For such requests, the Ruby agent will record a single transaction trace node representing the entire batch, but you will not be able to see the details about each individual request in the batch. Requests made via the <code>Curl::Multi</code> mechanism will also not get cross application tracing support.</p>
