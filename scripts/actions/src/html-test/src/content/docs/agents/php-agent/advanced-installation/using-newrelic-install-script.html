
<p>The interactive <code>newrelic-install</code> script simplifies installing New Relic for PHP. It works with multiple PHP installations as well as installations in non-standard locations. Running it will:</p>
<ul>
  <li>Copy the correct PHP modules into place.</li>
  <li>Install sample <code>ini</code> files.</li>
  <li>Configure the New Relic proxy daemon.</li>
</ul>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Be sure to review the information about <a href="#install-multiple">working with multiple installations and non-standard locations</a> before running the script.</p>
</div>
<h2>Find the installer script [#location]</h2>
<p>The installer script location depends on how you installed the New Relic PHP agent.</p>
<ul>
  <li>Via system package manager: The installation script is in the <code>/usr/bin</code> directory.</li>
  <li>Via a tarball: The installation script is in the directory where you extracted the <strong>tar</strong> archive file. The script in the <strong>tar</strong> distribution includes installation steps otherwise handled by the package manager.</li>
</ul>
<h2>Work with multiple PHP installations [#install-multiple]</h2>
<p>For <code>newrelic-install</code> to correctly detect multiple installations, ensure your <code>PATH</code> environment variable is correctly set. The <code>newrelic-install</code> script can only install the agent for versions it can find.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>If you want to...</strong></p>
      </div>
      <div>
        <p><strong>Do this...</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Specify additional directories</p>
      </div>
      <div>
        <p>Use the <code>NR_INSTALL_PATH</code> environment variable with a colon-separated list.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Override <code>NR_INSTALL_PATH</code> and <code>PATH</code></p>
      </div>
      <div>
        <p>Specify a set of directories in the <code>NR_INSTALL_PHPLIST</code> environment variable as a colon-separated list. These directories must contain either the command line version of PHP or the <strong>php-config</strong> script.</p>
      </div>
    </div>
  </div>
</div>
<h2>Invoke the installer script [#invocation]</h2>
<p>The script has two modes: <a href="#install-install">install</a> and <a href="#install-uninstall">uninstall</a>. If you invoke it with no arguments you will be prompted to select a mode.</p>
<p>From the command line, run the script at its location:</p>
<ul>
  <li>Via system package manager: <code>/usr/bin/newrelic-install</code></li>
  <li>Via a <strong>tar</strong> archive directory: <code>./newrelic-install</code></li>
</ul>
<h2>Use the install mode [#install-install]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>As of <a href="/docs/release-notes/agent-release-notes/php-release-notes/php-agent-40518">PHP agent version 4.0</a>, the installer will not work properly if it detects a single version of PHP if that version is PHP 5.1, which is deprecated. If you must run PHP 5.1, use <a href="/docs/release-notes/agent-release-notes/php-release-notes/php-agent-39513">PHP agent version 3.9.5.13</a>. If you need help, get support at <a href="https://support.newrelic.com">support.newrelic.com</a>.</p>
</div>
<p>Follow this process to install New Relic.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaW52b2tlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiIxLiBJbnZva2UgaW5zdGFsbCBtb2RlLiJ9XQ==">
    <div data-prop-text="title">1. Invoke install mode.</div>
    <p>Invoke install mode by using <strong>one</strong> of these methods:</p>
    <ul>
      <li>Run <code>newrelic-install</code> with the <code>install</code> command line option.</li>
      <li>Run <code>newrelic-install</code> with no options and select the install option from the main menu when invoking the script.</li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGljZW5zZS1rZXkifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IjIuIFByb3ZpZGUgeW91ciBOZXcgUmVsaWMgbGljZW5zZSBrZXkuIn1d">
    <div data-prop-text="title">2. Provide your New Relic license key.</div>
    <p>At the prompt, enter your New Relic <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">license key</a>. This key will be inserted into any INI files created during the rest of the installation process.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsZWN0LXZlcnNpb24ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IjMuIFNlbGVjdCB3aGljaCBQSFAgdmVyc2lvbiB0byB1c2UgaWYgYXBwbGljYWJsZS4ifV0=">
    <div data-prop-text="title">3. Select which PHP version to use if applicable.</div>
    <p>If <code>newrelic-install</code> finds more than one version of PHP, select which version of PHP to use. You will not see this screen if the script only found a single version of PHP.</p>
    <p><strong>Example:</strong> The menu shows seven options:</p>
    <pre><code>1)   /usr/bin
   2)   /usr/local/php/5.2.16/bin
   3)   /usr/local/php/5.2.16-zts/bin
   4)   /usr/local/php/5.3.4/bin
   5)   /usr/local/php/5.3.4-zts/bin
   6)   /usr/local/php/5.4.19-zts/bin
   7)   /usr/local/php/5.5.4-zts/bin

   0)   Exit

   Select (1-7, 0 to exit, or all):

</code></pre>At the menu, use any of these options:
    * To select only one version, enter the number indicating the version you want to use.
    * To select multiple versions, enter a comma- or space-separated list of numbers.
    * To select every version listed, enter the keyword `all`.
    * To exit the installation process, Enter `0`.
    For each directory selected, the script will attempt to install the agent in the proper place and report on each attempt.
    &#x3C;Callout variant="important">
    For PHP installations that allow multiple **.ini** files, the install script will copy a template file into place, if a modified one is not already installed. Make a note of the **.ini** files you will need to modify manually.
    &#x3C;/Callout>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGFlbW9uIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiI0LiBJbnN0YWxsIHRoZSBkYWVtb24gaWYgYXBwbGljYWJsZS4ifV0=">
    <div data-prop-text="title">4. Install the daemon if applicable.</div>
    <p>If the daemon was not installed by the package manager, install the daemon.</p>
    <p>If this is an update or reinstall, the script provide a confirmation prompt before overwriting the old copy of the daemon.</p>
    <p>If installation is successful, the script will show this final message:</p>
    <pre><code>New Relic is now installed on your system. Congratulations!

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicmVzdGFydC13ZWItc2VydmVyIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiI1LiBSZXN0YXJ0IHlvdXIgd2ViIHNlcnZlci4ifV0=">
    <div data-prop-text="title">5. Restart your web server.</div>
    <p>To activate the PHP agent, restart your web server.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>If you are running PHP-FPM, you may also need to restart PHP-FPM separately before the agent will be active.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXJjaGl2ZS1maWxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiI2LiBOb3RlIHlvdXIgYXJjaGl2ZSBmaWxlLiJ9XQ==">
    <div data-prop-text="title">6. Note your archive file.</div>
    <p>Note the name and location of the install archive file. This file will be located at <strong>/tmp/nrinstall-nnnn.tar</strong> and will contain both the install log and useful system information to help New Relic Technical Support with troubleshooting.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY29uZmlndXJhdGlvbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiNy4gRmluZS10dW5lIHlvdXIgY29uZmlndXJhdGlvbi4ifV0=">
    <div data-prop-text="title">7. Fine-tune your configuration.</div>
    <p>After you install New Relic successfully and restart your web server, you can begin gathering data about your applications. After a few minutes, data will begin to appear on your <a href="/docs/apm/applications-menu/monitoring/apm-overview-page">APM <strong>Summary</strong> page</a>.</p>
    <p>To fine-tune operation of both the PHP agent and daemon, review the <a href="/docs/agents/php-agent/configuration/php-agent-configuration">PHP configuration options</a>.</p>
  </div>
</div>
<h2>Use the <code>install-daemon</code> mode [#install-daemon-mode]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Requires PHP agent 9.2 or higher.</p>
</div>
<p>To install the daemon without the agent, run <code>newrelic-install</code> with the <code>install_daemon</code> command line option. This may be useful if the daemon is running on a different host or in a different container than the PHP application (as may happen with <a href="/docs/agents/php-agent/advanced-installation/install-php-agent-docker">agent install on containers</a>).</p>
<h2>Troubleshoot your PHP installation [#troubleshoot]</h2>
<p>If there were problems with the installation process, or if <a href="/docs/agents/php-agent/troubleshooting/no-data-appears-php">no data appears</a> in APM, review the <a href="/docs/agents/php-agent/troubleshooting">PHP troubleshooting procedures</a> before contacting New Relic for support. Be sure to attach your <a href="#archive-file">archive file</a> to any bug report, as well as the output of the <a href="/docs/agents/php-agent/troubleshooting/submitting-troubleshooting-results-php"><code>phpinfo()</code></a> function produced by your web server.</p>
<h2>Uninstall mode [#install-uninstall]</h2>
<p>You can uninstall New Relic but keep valuable config files (useful when upgrading), or permanently uninstall New Relic from your system.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidW5pbnN0YWxsLWtlZXAifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlVuaW5zdGFsbCBhbmQga2VlcCBjb25maWcgZmlsZXMuIn1d">
    <div data-prop-text="title">Uninstall and keep config files.</div>
    <p>This method is useful when you want to uninstall and upgrade. To uninstall New Relic using the install script, use either of these options:</p>
    <ul>
      <li>
        <p>Invoke <code>newrelic-install</code> with the <code>uninstall</code> option.</p>
      </li>
      <li>
        <p>Run <code>newrelic-install</code> with no options, and select the uninstall option from the main menu when invoking the script.</p>
        <p>The uninstall does not remove important configuration files, such as your daemon configuration file. Also, it does not remove any <code>newrelic.ini</code> files that you have modified.</p>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidW5pbnN0YWxsLXBlcm1hbmVudCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUGVybWFuZW50bHkgdW5pbnN0YWxsIE5ldyBSZWxpYy4ifV0=">
    <div data-prop-text="title">Permanently uninstall New Relic.</div>
    <p>To permanently uninstall New Relic from your system: Invoke <code>newrelic-install</code> with the <code>purge</code> option.</p>
    <p>This will remove all the configuration files and any links created at installation time. This will <strong>not</strong> affect any configuration parameters that might have been placed in files such as <code>php.in</code>. Also, this will <strong>not</strong> remove the software packages installed on the system.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>To remove the New Relic software packages installed with a package manager, see <a href="/docs/php/php-agent-installation-redhat-and-centos#uninstalling">Uninstalling (RedHat and CentOS)</a> or <a href="/docs/php/php-agent-installation-ubuntu-and-debian#uninstalling">Uninstalling (Ubuntu and Debian)</a>.</p>
    </div>
  </div>
</div>
