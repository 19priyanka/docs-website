
<p>New Relic collects and reports information on <a href="/docs/apm/transactions/intro-transactions/transactions-new-relic-apm">web browser transactions</a> and <a href="/docs/apm/transactions/intro-transactions/monitor-background-processes-other-non-web-transactions">non-web transactions</a>, such as background tasks. New Relic normally produces complete information right out of the box without any need to modify your application code. However, if New Relic does not support your <a href="/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#frameworks">framework</a>, you may need to add custom instrumentation.</p>
<p>Custom instrumentation is also useful to add detail to your transaction traces, to block instrumentation on transactions you don't want instrumented, or if New Relic is simply not picking up a part of your code that you want to instrument.</p>
<h2>Ensure all PHP functions are timed [#enable-custom-instrumentation]</h2>
<p>For maximum visibility into your application, ensure that the <a href="/docs/agents/php-agent/configuration/php-agent-newrelicini-settings#inivar-tt-detail"><code>newrelic.transaction_tracer.detail</code></a> parameter is set to <code>1</code> (default). This will cause all PHP functions to be timed, thus reducing greatly the amount of "uninstrumented time" in a transaction trace.</p>
<h2>Use the agent API to control transactions [#use-agent-api]</h2>
<p>Beyond that setting, agent API calls can control transactions and add custom instrumentation:</p>
<ul>
  <li>
    <p><a href="/docs/agents/php-agent/php-agent-api/newrelic_add_custom_tracer"><code>newrelic_add_custom_tracer()</code></a></p>
    <p>Specify a particular method you want to instrument.</p>
  </li>
  <li>
    <p><a href="/docs/agents/php-agent/php-agent-api/newrelic_end_of_transaction"><code>newrelic_end_of_transaction()</code></a></p>
    <p>Stop timing a transaction, but continue instrumenting it. Useful for streaming data.</p>
  </li>
  <li>
    <p><a href="/docs/agents/php-agent/php-agent-api/newrelic_ignore_transaction"><code>newrelic_ignore_transaction()</code></a></p>
    <p>Do not instrument a transaction at all.</p>
  </li>
  <li>
    <p><a href="/docs/agents/php-agent/php-agent-api/newrelic_name_transaction"><code>newrelic_name_transaction()</code></a></p>
    <p>Customize the name of a transaction when the default name is not useful.</p>
  </li>
  <li>
    <p><a href="/docs/agents/php-agent/php-agent-api/newrelic_notice_error"><code>newrelic_notice_error()</code></a></p>
    <p>Record an error message with a stack trace.</p>
  </li>
  <li>
    <p><a href="/docs/agents/php-agent/php-agent-api/newrelic_start_transaction"><code>newrelic_start_transaction()</code></a> and <a href="/docs/agents/php-agent/php-agent-api/newrelic_end_transaction"><code>newrelic_end_transaction()</code></a></p>
    <p>Manually end the current transaction, then start a new transaction. Useful for queue managers, or other scripts that create numerous "children."</p>
  </li>
</ul>
<h2>For more help [#more_help]</h2>
<p>Additional documentation resources include:</p>
<ul>
  <li><a href="/docs/features/custom-instrumentation">Custom instrumentation</a> (Overview of custom instrumentation)</li>
  <li><a href="/docs/php/php-agent-api#api-custom-metric">Collect custom metrics with newrelic_custom_metric</a> (Use an API call to record arbitrary metrics)</li>
</ul>
