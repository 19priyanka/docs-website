
<p>New Relic <a href="/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls">requires HTTPS</a> for all traffic to APM and the New Relic REST API. The Ruby agent connects to New Relic collector servers over SSL by default, and ships with a default set of <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#ssl-certificate">SSL certificate</a> that it uses to validate the identity of the collector servers when connecting. In most cases, this default set of certificates is sufficient.</p>
<p>In certain configurations, you may need to use a <a href="#using-custom">custom CA bundle</a>. For example, you may use an HTTP proxy to intercept and decrypt SSL traffic from the agent, which then establishes a separate SSL connection to New Relic. Custom CA bundles are available in versions 3.9.4 or higher of the Ruby agent.</p>
<h2>Use a custom CA bundle [#using-custom]</h2>
<p>To configure the agent to use a custom CA bundle when validating the <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#ssl-certificate">SSL certificate</a> presented by a proxy, set the <code>ca_bundle_path</code> configuration setting in your <strong>newrelic.yml</strong> file or via the <code>NEW_RELIC_CA_BUNDLE_PATH</code> environment variable:</p>
<pre><code>common: &#x26;default_settings
  ca_bundle_path: certificates/mycert.pem
  # ... other settings ...
</code></pre>
<p>Specify a path to a <strong>.pem</strong> file containing each certificate you want the agent to use when validating the identity of the proxy or server. You can concatenate multiple certificates into a single <strong>.pem</strong> file. (For an example, see the <a href="https://github.com/newrelic/rpm/blob/master/cert/cacert.pem">default pem file</a>.)</p>
<ul>
  <li><strong>Relative path:</strong> If you specify a relative path, the agent will assign a path relative to the working directory of your app server process at runtime.</li>
  <li><strong>Absolute path:</strong> If your working directory is <code>/</code> rather than the root of your application, be sure to specify an absolute path.</li>
</ul>
