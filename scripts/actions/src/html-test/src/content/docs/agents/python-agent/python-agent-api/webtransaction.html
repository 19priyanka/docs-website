
<h2>Syntax</h2>
<pre><code>newrelic.agent.web_transaction(application=None, name=None, group=None, scheme=None, host=None, port=None, request_method=None, request_path=None, query_string=None, headers=None)
</code></pre>
<p>Used to instrument a web transaction.</p>
<h2>Requirements</h2>
<p>Agent version 4.16.0.116 or higher</p>
<h2>Description</h2>
<p>This Python decorator can be used to instrument web transactions. Transactions marked with this decorator are shown in the APM UI under web transactions and are separate from non-web transactions.</p>
<p>If you cannot use the decorator, one of these call formats may be more useful:</p>
<ul>
  <li><strong>The wrapper</strong>: If you know in advance where the specific functions you want to track are, you can use the <code>web_transaction</code> decorator. But if you don't know all the functions that need to be traced (for example, if they're being looked up dynamically as part of a routing system), then you must use the <code>WebTransactionWrapper</code> to wrap the function at the time of registration or at the time of calling.</li>
  <li><strong>The path-based wrapper</strong>: The path-based wrapper form is <code>wrap_web_transaction</code>.</li>
</ul>
<p>For more on the differences between and uses of these function forms, see <a href="/docs/python-agent-api-different-call-forms">Variable call formats</a>.</p>
<h2>Parameters</h2>
<h3>Decorator parameters [#main-params]</h3>
<pre><code>newrelic.agent.web_transaction(application=None, name=None, group=None, scheme=None, host=None, port=None, request_method=None, request_path=None, query_string=None, headers=None)
</code></pre>
<p>Parameters for these calls:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>application</code></p>
        <p><em>Application instance</em></p>
      </div>
      <div>
        <p>Optional. The application under which the data will be reported. If left without a value, the application specified in the agent <a href="/docs/agents/python-agent/installation-configuration/python-agent-configuration">configuration</a> (config file or environment variable) will be used.</p>
        <p>For more on generating an application object, see the <a href="/docs/agents/python-agent/python-agent-api/application"><code>application()</code></a> method.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>name</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. The name of the transaction. By default, the name will be the name of the function the decorator has been applied to but you can override this by supplying this name.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>group</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. The <code>group</code> represents the naming structure for the <code>name</code> parameter. This is used in the UI to set the <a href="/docs/apm/applications-menu/monitoring/transactions-page#tx_functions">transaction type</a>.</p>
        <p>If not supplied, the group defaults to <code>Function</code> in expectation that the name is of the form <code>module:class.function</code> or <code>module:function</code> and represents the name of the function being executed. If you are creating a custom group, we recommends you prefix it with <code>Python/</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>scheme</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. The scheme portion of the request URL</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>host</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. The host portion of the request URL</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>port</code></p>
        <p><em>integer</em></p>
      </div>
      <div>
        <p>Optional. The port portion of the request URL</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>request_method</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. The HTTP request method, such as GET or POST</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>request_path</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. The remainder of the request URL's path</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>query_string</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. The portion of the request URL that follows the question mark</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>headers</code></p>
        <p><em>iterable or dict</em></p>
      </div>
      <div>
        <p>Optional. The HTTP request headers An iterable of [name, value] two-item iterables or dict of {name:value}, where name is the header name, and value is the header value</p>
      </div>
    </div>
  </div>
</div>
<h3>Wrapper parameters: [#wrapper-params]</h3>
<pre><code>newrelic.agent.WebTransactionWrapper(wrapped, application=None, name=None, group=None, scheme=None, host=None, port=None, request_method=None, request_path=None, query_string=None, headers=None)
</code></pre>
<p><code>WebTransactionWrapper</code> takes the same <a href="#main-params">parameters</a> as the <code>web_transaction</code> decorator and this additional <code>wrapped</code> parameter:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>wrapped</code></p>
        <p><em>method</em></p>
      </div>
      <div>
        <p>Required. The method to be traced.</p>
      </div>
    </div>
  </div>
</div>
<h3>Path-based parameters: [#path-based-params]</h3>
<pre><code>newrelic.agent.wrap_web_transaction(module, object_path, application=None, name=None, group=None, scheme=None, host=None, port=None, request_method=None, request_path=None, query_string=None, headers=None)
</code></pre>
<p><code>wrap_web_transaction</code> takes the same <a href="#main-params">parameters</a> as the <code>web_transaction</code> decorator plus these additional parameters:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>module</code></p>
        <p><em>module</em> or <em>string</em></p>
      </div>
      <div>
        <p>Required. The module containing the web function/activity you are instrumenting.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>object_path</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Required. The path to the module.</p>
      </div>
    </div>
  </div>
</div>
<h2>Examples</h2>
<h3><code>web_transaction</code> decorator example [#bg_task_example]</h3>
<p>Here's an example of using the web_transaction decorator:</p>
<pre><code>@newrelic.agent.web_transaction()
def get():
    ...
</code></pre>
<h3><code>WebTransactionWrapper</code> example [#wrapper-example]</h3>
<p>An example of using the <code>WebTransactionWrapper</code>:</p>
<pre><code>task = newrelic.agent.WebTransactionWrapper(get_next_task())
result = task(*args, **kwargs)
</code></pre>
