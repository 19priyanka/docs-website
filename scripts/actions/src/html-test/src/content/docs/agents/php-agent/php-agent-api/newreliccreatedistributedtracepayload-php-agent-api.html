
<h2>Syntax</h2>
<pre><code>newrelic_create_distributed_trace_payload()
</code></pre>
<p>Creates a distributed trace payload.</p>
<h2>Requirements</h2>
<p>Requires PHP agent <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/php-release-notes">version 8.4 or higher</a>.</p>
<h2>Description</h2>
<p><a href="https://docs.newrelic.com/docs/agents/php-agent/features/distributed-tracing-php">Distributed tracing</a> allows you to see the path that a request takes as it travels through a distributed system.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>With PHP agent <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/php-release-notes">version 9.10 or</a> higher, the following JSON functions are now considered deprecated and will be removed in a future release:</p>
  <pre><code>newrelic_create_distributed_trace_payload()newrelic_accept_distributed_trace_payload($payload)newrelic_accept_distributed_trace_payload_httpsafe($payload)
</code></pre>
  <p>Instead, use the API that is compatible with W3C Trace Context support, added in agent version 9.8. With this, the API for manually instrumenting applications has changed from the JSON payload related functions to the following header array forms:</p>
  <pre><code>newrelic_insert_distributed_trace_headers($outbound_headers)newrelic_accept_distributed_trace_headers($inbound_headers)
</code></pre>
</div>
<h2>Return values</h2>
<p>This method returns an object of type <code>newrelic\DistributedTracePayload.</code>This object has two methods that will render a distributed trace payload as text.</p>
<pre><code>$payload = newrelic_create_distributed_trace_payload();// renders the payload as a JSON string$jsonText = $payload->text();// renders the payload as an string suitable for transport via HTTP (query string, POST param, HTTP headers, etc.)$httpSafeString = $payload->httpSafe();
</code></pre>
<h2>Examples</h2>
<p>For examples of how and when to use this API method, see the documentation to <a href="https://docs.newrelic.com/docs/agents/php-agent/features/distributed-tracing-php#manual">manually instrument applications and services</a>.</p>
