
<p>With New Relic's Java agent, you can track everything from performance issues to tiny errors within your code. Every minute the agent posts <a href="/docs/data-analysis/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data">metric timeslice and event data</a> to the New Relic user interface, where the owner of that data can sign in and use the data to see how their website is performing.</p>
<h2>Installation</h2>
<p>To use the Java agent:</p>
<ol>
  <li>Make sure your system meets the <a href="/docs/compatibility-requirements-java-agent">Java agent's compatibility requirements</a>.</li>
  <li><a href="/docs/accounts-partnerships/accounts/account-setup/creating-your-new-relic-account">Sign up</a> for a New Relic account.</li>
  <li>Install the Java agent using our launcher, or by following the <a href="/docs/agents/java-agent/installation/java-agent-manual-installation">standard installation procedures</a>. Depending on your tools and frameworks, refer to <a href="/docs/agents/java-agent/additional-installation">additional installation procedures</a> to install or configure the Java agent.</li>
</ol>
<div data-component="ButtonLink" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJyb2xlIiwidmFsdWUiOiJidXR0b24ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidG8iLCJ2YWx1ZSI6Ii9kb2NzL2FnZW50cy9qYXZhLWFnZW50L2luc3RhbGxhdGlvbi9pbnN0YWxsLWphdmEtYWdlbnQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidmFyaWFudCIsInZhbHVlIjoibGluayJ9XQ==">
  <p>Read the install docs</p>
</div>
<div data-component="ButtonLink" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJyb2xlIiwidmFsdWUiOiJidXR0b24ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidG8iLCJ2YWx1ZSI6Imh0dHBzOi8vb25lLm5ld3JlbGljLmNvbS9sYXVuY2hlci9ucjEtY29yZS5zZXR0aW5ncz9wYW5lPWV5SnVaWEprYkdWMFNXUWlPaUowZFdOemIyNHVjR3huTFdsdWMzUnlkVzFsYm5RdFpYWmxjbmwwYUdsdVp5SjkmY2FyZHNbMF09ZXlKdVpYSmtiR1YwU1dRaU9pSnpaWFIxY0MxdVpYSmtiR1YwY3k1elpYUjFjQzFxWVhaaExXbHVkR1ZuY21GMGFXOXVJaXdpWVdOamIzVnVkRWxrSWpveU5qUXdOREE1ZlE9PSZwbGF0Zm9ybVthY2NvdW50SWRdPTEifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidmFyaWFudCIsInZhbHVlIjoicHJpbWFyeSJ9XQ==">
  <p>Add Java data</p>
</div>
<p>To <a href="/docs/apm/applications-menu/monitoring/apm-overview-page">view your app's performance in the New Relic UI</a>, go to <strong><a href="https://one.newrelic.com">https://one.newrelic.com</a> > APM > (select an app) > Summary</strong>. The APM user interface includes a dedicated <a href="/docs/agents/java-agent/features/jvm-metrics-page"><strong>JVM metrics</strong> page</a>, <a href="/docs/apm/transactions">transaction</a> and <a href="/docs/apm/applications-menu/error-analytics/introduction-error-analytics">error</a> details, a <a href="/docs/apm/applications-menu/events/thread-profiler-tool">thread profiler tool</a> to sample Java threads and report stack traces, and <a href="/docs/apm/applications-menu">more</a>.</p>
<p>You can also <a href="#extend-instrumentation">extend your agent instrumentation</a> and explore your data with other New Relic products, including New Relic One's <a href="/docs/query-your-data/explore-query-data/data-explorer/introduction-data-explorer">data explorer</a> and <a href="/docs/query-your-data/explore-query-data/dashboards/introduction-new-relic-one-dashboards">dashboards</a>.</p>
<h2>Startup configuration [#h2-startup]</h2>
<p>The Java agent reads the startup configuration from the <code>newrelic.yml</code> file, which must be in the same directory as <code>newrelic.jar</code>. You can also override settings using Java system properties.</p>
<p>The agent needs the <code>license_key</code> and <code>app_name</code> settings at startup (bootstrap). You can <a href="/docs/agents/java-agent/configuration/java-agent-configuration-config-file">customize</a> the location of the log file and other settings in your <code>newrelic.yml</code> file. In addition, you can adjust the naming configuration if your app server runs <a href="/docs/agents/java-agent/configuration/automatic-application-naming">multiple applications in the same JVM</a>.</p>
<h2>Configuration options [#h2-configuration]</h2>
<p>You can configure application reporting from the New Relic web interface using <a href="/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration">server-side configuration</a>. Changes will be applied to all agents reporting for your application when the JVM restarts. However, if you use server-side configuration, you must still maintain required settings (<code>license_key</code> and <code>app_name</code>) in the local config file.</p>
<p>Both transaction traces and error snapshots can optionally record HTTP parameters. Sometimes HTTP parameters contain sensitive information, such as a credit card number. The agent has several <a href="/docs/agents/java-agent/getting-started/apm-agent-security-java">configuration options to ensure data security</a>, such as collecting HTTP parameters but excluding certain named parameters.</p>
<h2>Additional instrumentation [#extend-instrumentation]</h2>
<p>After installing the Java agent, use any of these methods to extend your instrumentation:</p>
<ul>
  <li><a href="/docs/agents/manage-apm-agents/agent-metrics/custom-instrumentation">Custom instrumentation:</a> Implement Java custom instrumentation via annotation or XML.</li>
  <li><a href="/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing">Enable distributed tracing</a><a href="/docs/agents/manage-apm-agents/agent-metrics/collect-custom-attributes">:</a> See the paths of your requests as they spread across a distributed, multiple-services architecture.</li>
  <li><a href="/docs/agents/manage-apm-agents/agent-metrics/collect-custom-attributes">Collect custom attributes:</a> Collect custom attributes via API or XML file.</li>
  <li><a href="/docs/agents/java-agent/custom-instrumentation/java-agent-api">Java agent API:</a> Use the API to control, customize, or extend the functionality of the Java agent.</li>
  <li><a href="/docs/browser/new-relic-browser/page-load-timing-resources/page-load-timing-process">Browser instrumentation:</a> Integrate the Java agent with <a href="/docs/browser/new-relic-browser/getting-started/new-relic-browser">Browser monitoring</a> to gain visibility into end-user activity.</li>
  <li><a href="/docs/agents/java-agent/custom-instrumentation/circuit-breaker-java-custom-instrumentation">Circuit breaker for Java custom instrumentation:</a> Use a circuit breaker to protect applications from over-instrumentation.</li>
  <li><a href="/docs/agents/java-agent/custom-instrumentation/custom-jmx-instrumentation-yaml">Custom JMX instrumentation by YAML:</a> View custom JMX metrics with a YAML custom instrumentation file.</li>
  <li><a href="/docs/apm/applications-menu/monitoring/jvm-metrics-page">JVM metrics page:</a> Collect metrics from the most common application servers through JMX.</li>
  <li><a href="/docs/integrations/open-source-telemetry-integrations/get-started/introduction-new-relics-open-source-telemetry-integrations">Open source telemetry:</a> We offer a variety of tools, such as <a href="/docs/integrations/open-source-telemetry-integrations/open-source-telemetry-integration-list/kamon-reporter">Kamon Reporter</a>, <a href="/docs/integrations/open-source-telemetry-integrations/open-source-telemetry-integration-list/new-relics-opentelemetry-integration">OpenTelemetry exporter</a>, <a href="/docs/integrations/open-source-telemetry-integrations/open-source-telemetry-integration-list/new-relics-micrometer-integration">Micrometer metrics registry</a>, and <a href="/docs/data-ingest-apis/get-data-new-relic/new-relic-sdks/telemetry-sdks-send-custom-telemetry-data-new-relic">Java Telemetry SDK</a>.</li>
</ul>
<h2>When to restart your JVM [#jvm_restart]</h2>
<p>When you make a change to your configuration or to your custom XML, in almost all cases you must restart your JVM. There are only four situations where a restart is <strong>not</strong> necessary:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>JVM restart is not required for...</strong></p>
      </div>
      <div>
        <p><strong>Comments</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Log level or audit mode changes</p>
      </div>
      <div>
        <p>If you are simply changing the <code>log_level</code> or <code>audit_mode</code> in the <a href="/docs/agents/java-agent/configuration/java-agent-configuration-config-file">Java agent configuration file</a>, you do not need to restart the JVM.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Custom instrumentation XML file</p>
      </div>
      <div>
        <p>JVM restart depends on your Java agent version:</p>
        <ul>
          <li>3.15.0 or higher: If you are updating a custom instrumentation XML file in the extensions folder, the updates will be reloaded automatically within a minute.</li>
          <li>Java agent versions lower than 3.15.0: If you using an agent version earlier than 3.15.0, you must restart the JVM.</li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p>Circuit breaker changes</p>
      </div>
      <div>
        <p>If you are <a href="/docs/agents/java-agent/custom-instrumentation/circuit-breaker-java-custom-instrumentation#troubleshooting">changing the circuit breaker</a> for Java custom instrumentation, a JVM restart is not required.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Ignored or expected errors</p>
      </div>
      <div>
        <p>If you are ignoring or expecting errors by configuring the <code>newrelic.yml</code> file, a JVM restart is not required. This includes adding status codes or classes to the <code>newrelic.yml</code> file when using the Java agent version 3.40.0 or higher. For example:</p>
        <ul>
          <li><code>ignore_status_codes</code></li>
          <li><code>expected_status_codes</code></li>
          <li><code>ignore_classes</code></li>
          <li><code>ignore_messages</code></li>
          <li><code>expected_classes</code></li>
          <li><code>expected_messages</code></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<p>All other changes require an agent restart, which means restarting the JVM.</p>
<h2>JSR 163 compliance [#jvm]</h2>
<p>The New Relic Java agent monitors web transactions, receiving information about them and communicating that information to the New Relic user interface with strong <a href="/docs/accounts-partnerships/accounts/security/data-security">data security</a> measures in place. The agent is packaged as a JSR 163 compliant <code>javaagent</code> that is activated by the JVM through modifications to the JVM launch. Once activated, the agent inserts itself into the class loading stream and instruments class methods using byte code instrumentation (bci).</p>
<p>Designed to have minimal impact on your web application, all of the classes are in the <code>newrelic</code> package namespace so they do not collide with your own classes. The agent uses the ASM bci engine to insert software probes.</p>
<p>The agent receives basic information about your host environment, such as operating system, Java version, system properties, and your New Relic configuration file. The agent also polls data from the JVM and from JMX.</p>
<h2>Troubleshooting procedures [#troubleshoot]</h2>
<p>If you encounter problems with the Java agent, see the <a href="/docs/agents/java-agent/troubleshooting">troubleshooting documentation</a>.</p>
