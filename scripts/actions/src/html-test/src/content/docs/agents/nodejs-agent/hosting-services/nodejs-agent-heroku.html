
<p><a href="https://devcenter.heroku.com/articles/newrelic">Heroku</a> is a Platform as a Service (PaaS) solution for hosting web applications in various agent languages, including Node.js. With New Relic, you can extend Heroku with metrics from <a href="/docs/apm/new-relic-apm">APM</a> and <a href="/docs/browser/new-relic-browser">browser monitoring</a>.</p>
<p>Here we describe special considerations for using Heroku as a hosting service with New Relic's Node.js agent.</p>
<h2>Install the agent add-on [#installing]</h2>
<p>After deploying your Node.js app on Heroku, install the New Relic agent. Installing the add-on automatically creates a private New Relic account and configures access for Heroku servers.</p>
<p>To install the New Relic add-on through the <a href="https://addons.heroku.com/newrelic">Heroku website's Add-on page for New Relic</a>, you must be logged in to Heroku.</p>
<ol>
  <li>
    <p>From Heroku's Add-on page for New Relic, select the <a href="https://addons.heroku.com/newrelic#plan_selector">appropriate subscription plan</a>. Then run this toolbelt command:</p>
    <pre><code>heroku addons:create newrelic:$planlevel
</code></pre>
  </li>
  <li>
    <p>From <strong>Select an app</strong>, select your New Relic app.</p>
  </li>
  <li>
    <p>Use this toolbelt command to give your app a <a href="/docs/apm/new-relic-apm/installation-configuration/name-your-application">descriptive name</a>:</p>
    <pre><code>heroku config:set NEW_RELIC_APP_NAME='Your Application Name'
</code></pre>
  </li>
  <li>
    <p>If you are using environment variables instead of your <code>newrelic.js</code> config file settings to <a href="#variables">customize your Node.js agent configuration</a>, use this toolbelt command:</p>
    <pre><code>heroku config:set NEW_RELIC_NO_CONFIG_FILE='true'
</code></pre>
  </li>
  <li>
    <p>Verify your New Relic app name, <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">license key</a>, and <a href="/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#logging_config">log setting</a>:</p>
    <pre><code>heroku config
</code></pre>
  </li>
  <li>
    <p>Install the Node.js agent and save to your <code>npm</code> dependencies.</p>
    <pre><code>npm install newrelic --save
</code></pre>
  </li>
  <li>
    <p>To ensure that the <code>newrelic</code> package is properly included in your <code>package.json</code> file when you push to Heroku, install the <a href="/docs/agents/nodejs-agent/installation-configuration/installing-maintaining-nodejs">New Relic Node.js agent package</a> on your local system. Include New Relic on the first line of your app's main module:</p>
    <pre><code>require ('newrelic');
</code></pre>
  </li>
  <li>
    <p>Run the following commands:</p>
    <pre><code>git add . &#x26;&#x26; git commit -m "Add New Relic"
git push heroku master &#x26;&#x26; heroku logs  --tail
</code></pre>
  </li>
  <li>
    <p>Restart your dyno.</p>
  </li>
  <li>
    <p>Generate some traffic to your app.</p>
  </li>
</ol>
<p>New Relic will begin monitoring application performance, end user experience, and host performance collected after the add-on is installed. Within a few minutes, data should start appearing in your <a href="/docs/apm/applications-menu/monitoring/apm-overview-page">APM <strong>Summary</strong> page</a>.</p>
<h2>Troubleshoot your installation [#troubleshooting]</h2>
<p>If no data appears within a few minutes after you complete the installation procedures, follow the <a href="/docs/agents/nodejs-agent/troubleshooting/troubleshooting-your-nodejs-installation">Node.js agent troubleshooting procedures</a>.</p>
<h2>Customize your configuration [#variables]</h2>
<p>You can customize the New Relic <a href="/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#methods-and-precedence"><code>newrelic.js</code> config file</a> for your Node.js agent. You can also use New Relic's Node.js agent environment variables in the Heroku environment to override your config file values.</p>
<p>Here is an example of using the Heroku command line to set environment variables instead of using your <code>newrelic.js</code> config file.</p>
<pre><code>$ heroku config:set NEW_RELIC_LICENSE_KEY=your license key
$ heroku config:set NEW_RELIC_APP_NAME=your production app name
$ heroku config:set NEW_RELIC_NO_CONFIG_FILE='true'
</code></pre>
<p>To confirm your settings from the command line, use:</p>
<pre><code>$ heroku config
</code></pre>
<h2>Upgrade from an existing New Relic installation [#upgrading]</h2>
<p>To upgrade your Node.js agent version if New Relic is already installed, use this toolbelt command:</p>
<pre><code>npm install newrelic --save
</code></pre>
<h2>For more help [#more_help]</h2>
<p>Additional documentation resources include:</p>
<ul>
  <li><a href="/docs/accounts-partnerships/partnerships/heroku-new-relic">Heroku and New Relic</a> (additional topics for Heroku users)</li>
  <li><a href="//devcenter.heroku.com/articles/newrelic">Heroku Dev Center</a> (information on the Heroku site on installing New Relic)</li>
</ul>
