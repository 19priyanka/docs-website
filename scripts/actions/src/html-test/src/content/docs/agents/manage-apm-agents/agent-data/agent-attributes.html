
<p>Attributes are key-value pairs containing information that determines the properties of an event or transaction. You can view these key-value pairs within <a href="/docs/apm/transactions/transaction-traces/transaction-traces">transaction traces</a>, and in Insights or other products which use <a href="/docs/data-analysis/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data">event data</a>. New Relic gives users the ability to customize exactly which attributes will be sent to each of these <a href="#destinations">destinations</a>.</p>
<p>You can also collect <a href="/docs/apm/other-features/attributes/collecting-custom-attributes">custom attributes</a> to send additional data to APM and Insights.</p>
<h2>Attribute destination flow [#destination-flow]</h2>
<p>This diagram illustrates how an agent decides to send <a href="#types">attributes</a> to each <a href="#destinations">destination</a>.</p>
<p>
  <img src="./images/nr-attribute-collection-diagram.png" alt="nr attribute collection diagram.png" title="nr attribute collection diagram.png">
</p>
<p><strong>Agent attribute collection:</strong> An agent makes three different decisions when sending an attribute to any New Relic destination based on the relevant property settings. Property names and syntax vary by agent. (The properties in this diagram are specific to the PHP agent, but the general flow is the same for all agents. Property names and syntax vary by agent.)</p>
<h2>Types of attributes [#types]</h2>
<p>Attributes can be collected in a variety of ways:</p>
<ul>
  <li><strong>Message property attributes:</strong> These are the properties set on a message received from a queue or topic.</li>
  <li><strong>HTTP request attributes:</strong> These are the parameters for an HTTP request.</li>
  <li><strong>User attributes:</strong> These are attributes provided by the user through each agent's API.</li>
  <li><strong>Agent attributes:</strong> These are attributes captured by the agent; for example, <code>httpResponseCode</code> and <code>httpResponseMessage</code>.</li>
</ul>
<h2>Destinations for attributes [#destinations]</h2>
<p>Collected attributes appear in these locations:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Collected attributes</strong></p>
      </div>
      <div>
        <p><strong>Location</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><a href="/docs/apm/transactions/transaction-traces/introduction-transaction-traces">Transaction traces</a></p>
      </div>
      <div>
        <p>Each minute transaction traces collect data for your slowest individual HTTP requests. These traces will report attributes collected during the transaction.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/apm/applications-menu/error-analytics/error-analytics-manage-error-traces">Traced errors</a></p>
      </div>
      <div>
        <p>If a transaction results in an error, these traced errors will be reported to New Relic APM. A traced error will contain attributes collected during the transaction.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/insights/insights-data-sources/default-events-attributes/apm-default-event-attributes">Insights transaction events</a></p>
      </div>
      <div>
        <p>APM transactions that are reported to New Relic Insights will contain <a href="/docs/insights/new-relic-insights/decorating-events/insights-attributes">attributes</a> collected during the transaction.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/insights/insights-data-sources/default-events-attributes/browser-default-events-attributes-insights">Insights page views</a></p>
      </div>
      <div>
        <p>Browser page views reported to New Relic Insights will contain <a href="/docs/insights/new-relic-insights/decorating-events/insights-attributes">attributes</a> collected during the transaction. However, attributes collected at the end of a transaction may not appear under Insights <code>PageView</code> events. This destination is also called browser monitoring.</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="https://docs.newrelic.com/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing">Span events</a></p>
      </div>
      <div>
        <p>Span events collected for distributed tracing will contain attributes collected during the span.</p>
        <p>The following agents support the addition of custom user attributes to span events:</p>
        <ul>
          <li><a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes/java-agent-5130">Java agent 5.13.0 and above</a></li>
          <li><a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/net-release-notes/net-agent-8252140">.NET agent 8.25 and above</a></li>
          <li><a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/go-release-notes/go-agent-360">Go agent 3.6.0 and above</a></li>
          <li><a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/nodejs-release-notes/node-agent-6100">Node agent 6.10.0 and above</a></li>
          <li><a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/python-release-notes/python-agent-580136">Python agent 5.8.0.136 and above</a></li>
          <li><a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/ruby-release-notes/ruby-agent-680360">Ruby agent 6.8.0 and above</a></li>
        </ul>
      </div>
    </div>
    <div>
      <div>
        <p><a href="https://docs.newrelic.com/docs/apm/transactions/transaction-traces/transaction-trace-details">Transaction segments</a></p>
      </div>
      <div>
        <p>Each segment in a transaction trace will contain attributes recorded for that segment.</p>
      </div>
    </div>
  </div>
</div>
<h2>Viewing request attributes [#viewing]</h2>
<p>Request attributes are associated with specific transaction traces, browser traces, and errors in New Relic APM and New Relic Insights. You can see the attributes recorded with a request when viewing the individual <a href="/docs/apm/transactions/transaction-traces/introduction-transaction-traces#find-view">trace</a> or <a href="/docs/apm/applications-menu/error-analytics/error-analytics-explore-events-behind-errors">error</a>. In Insights, custom attributes can be <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-syntax-components-functions#syntax">queried via NRQL</a> exactly like any other attribute.</p>
<p>
  <img src="./images/screen-tx-trace-attributes.png" alt="screen-tx-trace-attributes.png" title="screen-tx-trace-attributes.png">
</p>
<p><strong>APM > (select an app) > Monitoring > Transactions > (select a transaction) > (select a trace):</strong> Here is an example from the Ruby agent of the <strong>Request attributes</strong> and <strong>Custom attributes</strong> for a transaction trace. Exact attributes depend on your agent and on your attribute configuration.</p>
<h2>Limits [#attlimits]</h2>
<p>User attributes, request attributes, and message queue parameters are limited by count and size.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Parameter</strong></p>
      </div>
      <div>
        <p><strong>Limitations</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Transaction</p>
      </div>
      <div>
        <p>Limited to 64 user attributes</p>
      </div>
    </div>
    <div>
      <div>
        <p>Attribute key</p>
      </div>
      <div>
        <p>Limited to 256 bytes each</p>
        <p>If the key is more than 256 bytes, then the attribute will not be recorded.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Attribute value</p>
      </div>
      <div>
        <p>Limited to 256 bytes each</p>
        <p>If the value is greater than 256 bytes, then the attribute value will be truncated.</p>
      </div>
    </div>
  </div>
</div>
<h2>Agent-specific attributes [#agent-specific]</h2>
<p>Each New Relic APM agent <a href="/docs/agents/manage-apm-agents/agent-data/collect-custom-attributes">collects custom attributes</a>. The supported attributes depend on the specific agent:</p>
<ul>
  <li><a href="/docs/agents/c-sdk/instrumentation/use-default-or-custom-attributes-c-sdk">C SDK</a></li>
  <li><a href="/docs/agents/go-agent/instrumentation/go-agent-attributes">Go</a></li>
  <li><a href="/docs/agents/java-agent/attributes/enabling-disabling-attributes-java">Java</a></li>
  <li><a href="/docs/agents/net-agent/attributes/net-agent-attributes">.NET</a></li>
  <li><a href="/docs/agents/nodejs-agent/attributes/nodejs-agent-attributes">Node.js</a></li>
  <li><a href="/docs/agents/php-agent/attributes/php-agent-attributes">PHP</a></li>
  <li><a href="/docs/agents/python-agent/attributes/python-agent-attributes">Python</a></li>
  <li><a href="/docs/agents/ruby-agent/attributes/ruby-agent-attributes">Ruby</a></li>
</ul>
