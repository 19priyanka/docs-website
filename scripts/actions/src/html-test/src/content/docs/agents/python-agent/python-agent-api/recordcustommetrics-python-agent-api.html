
<h2>Syntax</h2>
<pre><code>newrelic.agent.record_custom_metrics(metrics, application=None)
</code></pre>
<p>Records a set of custom metrics.</p>
<h2>Description</h2>
<p>This call records a set of <a href="/docs/agents/manage-apm-agents/agent-data/custom-metrics">custom metrics</a>. To record a single custom metric, see <a href="/docs/agents/python-agent/python-agent-api/record_custom_metric"><code>record_custom_metric</code></a>.</p>
<p>The passed metrics can be any iterable object that yields <code>(name, value)</code> tuples. For example:</p>
<pre><code>def metrics():  yield 'Custom/Value-1', 1  yield 'Custom/Value-2', 2  yield 'Custom/Value-3', 3newrelic.agent.record_custom_metrics(metrics())
</code></pre>
<p>There are no restrictions on setting the name, but it's recommended you use a <code>Custom/</code> prefix. The custom metric value can be a numeric, or can be a dictionary corresponding to an already-aggregated data sample. For more about the <code>name</code> and <code>value</code> rules, see <a href="/docs/agents/python-agent/python-agent-api/record_custom_metric"><code>record_custom_metric</code></a>.</p>
<h2>Parameters</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>metrics</code></p>
        <p><em>iterable object</em></p>
      </div>
      <div>
        <p>Required. Set of metric values, which can be in the form of any iterable object that yields <code>(name, value)</code> tuples. See <a href="/docs/agents/python-agent/python-agent-api/record_custom_metric"><code>record_custom_metric</code></a> parameters for more information about <code>name</code> and <code>value</code> rules and suggestions.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>application</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. If the application is the default value of <code>None</code>, the agent associates the custom metrics with the parent app of the current transaction. Thus, you should provide the application unless this method is used in code for a web transaction or background task.</p>
      </div>
    </div>
  </div>
</div>
<h2>Return values</h2>
<p>None.</p>
<h2>Examples</h2>
<h3>Recording custom metrics [#metrics-example]</h3>
<pre><code>def metrics():
  yield 'Custom/Value-1', 1
  yield 'Custom/Value-2', 2
  yield 'Custom/Value-3', 3

newrelic.agent.record_custom_metrics(metrics())
</code></pre>
