
<p>The PHP agent captures special metrics for Drupal websites. When these metrics are collected, a <strong>Drupal</strong> tab appears in the New Relic user interface: Go to <a href="http://one.newrelic.com/"><strong>one.newrelic.com</strong></a> <strong>> APM > (select a Drupal app)</strong>.</p>
<h2>Configuration</h2>
<p>The collection of Drupal-specific metrics can be controlled by <a href="/docs/php/php-agent-phpini-settings#inivar-framework-drupal-modules"><code>newrelic.framework.drupal.modules</code></a>. It is enabled by default (in versions <strong>3.0</strong> or higher), and can be disabled with:</p>
<pre><code>newrelic.framework.drupal.modules = 0
</code></pre>
<p>Though this setting uses the word "modules," it controls the collection of all Drupal metrics: modules, views, and hooks.</p>
<h2>Metrics</h2>
<p>The PHP agent collects metrics for the following:</p>
<ul>
  <li><strong>Modules</strong>: Versions 2.5 or higher. These metrics indicate time spent within each Drupal module. In versions 3.5 or higher, time is calculated from the hook dispatch functions <code>module_invoke</code> and <code>module_invoke_all</code>. In previous versions, time was calculated from functions from a file with the ".module" extension where the file name and function prefix were a match.</li>
  <li><strong>Hooks</strong>: Versions 3.5 or higher. These metrics indicate time spent within each Drupal hook. Time is calculated from the hook dispatch functions <code>module_invoke</code> and <code>module_invoke_all</code>.</li>
  <li><strong>Views</strong>: Versions 3.5 or higher. These metrics indicate time spent within a view's <code>view::execute</code> method.</li>
</ul>
<h2>Drupal and Browser instrumentation [#page-load-timing-rum]</h2>
<p>In Drupal 7.15, <strong>Compress cached pages</strong> is turned on by default. If you also select <strong>Cache pages for anonymous users</strong>, the New Relic Browser JavaScript is not inserted into the served pages for anonymous users. This is because Drupal's pages are compressed directly from the database before they are stored in the cache (with gzip), so New Relic's PHP agent does not have a chance to parse any HTML.</p>
<p>In this situation, manual instrumentation provides a better opportunity to capture data for anonymous users. For more information, see <a href="/docs/php/page-load-timing-in-php">Browser monitoring and the PHP agent</a>.</p>
<h2>Cron tasks [#cron]</h2>
<p>Drupal supports periodically executing tasks to perform routine maintenance or similar work on behalf of installed Drupal modules. These tasks can be run without any manual involvement beyond the initial configuration. Commonly, these are referred to as <a href="https://drupal.org/cron" title="Link opens in a new window">cron tasks</a>. Starting in version 4.3, the New Relic PHP agent detects the execution of these tasks and automatically marks them as <a href="/docs/features/monitoring-background-processes#ui">background transactions</a> regardless of how they were started.</p>
