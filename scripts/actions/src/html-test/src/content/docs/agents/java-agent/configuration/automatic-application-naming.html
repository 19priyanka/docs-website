
<p>The names you give to your applications can help organize your New Relic performance metrics.</p>
<p>New Relic's Java agent reports all transactions and other metrics in a single JVM to the application name specified in <code>newrelic.yml</code> under the setting <code>app_name</code> (for more information about application naming, see <a href="/docs/agents/java-agent/configuration/name-your-java-application">Name your Java application</a>). By changing <code>enable_auto_app_naming</code> in <code>newrelic.yml</code> to <code>true</code>, applications will be named for their context, filter, servlet, or request attribute.</p>
<p>This setting allows you to run several web applications in a single JVM while reporting transactions, errors, and metrics to other appropriate applications in the New Relic user interface. Background tasks will still use the default application name from the <code>newrelic.yml</code>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>These configuration changes require a JVM restart to take effect.</p>
  <p>This configuration does NOT work with Infinite Tracing enabled.</p>
</div>
<h2>Application name sources [#enable-auto-app-naming]</h2>
<p>When you set <code>enable_auto_app_naming</code> to <code>true</code>, New Relic uses the following sources of information to name your applications:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>App type</strong></p>
      </div>
      <div>
        <p><strong>Naming source</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Background tasks</p>
      </div>
      <div>
        <p>The default application name from <code>newrelic.yml</code></p>
      </div>
    </div>
    <div>
      <div>
        <p>Web transactions</p>
      </div>
      <div>
        <p>In order by priority:</p>
        <ul>
          <li>Request attribute (highest priority)</li>
          <li>Servlet init parameter</li>
          <li>Filter init parameter</li>
          <li>Web app context parameter</li>
          <li>Web app context name (display-name)</li>
          <li>Web app context path (lowest priority)</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<h2>Request attribute</h2>
<p>The <code>APPLICATION_NAME</code> request attribute takes precedence over any settings in the XML. Set this attribute as early as possible in the web transaction. If called multiple times, the last invocation determines the application name.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p><code>APPLICATION_NAME</code> only works with ServletRequests.</p>
</div>
<p>To use the request attribute for fine-grained application naming based on the request URI:</p>
<pre><code>protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    ...
   String requestUri = httpServletRequest.getRequestURI();

   if (requestUri.startsWith("/my-special-request/")) {
       request.setAttribute("com.newrelic.agent.APPLICATION_NAME", "MySpecialWebApp");
    }
    ...
</code></pre>
<h2>Servlet init parameter [#servlet-init-param]</h2>
<p>To set the application name for individual servlets in <code>web.xml</code> using <strong>init parameters</strong>:</p>
<pre><code>&#x3C;servlet>
 &#x3C;servlet-name>SqlServlet&#x3C;/servlet-name>
 &#x3C;servlet-class>test.SqlServlet&#x3C;/servlet-class>
 &#x3C;init-param>
   &#x3C;param-name>com.newrelic.agent.APPLICATION_NAME&#x3C;/param-name>
   &#x3C;param-value>MyServletApp&#x3C;/param-value>
 &#x3C;/init-param>
&#x3C;/servlet>
</code></pre>
<p>The agent obtains the value of the <code>init-param</code> by calling</p>
<pre><code>javax.servlet.ServletConfig#getInitParameter(String)
</code></pre>
<p>with the argument <code>com.newrelic.agent.APPLICATION_NAME</code>.</p>
<p>If a web request calls multiple servlets, the <code>init-param</code> of the first servlet to finish has precedence. A servlet that does not have an <code>init-param</code> uses the default application name for the web app.</p>
<p>Besides declaring the application name in XML, you can also set it in your application code by storing an attribute in the javax.servlet.ServletRequest:</p>
<pre><code>protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    ...
    request.setAttribute("com.newrelic.agent.APPLICATION_NAME", "MyWebApp");
    ...
</code></pre>
<h2>Filter init parameter [#filter-init-param]</h2>
<p>If your web app does not have servlets, you can use an init parameter for a filter:</p>
<pre><code>&#x3C;filter>
  &#x3C;filter-name>SqlFilter&#x3C;/filter-name>
  &#x3C;filter-class>test.SqlFilter&#x3C;/filter-class>
  &#x3C;init-param>
    &#x3C;param-name>com.newrelic.agent.APPLICATION_NAME&#x3C;/param-name>
    &#x3C;param-value>MyFilterApp&#x3C;/param-value>
   &#x3C;/init-param>
&#x3C;/filter>
</code></pre>
<p>The agent obtains the value of the <code>init-param</code> by calling <code>javax.servlet.FilterConfig#getInitParameter(String)</code> with the argument <code>com.newrelic.agent.APPLICATION_NAME</code>. Servlets takes precedence over filters for application naming, so the init parameter for a filter is used only if no servlets were invoked. The <code>init-param</code> of the first filter to finish has precedence.</p>
<h2>Context parameter [#context-param]</h2>
<p>To use a context parameter to set the application name:</p>
<pre><code>&#x3C;context-param>
  &#x3C;param-name>com.newrelic.agent.APPLICATION_NAME&#x3C;/param-name>
  &#x3C;param-value>MyWebApp&#x3C;/param-value>
&#x3C;/context-param>
</code></pre>
<p>The agent obtains the value of the context parameter is by calling <code>javax.servlet.ServletContext#getInitParameter(String)</code> with the argument <code>com.newrelic.agent.APPLICATION_NAME</code>. The context parameter takes precedence over the <code>display-name</code> element.</p>
<h2>Display name</h2>
<p>To determine the application name by using the <code>display-name</code> element in the <code>web.xml</code>:</p>
<pre><code>&#x3C;display-name>MyWebApp&#x3C;/display-name>
</code></pre>
<p>The agent obtains the value of the <code>display-name</code> element by calling <code>javax.servlet.ServletContext#getServletContextName()</code>.</p>
<h2>Context path</h2>
<p>If there is no <code>display-name</code> element, and none of the other higher hierarchy methods are used to set the app name, the application name comes from the context path of the web app. The agent obtains the context path by calling <code>javax.servlet.ServletContext#getContextPath()</code>.</p>
<p>The context path is the portion of the request URI that is used to select the context of the request. The context path always comes first in a request URI. For example:</p>
<p>Consider the following URL:</p>
<pre><code>http://example.com/newrelic-axis2-ws/getWeather
</code></pre>
<p>In this URL:</p>
<ul>
  <li>The request URI is <code>/newrelic-axis2-ws/getWeather</code>.</li>
  <li>The context path is <code>/newrelic-axis2-ws</code>.</li>
  <li>The application is named <code>newrelic-axis2-ws</code>.</li>
</ul>
