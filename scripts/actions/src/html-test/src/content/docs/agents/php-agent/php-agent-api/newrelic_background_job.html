
<h2>Syntax</h2>
<pre><code>newrelic_background_job([bool $flag])
</code></pre>
<p>Manually specify that a transaction is a background job or a web transaction.</p>
<h2>Requirements</h2>
<p>Compatible with all agent versions.</p>
<h2>Description</h2>
<p>Tell the agent to treat this "web" transaction as a "non-web" transaction (the APM UI separates web and non-web transactions, for example in the <a href="/docs/apm/applications-menu/monitoring/transactions-page">Transactions page</a>). Call as early as possible. This is most commonly used for cron jobs or other long-lived background tasks. However, this call is usually unnecessary since the agent usually detects whether a transaction is a web or non-web transaction automatically.</p>
<p>You can also reverse the functionality by setting the optional flag to <code>false</code>, which marks a "non-web" transaction as a "web" transaction.</p>
<h2>Parameters</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>$flag</code></p>
        <p><em>boolean</em></p>
      </div>
      <div>
        <p>Optional. Defaults to <code>true</code>.</p>
        <p>If <code>true</code> or omitted, the current transaction is marked as a background job.</p>
        <p>If <code>false</code>, the transaction is marked as a web transaction.</p>
      </div>
    </div>
  </div>
</div>
<h2>Examples</h2>
<h3>Mark transaction as a background job [#mark-as-background]</h3>
<pre><code>function example() {
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
	    newrelic_background_job();
    }
    ...
}
</code></pre>
<h3>Mark transaction as a web transaction [#mark-as-web]</h3>
<pre><code>function example() {
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
	    newrelic_background_job(false);
    }
    ...
}
</code></pre>
