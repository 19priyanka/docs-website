
<h2>Syntax</h2>
<pre><code>newrelic_start_transaction(string $appname[, string $license])
</code></pre>
<p>Starts a new transaction, usually after manually ending a transaction.</p>
<h2>Requirements</h2>
<p>Agent version <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/php-release-notes/php-agent">3.0.5.95</a> or higher.</p>
<h2>Description</h2>
<p>Start a new transaction manually. Usually used after manually ending a transaction with <code>newrelic_end_transaction()</code>, for example when separating tasks in a job queue manager. When instrumenting this new transaction, the agent performs the same operations as when the script first started.</p>
<h2>Parameters</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>$appname</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Required. The <a href="/docs/agents/manage-apm-agents/app-naming/name-your-application">application name</a> to associate with data from this transaction. Uses the same format as <a href="/docs/agents/php-agent/configuration/php-agent-newrelicini-settings#inivar-appname"><code>newrelic.appname</code></a> and can set multiple application names by separating each with a semicolon <code>;</code>.</p>
        <p>While this option is required, you can read the app name from <code>newrelic.ini</code> with <code>ini_get("newrelic.appname")</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$license</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Optional. Defaults to the license key set in the New Relic agent's <code>newrelic.ini</code> file.</p>
        <p>Provide a different <a href="/docs/accounts-partnerships/accounts/account-setup/license-key#find-heroku">license key</a> if you want the transaction to report to a different New Relic account. If set, this license will supersede all per-directory and global default licenses configured in INI files.</p>
      </div>
    </div>
  </div>
</div>
<h2>Return values</h2>
<p>This function will return <code>true</code> if the transaction was successfully started.</p>
<h2>Examples</h2>
<h3>Stop a transaction, then start another [#stop-and-start]</h3>
<p>For task queue managers, you can use <code>newrelic_end_transaction()</code> and <code>newrelic_start_transaction()</code> together to manually separate transactions. This example uses <code>ini_get</code> to read the application name from the config file.</p>
<pre><code>function example() {
    ... // queuing logic
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
        newrelic_end_transaction(); // stop recording the current transaction
        newrelic_start_transaction(ini_get("newrelic.appname")); // start recording a new transaction
    }
    ... // more queuing logic
}
</code></pre>
<h3>Start a new transaction with a new license key [#start-license-key]</h3>
<p>This example manually specifies the app name and the license key:</p>
<pre><code>function example() {
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
        newrelic_start_transaction("App1", "01234567890abcde01234567890abcde01234567890");
    }
    ...
}
</code></pre>
