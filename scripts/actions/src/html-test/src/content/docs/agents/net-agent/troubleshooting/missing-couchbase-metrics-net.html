
<h2>Problem</h2>
<p>You see metrics and transaction segments for some of your Couchbase activity, but not all of it. For example, New Relic's .NET agent is not instrumenting calls to:</p>
<ul>
  <li><code>Get</code>(string key)</li>
  <li><code>GetDocument</code>(string key)</li>
  <li><code>Remove</code>(string key)</li>
  <li><code>Remove</code>(string key, ulong cas)</li>
  <li><code>Upsert&#x3C;T></code>(string key, T value)</li>
</ul>
<h2>Solution</h2>
<p>The Couchbase SDK contains methods for <code>Get</code>, <code>Remove</code>, and <code>Upsert</code> that act on multiple documents. These methods use multithreaded processes to call into other public methods in the Couchbase SDK.</p>
<p>To avoid double instrumentation, New Relic's .NET agent automatically instruments the multiple document methods. However, the agent does not automatically instrument the base methods they call into.</p>
<p>To see additional metrics and transaction segments for Couchbase activity, use either of these options:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Couchbase options</strong></p>
      </div>
      <div>
        <p><strong>Comments</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Use alternative methods</p>
      </div>
      <div>
        <p>Use other methods in the Couchbase SDK where .NET agent instrumentation is not disabled. For example, if you use <code>GetAsync</code>(string key) instead of <code>Get</code>(string key), your calls will be instrumented.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Edit instrumentation XML file</p>
      </div>
      <div>
        <p>If you do not use the multiple document methods in your application</p>
        <ol>
          <li>Comment out the methods in the instrumentation XML file for Couchbase.</li>
          <li>Comment back in the methods that are currently commented out.</li>
        </ol>
      </div>
    </div>
  </div>
</div>
