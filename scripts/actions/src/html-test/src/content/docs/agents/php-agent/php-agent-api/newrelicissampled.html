
<h2>Syntax</h2>
<pre><code>newrelic_is_sampled()
</code></pre>
<p>Returns a value indicating whether or not the current transaction is marked as sampled.</p>
<h2>Requirements</h2>
<p>Requires PHP agent <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/php-release-notes">version 9.3 or higher</a>.</p>
<p>Must be called inside a <a href="https://docs.newrelic.com/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction">transaction</a>.</p>
<h2>Description</h2>
<p>Returns a value indicating whether or not the current transaction is marked as sampled.</p>
<h2>Return values</h2>
<p>Returns <code>true</code> if distributed tracing is enabled, and the current transaction is marked as sampled, otherwise <code>false</code>.</p>
<h2>Examples</h2>
<h3>Populate B3 Headers for use with Zipkin</h3>
<p>Adds necessary distributed tracing metadata to the HTTP headers being sent to a Zipkin consumer:</p>
<pre><code>function make_http_request($url) {
  $metadata = newrelic_get_trace_metadata();
  $sampled = newrelic_is_sampled();

  $ch = curl_init($url);

  curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'X-B3-TraceId: ' . $metadata['trace_id'],
    'X-B3-SpanId: ' . substr(uniqid() . uniqid(), 0, 16),
    'X-B3-ParentSpanId: ' . $metadata['span_id'],
    'X-B3-Sampled: ' . $sampled));

  return curl_exec($ch);
}

$status = make_http_request("zipkin-consumer.example");
</code></pre>
