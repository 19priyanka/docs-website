
<p>Read on to learn how to enable and instrument <a href="/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing">distributed tracing</a> for the New Relic's C SDK.</p>
<h2>Enable distributed tracing [#enable]</h2>
<p>To enable distributed tracing for a New Relic-monitored C application:</p>
<ol>
  <li>
    <p>Create a default <a href="https://newrelic.github.io/c-sdk/structnewrelic__app__config__t.html"><code>newrelic_app_config_t</code></a> and set the <code>distributed_tracing.enabled</code> field to <code>true</code>.</p>
    <pre><code>newrelic_app_config_t* config
    = newrelic_create_app_config(app_name, license_key);
config->distributed_tracing.enabled = true;
</code></pre>
  </li>
  <li>
    <p>Continue with the procedures to <a href="#guidelines">instrument transactions and HTTP requests</a>.</p>
  </li>
</ol>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p><a href="https://newrelic.github.io/c-sdk/structnewrelic__span__event__config__t.html#details">Span events</a> can be enabled/disabled separately from distributed tracing.</p>
</div>
<h2>Instrument transactions and HTTP requests [#guidelines]</h2>
<p>For transactions that occur in multiple services, the distributed trace payload contains information that allows New Relic to stitch them together into a complete transaction trace. However, if New Relic-monitored services are not sending trace context to each other, it will result in incomplete trace details. For more information, see the documentation about <a href="/docs/understand-dependencies/distributed-tracing/enable-configure/enable-distributed-tracing#agent-apis">passing the distributed tracing API header</a> and the <a href="https://github.com/newrelic/c-sdk/blob/master/GUIDE.md#distributed-tracing">C SDK's distributed tracing documentation on GitHub</a>.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>If you want to...</p>
      </div>
      <div>
        <p>Use this</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Create and return a payload to be sent to the called service</p>
      </div>
      <div>
        <pre><code>newrelic_create_distributed_trace_payload()

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p>Accept a payload sent from the first service</p>
      </div>
      <div>
        <pre><code>newrelic_accept_distributed_trace_payload()

</code></pre>This will link these services together in a trace.
      </div>
    </div>
    <div>
      <div>
        <p>Return a base64-encoded JSON string representation of the payload</p>
      </div>
      <div>
        <pre><code>newrelic_create_distributed_trace_payload_httpsafe()

</code></pre>This offers the same behavior as `newrelic_create_distributed_trace_payload()`.
      </div>
    </div>
    <div>
      <div>
        <p>Accept a base64-encoded string for the payload</p>
      </div>
      <div>
        <pre><code>newrelic_accept_distributed_trace_payload_httpsafe()

</code></pre>This offers the same behavior as `newrelic_accept_distributed_trace_payload()`.
      </div>
    </div>
  </div>
</div>
