
<h2>Syntax</h2>
<pre><code>newrelic.agent.set_background_task(flag=True)
</code></pre>
<p>Marks a transaction as a "background task."</p>
<h2>Description</h2>
<p>This call classifies a <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction">transaction</a> as a "background task." Transactions marked as background tasks are visible in New Relic One as non-web transactions. You can also use this call to reclassify a monitored background task as a web transaction, by passing the <code>False</code> parameter.</p>
<p>This API reclassifies an existing transaction as a background task transaction. If there is no existing transaction, this call will not work.</p>
<p>The "background task" designation is typically used for non-web transactions (for example: worker processes, job-based systems, or standalone scripts), but you may also want to designate a web transaction as a "background task" to separate it from your other application transactions. For example, you have a long-running web transaction which is skewing your Apdex score or average response time.</p>
<p>The agent identifies a monitored transaction as a web transaction or background task at the start of the transaction, based on which type of entry-point wrapper initiated the monitoring. To create a background task initially (instead of marking a web transaction as a background task), you would use <code>background_task</code>. For a tutorial on how to create background tasks, see <a href="/docs/agents/python-agent/supported-features/python-background-tasks">Monitor non-web tasks, scripts, and functions</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>You can also mark a web transaction as a background task in the WSGI environ dictionary. To do so, set the <code>newrelic.set_background_task</code> key for the specific request in the WSGI environ dictionary passed by the WSGI server in your target WSGI app.</p>
</div>
<h2>Parameters</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>flag</code></p>
        <p><em>boolean</em></p>
      </div>
      <div>
        <p>Optional. Default value is <code>True</code>. Use <code>False</code> to instead classify the transaction to a web transaction.</p>
      </div>
    </div>
  </div>
</div>
<h2>Return values</h2>
<p>None.</p>
<h2>Examples</h2>
<h3>Setting web request to background task [#bg-task-example]</h3>
<p>An example of setting a web transaction to a non-web background task:</p>
<pre><code>def wsgi_app(environ, start_response):
   newrelic.agent.set_background_task()
</code></pre>
<h3>Reclassifying a background task as a web transaction [#bg-task-example-2]</h3>
<p>Sometimes, you may want to instead classify a background task as a web transaction, so you can see it with your other application web transactions in New Relic One. To do that, add this call where a monitored background task executes:</p>
<pre><code>import newrelic.agent
newrelic.agent.set_background_task(False)
</code></pre>
