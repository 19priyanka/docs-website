
<p>If you're using New Relic for Java with <a href="/docs/java/new-relic-for-java#h2-compatibility">a supported framework</a>, New Relic groups transactions based on transaction names obtained from the framework. Otherwise, New Relic groups transactions based on their component. Components are the JSPs, servlets, and filters invoked during the transaction.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Do not use brackets <code>[suffix]</code> at the end of your transaction name. New Relic automatically strips brackets from the name. Instead, use parentheses <code>(suffix)</code> or other symbols if needed.</p>
</div>
<h2>Grouping transactions [#components]</h2>
<p>The New Relic Java agent groups similar transactions together under a single name. If New Relic did not group transactions, each unique URI would generate a unique name. For example, your web application might produce URIs like:</p>
<pre><code>/user/123/control_panel.jhtml
/user/456/control_panel.jhtml
/user/789/control_panel.jhtml
</code></pre>
<p>Without grouping, this would produce three (fairly meaningless) individual metrics. Therefore, New Relic attempts to group transactions together under a meaningful label. For more information about metric grouping, see <a href="/docs/features/metric-grouping-issues">Metric grouping issues</a>.</p>
<p>Transaction names use URI format. For example:</p>
<pre><code>MyTransactionName
/MyTransactionName
/MyServlet/MyTransactionName
</code></pre>
<p>If you are using <a href="/docs/java/new-relic-for-java#h2-compatibility">a supported framework</a>, New Relic obtains the transaction name from the framework. For example, for Spring the transaction name typically comes from calling <code>getViewName</code> on the <code>org.springframework.web.servlet.ModelAndView</code> object.</p>
<p>If you are not using a supported framework, New Relic names a transaction based on its components. The exact transaction name is determined by the component with the <a href="#priority">highest priority</a>. If multiple component share priority, the agent uses the first component that was invoked.</p>
<h2>Naming priority [#priority]</h2>
<p>New Relic assigns each transaction a name according to the following priority, from highest priority to lowest:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicmVxdWVzdC1hdHRyaWJ1dGVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJSZXF1ZXN0IGF0dHJpYnV0ZXMifV0=">
    <div data-prop-text="title">Request attributes</div>
    <p>Request attributes and API calls have the highest naming priority. If a transaction has a request attribute or API call, the transaction will take its name from there.</p>
    <p>You can set the request attribute at any time during the web request. If you set multiple attributes during a request, the first name will be used.</p>
    <p>This example sets the transaction name using a request attribute in a servlet's <code>doGet</code>:</p>
    <pre><code>protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    ...
    request.setAttribute("com.newrelic.agent.TRANSACTION_NAME", "MyTransactionName");
    ...
}

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXBpLWNhbGxzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJBUEkgQ2FsbHMifV0=">
    <div data-prop-text="title">API Calls</div>
    <p>You can also set the transaction name by calling the <code>setTransactionName</code> method from the <a href="/docs/java/java-agent-api">Java agent API</a>. An API call has the same priority as a request attribute. If you set multiple attributes or make multiple API calls during a request, the most recent name will be used.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnJhbWV3b3JrcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRnJhbWV3b3JrcyJ9XQ==">
    <div data-prop-text="title">Frameworks</div>
    <p>If there are no request attributes or API calls, and you're using <a href="/docs/java/new-relic-for-java#h2-compatibility">a supported framework</a>, New Relic obtains the transaction name from the framework components.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoianNwcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiSmF2YVNlcnZlciBQYWdlcyAoSlNQcykifV0=">
    <div data-prop-text="title">JavaServer Pages (JSPs)</div>
    <p>After frameworks, the New Relic Java agent will use JavaServer Pages (JSPs). A JSP gets the transaction name from its class name. For example, if the JSP servlet class name is <code>org.apache.jsp.ShowBrowser_jsp</code> the transaction name is <code>ShowBrowser.jsp</code>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VydmxldHMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlNlcnZsZXRzIn1d">
    <div data-prop-text="title">Servlets</div>
    <p>After JSPs, the New Relic Java agent will use servlets. A servlet sets the transaction name from either an init parameter or the servlet name. The init parameter is higher priority, so servlets with an init parameter take precedence over servlets without.</p>
    <p>The servlet name and init parameter are defined in the deployment descriptor. For example:</p>
    <p>SqlServlet test.SqlServlet com.newrelic.agent.TRANSACTION_NAME MyTransactionName</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZmlsdGVycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU2VydmxldCBmaWx0ZXJzIn1d">
    <div data-prop-text="title">Servlet filters</div>
    <p>Servlet filters have the lowest priority. A filter gets the transaction name either from an init parameter or the filter name. The init parameter has a higher priority, so filters with an init parameter take precedence over filters without.</p>
    <p>The filter name and init parameter are defined in the deployment descriptor. For example:</p>
    <p>SqlFilter test.SqlFilter com.newrelic.agent.TRANSACTION_NAME MyTransactionName</p>
    <p>The filter name is the value of the <code>filter-name</code> element. The init parameter is the value of the <code>param-value</code> element of an <code>init-param</code> element with a <code>param-name</code> element of <code>com.newrelic.agent.TRANSACTION_NAME</code>.</p>
  </div>
</div>
<h2>Disable component-based naming [#reverting]</h2>
<p>For some applications, you may want to disable component-based transaction naming. <a href="/docs/java/java-agent-configuration#cfg-enable_auto_transaction_naming">Set this value in your <strong>newrelic.yml</strong> file</a>:</p>
<pre><code>enable_auto_transaction_naming: false
</code></pre>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJjYXV0aW9uIn1d">
  <p>Unless you implement API calls to name your transactions, disabling auto-transaction naming is very likely to cause <a href="/docs/features/metric-grouping-issues">Metric grouping issues</a>.</p>
</div>
