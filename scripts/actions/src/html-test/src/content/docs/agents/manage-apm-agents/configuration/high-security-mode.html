
<p>New Relic's default APM agent settings provide a high level of security. However, you may need to guarantee that even if the default APM agent settings are overridden to be more permissive, no sensitive data will ever be sent to New Relic. If this is the case, then you will want to turn on APM's high security mode (also known as enterprise security mode).</p>
<p>For more information about our security measures, see our <a href="/docs/using-new-relic/new-relic-security/security/security-matters-data-privacy-new-relic">security and privacy documentation</a>, or visit the <a href="https://newrelic.com/why-new-relic/security">New Relic security website</a>.</p>
<h2>Requirements</h2>
<p>This feature requires <a href="https://newrelic.com/pricing">Enterprise tier</a>.</p>
<h2>Account level [#overview]</h2>
<p>If you choose to turn on high security, you must enable high security for all applications reporting to the account. High security must be set on each individual account. For organizations with multiple accounts, sub-accounts do not automatically inherit the high security setting when it is enabled on the master account.</p>
<p>Currently there are two versions of high security mode. <a href="#version1description">Version 1</a> is deprecated and is only available if you already have it. If you are enabling high security mode for the first time, the only option is version 2 (v2).</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Agent</strong></p>
      </div>
      <div>
        <p><strong>Version 2 support</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>C SDK</p>
      </div>
      <div>
        <p>n/a</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/agents/go-agent/instrumentation/go-agent-configuration#high_security">Go</a></p>
      </div>
      <div>
        <p>All versions</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/java/java-agent-configuration#cfg-enable_high_security">Java</a></p>
      </div>
      <div>
        <p>3.7 or higher (enabled by default)</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/dotnet/dotnet-agent-configuration#high_security_mode">.NET</a></p>
      </div>
      <div>
        <p>3.3 or higher</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/nodejs/customizing-your-nodejs-config-file#high_security">Node.js</a></p>
      </div>
      <div>
        <p>1.7.0 or higher</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/php/php-agent-phpini-settings#inivar-high-security">PHP</a></p>
      </div>
      <div>
        <p>4.9 or higher</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/python/python-agent-configuration#high_security">Python</a></p>
      </div>
      <div>
        <p>2.22.0.0 or higher</p>
      </div>
    </div>
    <div>
      <div>
        <p><a href="/docs/ruby/ruby-agent-configuration#high_security">Ruby</a></p>
      </div>
      <div>
        <p>3.9.1 or higher</p>
      </div>
    </div>
  </div>
</div>
<h2>Enable high security mode (version 2) [#version2enabled]</h2>
<p>To enable high security, you must update both the local configuration on your server <strong>and</strong> the remote configuration in the UI.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJjYXV0aW9uIn1d">
  <p>Once you enable high security for an account, <strong>high security cannot be turned off</strong> without assistance from <a href="https://support.newrelic.com">support</a>.</p>
</div>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Setting location</strong></p>
      </div>
      <div>
        <p><strong>Description</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Set in UI</p>
      </div>
      <div>
        <p>To set high security in the UI: Go to <a href="https://one.newrelic.com">one.newrelic.com</a>, click the <a href="/docs/using-new-relic/welcome-new-relic/get-started/glossary#account-dropdown">account dropdown</a> and select <strong>Account settings</strong>. On that page, select <strong>High security mode</strong>.</p>
        <p>Note: If the agent is configured for high security via the UI but not locally, then the agent connections will be rejected and the agent will shut down (this won't shut down your application).</p>
      </div>
    </div>
    <div>
      <div>
        <p>Local, via agent</p>
      </div>
      <div>
        <p>Enable high security mode in your agent configuration file. High security mode is disabled by default, and the exact procedure to enable it varies by agent:</p>
        <ul>
          <li>
            <p>C SDK: n/a</p>
          </li>
          <li>
            <p><a href="/docs/agents/go-agent/instrumentation/go-agent-configuration#high_security">Go</a></p>
          </li>
          <li>
            <p><a href="/docs/java/java-agent-configuration#cfg-enable_high_security">Java</a></p>
          </li>
          <li>
            <p><a href="/docs/dotnet/dotnet-agent-configuration#high_security_mode">.NET</a></p>
          </li>
          <li>
            <p><a href="/docs/nodejs/customizing-your-nodejs-config-file#high_security">Node.js</a></p>
          </li>
          <li>
            <p><a href="/docs/php/php-agent-phpini-settings#inivar-high-security">PHP</a></p>
          </li>
          <li>
            <p><a href="/docs/python/python-agent-configuration#high_security">Python</a></p>
          </li>
          <li>
            <p><a href="/docs/ruby/ruby-agent-configuration#high_security">Ruby</a></p>
            <p>If the agent is configured for high security locally but not via the UI, then the agent connections will be rejected, and the agent will shut down. This will not shut down your application.</p>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
<h2>Results of enabling high security mode (version 2) [#version2description]</h2>
<p>Once enabled, high security mode (v2) ensures the following for your account:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Feature</strong></p>
      </div>
      <div>
        <p><strong>Comments</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Requires agents to use a secure connection (HTTPS)</p>
      </div>
      <div>
        <p>High security mode requires a secure (HTTPS) connection. Non-secure connection attempts will be rejected. The latest version of all New Relic agents support HTTPS. If the configuration is not set appropriately, the agent will override the property to ensure all data in transit per the latest industry standards.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents HTTP param capture</p>
      </div>
      <div>
        <p>High security mode does not allow HTTP params, which may contain sensitive customer data, to be sent to the New Relic collector. If the agent is configured to send HTTP params locally or through <a href="/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration">server-side configuration</a>, high security mode will override the configuration to never capture HTTP params.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents message queue param capture</p>
      </div>
      <div>
        <p>High security mode does not allow message queue params, which may contain sensitive customer data, to be sent to the New Relic collector. If the agent is configured to send message queue params locally or through <a href="/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration">server-side configuration</a>, then high security mode will override the configuration to never capture message queue params.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents raw query statement capture</p>
      </div>
      <div>
        <p>High security mode does not allow raw database query statements, which may contain sensitive customer data, to be captured. If the agent is configured to capture raw queries locally or through <a href="/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration">server-side configuration</a>, then high security mode will override the configuration to never capture raw queries.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents user attribute capture</p>
      </div>
      <div>
        <p>High security mode does not allow attributes set using each agent's API to be captured, as these may contain sensitive customer data.</p>
        <p>For example, in the Java agent, attributes passed in through the following <code>NewRelic</code> agent API calls will be blocked:</p>
        <pre><code>NewRelic.addCustomParameter(String key, String value)

</code></pre>
        <pre><code>
NewRelic.setProductName(String name)

</code></pre>
        <pre><code>
NewRelic.setAccountName(String name)

</code></pre>
        <pre><code>
NewRelic.setUserName(String name)

</code></pre>
        <pre><code>
NewRelic.addCustomParameter(String key, Number value)

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents <code>noticeError</code> attribute capture</p>
      </div>
      <div>
        <p>High security mode does not allow attributes set using each agent's <code>noticeError</code> API call to be captured as these may contain sensitive customer data.</p>
        <p>For example, in the Java agent, attributes passed in through the following <code>NewRelic</code> agent API calls will be blocked:</p>
        <pre><code>NewRelic.noticeError(String message, Map&#x3C;String, String> params)

</code></pre>
        <pre><code>
NewRelic.noticeError(Throwable throwable, Map&#x3C;String, String> params)

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents custom events</p>
      </div>
      <div>
        <p>High security mode does not allow custom events to be created using the agent API, as these may contain sensitive customer data.</p>
        <p>For example, in the .NET agent, the API call <code>RecordCustomEvent</code> will be blocked.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents deploying Custom Instrumentation via <a href="https://docs.newrelic.com/docs/agents/java-agent/custom-instrumentation/custom-instrumentation-editor-quickly-customize-your-java-instrumentation">CIE</a></p>
      </div>
      <div>
        <p>High security mode does not allow deploying custom instrumentation when using the <a href="https://docs.newrelic.com/docs/agents/java-agent/custom-instrumentation/custom-instrumentation-editor-quickly-customize-your-java-instrumentation">Custom Instrumentation Editor</a>. If you have high security mode enabled, you must <a href="https://docs.newrelic.com/docs/agents/java-agent/custom-instrumentation/custom-instrumentation-editor-quickly-customize-your-java-instrumentation#manual-deploy">export the instrumentation</a> and manually import it to your app server.</p>
      </div>
    </div>
  </div>
</div>
<h2>Results of enabling high security mode v1 (deprecated) [#version1description]</h2>
<p>High security mode version 1 is deprecated and only available if you enabled it prior to version 2 being available. High security mode version 1 ensures the following for your account:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Feature</strong></p>
      </div>
      <div>
        <p><strong>Comments</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Requires agents to use a secure connection (HTTPS)</p>
      </div>
      <div>
        <p>High security mode requires an encrypted connection (HTTPS). Non-secure connection attempts will be rejected. The latest version of all New Relic agents support HTTPS. If the configuration is not set appropriately, the agent will override the property to ensure that all data in transit is encrypted as per the latest industry standards.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents HTTP param capture</p>
      </div>
      <div>
        <p>Agents configured to capture HTTP params, which may contain sensitive customer data, are not allowed to connect to New Relic. If the local configuration is set to capture request parameters, then New Relic's collector will reject the connection, and the agent will shut down.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents raw query statement capture</p>
      </div>
      <div>
        <p>Agents configured to capture raw database query statements, which may contain sensitive customer data, are not allowed to connect to New Relic. If the agent is configured to capture raw queries locally or through <a href="/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration">server-side configuration</a>, New Relic's collector will reject the connection and the agent will shut down.</p>
      </div>
    </div>
    <div>
      <div>
        <p>Prevents deploying Custom Instrumentation via <a href="/docs/agents/java-agent/custom-instrumentation/custom-instrumentation-editor-quickly-customize-your-java-instrumentation">CIE</a></p>
      </div>
      <div>
        <p>High security mode does not allow deploying custom instrumentation when using the <a href="/docs/agents/java-agent/custom-instrumentation/custom-instrumentation-editor-quickly-customize-your-java-instrumentation">Custom Instrumentation Editor</a>. If you have high security mode enabled, you must <a href="/docs/agents/java-agent/custom-instrumentation/custom-instrumentation-editor-quickly-customize-your-java-instrumentation#manual-deploy">export the instrumentation</a> and manually import it to your app server.</p>
      </div>
    </div>
  </div>
</div>
<h2>Migrate from version 1 to version 2 [#migrating]</h2>
<p>These are the main differences between the two versions of high security:</p>
<ul>
  <li>In order to make high security even more secure, high security must be enabled in the New Relic user interface <strong>and</strong> in the local New Relic configuration file. High security v1 only required high security to be set in the New Relic UI.</li>
  <li>User attributes, <code>noticeError</code> attributes, and message queue parameters are turned off with high security in version 2, but not in version 1.</li>
</ul>
<p>To update from v1 to v2, add <code>high_security: true</code> to your local agent configuration file.</p>
<h2>For more help [#more_help]</h2>
<p>For more information about configuration file settings, refer to your <a href="#overview">specific agent's documentation</a>.</p>
<p>For the New Relic Synthetics feature that requires a pass phrase to assign jobs to a private minion, see <a href="/docs/synthetics/new-relic-synthetics/private-locations/verified-script-execution-private-locations">Verified script execution</a>.</p>
