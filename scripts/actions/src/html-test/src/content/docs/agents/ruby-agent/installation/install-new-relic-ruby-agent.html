
<p>Installing the New Relic Ruby agent enables you to monitor the performance of your application and obtain deep visibility into your Ruby app.</p>
<p>To install the agent, use our launcher or follow the instructions below.</p>
<div data-component="ButtonLink" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJyb2xlIiwidmFsdWUiOiJidXR0b24ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidG8iLCJ2YWx1ZSI6Imh0dHBzOi8vb25lLm5ld3JlbGljLmNvbS9sYXVuY2hlci9ucjEtY29yZS5zZXR0aW5ncz9wYW5lPWV5SnVaWEprYkdWMFNXUWlPaUowZFdOemIyNHVjR3huTFdsdWMzUnlkVzFsYm5RdFpYWmxjbmwwYUdsdVp5SjkmY2FyZHNbMF09ZXlKdVpYSmtiR1YwU1dRaU9pSnpaWFIxY0MxdVpYSmtiR1YwY3k1elpYUjFjQzF5ZFdKNUxXbHVkR1ZuY21GMGFXOXVJaXdpWVdOamIzVnVkRWxrSWpveU5qUXdOREE1ZlE9PSZwbGF0Zm9ybVthY2NvdW50SWRdPTEifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidmFyaWFudCIsInZhbHVlIjoicHJpbWFyeSJ9XQ==">
  <p>Add Ruby data</p>
</div>
<h2>Install the gem [#Installing_the_Gem]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>If you are using the agent in a Docker container, install the agent <strong>within each</strong> container.</p>
</div>
<ol>
  <li>
    <p>The Ruby agent's gem is available from <a href="https://rubygems.org/">rubygems.org</a> as <code>newrelic_rpm</code>. For applications using Bundler, add this gem to the Gemfile:</p>
    <pre><code>gem 'newrelic_rpm'
</code></pre>
  </li>
  <li>
    <p>To use Infinite Tracing, the Infinite Tracing gem is also available from rubygems.org as <code>newrelic-infinite_tracing</code>. For applications using Bundler, additionally include the Infinite Tracing gem in the Gemfile:</p>
    <pre><code>gem 'newrelic-infinite_tracing'
</code></pre>
  </li>
  <li>
    <p>The next step varies depending on if you are using Rails or Sinatra:</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p><strong>Ruby installation</strong></p>
          </div>
          <div>
            <p><strong>Comments</strong></p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p>If using Rails or Sinatra</p>
          </div>
          <div>
            <ul>
              <li><strong>Rails</strong>: If you're using Rails 3 or higher, or Rails 2.3 in the <a href="http://bundler.io/v1.12/rails3.html">recommended configuration</a>, Rails will automatically call <code>Bundler.require</code> and cause <code>newrelic_rpm</code> to be required during startup of your application.</li>
              <li><strong>Sinatra</strong>: If you're using Sinatra or another framework, you must either manually call <code>require 'newrelic_rpm'</code>, or call <code>Bundler.require</code>.</li>
            </ul>
          </div>
        </div>
        <div>
          <div>
            <p>If not using Rails or Sinatra</p>
          </div>
          <div>
            <p>In order to use automatic Browser application monitoring and Cross application tracing in a Rack application that does <strong>not</strong> use Sinatra or Rails, you must manually include additional <a href="/docs/agents/ruby-agent/frameworks/rack-middlewares#manual">Rack middlewares</a> provided by the agent. Place the New Relic gem as low in the list as possible, allowing the frameworks above it to be instrumented when the gem initializes.</p>
          </div>
        </div>
      </div>
    </div>
  </li>
</ol>
<h2>Install the configuration file [#Configuration_file]</h2>
<p>After installing the agent, you will need to install the <code>newrelic.yml</code> file, also known as the configuration file and name your app:</p>
<ol>
  <li><a href="https://one.newrelic.com/">Sign in to New Relic</a>.</li>
  <li>From the <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#account-dropdown">account dropdown</a>, select <strong>Account settings</strong>.</li>
  <li>On the <strong>Account settings</strong> page, look for the <strong>Download a clean configuration file</strong> section and click the <code>newrelic.yml</code> file.</li>
  <li>Copy the <code>newrelic.yml</code> file into the <code>config</code> sub-directory of your application.</li>
  <li><a href="/docs/agents/manage-apm-agents/app-naming/name-your-application">Change the default application name</a> to a meaningful name.</li>
</ol>
<p>Alternatively, you can generate a <code>newrelic.yml</code> file manually with the following command:</p>
<pre><code>newrelic install --license_key="YOUR_KEY" "My application"
</code></pre>
<p>You may also use the <code>--force</code> option with this command if you need to overwrite an existing <code>newrelic.yml</code>.</p>
<h2>Update the agent [#Updating_the_Agent]</h2>
<p>See <a href="/docs/agents/ruby-agent/installation/upgrade-ruby-agent-versions">Upgrade Ruby agent versions</a>.</p>
<h2>Install agent outside production environments [#Outside_production_environments]</h2>
<p>Typically you will install the Ruby agent in your production environment. If you want to try out the Ruby agent in a development or localhost environment, verify in the relevant <code>environment:</code> block of the <code>newrelic.yml</code> file that the <code>monitor_mode</code> config value has been set to <code>true</code>.</p>
<p>For example, to deploy New Relic in your <a href="/docs/ruby/developer-mode">development environment</a> and still be able to view your app's performance metrics: In the <code>development:</code> block, set the <code>monitor_mode</code> config value to <code>true</code>.</p>
<h2>Uninstall the Ruby agent gem [#Uninstalling_Gem]</h2>
<p>To uninstall the Ruby agent using Bundler, remove <code>gem 'newrelic_rpm'</code> from your Gemfile. If you are not using Bundler, remove all references to <code>newrelic_rpm</code> from your <code>environment.rb</code> file.</p>
<h2>Install on older versions of Rails [#Older_Rails_installations]</h2>
<p>If you're installing the Ruby agent on Rails 2.x, and aren't using Bundler, follow these procedures.</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Ruby installation</strong></p>
      </div>
      <div>
        <p><strong>Comments</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Rails 2.1 - 2.3 without Bundler</p>
      </div>
      <div>
        <ol>
          <li>
            <p>Install the gem using <code>gem install newrelic_rpm</code>.</p>
          </li>
          <li>
            <p>Edit <code>environment.rb</code>, and add to the initializer block:</p>
            <pre><code>config.gem "newrelic_rpm"
</code></pre>
          </li>
          <li>
            <p>If enabling Infinite Tracing, add the following to the next line in the <code>environment.rb</code> file:</p>
            <pre><code>config.gem "newrelic-infinite_tracing"
</code></pre>
          </li>
        </ol>
      </div>
    </div>
    <div>
      <div>
        <p>Rails earlier than 2.1</p>
      </div>
      <div>
        <p>New Relic does not officially support Rails versions prior to 2.1. However, if you want to use New Relic for Rails versions 2.0.*, edit <code>environment.rb</code> and add this statement after the <code>initializer:</code> block:</p>
        <pre><code>require "newrelic_rpm"

</code></pre>
        <pre><code>
require "newrelic/infinite_tracing"

</code></pre>**Infinite Tracing**
        If enabling Infinite Tracing, add the following to the next line in the `environment.rb` file:
      </div>
    </div>
  </div>
</div>
<h2>For more help [#more_help]</h2>
<p>Additional documentation resources include:</p>
<ul>
  <li><a href="/docs/ruby/ruby-agent-configuration">Ruby agent configuration</a> (general configuration settings, proxy, transaction tracer, error collection, and updates)</li>
  <li><a href="/docs/ruby/new-relic-for-ruby">New Relic for Ruby</a> (overview of compatibility and requirements, installation, configuration, troubleshooting, known issues, advanced features, and beta releases)</li>
  <li><a href="/docs/agents/ruby-agent/installation-and-configuration/updating-deprecated-ruby-agents">Updating deprecated Ruby agents</a> (Ruby agent versions that New Relic no longer supports, how to verify the version your app uses, and how to ensure you have the most up-to-date version)</li>
</ul>
