
<p>You can control which hosts connect to your account by using environment-specific settings in the New Relic agent configuration file. You can set some configuration properties for all of your environments or modify them for an individual environment. For more information about the config file and where to find it, see the <a href="/docs/site/configuring-the-agent">configuration documentation</a> for your agent.</p>
<h2>Default settings [#default]</h2>
<p>Many New Relic customers use a common configuration across multiple environments (for example, staging and production), but they may only run New Relic on hosts in one of those environments. Other customers may have multiple New Relic accounts at different subscription levels, and they need to control which host connects to which accounts. In both of these situations, you can use environment-specific settings.</p>
<p>Default settings for common environments appear at the bottom of the configuration file. Here is an example for production and staging:</p>
<p>
  <img src="./images/screen-hosts-code.png" alt="screen-hosts-code.png" title="screen-hosts-code.png">
</p>
<p><strong>New Relic .yml file example:</strong> This shows the default settings for production and staging environments.</p>
<h2>Customized settings [#customized]</h2>
<p>You can edit these settings as needed. You can also add custom environment sections for unique situations. For example, <a href="http://en.wikipedia.org/wiki/YAML%23Data_merge_and_references" title="Link opens in a new window">YAML</a> provides node references ( <code>*</code> ) and hash merges (<code>&#x3C;&#x3C;</code>) that refer to a node labeled with an anchor (<code>&#x26;</code>) tag. The New Relic agent's default configuration file ships with common configuration options set to the <code>&#x26;*default_settings*</code> tag, but you can create your own to share configuration options across environments.</p>
<p>To control which hosts are allowed to connect to your account simply set the <code>monitor_mode</code> to true or false in the appropriate environment. To have your staging hosts connect to one account and your production hosts connect to another account, set the <code>license_key</code> in each environment according to how you would like to have them connected. As you can see in the screenshot above, you can also set the <code>app_name</code> and any other setting you may want specific to a given environment.</p>
<h2>Environments</h2>
<p>The New Relic agent determines the environment where it is running. For example, Ruby uses the standard <code>*RAILS_ENV</code> OS environment variable.</p>
