
<p>New Relic for Java gives you multiple methods to ignore specific transactions. This document explains how to use the <a href="/docs/agents/java-agent/custom-instrumentation/java-agent-api">Java agent API annotations</a> and <code>ServletRequest</code> to ignore transactions.</p>
<p>It is also possible to use the <code>ignoreTransaction()</code> <a href="http://newrelic.github.io/java-agent-api/javadoc/index.html?com/newrelic/api/agent/NewRelic.html">API call</a> and <a href="/docs/agents/java-agent/custom-instrumentation/java-custom-instrumentation-xml-examples#file-format">XML instrumentation files</a> to ignore transactions.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Ignoring transactions involves changing your application's source code and recompiling your application in all cases <strong>unless</strong> you use an <a href="https://docs.newrelic.com/docs/agents/java-agent/custom-instrumentation/java-custom-instrumentation-xml-examples#file-format">XML instrumentation file</a>. If you cannot manipulate your code, use XML to ignore transactions.</p>
</div>
<h2>Ignore web transactions with ServletRequest [#servlet]</h2>
<p>To ignore a web transaction, set a <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html"><code>ServletRequest</code></a> attribute named <code>com.newrelic.agent.IGNORE</code> to <code>true</code> during the request:</p>
<pre><code>request.setAttribute("com.newrelic.agent.IGNORE", true);
</code></pre>
<p>To specify URLs to ignore, create a servlet <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html">filter</a> which sets that attribute and apply the filter to the servlet you want to ignore. The filter will have access to the request URI if you need to ignore specific URLs.</p>
<h2>Ignore transactions with annotation [#annotation]</h2>
<p>To tell the Java agent to ignore transactions using annotations:</p>
<ol>
  <li>
    <p>Define an annotation called <code>NewRelicIgnoreTransaction</code> in your application's code or a library you can integrate with your application:</p>
    <pre><code>@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface NewRelicIgnoreTransaction {
}
</code></pre>
  </li>
  <li>
    <p>Apply the annotation to the methods or classes you want to ignore. For example:</p>
    <pre><code>@NewRelicIgnoreTransaction
public void methodToBeIgnored() {
}
</code></pre>
  </li>
</ol>
<p>If a transaction calls a method or class annotated with <code>@NewRelicIgnoreTransaction</code>, the transaction is ignored. This means it does not contribute to the overall Apdex score; and the transaction trace and performance data is not reported.</p>
<h2>Ignore apdex but not traces [#apdex]</h2>
<p>You can also prevent the transaction from contributing to the Apdex score but still be used in transaction. This can prevent one particularly lengthy transaction from skewing your Apdex score. To prevent a transaction from contributing to your Apdex score:</p>
<ol>
  <li>
    <p>Define an annotation called <code>NewRelicIgnoreApdex</code>Â in your application's code or a library you can integrate with your application:</p>
    <pre><code>@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface NewRelicIgnoreApdex {
}
</code></pre>
  </li>
  <li>
    <p>Apply the annotation to the methods or classes you want to ignore. For example:</p>
    <pre><code>@NewRelicIgnoreApdex
public void ignoreApdexOfThisMethod() {
}
</code></pre>
  </li>
</ol>
<p>If a transaction calls a method or class annotated with <strong>@NewRelicIgnoreApdex</strong>, the transaction is reported, but does not contribute to the overall Apdex score.</p>
