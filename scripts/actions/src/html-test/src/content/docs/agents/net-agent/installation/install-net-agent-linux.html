
<p>This document explains how to install and enable the <a href="/docs/agents/net-agent">APM .NET agent</a> on Linux.</p>
<h2>Install overview [#getting-started]</h2>
<p>The install instructions in this document are for a standard .NET agent installation on Linux. However, some setups have specific install documentation that you should read first:</p>
<ul>
  <li><a href="/docs/agents/net-agent/other-installation/install-net-agent-aspnet-core">ASP.NET Core</a></li>
  <li><a href="/docs/agents/net-agent/azure-installation">Azure installations</a></li>
  <li><a href="/docs/agents/net-agent/install-guides/install-net-agent-using-nuget">NuGet install</a></li>
  <li><a href="/docs/agents/net-agent/installation/install-docker-container">Docker container install</a></li>
</ul>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJjYXV0aW9uIn1d">
  <p>Security notice: the location where the .NET agent is installed should be configured to prevent unauthorized access.</p>
</div>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>If you modify your <code>newrelic.config</code> file, make sure it retains the default <strong>UTF-8</strong> encoding. If your editor adds a BOM (Byte Order Mark) to the encoding, <strong>the agent will be unable to read the file and will not start up in Linux.</strong></p>
</div>
<h2>Step 1. Download and install the agent [#download-install]</h2>
<p>To install the .NET agent on a Linux system with a package manager:</p>
<ol>
  <li>
    <p>Install the agent. These details are the same for all installations using a package manager:</p>
    <ul>
      <li>Install location: <code>/usr/local/newrelic-netcore20-agent</code>.</li>
      <li>The file <code>newrelic-netcore20-agent-path.sh</code> is placed in <code>/etc/profile.d</code>, and this will set the <code>CORECLR_NEWRELIC_HOME</code> environment variable on system start.</li>
      <li>The path to <code>newrelic.config</code> file is <code>${CORECLR_NEWRELIC_HOME}/newrelic.config</code>.</li>
    </ul>
  </li>
  <li>
    <p>Follow the instructions for your package manager:</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xhbXNoZWxsX2RlYmlhbl91YnVudHVfbWludF9hcHRnZXQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Ikluc3RhbGwgd2l0aCBhcHQgKERlYmlhbiwgTGludXggTWludCwgb3IgVWJ1bnR1KSJ9XQ==">
        <div data-prop-text="title">Install with apt (Debian, Linux Mint, or Ubuntu)</div>
        <ol>
          <li>
            <p>Configure the New Relic apt repository by adding <code>deb http://apt.newrelic.com/debian/ newrelic non-free</code> to <code>/etc/apt/sources.list.d/newrelic.list</code>:</p>
            <pre><code>echo 'deb http://apt.newrelic.com/debian/ newrelic non-free' | sudo tee /etc/apt/sources.list.d/newrelic.list
</code></pre>
          </li>
          <li>
            <p>Enable New Relic's GPG key to allow apt to find New Relic packages. To avoid possible errors about public keys, run this command as root:</p>
            <pre><code>wget -O- https://download.newrelic.com/548C16BF.gpg | sudo apt-key add -
</code></pre>
          </li>
          <li>
            <p>Update the local package list:</p>
            <pre><code>sudo apt-get update
</code></pre>
          </li>
          <li>
            <p>Install the agent:</p>
            <pre><code>sudo apt-get install newrelic-netcore20-agent
</code></pre>
          </li>
        </ol>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xhbXNoZWxsX2RlYmlhbl91YnVudHVfbWludF9kcGtnIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJJbnN0YWxsIHdpdGggZHBrZyAoRGViaWFuLCBMaW51eCBNaW50LCBvciBVYnVudHUpIn1d">
        <div data-prop-text="title">Install with dpkg (Debian, Linux Mint, or Ubuntu)</div>
        <ol>
          <li>
            <p>Go to the <a href="http://download.newrelic.com/dot_net_agent/latest_release/">.NET agent download site</a> and copy the URL that corresponds to your <a href="/docs/agents/net-agent/getting-started/compatibility-requirements-net-agent#architecture">architecture</a> and to the latest <code>newrelic-netcore20-agent</code> package.</p>
          </li>
          <li>
            <p>Download the package with <code>wget</code>, replacing <code>https://LINK_TO_PACKAGE</code> with the full URL of the package:</p>
            <pre><code>wget -L https://LINK_TO_PACKAGE
</code></pre>
          </li>
          <li>
            <p>Install the agent, replacing <code>VERSION</code> with the current version:</p>
            <pre><code>sudo dpkg -i newrelic-netcore20-agent_VERSION_amd64.deb
</code></pre>
          </li>
        </ol>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xhbXNoZWxsX2NlbnRvc19yaGVsX29yYWNsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiSW5zdGFsbCB3aXRoIHJwbSBvciB5dW0gKENlbnRPUywgT3JhY2xlIExpbnV4LCBvciBSSEVMKSJ9XQ==">
        <div data-prop-text="title">Install with rpm or yum (CentOS, Oracle Linux, or RHEL)</div>
        <ol>
          <li>
            <p>Configure the New Relic rpm repository:</p>
            <pre><code>sudo rpm -Uvh http://yum.newrelic.com/pub/newrelic/el5/x86_64/newrelic-repo-5-3.noarch.rpm
cat &#x3C;&#x3C; REPO | sudo tee "/etc/yum.repos.d/newrelic-netcore20-agent.repo"
[newrelic-netcore20-agent-repo]
name=New Relic .NET Core packages for Enterprise Linux
baseurl=http://yum.newrelic.com/pub/newrelic/el7/\$basearch
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-NewRelic
REPO
</code></pre>
          </li>
          <li>
            <p>Install the agent, replacing <code>VERSION</code> with the current version:</p>
            <ul>
              <li>
                <p>Install with rpm:</p>
                <pre><code>sudo rpm -i newrelic-netcore20-agent_VERSION.x86_64.rpm
</code></pre>
              </li>
              <li>
                <p>Install with yum:</p>
                <pre><code>sudo yum install newrelic-netcore20-agent
</code></pre>
              </li>
            </ul>
          </li>
        </ol>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xhbXNoZWxsX3RhcmJhbGwifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Ikluc3RhbGwgd2l0aCB0YXJiYWxsIn1d">
        <div data-prop-text="title">Install with tarball</div>
        <ol>
          <li>
            <p>Go to the <a href="https://download.newrelic.com/dot_net_agent/latest_release">.NET agent download site</a> and copy the URL that corresponds to your <a href="/docs/agents/net-agent/getting-started/compatibility-requirements-net-agent#architecture">architecture</a> and to the latest <code>newrelic-netcore20-agent-VERSION.tar.gz</code> package.</p>
          </li>
          <li>
            <p>Download the package with wget, replacing <code>https://LINK_TO_PACKAGE</code> with the full URL of the package:</p>
            <pre><code>wget -L https://LINK_TO_PACKAGE
</code></pre>
          </li>
          <li>
            <p>Extract the agent:</p>
            <pre><code>tar xzf newrelic*.tar.gz
</code></pre>
          </li>
          <li>
            <p>Move the <code>newrelic-netcore20-agent</code> directory to <code>/usr/local</code> or your preferred install location.</p>
          </li>
          <li>
            <p>Verify that the environment variable <code>CORECLR_NEWRELIC_HOME</code> points to the <code>newrelic-netcore20-agent</code> directory and that the directory is readable by monitored .NET processes.</p>
            <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
              <p>If <code>CORECLR_NEWRELIC_HOME</code> does not exist, create it and point it to the <code>newrelic-netcore20-agent</code> directory.</p>
            </div>
          </li>
          <li>
            <p>Verify that the <code>logs</code> directory in the agent home directory is writeable by monitored .NET processes.</p>
          </li>
        </ol>
      </div>
    </div>
  </li>
</ol>
<p>Continue to step 2.</p>
<h2>Step 2. Enable the agent [#enable-agent]</h2>
<p>Use one of the following methods to set the environment variables that enable the agent and define your license key. For an ASP.NET Core app targeting .NET Core, use the environment variable method.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>When setting the app name, we recommend <a href="/docs/agents/net-agent/installation-configuration/name-your-net-application">you give your app a meaningful name</a>.</p>
</div>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xhbXNoZWxsX2Vudl9tYW51YWwifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlNldCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgbWFudWFsbHkifV0=">
    <div data-prop-text="title">Set environment variables manually</div>
    <p>You can configure your environment using a custom script. The script must define the variables before your app starts.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJjYXV0aW9uIn1d">
      <p>New Relic recommends that you set the environment variables for each application that you want to instrument. If you set these environment variables globally, you might instrument .NET processes other than your apps.</p>
    </div>
    <ol>
      <li>
        <p>Set the following environment variables, replacing <code>PATH_TO_AGENT_DIRECTORY</code> with the actual path to the .NET Core agent installation folder:</p>
        <pre><code>CORECLR_ENABLE_PROFILING=1
CORECLR_PROFILER={36032161-FFC0-4B61-B559-F6C5D41BAE5A}
CORECLR_NEWRELIC_HOME=PATH_TO_AGENT_DIRECTORY
CORECLR_PROFILER_PATH="PATH_TO_AGENT_DIRECTORY/libNewRelicProfiler.so"
</code></pre>
      </li>
      <li>
        <p>Use one of the following methods to set your <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">license key</a> (required) and your <a href="/docs/agents/net-agent/configuration/name-your-net-application">app name</a> (optional):</p>
        <ul>
          <li>
            <p>Set via environment variable:</p>
            <pre><code>NEW_RELIC_LICENSE_KEY=YOUR_LICENSE_KEY
NEW_RELIC_APP_NAME=YOUR_APP_NAME
</code></pre>
          </li>
          <li>
            <p>Set in <code>newrelic.config</code> with the <code>licenseKey</code> and <a href="/docs/agents/net-agent/configuration/net-agent-configuration#app-name"><code>name</code></a> elements.</p>
          </li>
        </ul>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xhbXNoZWxsX2Vudl9ydW5zaCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU3RhcnQgeW91ciBhcHAgd2l0aCBydW4uc2gifV0=">
    <div data-prop-text="title">Start your app with run.sh</div>
    <ol>
      <li>
        <p>Use <code>run.sh</code> to start your app. For example:</p>
        <pre><code>$CORECLR_NEWRELIC_HOME/run.sh dotnet MYAPP.dll
</code></pre>
      </li>
      <li>
        <p>Use one of the following methods to set your <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">license key</a> (required) and your <a href="/docs/agents/net-agent/configuration/name-your-net-application">app name</a> (optional):</p>
        <ul>
          <li>
            <p>Set via environment variable:</p>
            <pre><code>NEW_RELIC_LICENSE_KEY=YOUR_LICENSE_KEY
NEW_RELIC_APP_NAME=YOUR_APP_NAME
</code></pre>
          </li>
          <li>
            <p>Set in <code>newrelic.config</code> with the <code>licenseKey</code> and <a href="/docs/agents/net-agent/configuration/net-agent-configuration#app-name"><code>name</code></a> elements.</p>
          </li>
        </ul>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xhbXNoZWxsX2Vudl9zZXRlbnYifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlNldHVwIHVzaW5nIHNldGVudi5zaCJ9XQ==">
    <div data-prop-text="title">Setup using setenv.sh</div>
    <p>Except for <code>CORECLR_NEWRELIC_HOME</code>, the <code>source /usr/local/newrelic-netcore20-agent/setenv.sh</code> script included with the agent configures the environment variables automatically.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>Set these environment variables before running any apps that you want instrumented. This sets the environment variables only for the current shell and any child processes of that shell.</p>
    </div>
    <ol>
      <li>
        <p>Set the <code>CORECLR_NEWRELIC_HOME</code> environment variable to the .NET agent installation directory.</p>
      </li>
      <li>
        <p>Use one of the following methods to set your <a href="/docs/accounts-partnerships/accounts/account-setup/license-key">license key</a> (required) and your <a href="/docs/agents/net-agent/configuration/name-your-net-application">app name</a> (optional):</p>
        <ul>
          <li>
            <p>Set via environment variable:</p>
            <pre><code>NEW_RELIC_LICENSE_KEY=YOUR_LICENSE_KEY
NEW_RELIC_APP_NAME=YOUR_APP_NAME
</code></pre>
          </li>
          <li>
            <p>Set in <code>newrelic.config</code> with the <code>licenseKey</code> and <a href="/docs/agents/net-agent/configuration/net-agent-configuration#app-name"><code>name</code></a> elements.</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Run the <code>setenv.sh</code> script located in the directory that you installed the agent in.</p>
      </li>
    </ol>
  </div>
</div>
<p>When that is complete, start or restart your application.</p>
<p>If your application is receiving traffic, data should appear within a few minutes. If it doesn't, see <a href="https://docs.newrelic.com/docs/agents/net-agent/troubleshooting/no-data-appears-net">No data appears</a>.</p>
<p>For an in-depth explanation of .NET agent install issues, see the New Relic Explorer's Hub post <a href="https://discuss.newrelic.com/t/relic-solution-net-core-agent-installation-issues-a-troubleshooting-guide/54492">.NET agent install for .NET Core: a troubleshooting guide</a>.</p>
