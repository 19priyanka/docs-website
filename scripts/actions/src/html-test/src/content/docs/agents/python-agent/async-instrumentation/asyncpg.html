
<p>The Python agent supports recording database transactions when using the <a href="https://pypi.org/project/asyncpg/">asyncpg</a> database client module for <a href="https://www.postgresql.org/">PostgresSQL</a>. This feature captures timing of database queries, SQL statements for the database query, and a stack trace for long database queries.</p>
<p>Read about the requirements and tips for integrating our Python agent with an app that uses <a href="https://pypi.org/project/asyncpg/">asyncpg</a>. To return to the general install instructions, go to <a href="/docs/agents/python-agent/installation-configuration/python-agent-installation">Install the Python agent</a>.</p>
<h2>Automatic initialization with admin script [#wrapper-script]</h2>
<p>If you start your app with <code>python app.py</code> and use our Python agent <strong>version 5.20.0.149</strong> or higher, you can use the recommended <a href="/docs/agents/python-agent/installation-configuration/python-agent-installation#integration">admin script integration method</a> For example:</p>
<pre><code>NEW_RELIC_CONFIG_FILE=path/to/newrelic.ini newrelic-admin run-program python path_to_app
</code></pre>
<h2>Using the Python agent API [#api]</h2>
<p>You can use the <a href="/docs/agents/python-agent/python-agent-api">Python agent API</a> to monitor any ASGI server or framework. To do this, mark the <a href="/docs/agents/python-agent/python-agent-api/asgiapplication-python-agent-api">ASGI application entry point</a> and set the <a href="/docs/agents/python-agent/python-agent-api/settransactionname-python-agent-api">transaction names</a>.</p>
<h2>Event loop diagnostic support [#event-loops]</h2>
<p>Our Python agent supports <code>asyncio</code> event loop diagnostics. For more information, see <a href="/docs/agents/python-agent/supported-features/python-event-loop-diagnostics">Python event loop diagnostics</a>.</p>
