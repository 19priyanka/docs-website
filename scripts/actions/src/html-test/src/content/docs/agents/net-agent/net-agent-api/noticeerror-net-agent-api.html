
<h2>Syntax</h2>
<pre><code>NewRelic.Api.Agent.NewRelic.NoticeError(exception $exception[, IDictionary $attributes])
NewRelic.Api.Agent.NewRelic.NoticeError(string $error_message, IDictionary $attributes)
NewRelic.Api.Agent.NewRelic.NoticeError(string $error_message, IDictionary $attributes, bool $is_expected)
</code></pre>
<p>Notice an error and report to New Relic, along with optional custom attributes.</p>
<h2>Requirements</h2>
<p>Compatible with all agent versions.</p>
<p>Compatible with all app types.</p>
<h2>Description</h2>
<p>Notice an error and report it to New Relic along with optional custom attributes. For each transaction, the agent only retains the exception and attributes from the first call to <code>NoticeError()</code>. You can pass an actual exception, or pass a string to capture an arbitrary error message.</p>
<p>If this method is invoked within a <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction">transaction</a>, the agent reports the exception within the parent transaction. If it is invoked outside of a transaction, the agent creates an <a href="/docs/apm/applications-menu/events/view-apm-error-analytics">error trace</a> and categorizes the error in the New Relic UI as a <strong>NewRelic.Api.Agent.NoticeError API Call</strong>. If invoked outside of a transaction, the <code>NoticeError</code> call will not contribute to the error rate of an application.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>The agent adds the attributes only to the traced error, and does not send them to New Relic. To add custom attributes, see <a href="/docs/agents/net-agent/net-agent-api/addcustomparameter-net-agent"><code>AddCustomParameter()</code></a>.</p>
</div>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>For an overview of error configuration in APM, see <a href="/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected">Manage errors in APM</a>.</p>
</div>
<h2>Parameters</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <pre><code>NewRelic.Api.Agent.NewRelic.NoticeError(exception $exception[, IDictionary $attributes])

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>$exception</code></p>
        <p><em>exception</em></p>
      </div>
      <div>
        <p>Required. The exception you want to instrument. Only the first 10,000 characters from the stack trace are retained.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$attributes</code></p>
        <p><em>IDictionary</em></p>
      </div>
      <div>
        <p>Optional. Specify key/value pairs of attributes to annotate the error message.</p>
      </div>
    </div>
    <div>
      <div>
        <pre><code>NewRelic.Api.Agent.NewRelic.NoticeError(string $error_message, IDictionary $attributes)

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>$error_message</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Required. Specify a string to report to New Relic as though it's an exception. Only the first 1,000 characters are retained.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$attributes</code></p>
        <p><em>IDictionary</em></p>
      </div>
      <div>
        <p>Required (can be null). Specify key/value pairs of attributes to annotate the error message. To send no attributes, pass <code>null</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <pre><code>NewRelic.Api.Agent.NewRelic.NoticeError(string $error_message, IDictionary $attributes, bool $is_expected)

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><code>$error_message</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Required. Specify a string to report to New Relic as though it's an exception. Only the first 1,000 characters are retained.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$attributes</code></p>
        <p><em>IDictionary</em></p>
      </div>
      <div>
        <p>Required (can be null). Specify key/value pairs of attributes to annotate the error message. To send no attributes, pass <code>null</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$is_expected</code></p>
        <p><em>bool</em></p>
      </div>
      <div>
        <p>Mark error as expected so that it won't affect Apdex score and error rate.</p>
      </div>
    </div>
  </div>
</div>
<h2>Examples</h2>
<h3>Pass an exception without custom attributes [#exception-no-attributes]</h3>
<pre><code>try
{
  var ImNotABool = "43";
  bool.Parse(ImNotABool);
}
catch (Exception ex)
{
  NewRelic.Api.Agent.NewRelic.NoticeError(ex);
}
</code></pre>
<h3>Pass an exception with custom attributes [#exception-yes-attributes]</h3>
<pre><code>try
{
  var ImNotABool = "43";
  bool.Parse(ImNotABool);
}
catch (Exception ex)
{
  var errorAttributes = new Dictionary&#x3C;string, string>() {{"foo", "bar"},{"baz", "luhr"}};
  NewRelic.Api.Agent.NewRelic.NoticeError(ex, errorAttributes);
}
</code></pre>
<h3>Pass an error message string with custom attributes [#string-yes-attributes]</h3>
<pre><code>try
{
  var ImNotABool = "43";
  bool.Parse(ImNotABool);
}
catch (Exception)
{
  var errorAttributes = new Dictionary&#x3C;string, string>{{"foo", "bar"},{"baz", "luhr"}};
  NewRelic.Api.Agent.NewRelic.NoticeError("String error message", errorAttributes);
}
</code></pre>
<h3>Pass an error message string without custom attributes [#string-no-attributes]</h3>
<pre><code>try
{
 var ImNotABool = "43";
 bool.Parse(ImNotABool);
}
catch (Exception)
{
 NewRelic.Api.Agent.NewRelic.NoticeError("String error message", null);
}
</code></pre>
<h3>Pass an error message string and mark it as expected [#string-no-attributes]</h3>
<pre><code>try
{
 var ImNotABool = "43";
 bool.Parse(ImNotABool);
}
catch (Exception)
{
 NewRelic.Api.Agent.NewRelic.NoticeError("String error message", null, true);
}
</code></pre>
