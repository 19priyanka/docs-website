
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>Beginning with .NET agent version <a href="https://docs.newrelic.com/docs/release-notes/agent-release-notes/net-release-notes/net-agent-8221810">8.22.181.0</a>, Azure's <code>Always On</code> setting may be enabled without interfering with the agent. If you'd like to use <code>Always On</code>, simply <a href="https://docs.newrelic.com/docs/agents/net-agent/azure-installation/install-net-agent-azure-web-apps">update the agent</a>.</p>
  <p>If your application <a href="https://docs.newrelic.com/docs/agents/net-agent/troubleshooting/technical-support-net-framework-40-or-lower">targets .NET Framework 4.0 or lower</a>, <code>Always On</code> will still interfere with the agent and the workarounds below are still applicable.</p>
</div>
<h2>Problem</h2>
<p>You installed New Relic's .NET agent through <a href="/docs/agents/net-agent/azure-installation/install-app-azure-web-apps">Microsoft Azure Web Apps</a> and are using Azure's <code>Always On</code> setting. After generating some traffic and waiting a few minutes for data collection to start for your app, data still does not appear in the APM user interface.</p>
<h2>Cause</h2>
<p>If no data appears within five minutes, Azure's <a href="https://azure.microsoft.com/en-us/documentation/articles/web-sites-create-web-jobs/"><code>Always On</code> setting</a> may be conflicting with New Relic. This feature is only available in Azure's <strong>Basic</strong> and <strong>Standard</strong> modes.</p>
<p>The <code>Always On</code> setting prevents the environment variable <code>APP_POOL_ID</code> from being set. New Relic's .NET agent needs this environment variable to get the app name. If the agent cannot determine an application name, then it won't start up.</p>
<h2>Solution</h2>
<p>If you are using Microsoft's <strong>Standard</strong> or <strong>Basic</strong> tiers with the Azure Portal, ensure that the <code>Always On</code> setting is disabled.</p>
<ol>
  <li>In the Azure Portal, select <strong>(your app) > Settings > Application Settings</strong>.</li>
  <li>Set the <code>Always On</code> toggle to <code>Off</code>.</li>
</ol>
<h2>Other options</h2>
<p>Here are some other options you can try. If these do not work, you <strong>must</strong> <a href="#solution">turn off the <code>Always On</code> setting</a>.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibmFtZS1hcHAifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlVzZSBLdWR1IHRvIG5hbWUgeW91ciBhcHAuIn1d">
    <div data-prop-text="title">Use Kudu to name your app.</div>
    <p>To name your application in the local <strong>newrelic.config</strong> using Kudu:</p>
    <ol>
      <li>
        <p>From the Microsoft Azure Portal, select <strong>(your app) > Tools > Kudu</strong>, then select <strong>Go</strong>.</p>
      </li>
      <li>
        <p>Select <strong>Debug Console > CMD</strong>.</p>
      </li>
      <li>
        <p>Select <strong>Site > wwwroot > newrelic</strong>.</p>
      </li>
      <li>
        <p>Select the edit
          <div data-component="Icon" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJuYW1lIiwidmFsdWUiOiJmZS1lZGl0LTIifV0="></div>icon for <code>newrelic.config</code>, and add:
        </p>
        <pre><code>&#x3C;application>
  &#x3C;name> Your app's name &#x3C;/name>
&#x3C;/application>
</code></pre>
      </li>
      <li>
        <p>Save and restart your application.</p>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibmFtZS1hcHAtd2ViLWNvbmZpZyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiVXNlIGFwcC93ZWIuY29uZmlnIHRvIG5hbWUgeW91ciBhcHAuIn1d">
    <div data-prop-text="title">Use app/web.config to name your app.</div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
      <p>This option has been found to only be a temporary fix. The .NET agent may stop reporting intermittently.</p>
    </div>
    <p>To name your application in its <code>app/web.config</code> file:</p>
    <ol>
      <li>
        <p>Add the following key to <code>appSettings</code>:</p>
        <pre><code>&#x3C;appSettings>
  &#x3C;add key="NewRelic.AppName" value="Your app's name" />
&#x3C;/appSettings>
</code></pre>
      </li>
      <li>
        <p>Restart your instance.</p>
      </li>
    </ol>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicGluZ2VyIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJVc2UgU3ludGhldGljIG1vbml0b3JpbmcgdG8gbW9uaXRvciB5b3VyIHdlYnNpdGUuIn1d">
    <div data-prop-text="title">Use Synthetic monitoring to monitor your website.</div>
    <p>Depending on your usage of <code>Always On</code>, you can try using <a href="/docs/synthetics/new-relic-synthetics/getting-started/introduction-new-relic-synthetics">Synthetic monitoring</a> to keep your website active.</p>
    <ul>
      <li>If you <strong>are not</strong> using the <code>Always On</code> setting, you can try using the Synthetic monitoring free <a href="/docs/synthetics/new-relic-synthetics/using-monitors/add-edit-monitors#monitor-type-ping">pinger monitor</a>.</li>
      <li>If you <strong>are</strong> using the <code>Always On</code> setting, Synthetic monitoring needs to be able to reach an endpoint for your worker roles. If it can't, you can try using a <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers">Synthetics scripted monitor</a> to run on your site.</li>
    </ul>
  </div>
</div>
