
<h2>Syntax</h2>
<pre><code>newrelic_add_custom_tracer(string $function_name)
</code></pre>
<p>Specify functions or methods for the agent to instrument with custom instrumentation.</p>
<h2>Requirements</h2>
<p>Compatible with all agent versions.</p>
<h2>Description</h2>
<p>Specify functions or methods for the agent to target for <a href="/docs/agents/php-agent/features/php-custom-instrumentation">custom instrumentation</a>. This is the API equivalent of the <code>newrelic.transaction_tracer.custom</code> setting.</p>
<p>You cannot apply custom tracing to internal PHP functions.</p>
<h2>Parameters</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Parameter</p>
      </div>
      <div>
        <p>Description</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>$function_name</code></p>
        <p><em>string</em></p>
      </div>
      <div>
        <p>Required. The name can be formatted either as <code>function_name</code> for procedural functions, or as <code>"ClassName::method"</code> for methods. Both static and instance methods will be instrumented if the method syntax is used, and the class name must be fully qualified: it must include the full namespace if the class was defined within a namespace.</p>
      </div>
    </div>
  </div>
</div>
<h2>Return values</h2>
<p>Returns <code>true</code> if the tracer was added successfully.</p>
<h2>Examples</h2>
<h3>Instrument a function [#function-example]</h3>
<pre><code>function example_function() {
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
        newrelic_add_custom_tracer("example_function");
    }
}
</code></pre>
<h3>Instrument a method within a class [#class-exmaple]</h3>
<pre><code>class ExampleClass {
    function example_method() {
        if (extension_loaded('newrelic')) { // Ensure PHP agent is available
    	    newrelic_add_custom_tracer("ExampleClass::example_method");
        }
    }
}
</code></pre>
<h3>Instrument a method within a namespaced class [#class-example]</h3>
<pre><code>namespace Foo\Bar;

class ExampleClass {
    function example_method() {
        if (extension_loaded('newrelic')) { // Ensure PHP agent is available
    	    newrelic_add_custom_tracer("Foo\\Bar\\ExampleClass::example_method");
        }
    }
}
</code></pre>
<p>Alternatively, on PHP 5.5 or later, the <code>::class</code> syntax can be used instead:</p>
<pre><code>namespace Foo\Bar {
    class ExampleClass {
        function example_method() {
            // ...
        }
    }
}

namespace {
    use Foo\Bar;

    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
    	    newrelic_add_custom_tracer(Bar::class . "::example_method");
        }
    }
}
</code></pre>
