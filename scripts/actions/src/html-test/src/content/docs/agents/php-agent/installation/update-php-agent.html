
<p>To take full advantage of New Relic's latest features, enhancements, and important security patches, we recommend you update your PHP agent to the latest version. For additional information about specific agent updates, refer to the <a href="/docs/release-notes/agent-release-notes/php-release-notes">PHP agent release notes</a>.</p>
<p>This document explains how to update the agent for:</p>
<ul>
  <li>RedHat and CentOS</li>
  <li>Ubuntu and Debian</li>
</ul>
<p>To update via <strong>tar archive</strong>, follow the <a href="/docs/agents/php-agent/installation/php-agent-installation-tar-file">tar archive installation procedures</a>. (Procedures to install and update with the tar archive are the same.)</p>
<h2>Use the <code>newrelic-php5</code> package [#newrelic-php5]</h2>
<p>The package name for the New Relic for PHP agent is <code>newrelic-php5</code>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>Although the name references PHP 5, this package works for all <a href="/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#php-release">supported PHP versions</a>, including PHP 7 versions.</p>
</div>
<h2>Update using your package manager [#install-overview]</h2>
<p>To update the PHP agent:</p>
<ol>
  <li>
    <p>Replace the agent files using your preferred package manager for your system:</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicmVkaGF0LWNlbnRvcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUmVkSGF0IG9yIENlbnRPUyJ9XQ==">
        <div data-prop-text="title">RedHat or CentOS</div>
        <div data-component="Table" data-prop="W10=">
          <div>
            <div>
              <div>
                <p>Manager</p>
              </div>
              <div>
                <p>Procedures</p>
              </div>
            </div>
          </div>
          <div>
            <div>
              <div>
                <p><strong>yum</strong></p>
              </div>
              <div>
                <p>If you are using the New Relic repositories directly, update to the latest agent using the following command:</p>
                <pre><code>sudo yum update newrelic-php5

</code></pre>
              </div>
            </div>
            <div>
              <div>
                <p><strong>32-bit rpm</strong></p>
              </div>
              <div>
                <p>Download the newest version of the <code>.rpm</code> files from the New Relic UI, and run the following command. Make sure to replace <code>X.X.X.X</code> with the latest <a href="/docs/releases/php">New Relic for PHP version number</a>.</p>
                <pre><code>rpm -i newrelic-php5-common-X.X.X.X-1.noarch.rpm newrelic-daemon-X.X.X.X-1.i386.rpm newrelic-php5-X.X.X.X-1.i386.rpm

</code></pre>
              </div>
            </div>
            <div>
              <div>
                <p><strong>64-bit rpm</strong></p>
              </div>
              <div>
                <p>Download the newest version of the <code>.rpm</code> files from the New Relic UI, and run the following command. Make sure to replace <code>X.X.X.X</code> with the latest <a href="/docs/releases/php">New Relic for PHP version number</a>.</p>
                <pre><code>rpm -i newrelic-php5-common-X.X.X.X-1.noarch.rpm newrelic-daemon-X.X.X.X-1.x86_64.rpm newrelic-php5-X.X.X.X-1.x86_64.rpm

</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoidWJ1bnR1LWRlYmlhbiJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiVWJ1bnR1IG9yIERlYmlhbiJ9XQ==">
        <div data-prop-text="title">Ubuntu or Debian</div>
        <div data-component="Table" data-prop="W10=">
          <div>
            <div>
              <div>
                <p>Manager</p>
              </div>
              <div>
                <p>Procedures</p>
              </div>
            </div>
          </div>
          <div>
            <div>
              <div>
                <p><strong>apt-get</strong></p>
              </div>
              <div>
                <p>If you are using the New Relic repositories directly, update to the latest agent using the following command:</p>
                <pre><code>apt-get update
apt-get install newrelic-php5

</code></pre>
              </div>
            </div>
            <div>
              <div>
                <p><strong>32-bit dpkg</strong></p>
              </div>
              <div>
                <p>Download the newest version of the <code>.deb</code> files from the New Relic UI, and run the following command. Make sure to replace <code>X.X.X.X</code> with the latest <a href="/docs/releases/php">New Relic for PHP version number</a>.</p>
                <pre><code>dpkg -i newrelic-php5-common_X.X.X.X_all.deb newrelic-daemon_X.X.X.X_i386.deb newrelic-php5_X.X.X.X_i386.deb

</code></pre>
              </div>
            </div>
            <div>
              <div>
                <p><strong>64-bit dpkg</strong></p>
              </div>
              <div>
                <p>Download the newest version of the <code>.deb</code> files from the New Relic UI, and run the following command. Make sure to replace <code>X.X.X.X</code> with the latest <a href="/docs/releases/php">New Relic for PHP version number</a>.</p>
                <pre><code>dpkg -i newrelic-php5-common_X.X.X.X_all.deb newrelic-daemon_X.X.X.X_amd64.deb newrelic-php5_X.X.X.X_amd64.deb

</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </li>
  <li>
    <p>RedHat or CentOS: Run the <code>newrelic-install</code> script, and follow the <a href="/docs/php/the-newrelic-install-script">install script's confirmation prompt</a> before overwriting an old installation.</p>
    <pre><code>sudo newrelic-install install
</code></pre>
    <p>Ubuntu or Debian: Follow the package manager's prompts to run the <code>newrelic-install</code> script as part of its installation process.</p>
  </li>
  <li>
    <p>Stop any residual <code>newrelic-daemon</code> processes by running</p>
    <pre><code>kill $(pgrep newrelic-daemon)
</code></pre>
    <p>If the <code>newrelic-daemon</code> is configured to <a href="https://docs.newrelic.com/docs/agents/php-agent/advanced-installation/starting-php-daemon-advanced#selecting-external">start in external mode</a>, use your operating system's service manager to restart it.</p>
  </li>
  <li>
    <p><a href="/docs/agents/php-agent/troubleshooting/why-when-you-must-restart-your-web-server">Restart your web server</a> (Apache, Nginx, PHP-FPM, etc.).</p>
  </li>
  <li>
    <p>Wait a few minutes for your application to send data to New Relic.</p>
  </li>
</ol>
<h2>Update unsupported agent versions [#eol-update]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>If you are updating from an older agent version, including major version jumps, review the following list for changes in functionality.</p>
</div>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Migration</p>
      </div>
      <div>
        <p>Comments</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>8.0.0.204</p>
      </div>
      <div>
        <p>Release notes: <a href="/docs/release-notes/agent-release-notes/php-release-notes/php-agent-800204">PHP agent 8.0.0.204</a></p>
        <p><strong>TLS replaces the <code>newrelic.daemon.ssl</code> ini setting.</strong></p>
        <p>To increase security, the <code>newrelic.daemon.ssl</code> ini setting has been removed. Transport Layer Security (TLS) will now always be used in communication with the New Relic collector.</p>
      </div>
    </div>
    <div>
      <div>
        <p>7.0.0.186</p>
      </div>
      <div>
        <p>Release notes: <a href="/docs/release-notes/agent-release-notes/php-release-notes/php-agent-700186">PHP agent 7.0.0.186</a></p>
        <p><strong>PHP 5.2 is no longer supported.</strong></p>
        <p>New Relic highly encourages you to use a supported version of PHP (5.6 or higher). If you want to continue running the New Relic PHP agent with PHP 5.2, we recommend using agent version 6.9. However, in this case, we can only offer limited support.</p>
      </div>
    </div>
    <div>
      <div>
        <p>5.0.0.115</p>
      </div>
      <div>
        <p>Release notes: <a href="/docs/release-notes/agent-release-notes/php-release-notes/php-agent-500115">PHP agent 5.0.0.115</a></p>
        <p><strong>Daemon command line flags have been renamed.</strong></p>
        <p>For customers who start the daemon manually, you can find the <strong>newly renamed command line flags</strong> with the <code>-h</code> or <code>--help</code> flags. The <strong>following old flags will be removed</strong> in a future release:</p>
        <ul>
          <li>[-p pidfile]</li>
          <li>[-d level]</li>
          <li>[-c config]</li>
          <li>[-l logfile]</li>
          <li>[-P port]</li>
          <li>[-s]</li>
          <li>[-n]</li>
          <li>[-b SSL-certificate-bundle]</li>
          <li>[-S SSL-certificate-path]</li>
          <li>[-H host]</li>
          <li>[-x proxy]</li>
          <li>[-a auditlog]</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<h2>Troubleshooting after update [#troubleshoot]</h2>
<p>If you updated PHP and the agent stopped working or reporting data, follow the <a href="/docs/agents/php-agent/troubleshooting/agent-stops-working-after-updating-php">troubleshooting procedures</a>.</p>
