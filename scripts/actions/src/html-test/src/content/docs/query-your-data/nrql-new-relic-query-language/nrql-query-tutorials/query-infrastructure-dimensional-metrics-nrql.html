
<p><a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#dimensional-metrics">Dimensional metrics</a> are an industry standard for storing and querying metric data. All <a href="/docs/infrastructure">infrastructure</a> metrics are stored as event data in New Relic, but you can also query them through dimensional metrics.</p>
<p>In this page you can learn:</p>
<ul>
  <li>The <a href="#why">benefits of dimensional metrics</a>.</li>
  <li>A few <a href="#examples">examples</a> on how and where to use them.</li>
  <li><a href="#known-limitations">Known issues</a>.</li>
</ul>
<h2>Why it matters [#why]</h2>
<p>At New Relic we report <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#metrics">metrics</a> in several ways, including <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#dimensional-metrics">dimensional metrics</a>, which are used by our metric API, Telemetry SDK, some open-source integrations, and our infrastructure services.</p>
<p>This type of metric enables you to:</p>
<ul>
  <li>Enjoy an improved query experience for Infrastructure data.</li>
  <li>Discover all your metrics in one place.</li>
  <li>Tap into more metric sources, such as <a href="/docs/integrations/prometheus-integrations/get-started/new-relic-prometheus-openmetrics-integration-kubernetes">Prometheus</a>.</li>
</ul>
<p>For example, the query to get the maximum duration of your Lambda functions is simplified:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Query with samples</strong></p>
      </div>
      <div>
        <pre><code>FROM ServerlessSample
SELECT max(provider.duration.Maximum)
WHERE provider = ‘LambdaFunction’

</code></pre>
      </div>
    </div>
    <div>
      <div>
        <p><strong>Query with metrics</strong></p>
      </div>
      <div>
        <pre><code>FROM Metric
SELECT max(aws.lambda.function.duration)

</code></pre>
      </div>
    </div>
  </div>
</div>
<h2>Get started [#compatibility-reqs]</h2>
<p>No agent or integration updates are required to use these metrics.</p>
<p><a href="/docs/alerts/new-relic-alerts/defining-conditions/create-alert-conditions-nrql-queries">NRQL alerting</a> based on dimensional metrics is also supported, except for data coming from <a href="/docs/integrations/infrastructure-integrations/cloud-integrations">cloud integrations</a> (that is metrics from <a href="/docs/integrations/amazon-integrations/aws-integrations-list">AWS</a>, <a href="/docs/integrations/google-cloud-platform-integrations">GCP</a>, and <a href="/docs/integrations/microsoft-azure-integrations/azure-integrations-list">Azure</a>).</p>
<h2>Where and how to query dimensional metrics [#where]</h2>
<p>All current <a href="/docs/query-data/nrql-new-relic-query-language/getting-started/nrql-syntax-clauses-functions">NRQL query features</a> are supported. Queries can use <code>WHERE</code>, <code>FACET</code>, and time selection functions such as <code>SINCE</code>, <code>UNTIL</code>, and <code>COMPARE WITH</code>.</p>
<p>The <a href="/docs/chart-builder/use-chart-builder/get-started/introduction-chart-builder">query builder</a> in <a href="https://one.newrelic.com/">New Relic One</a> supports metrics in both simple and advanced (NRQL) mode.</p>
<h2>Naming conventions for metrics and attributes [#naming-conventions]</h2>
<p>All metric names and attributes for dimensional metrics follow the same naming convention in order to make them easy to find and use. Metric and attribute names are namespaced with dots: for example, the <code>host.</code> prefix is used for host metrics, the <code>k8s.</code> prefix is used for Kubernetes metrics, and <code>aws.</code> is used for AWS metrics.</p>
<p>The graphic below shows how a <code>ProcessSample</code> that contains three metrics (<code>cpuPercent</code>, <code>ioTotalReadBytes</code>, and <code>ioTotalWriteBytes</code>) is split into three separate metrics. Note the updated naming of the metrics and the attributes.</p>
<p>
  <img src="./images/naming-convention.png" alt="naming-convention.png" title="naming-convention.png">
</p>
<p>Dimensional metrics naming convention</p>
<h2>Examples</h2>
<p>Here are some examples of NQRL queries with and without dimensional metrics:</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1hd3MtZWJzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJBV1MgRUJTIHF1ZXJ5IGV4YW1wbGUifV0=">
    <div data-prop-text="title">AWS EBS query example</div>
    <p>Get the total write time by EBS Volume.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p><strong>Query with samples</strong></p>
          </div>
          <div>
            <pre><code>FROM BlockDeviceSample
SELECT sum('provider.volumeTotalWriteTime.Sum')
WHERE provider = ‘EbsVolume’
FACET entityName

</code></pre>
          </div>
        </div>
        <div>
          <div>
            <p><strong>Query with metrics</strong></p>
          </div>
          <div>
            <pre><code>FROM Metric
SELECT sum(aws.ebs.volume.TotalWriteTime)
FACET entity.name

</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1henVyZS1zZXJ2aWNlLWJ1cyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQXp1cmUgU2VydmljZSBidXMgcXVlcnkgZXhhbXBsZSJ9XQ==">
    <div data-prop-text="title">Azure Service bus query example</div>
    <p>Maximum number of messages in an Azure Service Bus topic by resource group.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p><strong>Query with samples</strong></p>
          </div>
          <div>
            <pre><code>FROM AzureServiceBusTopicSample
SELECT max(activeMessages.Maximum)
FACET resourceGroupName

</code></pre>
          </div>
        </div>
        <div>
          <div>
            <p><strong>Query with metrics</strong></p>
          </div>
          <div>
            <pre><code>FROM Metric
SELECT max(azure.servicebus.topic.activeMessages)
FACET azure.resourceGroup

</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1henVyZS1mdW5jdGlvbnMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkF6dXJlIGZ1bmN0aW9ucyBxdWVyeSBleGFtcGxlIn1d">
    <div data-prop-text="title">Azure functions query example</div>
    <p>Number of function executions Azure Functions over the past 6 hours by region over time.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p><strong>Query with samples</strong></p>
          </div>
          <div>
            <pre><code>FROM AzureFunctionsAppSample
SELECT sum(functionExecutionCount.Total)
FACET regionName
TIMESERIES SINCE 6 hours ago

</code></pre>
          </div>
        </div>
        <div>
          <div>
            <p><strong>Query with metrics</strong></p>
          </div>
          <div>
            <pre><code>FROM Metric
SELECT sum(azure.functions.app.functionExecutionCount)
FACET azure.region
TIMESERIES SINCE 6 hours ago

</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1henVyZS12bSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQXp1cmUgVk1zIHF1ZXJ5IGV4YW1wbGUifV0=">
    <div data-prop-text="title">Azure VMs query example</div>
    <p>Compare the number of Azure VMs over the past thirty minutes with the same time a week ago.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p><strong>Query with samples</strong></p>
          </div>
          <div>
            <pre><code>FROM AzureVirtualMachineScaleSetSample
SELECT uniqueCount(vMName)
FACET name
SINCE 30 MINUTES AGO COMPARE WITH 1 WEEK AGO

</code></pre>
          </div>
        </div>
        <div>
          <div>
            <p><strong>Query with metrics</strong></p>
          </div>
          <div>
            <pre><code>FROM Metric
SELECT uniqueCount(azure.vms.vmName)
FACET azure.resourceName
WHERE azure.resourceType='Microsoft.Compute/virtualMachineScaleSets'
SINCE 30 MINUTES AGO COMPARE WITH 1 WEEK AGO

</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1uZ2lueCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTkdJTlggcXVlcnkgZXhhbXBsZSJ9XQ==">
    <div data-prop-text="title">NGINX query example</div>
    <p>The average number of NGINX requests per second over time.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p><strong>Query with samples</strong></p>
          </div>
          <div>
            <pre><code>FROM NginxSample
SELECT average(net.requestsPerSecond)
TIMESERIES

</code></pre>
          </div>
        </div>
        <div>
          <div>
            <p><strong>Query with metrics</strong></p>
          </div>
          <div>
            <pre><code>FROM Metric
SELECT average(nginx.server.net.requestsPerSecond)
TIMESERIES

</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXhhbXBsZS1teXNxbCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTXlTUUwgcXVlcnkgZXhhbXBsZSJ9XQ==">
    <div data-prop-text="title">MySQL query example</div>
    <p>The maximum number of used MySQL connections.</p>
    <div data-component="Table" data-prop="W10=">
      <div>
        <div>
          <div>
            <p><strong>Query with samples</strong></p>
          </div>
          <div>
            <pre><code>FROM MysqlSample
SELECT max(net.maxUsedConnections)

</code></pre>
          </div>
        </div>
        <div>
          <div>
            <p><strong>Query with metrics</strong></p>
          </div>
          <div>
            <pre><code>FROM Metric
SELECT max(mysql.node.net.maxUsedConnections)

</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h2>Known limitations</h2>
<ul>
  <li>Metric queries with <code>*</code> do not return Infrastructure sample data (for example, <code>SELECT * FROM Metric</code>).</li>
  <li>In order to select attributes starting with <code>tags.</code> a metric name has to be provided. For example, <code>SELECT uniques(tags.environment) FROM Metric WHERE metricName=’aws.lambda.function.duration’</code> does not work without the <code>WHERE</code> clause.</li>
  <li>Results may not be complete if the selection criteria matches too many samples. For example, <code>SELECT uniqueCount(entity.guid) FROM Metric</code> maps to all Infrastructure samples, and may return incomplete results.</li>
  <li>Initially there is no support for the newly introduced metric wildcarding feature (for example, <code>SELECT average(host.swap%Bytes) FROM Metric</code>).</li>
</ul>
