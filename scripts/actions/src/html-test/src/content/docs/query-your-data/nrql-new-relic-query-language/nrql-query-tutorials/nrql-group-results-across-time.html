
<p>With <a href="/docs/query-data/nrql-new-relic-query-language/getting-started/introduction-nrql">NRQL</a>, you can create queries that group results across time. For example, you can group results together based on timestamps by separating them into buckets that cover a specified range of dates and times.</p>
<p>When using <a href="/docs/insights/use-insights-ui/time-settings/set-time-range-insights-dashboards-charts">time functions</a> in NRQL queries, the results are returned in UTC. To adjust the results to your time zone, include the <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-syntax-components-functions#sel-timezone"><code>WITH TIMEZONE</code> clause</a> in your query.</p>
<h2>Facet your NRQL query time range [#cohorts]</h2>
<p>To create your NRQL query, use a <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-syntax-components-functions#sel-facett"><code>FACET</code> clause</a> with a bucket function that works with a timestamp attribute. Run a standard <code>FACET</code> query, but instead of faceting by an attribute, facet by time. For example:</p>
<pre><code>SELECT count(*) FROM PageView SINCE 1 day ago FACET monthOf(account_created)
</code></pre>
<p>To perform multiple functions within the same query, use NRQL's multi-facet capability:</p>
<pre><code>SELECT count(*) FROM PageView SINCE 1 day ago FACET dateOf(account_created), monthOf(account_created)
</code></pre>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p><strong>Time-based functions</strong></p>
      </div>
      <div>
        <p><strong>Description</strong></p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>yearOf(attr)</code></p>
      </div>
      <div>
        <p>Returns the year of a timestamp.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>quarterOf(attr)</code></p>
      </div>
      <div>
        <p>Returns the quarter of the year. The returned value includes both the quarter and the year.</p>
        <p>Example: <code>Q1 2014</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>monthOf(attr)</code></p>
      </div>
      <div>
        <p>Returns the month and year of the timestamp.</p>
        <p>Example: <code>July 2014</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>weekOf(attr)</code></p>
      </div>
      <div>
        <p>Returns the week the timestamp occurred by naming the month and day of that week's Monday.</p>
        <p>Example: <code>Week of January 15</code>.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>weekdayOf(attr)</code></p>
      </div>
      <div>
        <p>Returns the day of the week of the timestamp. The returned value loops back at the end of the week, allowing you to look at trends by weekday over time.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dateOf(attr)</code></p>
      </div>
      <div>
        <p>Returns the date of the timestamp. The returned value includes month, day and year.</p>
        <p>Example: <code>July 15, 2014</code></p>
      </div>
    </div>
    <div>
      <div>
        <p><code>dayOfMonthOf(attr)</code></p>
      </div>
      <div>
        <p>Returns the numeric date within a single month of the timestamp, a value from 1 to 31. The returned value does not include the month.</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>hourOf(attr)</code></p>
      </div>
      <div>
        <p>Returns the hour of the timestamp.</p>
        <p>The returned value does not include a prepended 0 for hours between 1am and 9am. This differs from functions and clauses such as <code>SINCE</code>, which accept these hours with a 0 at the start.</p>
        <p>Examples: <code>6:00</code>, <code>12:00</code>, <code>18:00</code></p>
      </div>
    </div>
  </div>
</div>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZmFjZXQtdGltZS1leGFtcGxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJHcm91cCByZXN1bHRzIGJ5IG1vbnRoIn1d">
    <div data-prop-text="title">Group results by month</div>
    <p>To group all results based on the month, use the <code>monthOf</code> function. In this example, the NRQL query includes a function (<code>count(*)</code>), a data type (<code>PageView</code>), a time frame (<code>SINCE 1 day ago</code>) and a time facet (<code>monthOf(attribute)</code>).</p>
    <pre><code>SELECT count(*) FROM PageView SINCE 1 day ago FACET monthOf(account_created)

</code></pre>Running the query returns the following table of results:
    ![Insights cohort query results](./images/screen-insights-cohort-query-results_1.png "Screenshot - Insights cohort query results")
    In this NRQL query results example, the second-largest number of page views over the last day came from customers whose accounts were created during October.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZmFjZXQtb3RoZXItZXhhbXBsZXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6Ik90aGVyIGdyb3VwaW5nIGV4YW1wbGVzIHdpdGggRkFDRVQgY2xhdXNlIn1d">
    <div data-prop-text="title">Other grouping examples with FACET clause</div>
    <p>You can run NRQL queries to group your data in other ways, not just time. For additional examples, see the <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-syntax-components-functions#sel-facet">NRQL <code>FACET</code> documentation</a>.</p>
  </div>
</div>
