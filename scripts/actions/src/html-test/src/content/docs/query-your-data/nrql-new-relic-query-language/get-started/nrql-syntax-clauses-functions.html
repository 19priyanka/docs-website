
<p>NRQL is a query language you can use to query the New Relic database. This document explains NRQL syntax, clauses, components, and functions.</p>
<h2>Syntax</h2>
<p>This document is a reference for the functions and clauses used in a NRQL query. Other resources for understanding NRQL:</p>
<ul>
  <li><a href="/docs/query-data/nrql-new-relic-query-language/getting-started/introduction-nrql">Intro to NRQL</a>: explains what NRQL is used for, what data you can query with it, and basic NRQL syntax</li>
  <li><a href="/docs/using-new-relic/user-interface-functions/view-your-data/standard-new-relic-ui-page-functions#view-query">Examine NRQL queries used to build New Relic charts</a></li>
  <li><a href="/docs/insights/new-relic-insights/using-new-relic-query-language/simulate-sql-join-functions-insights">Simulate SQL JOIN functions</a></li>
  <li><a href="/docs/insights/new-relic-insights/features/funnels">Use funnels to evaluate a series of related data</a></li>
  <li><a href="/docs/insights/insights-api/get-data/query-insights-event-data-api">Format NRQL for querying with the Event API</a></li>
</ul>
<h2>Query components [#clauses]</h2>
<p>Every NRQL query will begin with a <code>SELECT</code> statement or a <code>FROM</code> clause. All other clauses are optional. The clause definitions below also contain example NRQL queries.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3RhdGUtc2VsZWN0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD5SZXF1aXJlZDogPElubGluZUNvZGU+U0VMRUNUPC9JbmxpbmVDb2RlPiBzdGF0ZW1lbnQ8Lz4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjo0MSwiY29sdW1uIjoxMSwib2Zmc2V0IjoyMDE4fSwiZW5kIjp7ImxpbmUiOjQxLCJjb2x1bW4iOjY5LCJvZmZzZXQiOjIwNzZ9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT attribute ...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT average(duration) FROM PageView SINCE 1 week ago
    
</code></pre>The `SELECT` specifies what portion of a data type you want to query by specifying an [attribute](/docs/insights/new-relic-insights/decorating-events/insights-attributes) or a [function](#functions). It's followed by one or more arguments separated by commas. In each argument you can:
    * Get the values of all available attributes by using `*` as a wildcard. For example: `SELECT * from Transaction`.
    * Get values associated with a specified attribute or multiple attributes specified in a [comma separated list](#commas).
    * Get aggregated values from specified attributes by selecting an [aggregator function](#functions).
    * Label the results returned in each argument with [the `AS` clause](#sel-as).
    You can also [use `SELECT` with basic math functions](/docs/query-data/nrql-new-relic-query-language/getting-started/nrql-math-using-select).
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="avg-resp-time-query"
    title="Avg response time since last week"
    >
    This query returns the average response time since last week.
    <pre><code>
SELECT function(attribute) ...

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLWZyb20ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8PlJlcXVpcmVkOiA8SW5saW5lQ29kZT5GUk9NPC9JbmxpbmVDb2RlPiBjbGF1c2U8Lz4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjo3NywiY29sdW1uIjoxMSwib2Zmc2V0IjozNDU5fSwiZW5kIjp7ImxpbmUiOjc3LCJjb2x1bW4iOjY0LCJvZmZzZXQiOjM1MTJ9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  FROM data type
  ...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT count(*) FROM Transaction, PageView SINCE 3 days ago
    
</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="multiple-events"
    title="Query multiple data types"
    >
    This query returns the count of all [APM transactions](/docs/insights/new-relic-insights/decorating-events/insights-attributes#transaction-defaults) and [Browser events](/docs/insights/new-relic-insights/decorating-events/browser-default-attributes-insights#browser-attributes-table) over the last three days:
    <pre><code>
    SELECT count(*) FROM Transaction SINCE 3 days ago
    
</code></pre>Use the `FROM` clause to specify the [data type](/docs/query-data/nrql-new-relic-query-language/getting-started/introduction-nrql#what-you-can-query) you wish to query. You can start your query with `FROM` or with [`SELECT`](#state-select). You can merge values for the same attributes across multiple data types in a [comma separated list](#commas).
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="one-event"
    title="Query one data type"
    >
    This query returns the count of all [APM transactions](/docs/insights/new-relic-insights/decorating-events/insights-attributes#transaction-defaults) over the last three days:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2hvdy1ldmVudC10eXBlcyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6Ijw+PElubGluZUNvZGU+U0hPVyBFVkVOVCBUWVBFUzwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTE1LCJjb2x1bW4iOjExLCJvZmZzZXQiOjQ5NjZ9LCJlbmQiOnsibGluZSI6MTE1LCJjb2x1bW4iOjY2LCJvZmZzZXQiOjUwMjF9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SHOW EVENT TYPES...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SHOW EVENT TYPES SINCE 1 day ago
    
</code></pre>`SHOW EVENT TYPES` will return a list of all the data types present in your account for a specific time range. It is used as the first clause in a query instead of `SELECT`.
    &#x3C;Callout variant="important">
    In this context, "event types" refers to the data types you can access with a NRQL query.
    &#x3C;/Callout>
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="avg-resp-time-query"
    title="Data types in the last day"
    >
    This query will return all the data types present over the past day:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLXdoZXJlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5XSEVSRTwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTQ0LCJjb2x1bW4iOjExLCJvZmZzZXQiOjU3ODJ9LCJlbmQiOnsibGluZSI6MTQ0LCJjb2x1bW4iOjU1LCJvZmZzZXQiOjU4MjZ9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>WHERE</code> clause to filter results. NRQL returns the results that fulfill the condition(s) you specify in the clause.</p>
    <pre><code>SELECT function(attribute) ...
  WHERE attribute [operator 'value' | IN ('value' [, 'value]) | IS [NOT] NULL ]
  [AND|OR ...]
  ...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT histogram(duration, 50, 20) FROM PageView
    WHERE countryCode IN ('CA', 'US') AND userAgentName='Safari' AND pageUrl LIKE '%checkout%'
    SINCE 1 day ago
    
</code></pre>&#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `LIKE`
    &#x3C;/td>
    &#x3C;td>
    Determines if an attribute contains a specified sub-string.
    The string argument for the `LIKE` operator accepts the percent sign (%) as a wildcard anywhere in the string. If the substring does not begin or end the string you are matching against, the wildcard must begin or end the string.
    **Examples:**
    `userAgentName LIKE 'IE%'`
    * IE
    * IE Mobile
    `userAgentName LIKE 'o%a%'`
    * Opera
    * Opera Mini
    `userAgentName LIKE 'o%a'`
    * Opera
    `userAgentName LIKE '%o%a%'`
    * Opera
    * Opera Mini
    * Mozilla Gecko
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `NOT LIKE`
    &#x3C;/td>
    &#x3C;td>
    Determines if an attribute does not contain a specified sub-string.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `RLIKE`
    &#x3C;/td>
    &#x3C;td>
    Determines if an attribute contains a specified Regex sub-string. Uses [RE2 syntax](https://github.com/google/re2/wiki/Syntax).
    **Examples:**
    `appName RLIKE 'z.*|q.*''`
    * `z-app`
    * `q-app`
    `hostname RLIKE 'ip-10-351-[0-2]?[0-9]-.*'`
    * `ip-10-351-19-237`
    * `ip-10-351-2-41`
    * `ip-10-351-24-238`
    * `ip-10-351-14-15`
    &#x3C;Callout variant="important">
    Note:
    * Slashes must be escaped in the Regex pattern. For example, `\d` must be `\\d`.
    * Regex defaults to full-string matching, therefore `^` and `$` are implicit and you do not need to add them.
    * If the Regex pattern contains a capture group, the group will be ignored. That is, the group will not be captured for use later in the query.
    &#x3C;/Callout>
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `NOT RLIKE`
    &#x3C;/td>
    &#x3C;td>
    Determines if an attribute does not contain a specified Regex sub-string. Uses [RE2 syntax](https://github.com/google/re2/wiki/Syntax).
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;/tbody>
    &#x3C;/Table>
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="query-3-conditions"
    title="Example query with three conditions"
    >
    This query returns the browser response time for pages with `checkout` in the URL for Safari users in the United States and Canada over the past 24 hours.
    <pre><code>
        SELECT * FROM PageView WHERE countryCode NOT IN ('CA', 'WA')
        
</code></pre>* If you specify more than one condition, separate the conditions by the operators `AND` or `OR`.
    * If you want to [simulate a SQL join](/docs/insights/nrql-new-relic-query-language/using-nrql/simulate-sql-join-functions-insights), use custom attributes in a `WHERE` or `FACET` clause.
    &#x3C;Table id="where-operators">
    &#x3C;thead>
    &#x3C;tr>
    &#x3C;th width={150}>
    **Operators that the `WHERE` clause accepts**
    &#x3C;/th>
    &#x3C;th>
    **Description**
    &#x3C;/th>
    &#x3C;/tr>
    &#x3C;/thead>
    &#x3C;tbody>
    &#x3C;tr>
    &#x3C;td>
    `=`, `!=`, `&#x3C;`, `&#x3C;=`, `>`, `>=`
    &#x3C;/td>
    &#x3C;td>
    NRQL accepts standard comparison operators.
    Example: `state = 'WA'`
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `AND`
    &#x3C;/td>
    &#x3C;td>
    Used to define an intersection of two conditions.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `OR`
    &#x3C;/td>
    &#x3C;td>
    Used to define a union of two conditions.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `IS NULL`
    &#x3C;/td>
    &#x3C;td>
    Determines if an attribute has a null value.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `IS NOT NULL`
    &#x3C;/td>
    &#x3C;td>
    Determines if an attribute does not have a null value.
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `IN`
    &#x3C;/td>
    &#x3C;td>
    Determines if the string value of an attribute is in a specified set. Using this method yields better performance than stringing together multiple `WHERE` clauses.
    Example: `animalType IN ('cat', 'dog', 'fish')`
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    `NOT IN`
    &#x3C;/td>
    &#x3C;td>
    Determines if the string value of an attribute is not in a specified set. Using this method yields better performance than stringing together multiple `WHERE` clauses.
    Values must be in parentheses, separated by commas. For example:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLWFzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5BUzwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MzU5LCJjb2x1bW4iOjExLCJvZmZzZXQiOjExMzM4fSwiZW5kIjp7ImxpbmUiOjM1OSwiY29sdW1uIjo1Miwib2Zmc2V0IjoxMTM3OX19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  AS 'label'
  ...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT funnel(SESSION,
        WHERE name='Controller/about/main' AS 'Step 1',
        WHERE name = 'Controller/about/careers' AS 'Step 2')
        FROM PageView SINCE 1 week ago
    
</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="funnel-as"
    title={&#x3C;>Query using funnel and &#x3C;InlineCode>AS&#x3C;/InlineCode>&#x3C;/>}
    >
    This query returns a count of people who have visited both the main page and the careers page of a site over the past week:
    <pre><code>
    SELECT count(*)/uniqueCount(session) AS 'Pageviews per Session'
      FROM PageView
    
</code></pre>Use the `AS` clause to label an attribute, aggregator, step in a funnel, or the result of a math function with a string delimited by single quotes. The label is used in the resulting chart.
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="math-as"
    title={&#x3C;>Query using math function and &#x3C;InlineCode>AS&#x3C;/InlineCode>&#x3C;/>}
    >
    This query returns the number of page views per session:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLWZhY2V0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5GQUNFVDwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6NDAxLCJjb2x1bW4iOjExLCJvZmZzZXQiOjEyNTkxfSwiZW5kIjp7ImxpbmUiOjQwMSwiY29sdW1uIjo1NSwib2Zmc2V0IjoxMjYzNX19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  FACET attribute
  ...

</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="cohort-analysis"
    title="Grouping results across time"
    >
    [Advanced segmentation](/docs/insights/new-relic-insights/features/advanced-segmentation) and [cohort analysis](/docs/insights/new-relic-insights/features/cohort-analysis-grouping-results-across-time) allow you to facet on bucket functions to more effectively break out your data.
    Cohort analysis is a way to group results together based on timestamps. You can separate them into buckets that cover a specified range of dates and times.
    &#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT uniqueCount(pageUrl) FROM PageView FACET city
    
</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="uniquecount"
    title={&#x3C;>Faceted query using &#x3C;InlineCode>uniqueCount()&#x3C;/InlineCode>&#x3C;/>}
    >
    This query shows the cities that access the highest number of unique URLs. This query uses the total number of times a particular city appears in the results to determine how facets are picked and ordered.
    <pre><code>
    SELECT count(*) FROM PageView FACET city
    
</code></pre>Use `FACET` to separate and group your results by attribute values. For example, you could `FACET` your `PageView` data by `deviceType` to figure out what percentage of your traffic comes from mobile, tablet, and desktop devices.
    Use the `LIMIT` clause to specify how many facets appear (default is 10). For more complex grouping, use [`FACET CASES`](#sel-facet-cases). `FACET` clauses support up to five attributes, separated by commas.
    The facets are sorted in descending order by the first field you provide in the `SELECT` clause. If you are faceting on attributes with more than 1,000 unique values, a subset of facet values is selected and sorted according to the query type.
    When selecting `min()`, `max()`, or `count()`, `FACET` uses those functions to determine how facets are picked and sorted. When selecting any other [function](#functions), `FACET` uses the frequency of the attribute you are faceting on to determine how facets are picked and sorted.
    For more on faceting on multiple attributes, with some real-world examples, see this [New Relic blog post](https://blog.newrelic.com/2017/12/08/facets-nrql-queries-insights/).
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="faceted-query"
    title={&#x3C;>Faceted query using &#x3C;InlineCode>count()&#x3C;/InlineCode>&#x3C;/>}
    >
    This query shows cities with the highest pageview counts. This query uses the total number of pageviews per city to determine how facets are picked and ordered.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6Ijw+PElubGluZUNvZGU+RkFDRVQgLi4uIEFTPC9JbmxpbmVDb2RlPiBjbGF1c2U8Lz4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjo0NTUsImNvbHVtbiI6MTEsIm9mZnNldCI6MTUzODl9LCJlbmQiOnsibGluZSI6NDU1LCJjb2x1bW4iOjYyLCJvZmZzZXQiOjE1NDQwfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use <code>FACET ... AS</code> to name facets using the <code>AS</code> keyword in queries. This clause is helpful for adding clearer or simplified names for facets in your results. It can also be used to rename facets in <a href="/docs/query-your-data/nrql-new-relic-query-language/nrql-query-tutorials/nested-aggregation-make-ordered-computations-single-query">nested aggregation</a> queries.</p>
    <p><code>FACET ... AS</code> queries will change the facet names in results (when they appear as headers in tables, for example), but not the actual facet names themselves.</p>
    <pre><code>FROM Transaction SELECT count(*) FACET response.headers.contentType AS 'content type'

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLWZhY2V0LWNhc2VzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5GQUNFVCBDQVNFUzwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6NDY5LCJjb2x1bW4iOjExLCJvZmZzZXQiOjE2MTcxfSwiZW5kIjp7ImxpbmUiOjQ2OSwiY29sdW1uIjo2MSwib2Zmc2V0IjoxNjIyMX19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  FACET CASES (
    WHERE attribute operator value, WHERE attribute operator value, ...
    )
  ...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT count(*) FROM Transaction FACET CASES (WHERE name LIKE '%login%' AS 'Total Logins', WHERE name LIKE '%feature%' AND customer_type='Paid' AS 'Feature Visits from Paid Users')
    
</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="facet-cases-as-label"
    title={&#x3C;>Label groups with &#x3C;InlineCode>AS&#x3C;/InlineCode>&#x3C;/>}
    >
    This example uses the [`AS`](#sel-as) selector to give your results a human-readable name:
    <pre><code>
    SELECT count(*) FROM Transaction FACET CASES (WHERE name LIKE '%login%', WHERE name LIKE '%feature%' AND customer_type='Paid')
    
</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="facet-cases-mixnmatch"
    title="Group based on multiple attributes"
    >
    This example groups results into one bucket where the transaction name contains `login`, and another where the URL contains `login` and a custom attribute indicates that the user was a paid user:
    <pre><code>
    SELECT count(*) FROM PageView FACET CASES (WHERE duration &#x3C; 1, WHERE duration > 1 and duration &#x3C; 10, WHERE duration > 10)
    
</code></pre>Use `FACET CASES` to break out your data by more complex conditions than possible with [`FACET`](#sel-facet). Separate multiple conditions with a comma `,`. For example, you could query your PageView data and `FACET CASES` into categories like less than 1 second, from 1 to 10 seconds, and greater than 10 seconds. You can combine multiple attributes within your cases, and label the cases with the [`AS`](#sel-as) selector. Data points will be added to at most one facet case, the first facet case that they match.
    You may also use a [time function](/docs/query-data/nrql-new-relic-query-language/nrql-query-examples/group-results-across-time) with your attribute.
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="facet-cases-basic"
    title={&#x3C;>Basic usage with &#x3C;InlineCode>WHERE&#x3C;/InlineCode>&#x3C;/>}
    >
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLWZhY2V0LW9yZGVyIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5GQUNFVCAuLi4gT1JERVIgQlk8L0lubGluZUNvZGU+IGNsYXVzZTwvPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjUyMCwiY29sdW1uIjoxMSwib2Zmc2V0IjoxODQzNX0sImVuZCI6eyJsaW5lIjo1MjAsImNvbHVtbiI6NjgsIm9mZnNldCI6MTg0OTJ9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>In NRQL, the default is for the first aggregation in the <code>SELECT</code> clause to guide the selection of facets in a query. <code>FACET ... ORDER BY</code> allows you to override this default behavior by adding an aggregate function with the ORDER BY modifier to specify how facets are selected. Specifically, the clause will override the priority by which facets are chosen to be in the final result before being limited by the <code>LIMIT</code> clause. This clause can be used in querying but not for alerts or streaming.</p>
    <p>This example shows how to use <code>FACET ... ORDER BY</code> to find the average durations of app transactions, showing the top 10 (default limit) highest durations by apps which have the highest response size. In this case, if <code>FACET ... ORDER BY</code> is not used, the query results will instead show the top 10 by highest durations, with response size being irrelevant to the app selection.</p>
    <pre><code>FROM Transaction SELECT average(duration) TIMESERIES FACET appName ORDER BY max(responseSize)

</code></pre>&#x3C;Callout variant="tip">
    Because the operations are performed before the `LIMIT` clause is applied, `FACET ... ORDER BY` does not impact the sort of the final query results, which will be particularly noticeable in the results for non-timeseries queries.
    &#x3C;/Callout>
    &#x3C;Callout variant="important">
    The `ORDER BY` modifier in this case works differently than the `ORDER BY` clause. When parsing queries that follow the format `FACET attribute1 ORDER BY attribute2`, New Relic will read these as `FACET ... ORDER BY` queries, but only if `ORDER BY` appears immediately after `FACET`. Otherwise `ORDER BY` will be interpreted by New Relic as a clause.
    &#x3C;/Callout>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLWxpbWl0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5MSU1JVDwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6NTQyLCJjb2x1bW4iOjExLCJvZmZzZXQiOjIwMjY4fSwiZW5kIjp7ImxpbmUiOjU0MiwiY29sdW1uIjo1NSwib2Zmc2V0IjoyMDMxMn19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  LIMIT count
  ...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT uniqueCount(session), percentile(duration, 95)
      FROM PageView WHERE userAgentOS = 'Windows'
      FACET countryCode LIMIT 20 SINCE YESTERDAY
    
</code></pre>Use the `LIMIT` clause to control the maximum number of facet values returned by `FACET` queries or the maximum number of items returned by `SELECT *` queries. This clause takes a single integer value as an argument. If the `LIMIT` clause is not specified, or no value is provided, the limit defaults to 10 for `FACET` queries and 100 in the case of `SELECT *` queries.
    The maximum allowed value for the `LIMIT` clause is 2,000.
    &#x3C;CollapserGroup>
    &#x3C;Collapser title={&#x3C;>Query using &#x3C;InlineCode>LIMIT&#x3C;/InlineCode>&#x3C;/>}>
    This query shows the top 20 countries by session count and provides 95th percentile of response time for each country for Windows users only.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLW9mZnNldCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6Ijw+PElubGluZUNvZGU+T0ZGU0VUPC9JbmxpbmVDb2RlPiBjbGF1c2U8Lz4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjo1NzAsImNvbHVtbiI6MTEsIm9mZnNldCI6MjEzODF9LCJlbmQiOnsibGluZSI6NTcwLCJjb2x1bW4iOjU2LCJvZmZzZXQiOjIxNDI2fX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  LIMIT count OFFSET count
  ...

</code></pre>Use the `OFFSET` clause with `LIMIT` to control the portion of rows returned by `SELECT *` or `SELECT column` queries. Like the `LIMIT` clause, `OFFSET` takes a single integer value as an argument. `OFFSET` sets the number of rows to be skipped before the selected rows of your query are returned. This is constrained by `LIMIT`.
    `OFFSET` rows are skipped starting from the most recent record.
    For example, the query `SELECT interestingValue FROM Minute_Report LIMIT 5 OFFSET 1` returns the last 5 values from `Minute_Report` except for the most recent one.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLW9yZGVyLWJ5In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5PUkRFUiBCWTwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6NTg4LCJjb2x1bW4iOjExLCJvZmZzZXQiOjIyMTYzfSwiZW5kIjp7ImxpbmUiOjU4OCwiY29sdW1uIjo1OCwib2Zmc2V0IjoyMjIxMH19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>The <code>ORDER BY</code> clause allows you to specify how you want to sort your query results in queries that select event attributes by row.</p>
    <p>This query orders transactions by duration.</p>
    <pre><code>FROM Transaction SELECT appName, duration ORDER BY duration

</code></pre>The default sort order is ascending, but this can be changed by adding the `ASC` or `DESC` modifiers.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLXNpbmNlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5TSU5DRTwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6NjA0LCJjb2x1bW4iOjExLCJvZmZzZXQiOjIyNjcyfSwiZW5kIjp7ImxpbmUiOjYwNCwiY29sdW1uIjo1NSwib2Zmc2V0IjoyMjcxNn19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  SINCE [numerical units AGO | phrase]
  ...

</code></pre>The **default** value is **1 hour ago**.
    Use the `SINCE` clause to define the beginning of a time range for the returned data. When using NRQL, you can set a [UTC timestamp](/docs/insights/new-relic-insights/managing-dashboards-data/set-time-range-insights-dashboards-widgets#utc-range) or [relative time range](/docs/insights/new-relic-insights/managing-dashboards-data/set-time-range-insights-dashboards-widgets#relative-range). You can specify a timezone for the query but not for the results. NRQL results are based on your system time.
    See [Set time range on dashboards and charts](/docs/insights/new-relic-insights/managing-dashboards-data/set-time-range-insights-dashboards-widgets) for detailed information and examples.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLXVudGlsIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5VTlRJTDwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6NjIyLCJjb2x1bW4iOjExLCJvZmZzZXQiOjIzNjMzfSwiZW5kIjp7ImxpbmUiOjYyMiwiY29sdW1uIjo1NSwib2Zmc2V0IjoyMzY3N319fX1d">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  UNTIL integer units AGO
  ...

</code></pre>The **default** value is **NOW**. Only use `UNTIL` to specify an end point other than the default.
    Use the `UNTIL` clause to define the end of a time range across which to return data. Once a time range has been specified, the data will be preserved and can be reviewed after the time range has ended. You can specify a [UTC timestamp](/docs/insights/new-relic-insights/managing-dashboards-data/set-time-range-insights-dashboards-widgets#utc-range) or [relative time range](/docs/insights/new-relic-insights/managing-dashboards-data/set-time-range-insights-dashboards-widgets#relative-range). You can specify a time zone for the query but not for the results. The returned results are based on your system time.
    See [Set time range on dashboards and charts](/docs/insights/new-relic-insights/managing-dashboards-data/set-time-range-insights-dashboards-widgets) for detailed information and examples.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLXRpbWV6b25lIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5XSVRIIFRJTUVaT05FPC9JbmxpbmVDb2RlPiBjbGF1c2U8Lz4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjo2NDAsImNvbHVtbiI6MTEsIm9mZnNldCI6MjQ3NTV9LCJlbmQiOnsibGluZSI6NjQwLCJjb2x1bW4iOjYzLCJvZmZzZXQiOjI0ODA3fX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ... WITH TIMEZONE (selected zone)
  ...

</code></pre>By default, query results are displayed in the timezone of the browser you're using.
    Use the `WITH TIMEZONE` clause to select a time zone for a date or time in the query that hasn't already had a time zone specified for it.
    For example, the query clause `SINCE Monday UNTIL Tuesday WITH TIMEZONE 'America/New_York'` will return data recorded from Monday at midnight, Eastern Standard Time, until midnight Tuesday, Eastern Standard Time.
    &#x3C;Table style={{ width: "auto" }}>
    &#x3C;thead>
    &#x3C;tr>
    &#x3C;th colSpan={4}>
    Available Time Zone Selections
    &#x3C;/th>
    &#x3C;/tr>
    &#x3C;/thead>
    &#x3C;tbody>
    &#x3C;tr>
    &#x3C;td>
    Africa/Abidjan
    &#x3C;/td>
    &#x3C;td>
    Africa/Addis_Ababa
    &#x3C;/td>
    &#x3C;td>
    Africa/Algiers
    &#x3C;/td>
    &#x3C;td>
    Africa/Blantyre
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Africa/Cairo
    &#x3C;/td>
    &#x3C;td>
    Africa/Windhoek
    &#x3C;/td>
    &#x3C;td>
    America/Adak
    &#x3C;/td>
    &#x3C;td>
    America/Anchorage
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    America/Araguaina
    &#x3C;/td>
    &#x3C;td>
    America/Argentina/Buenos_Aires
    &#x3C;/td>
    &#x3C;td>
    America/Belize
    &#x3C;/td>
    &#x3C;td>
    America/Bogota
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    America/Campo_Grande
    &#x3C;/td>
    &#x3C;td>
    America/Cancun
    &#x3C;/td>
    &#x3C;td>
    America/Caracas
    &#x3C;/td>
    &#x3C;td>
    America/Chicago
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    America/Chihuahua
    &#x3C;/td>
    &#x3C;td>
    America/Dawson_Creek
    &#x3C;/td>
    &#x3C;td>
    America/Denver
    &#x3C;/td>
    &#x3C;td>
    America/Ensenada
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    America/Glace_Bay
    &#x3C;/td>
    &#x3C;td>
    America/Godthab
    &#x3C;/td>
    &#x3C;td>
    America/Goose_Bay
    &#x3C;/td>
    &#x3C;td>
    America/Havana
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    America/La_Paz
    &#x3C;/td>
    &#x3C;td>
    America/Los_Angeles
    &#x3C;/td>
    &#x3C;td>
    America/Miquelon
    &#x3C;/td>
    &#x3C;td>
    America/Montevideo
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    America/New_York
    &#x3C;/td>
    &#x3C;td>
    America/Noronha
    &#x3C;/td>
    &#x3C;td>
    America/Santiago
    &#x3C;/td>
    &#x3C;td>
    America/Sao_Paulo
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    America/St_Johns
    &#x3C;/td>
    &#x3C;td>
    Asia/Anadyr
    &#x3C;/td>
    &#x3C;td>
    Asia/Bangkok
    &#x3C;/td>
    &#x3C;td>
    Asia/Beirut
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Asia/Damascus
    &#x3C;/td>
    &#x3C;td>
    Asia/Dhaka
    &#x3C;/td>
    &#x3C;td>
    Asia/Dubai
    &#x3C;/td>
    &#x3C;td>
    Asia/Gaza
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Asia/Hong_Kong
    &#x3C;/td>
    &#x3C;td>
    Asia/Irkutsk
    &#x3C;/td>
    &#x3C;td>
    Asia/Jerusalem
    &#x3C;/td>
    &#x3C;td>
    Asia/Kabul
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Asia/Katmandu
    &#x3C;/td>
    &#x3C;td>
    Asia/Kolkata
    &#x3C;/td>
    &#x3C;td>
    Asia/Krasnoyarsk
    &#x3C;/td>
    &#x3C;td>
    Asia/Magadan
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Asia/Novosibirsk
    &#x3C;/td>
    &#x3C;td>
    Asia/Rangoon
    &#x3C;/td>
    &#x3C;td>
    Asia/Seoul
    &#x3C;/td>
    &#x3C;td>
    Asia/Tashkent
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Asia/Tehran
    &#x3C;/td>
    &#x3C;td>
    Asia/Tokyo
    &#x3C;/td>
    &#x3C;td>
    Asia/Vladivostok
    &#x3C;/td>
    &#x3C;td>
    Asia/Yakutsk
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Asia/Yekaterinburg
    &#x3C;/td>
    &#x3C;td>
    Asia/Yerevan
    &#x3C;/td>
    &#x3C;td>
    Atlantic/Azores
    &#x3C;/td>
    &#x3C;td>
    Atlantic/Cape_Verde
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Atlantic/Stanley
    &#x3C;/td>
    &#x3C;td>
    Australia/Adelaide
    &#x3C;/td>
    &#x3C;td>
    Australia/Brisbane
    &#x3C;/td>
    &#x3C;td>
    Australia/Darwin
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Australia/Eucla
    &#x3C;/td>
    &#x3C;td>
    Australia/Hobart
    &#x3C;/td>
    &#x3C;td>
    Australia/Lord_Howe
    &#x3C;/td>
    &#x3C;td>
    Australia/Perth
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Chile/EasterIsland
    &#x3C;/td>
    &#x3C;td>
    Etc/GMT+10
    &#x3C;/td>
    &#x3C;td>
    Etc/GMT+8
    &#x3C;/td>
    &#x3C;td>
    Etc/GMT-11
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Etc/GMT-12
    &#x3C;/td>
    &#x3C;td>
    Europe/Amsterdam
    &#x3C;/td>
    &#x3C;td>
    Europe/Belfast
    &#x3C;/td>
    &#x3C;td>
    Europe/Belgrade
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Europe/Brussels
    &#x3C;/td>
    &#x3C;td>
    Europe/Dublin
    &#x3C;/td>
    &#x3C;td>
    Europe/Lisbon
    &#x3C;/td>
    &#x3C;td>
    Europe/London
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Europe/Minsk
    &#x3C;/td>
    &#x3C;td>
    Europe/Moscow
    &#x3C;/td>
    &#x3C;td>
    Pacific/Auckland
    &#x3C;/td>
    &#x3C;td>
    Pacific/Chatham
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Pacific/Gambier
    &#x3C;/td>
    &#x3C;td>
    Pacific/Kiritimati
    &#x3C;/td>
    &#x3C;td>
    Pacific/Marquesas
    &#x3C;/td>
    &#x3C;td>
    Pacific/Midway
    &#x3C;/td>
    &#x3C;/tr>
    &#x3C;tr>
    &#x3C;td>
    Pacific/Norfolk
    &#x3C;/td>
    &#x3C;td>
    Pacific/Tongatapu
    &#x3C;/td>
    &#x3C;td>
    UTC
    &#x3C;/td>
    &#x3C;td/>
    &#x3C;/tr>
    &#x3C;/tbody>
    &#x3C;/Table>
    See [Set time range on dashboards and charts](/docs/insights/new-relic-insights/managing-dashboards-data/set-time-range-insights-dashboards-widgets) for detailed information and examples.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoid2l0aC1tZXRyaWMtZm9ybWF0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT5XSVRIIE1FVFJJQ19GT1JNQVQ8L0lubGluZUNvZGU+IGNsYXVzZTwvPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjEwODMsImNvbHVtbiI6MTEsIm9mZnNldCI6MzE4OTd9LCJlbmQiOnsibGluZSI6MTA4MywiY29sdW1uIjo2OCwib2Zmc2V0IjozMTk1NH19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>For information on querying metric data, see <a href="#query-metrics">Query metrics</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLWNvbXBhcmUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8PjxJbmxpbmVDb2RlPkNPTVBBUkUgV0lUSDwvSW5saW5lQ29kZT4gY2xhdXNlPC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTA5MSwiY29sdW1uIjoxMSwib2Zmc2V0IjozMjEyN30sImVuZCI6eyJsaW5lIjoxMDkxLCJjb2x1bW4iOjYyLCJvZmZzZXQiOjMyMTc4fX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ... (SINCE or UNTIL) (integer units) AGO
  COMPARE WITH (integer units) AGO
  ...

</code></pre>
    <pre><code>
SELECT percentile(duration) FROM PageView
  SINCE 1 week ago COMPARE WITH 1 week AGO

SELECT percentile(duration) FROM PageView
  SINCE 1 week ago COMPARE WITH 1 week AGO TIMESERIES AUTO

</code></pre>Use the `COMPARE WITH` clause to compare the values for two different time ranges.
    `COMPARE WITH` requires a `SINCE` or `UNTIL` statement. The time specified by `COMPARE WITH` is relative to the time specified by `SINCE` or `UNTIL`. For example, `SINCE 1 day ago COMPARE WITH 1 day ago` compares yesterday with the day before.
    The time range for the`COMPARE WITH` value is always the same as that specified by `SINCE` or `UNTIL`. For example, `SINCE 2 hours ago COMPARE WITH 4 hours ago` might compare 3:00pm through 5:00pm against 1:00 through 3:00pm.
    `COMPARE WITH` can be formatted as either a line chart or a billboard:
    * With `TIMESERIES`, `COMPARE WITH` creates a line chart with the comparison mapped over time.
    * Without `TIMESERIES`, `COMPARE WITH` generates a billboard with the current value and the percent change from the `COMPARE WITH` value.
    **Example:** This query returns data as a line chart showing the 95th percentile for the past hour compared to the same range one week ago. First as a single value, then as a line chart.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2xpZGUtYnkifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8PjxJbmxpbmVDb2RlPlNMSURFIEJZPC9JbmxpbmVDb2RlPiBjbGF1c2U8Lz4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxMTI0LCJjb2x1bW4iOjExLCJvZmZzZXQiOjMzNjgxfSwiZW5kIjp7ImxpbmUiOjExMjQsImNvbHVtbiI6NTgsIm9mZnNldCI6MzM3Mjh9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>The <code>SLIDE BY</code> clause supports a feature known as sliding windows. With sliding windows,<code>SLIDE BY</code> data is gathered into "windows" of time that overlap with each other. These windows can help to smooth out line graphs with a lot of variation in cases where the rolling aggregate (such as a rolling mean) is more important than aggregates from narrow windows of time.</p>
    <p>To use <code>SLIDE BY</code>, place it in a query after the <code>TIMESERIES</code> clause. For example, this query pulls data in 5-minute windows with a 1-minute <code>SLIDE BY</code> interval, meaning that each window lasts 5 minutes, but window 1 starts at 0 minutes, window 2 starts at 1 minute, window 3 starts at 2 minutes, and so on.</p>
    <pre><code>SELECT average(duration) FROM Transaction TIMESERIES 5 minutes SLIDE BY 1 minute

</code></pre>&#x3C;Callout variant="important">
    The `SLIDE BY` value as determined by `AUTO` or `MAX` can produce a step interval greater than the window size, which can cause gaps and unexpected results.
    &#x3C;/Callout>
    &#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT average(duration) FROM Transaction TIMESERIES 5 minutes SLIDE BY MAX
    
</code></pre>This query will set the SLIDE BY window to the maximum interval granularity.
    <pre><code>
    SELECT average(duration) FROM Transaction TIMESERIES 5 minutes SLIDE BY AUTO
    
</code></pre>To learn more about how and when you can use `SLIDE BY`, see [Create smoother charts with sliding windows](/docs/query-your-data/nrql-new-relic-query-language/nrql-query-tutorials/create-smoother-charts-sliding-windows).
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="sliding-window-max-auto"
    title={&#x3C;>Use &#x3C;InlineCode>SLIDE BY&#x3C;/InlineCode> with &#x3C;InlineCode>MAX&#x3C;/InlineCode> or &#x3C;InlineCode>AUTO&#x3C;/InlineCode> interval&#x3C;/>}
    >
    You can use sliding windows in combination with `MAX` or `AUTO`. However, `MAX` or `AUTO` may not be placed between `TIMESERIES` and `SLIDE BY`.
    This query will automatically decide a `SLIDE BY` window interval.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2VsLXRpbWVzZXJpZXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8PjxJbmxpbmVDb2RlPlRJTUVTRVJJRVM8L0lubGluZUNvZGU+IGNsYXVzZTwvPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjExNjUsImNvbHVtbiI6MTEsIm9mZnNldCI6MzU4NTN9LCJlbmQiOnsibGluZSI6MTE2NSwiY29sdW1uIjo2MCwib2Zmc2V0IjozNTkwMn19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>SELECT ...
  TIMESERIES integer units
  ...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT average(duration) FROM Transaction since 1 day ago TIMESERIES MAX
    
</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="timeseries-max"
    title={&#x3C;>Use &#x3C;InlineCode>MAX&#x3C;/InlineCode> interval&#x3C;/>}
    >
    You can set `TIMESERIES` to `MAX`, which will automatically adjust your time window to the maximum number of intervals allowed for a given time period. This allows you to update your time windows without having to manually update your `TIMESERIES` buckets and ensures your time window is being split into the peak number of intervals allowed. The maximum number of `TIMESERIES` buckets that will be returned is 366.
    For example, the following query creates 4-minute intervals, which is the ceiling for a daily chart.
    <pre><code>
    SELECT average(duration), percentile(duration, 50, 90)
      FROM PageView SINCE 1 week AGO TIMESERIES AUTO
    
</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="timeseries-auto"
    title="Use an automatically set interval"
    >
    `TIMESERIES` can also be set to `AUTO`, which will divide your graph into a reasonable number of divisions. For example, a daily chart will be divided into 30 minute intervals and a weekly chart will be divided into 6 hour intervals.
    This query returns data as a line chart showing the 50th and 90th percentile of client-side transaction time for one week with a data point every 6 hours.
    <pre><code>
    SELECT ... SINCE 1 day AGO TIMESERIES 30 minutes
    
</code></pre>Use the `TIMESERIES` clause to return data as a time series broken out by a specified period of time. Since `TIMESERIES` is used to trigger certain charts, there is no default value.
    To indicate the time range, use `integer units`. For example:
    * `TIMESERIES 1 minute`
    * `TIMESERIES 30 minutes`
    * `TIMESERIES 1 hour`
    * `TIMESERIES 30 seconds`
    `TIMESERIES` can be combined with arguments such as `MAX`, `AUTO`, and `SLIDE BY` to further tailor query results, as shown in the examples below.
    &#x3C;Callout variant="important">
    For functions such as `average( )` or `percentile( )`, a large aggregation window can have a significant smoothing effect on outliers. This is true whether or not the query makes use of sliding windows.
    &#x3C;/Callout>
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="set-interval"
    title="Use a set interval"
    >
    The value provided indicates the units used to break out the graph. For example, to present a one-day graph showing 30 minute increments:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXh0cmFwb2xhdGUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8PjxJbmxpbmVDb2RlPkVYVFJBUE9MQVRFPC9JbmxpbmVDb2RlPiBjbGF1c2U8Lz4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxMjMyLCJjb2x1bW4iOjExLCJvZmZzZXQiOjM4Njc0fSwiZW5kIjp7ImxpbmUiOjEyMzIsImNvbHVtbiI6NjEsIm9mZnNldCI6Mzg3MjR9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>You can use this clause with these data types:</p>
    <ul>
      <li>
        <p><code>Transaction</code></p>
      </li>
      <li>
        <p><code>TransactionError</code></p>
      </li>
      <li>
        <p>Custom events reported via APM agent APIs</p>
        <p>The purpose of <code>EXTRAPOLATE</code> is to mathematically compensate for the effects of <a href="/docs/agents/manage-apm-agents/agent-data/new-relic-events-limits-sampling">APM agent sampling of event data</a> so that query results more closely represent the total activity in your system.</p>
        <p>This clause will be useful when a New Relic APM agent reports so many <a href="/docs/using-new-relic/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data#event-data">events</a> that it often passes its <a href="/docs/using-new-relic/welcome-new-relic/getting-started/glossary#harvest-cycle">harvest cycle</a> reporting limits. When that occurs, the agent begins to sample events.</p>
        <p>When <code>EXTRAPOLATE</code> is used in a NRQL query that supports its use, the ratio between the <strong>reported events</strong> and the <strong>total events</strong> is used to extrapolate a close approximation of the total unsampled data. When it is used in a NRQL query that doesn’t support its use or that hasn’t used sampled data, it has no effect.</p>
        <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
          <p>Note that <code>EXTRAPOLATE</code> is most useful for homogenous data (like throughput or error rate). It's not effective when attempting to extrapolate a count of distinct things (like <code>uniqueCount()</code> or <code>uniques()</code>).</p>
        </div>
        <p>This clause works only with NRQL queries that use one of the following <a href="/docs/insights/nrql-new-relic-query-language/nrql-reference/nrql-syntax-components-functions#functions">aggregator functions</a>:</p>
      </li>
      <li>
        <p>apdex</p>
      </li>
      <li>
        <p>average</p>
      </li>
      <li>
        <p>count</p>
      </li>
      <li>
        <p>histogram</p>
      </li>
      <li>
        <p>sum</p>
      </li>
      <li>
        <p>percentage (if function it takes as an argument supports <code>EXTRAPOLATE</code>)</p>
      </li>
      <li>
        <p>rate (if function it takes as an argument supports <code>EXTRAPOLATE</code>)</p>
      </li>
      <li>
        <p>stddev</p>
        <div data-component="CollapserGroup" data-prop="W10=">
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXh0cmFwb2xhdGUtZXhhbXBsZS0xIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJFeGFtcGxlIG9mIGV4dHJhcG9sYXRpbmcgdGhyb3VnaHB1dCJ9XQ==">
            <div data-prop-text="title">Example of extrapolating throughput</div>
            <p>A query that will show the extrapolated throughput of a service named <code>interestingApplication</code>.</p>
            <pre><code>SELECT count(*) FROM Transaction WHERE appName='interestingApplication' 
SINCE 60 minutes ago EXTRAPOLATE

</code></pre>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZXh0cmFwb2xhdGUtZXhhbXBsZS0yIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJFeGFtcGxlIG9mIGV4dHJhcG9sYXRpbmcgdGhyb3VnaHB1dCBhcyBhIHRpbWUgc2VyaWVzIn1d">
            <div data-prop-text="title">Example of extrapolating throughput as a time series</div>
            <p>A query that will show the extrapolated throughput of a service named <code>interestingApplication</code> by transaction name, displayed as a time series.</p>
            <pre><code>SELECT count(*) FROM Transaction WHERE appName='interestingApplication' 
SINCE 60 minutes ago FACET name TIMESERIES 1 minute EXTRAPOLATE

</code></pre>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>
<h2>Query metric data [#query-metrics]</h2>
<p>There are several ways to query metric data using NRQL:</p>
<ul>
  <li><a href="/docs/query-data/nrql-new-relic-query-language/nrql-query-tutorials/query-metric-timeslice-data-nrql">Query metric timeslice data</a>, which is reported by New Relic APM, Mobile, Browser</li>
  <li><a href="/docs/data-ingest-apis/get-data-new-relic/metric-api/view-query-you-metric-data">Query the <code>Metric</code> data type</a>, which is reported by some of our integrations and Telemetry SDKs</li>
</ul>
<p>For more on understanding metrics in New Relic, see <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#metrics">Metric data types</a>.</p>
<h2>Aggregator functions [#functions]</h2>
<p>Use aggregator functions to filter and aggregate data in a NRQL query. Some helpful information about using aggregator functions:</p>
<ul>
  <li>See the New Relic University tutorials for <a href="http://newrelic.wistia.com/medias/8k4xbxlfwj">Filter queries</a>, <a href="http://newrelic.wistia.com/medias/46dvx1mkm0">Apdex queries</a>, and <a href="http://newrelic.wistia.com/medias/j3htrz66l0">Percentile queries</a>. Or, go to the full online course <a href="https://learn.newrelic.com/writing-nrql-queries">Writing NRQL queries</a>.</li>
  <li>Data type "coercion" is not supported. Read about <a href="#type-conversion">available type conversion functions</a>.</li>
  <li>Cohort analysis functions appear on the New Relic Insights <a href="/docs/insights/new-relic-insights/features/cohort-analysis"><strong>Cohort analysis</strong> page</a>. The cohort functions aggregate transactions into time segments.</li>
</ul>
<p>Here are the available aggregator functions. The definitions below contain example NRQL queries.</p>
<p>Examples:</p>
<pre><code>SELECT histogram(duration, 10, 20) FROM PageView SINCE 1 week ago
</code></pre>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1hZ2dyZWdhdGlvbmVuZHRpbWUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5hZ2dyZWdhdGlvbmVuZHRpbWUoKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxMzE4LCJjb2x1bW4iOjExLCJvZmZzZXQiOjQzMjI5fSwiZW5kIjp7ImxpbmUiOjEzMTgsImNvbHVtbiI6NTgsIm9mZnNldCI6NDMyNzZ9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>aggregationendtime()</code> function to return the time of the relevant aggregation. More specifically, for a given aggregate, the <code>aggregationendtime()</code> function provides the timestamp of the end of the time period of that aggregation. For example, in a timeseries query, for a data point that encompasses an hour’s worth of data, the function would return the timestamp of the end of that hour period.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1hcGRleCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmFwZGV4KGF0dHJpYnV0ZSwgdDogKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxMzI2LCJjb2x1bW4iOjExLCJvZmZzZXQiOjQzNzc3fSwiZW5kIjp7ImxpbmUiOjEzMjYsImNvbHVtbiI6NTksIm9mZnNldCI6NDM4MjV9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>apdex</code> function to return an <a href="/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction#score">Apdex score</a> for a single transaction or for all your transactions. The <a href="/docs/insights/new-relic-insights/decorating-events/insights-attributes">attribute</a> can be any attribute based on response time, such as <a href="/docs/insights/insights-data-sources/default-events-attributes/apm-default-event-attributes#txn-duration"><code>duration</code></a> or <a href="/docs/insights/insights-data-sources/default-events-attributes/browser-default-events-attributes-insights#backend-duration"><code>backendDuration</code></a>. The <code>t:</code> argument defines an <a href="/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction">Apdex T</a> threshold in seconds.</p>
    <p>The Apdex score returned by the <code>apdex( )</code> function is based only on execution time. It does not account for APM errors. If a transaction includes an error but completes in <a href="/docs/apm/new-relic-apm/getting-started/glossary#apdex_t">Apdex T</a> or less, that transaction will be rated <a href="/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction#bullet-satisfied">satisfying</a> by the <code>apdex ( )</code> function.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXBkZXgtY3VzdC1hdHRyaWJ1dGVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJHZXQgQXBkZXggZm9yIHNwZWNpZmljIGN1c3RvbWVycyJ9XQ==">
        <div data-prop-text="title">Get Apdex for specific customers</div>
        <p>If you have <a href="/docs/insights/new-relic-insights/decorating-events/insights-custom-attributes">defined custom attributes</a>, you can filter based on those attributes. For example, you could monitor the Apdex for a particularly important customer:</p>
        <pre><code>SELECT apdex(duration, t: 0.4) FROM Transaction
  WHERE customerName='ReallyImportantCustomer' SINCE 1 day ago

</code></pre>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiYXBkZXgtdHJhbnNhY3Rpb24ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkdldCBBcGRleCBmb3Igc3BlY2lmaWMgdHJhbnNhY3Rpb24ifV0=">
        <div data-prop-text="title">Get Apdex for specific transaction</div>
        <p>Use the <code>name</code> attribute to return a score for a specific transaction, or return an overall Apdex by omitting <code>name</code>. This query returns an Apdex score for the <strong>Controller/notes/index</strong> transaction over the last hour:</p>
        <pre><code>SELECT apdex(duration, t: 0.5) from Transaction
  WHERE name='Controller/notes/index' SINCE 1 hour ago

</code></pre>![crop-apdex-function](./images/screen-apdex-function.png "crop-apdex-function")
        The `apdex` function returns an [Apdex score](/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction) that measures user satisfaction with your site. Arguments are a response time attribute and an Apdex T threshold in seconds.
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiR2V0IG92ZXJhbGwgQXBkZXggZm9yIHlvdXIgYXBwIn1d">
        <div data-prop-text="title">Get overall Apdex for your app</div>
        <p>This example query returns an overall Apdex for the application over the last three weeks:</p>
        <pre><code>SELECT apdex(duration, t: 0.08) FROM Transaction SINCE 3 week ago

</code></pre>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1hdmVyYWdlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+YXZlcmFnZShhdHRyaWJ1dGUpPC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjEzNzQsImNvbHVtbiI6MTEsIm9mZnNldCI6NDY3Mjd9LCJlbmQiOnsibGluZSI6MTM3NCwiY29sdW1uIjo1Niwib2Zmc2V0Ijo0Njc3Mn19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>average( )</code> function to return the average value for an attribute. It takes a single attribute name as an argument. If a value of the attribute is not numeric, it will be ignored when aggregating. If data matching the query's conditions is not found, or there are no numeric values returned by the query, it will return a value of null.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1idWNrZXRzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+YnVja2V0cyhhdHRyaWJ1dGUsIGNlaWxpbmcgXFxbLG51bWJlciBvZiBidWNrZXRzXSk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTM4MiwiY29sdW1uIjoxMSwib2Zmc2V0Ijo0NzIxNH0sImVuZCI6eyJsaW5lIjoxMzgyLCJjb2x1bW4iOjg3LCJvZmZzZXQiOjQ3MjkwfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>buckets()</code> function to aggregate data split up by a <code>FACET</code> clause into buckets based on ranges. You can bucket by any attribute that is stored as a numerical value in the New Relic database.</p>
    <p>It takes three arguments:</p>
    <ul>
      <li>
        <p>Attribute name</p>
      </li>
      <li>
        <p>Maximum value of the sample range. Any outliers will appear in the final bucket.</p>
      </li>
      <li>
        <p>Total number of buckets</p>
        <p>For more information and examples, see <a href="/docs/insights/nrql-new-relic-query-language/nrql-query-examples/segment-your-insights-data-buckets">Split your data into buckets</a>.</p>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1idWNrZXQtcGVyY2VudGlsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmJ1Y2tldFBlcmNlbnRpbGUoYXR0cmlidXRlKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxMzk4LCJjb2x1bW4iOjExLCJvZmZzZXQiOjQ3OTQ0fSwiZW5kIjp7ImxpbmUiOjEzOTgsImNvbHVtbiI6NjUsIm9mZnNldCI6NDc5OTh9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>The <code>bucketPercentile( )</code> function is the NRQL equivalent of the <a href="https://prometheus.io/docs/prometheus/latest/querying/functions/#histogram_quantile"><code>histogram_quantile</code></a> function in Prometheus. It is intended to be used with dimensional metric data. Instead of the quantile, New Relic returns the percentile, which is the quantile * 100.</p>
    <p>Use the <code>bucketPercentile( )</code> function to calculate the quantile from the histogram data in a Prometheus format.</p>
    <p>It takes the bucket name as an argument and reports percentiles along the bucket's boundaries:</p>
    <pre><code>SELECT bucketPercentile(duration_bucket) FROM Metric SINCE 1 day ago

</code></pre>Because multiple metrics are used to make up Prometheus histogram data, you must query for specific Prometheus metrics in terms of the associated `&#x3C;basename>`.
    For example, to compute percentiles from a Prometheus histogram, with the `&#x3C;basename>` `prometheus_http_request_duration_seconds` using NRQL, use `bucketPercentile(prometheus_http_request_duration_seconds_bucket, 50)`. Note how \_bucket is added to the end of the `&#x3C;basename>` as a suffix.
    See [the Prometheus.io documentation](https://prometheus.io/docs/concepts/metric_types/#histogram) for more information.
    <pre><code>
SELECT bucketPercentile(duration_bucket, 50, 75, 90) FROM Metric SINCE 1 day ago

</code></pre>Optionally, you can add percentile specifications as an argument:
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1jYXJkaW5hbGl0eSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmNhcmRpbmFsaXR5KGF0dHJpYnV0ZSk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTQyNiwiY29sdW1uIjoxMSwib2Zmc2V0Ijo0OTUwN30sImVuZCI6eyJsaW5lIjoxNDI2LCJjb2x1bW4iOjYwLCJvZmZzZXQiOjQ5NTU2fX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>cardinality( )</code> function to obtain the number of combinations of all the dimensions (attributes) on a <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#metrics">metric</a>.</p>
    <p>It takes three arguments, all optional:</p>
    <ul>
      <li>
        <p>Metric name: if present, <code>cardinality( )</code> only computes the metric specified.</p>
      </li>
      <li>
        <p>Include: if present, the include list restricts the cardinality computation to those attributes.</p>
      </li>
      <li>
        <p>Exclude: if present, the exclude list causes those attributes to be ignored in the cardinality computation.</p>
        <pre><code>SELECT cardinality(metric_name, include:{attribute_list}, exclude:{attribute_list})
</code></pre>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1jb3VudCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmNvdW50KFxcKik8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTQ0NCwiY29sdW1uIjoxMSwib2Zmc2V0Ijo1MDI5Nn0sImVuZCI6eyJsaW5lIjoxNDQ0LCJjb2x1bW4iOjQ3LCJvZmZzZXQiOjUwMzMyfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>count( )</code> function to return a count of available records. It takes a single argument; either <code>*</code>, an attribute, or a constant value. Currently, it follows typical SQL behavior and counts all records that have values for its argument.</p>
    <p>Since <code>count(*)</code> does not name a specific attribute, the results will be formatted in the default <a href="/docs/insights/new-relic-insights/managing-dashboards-data/data-formatter-setting-default-formats-numeric-values#format">"humanize"</a> format.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGVyaXZhdGl2ZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmRlcml2YXRpdmUoYXR0cmlidXRlIFxcWyx0aW1lIGludGVydmFsXSk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTQ1NCwiY29sdW1uIjoxMSwib2Zmc2V0Ijo1MDkxNX0sImVuZCI6eyJsaW5lIjoxNDU0LCJjb2x1bW4iOjc3LCJvZmZzZXQiOjUwOTgxfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p><code>derivative()</code> finds the rate of change for a given dataset. The rate of change is calculated using a least-squares regression to approximate the derivative.</p>
    <p>The <code>time interval</code> is the period for which the rate of change is calculated. For example, <code>derivative(attributeName, 1 minute)</code> will return the rate of change per minute.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1kaW1lbnNpb25zIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+eydkaW1lbnNpb25zKGluY2x1ZGU6IHthdHRyaWJ1dGVzfSwgZXhjbHVkZToge2F0dHJpYnV0ZXN9KSd9PC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE0NjQsImNvbHVtbiI6MTEsIm9mZnNldCI6NTE0MTV9LCJlbmQiOnsibGluZSI6MTQ2NCwiY29sdW1uIjo5OCwib2Zmc2V0Ijo1MTUwMn19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>dimensions( )</code> function to return all the dimensional values on a data type.</p>
    <p>You can explicitly include or exclude specific attributes using the optional arguments:</p>
    <ul>
      <li>
        <p>Include: if present, the include list limits <code>dimensions( )</code> to those attributes.</p>
      </li>
      <li>
        <p>Exclude: if present, the <code>dimensions( )</code> calculation ignores those attributes.</p>
        <pre><code>FROM Metric SELECT count(node_filesystem_size) TIMESERIES FACET dimensions()
</code></pre>
        <p>When used with a <code>FACET</code> clause, <code>dimensions( )</code> produces a unique timeseries for all facets available on the event type, similar to how Prometheus behaves with non-aggregated queries.</p>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmVhcmxpZXN0KGF0dHJpYnV0ZSk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTQ4MiwiY29sdW1uIjoxMSwib2Zmc2V0Ijo1MjIxN30sImVuZCI6eyJsaW5lIjoxNDgyLCJjb2x1bW4iOjU3LCJvZmZzZXQiOjUyMjYzfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>earliest( )</code> function to return the earliest value for an attribute over the specified time range.</p>
    <p>It takes a single argument. Arguments after the first will be ignored.</p>
    <p>If used in conjunction with a <code>FACET</code> it will return the most recent value for an attribute for each of the resulting facets.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiR2V0IGVhcmxpZXN0IGNvdW50cnkgcGVyIHVzZXIgYWdlbnQgZnJvbSBQYWdlVmlldyJ9XQ==">
        <div data-prop-text="title">Get earliest country per user agent from PageView</div>
        <p>This query returns the earliest country code per each user agent from the PageView event.</p>
        <pre><code>SELECT earliest(countryCode) FROM PageView FACET userAgentName

</code></pre>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmV2ZW50VHlwZSgpPC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE1MDMsImNvbHVtbiI6MTEsIm9mZnNldCI6NTI5ODV9LCJlbmQiOnsibGluZSI6MTUwMywiY29sdW1uIjo0OSwib2Zmc2V0Ijo1MzAyM319fX1d">
    <div data-prop-text="title">[object Object]</div>
    <pre><code>...WHERE eventType() = 'EventNameHere'...
...FACET eventType()...

</code></pre>&#x3C;/Collapser>
    &#x3C;/CollapserGroup>
    <pre><code>
    SELECT count(*) FROM Transaction, TransactionError FACET eventType() TIMESERIES
    
</code></pre>&#x3C;/Collapser>
    &#x3C;Collapser
    id="facet-eventtype"
    title={&#x3C;>Use &#x3C;InlineCode>eventType()&#x3C;/InlineCode> with &#x3C;InlineCode>FACET&#x3C;/InlineCode>&#x3C;/>}
    >
    This query displays a count of how many records each data type (`Transaction` and `TransactionError`) returns.
    <pre><code>
    SELECT 100 * filter(count(*), where eventType() = 'TransactionError') / filter(count(*), where eventType() = 'Transaction') FROM Transaction, TransactionError WHERE appName = 'App.Prod' TIMESERIES 2 Minutes SINCE 6 hours ago
    
</code></pre>Use the `eventType()` function in a [FACET](#sel-facet) clause to break out results by the selected data type or in a [WHERE](#sel-where) clause to filter results to a specific data type. This is particularly useful for targeting specific data types with the [filter()](#func-filter) and [percentage()](#func-percentage) functions.
    &#x3C;Callout variant="important">
    In this context, "event type" refers to the types of data you can access with a NRQL query.
    &#x3C;/Callout>
    &#x3C;CollapserGroup>
    &#x3C;Collapser
    id="filter-eventtype"
    title={&#x3C;>Use &#x3C;InlineCode>eventType()&#x3C;/InlineCode> in &#x3C;InlineCode>filter()&#x3C;/InlineCode> function&#x3C;/>}
    >
    This query returns the percentage of total `TransactionError` results out of the total `Transaction` results. You can use the `eventType()` function to target specific types of data with the filter() function.
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1maWx0ZXIifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5maWx0ZXIoZnVuY3Rpb24oYXR0cmlidXRlKSwgV0hFUkUgY29uZGl0aW9uKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxNTQ0LCJjb2x1bW4iOjExLCJvZmZzZXQiOjU0Nzk1fSwiZW5kIjp7ImxpbmUiOjE1NDQsImNvbHVtbiI6ODIsIm9mZnNldCI6NTQ4NjZ9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>filter( )</code> function to limit the results for one of the aggregator functions in your SELECT statement. You can use <code>filter()</code> in conjunction with <code>FACET</code> or <code>TIMESERIES</code>.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQW5hbHl6ZSBwdXJjaGFzZXMgdGhhdCB1c2VkIG9mZmVyIGNvZGVzIn1d">
        <div data-prop-text="title">Analyze purchases that used offer codes</div>
        <p>You could use <code>filter()</code> to compare the items bought in a set of transactions for those using an offer code versus those who aren't:</p>
        <p>
          <img src="./images/screenshot_insights_filter_0_0.png" alt="screenshot insights filter" title="screenshot insights filter">
        </p>
        <p>Use the <code>filter( )</code> function to limit the results for one of the aggregator functions in your SELECT statement.</p>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1mdW5uZWwifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5mdW5uZWwoYXR0cmlidXRlLCBzdGVwcyk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTU2MiwiY29sdW1uIjoxMSwib2Zmc2V0Ijo1NTY0NX0sImVuZCI6eyJsaW5lIjoxNTYyLCJjb2x1bW4iOjYyLCJvZmZzZXQiOjU1Njk2fX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>funnel()</code> function to generate a funnel chart. It takes an attribute as its first argument. You then specify steps as <a href="#sel-where"><code>WHERE</code></a> clauses (with optional <a href="#sel-as"><code>AS</code></a> clauses for labels) separated by commas.</p>
    <p>For details and examples, see the <a href="/docs/insights/nrql-new-relic-query-language/nrql-query-examples/funnels-evaluate-data-series-events">funnels documentation</a>.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1nZXQtZmllbGQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5nZXRGaWVsZChhdHRyaWJ1dGUsIGZpZWxkKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxNTcyLCJjb2x1bW4iOjExLCJvZmZzZXQiOjU2MTg5fSwiZW5kIjp7ImxpbmUiOjE1NzIsImNvbHVtbiI6NjQsIm9mZnNldCI6NTYyNDJ9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>getField()</code> function to extract a field from <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types">complex metrics</a>.</p>
    <p>It takes the following arguments:</p>
    <div data-component="Table" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJzdHlsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6Insgd2lkdGg6IFwiNTAwcHhcIiB9IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTU3OCwiY29sdW1uIjoxOCwib2Zmc2V0Ijo1NjQ0Nn0sImVuZCI6eyJsaW5lIjoxNTc4LCJjb2x1bW4iOjM4LCJvZmZzZXQiOjU2NDY2fX19fV0=">
      <div>
        <div>
          <div>
            <p>Metric type</p>
          </div>
          <div>
            <p>Supported fields</p>
          </div>
        </div>
      </div>
      <div>
        <div>
          <div>
            <p><code>summary</code></p>
          </div>
          <div>
            <p>count, total, max, min</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>gauge</code></p>
          </div>
          <div>
            <p>count, total, max, min, latest</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>distribution</code></p>
          </div>
          <div>
            <p>count, total, max, min</p>
          </div>
        </div>
        <div>
          <div>
            <p><code>counter</code></p>
          </div>
          <div>
            <p>count</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div>
    <p>Examples:</p>
    <pre><code>SELECT max(getField(mySummary, count)) from Metric

</code></pre>
    <pre><code>
SELECT sum(mySummary) from Metric where getField(mySummary, count) > 10

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1oaXN0b2dyYW0ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5oaXN0b2dyYW0oYXR0cmlidXRlLCBjZWlsaW5nIFxcWyxudW1iZXIgb2YgYnVja2V0c10pPC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE2NTAsImNvbHVtbiI6MTEsIm9mZnNldCI6NTc1NTJ9LCJlbmQiOnsibGluZSI6MTY1MCwiY29sdW1uIjo4OSwib2Zmc2V0Ijo1NzYzMH19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>histogram( )</code> function to generate histograms. It takes three arguments:</p>
    <ul>
      <li>
        <p>Attribute name</p>
      </li>
      <li>
        <p>Maximum value of the sample range</p>
      </li>
      <li>
        <p>Total number of buckets</p>
        <div data-component="CollapserGroup" data-prop="W10=">
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGlzdG9ncmFtLXJlc3BvbnNlLXRpbWVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJIaXN0b2dyYW0gb2YgcmVzcG9uc2UgdGltZXMgZnJvbSBQYWdlVmlldyBldmVudHMifV0=">
            <div data-prop-text="title">Histogram of response times from PageView events</div>
            <p>This query results in a histogram of response times ranging up to 10 seconds over 20 buckets.</p>
            <pre><code>SELECT histogram(duration, 10, 20) FROM PageView SINCE 1 week ago

</code></pre>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiaGlzdG9ncmFtLXByb21ldGhldXMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlByb21ldGhldXMgaGlzdG9ncmFtIGJ1Y2tldHMifV0=">
            <div data-prop-text="title">Prometheus histogram buckets</div>
            <p><code>histogram( )</code> accepts Prometheus histogram buckets:</p>
            <pre><code>SELECT histogram(duration_bucket, 10, 20) FROM Metric SINCE 1 week ago

</code></pre>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZGlzdHJpYnV0aW9uLW1ldHJpYyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTmV3IFJlbGljIGRpc3RyaWJ1dGlvbiBtZXRyaWMifV0=">
            <div data-prop-text="title">New Relic distribution metric</div>
            <p><code>histogram( )</code> accepts <a href="/docs/data-ingest-apis/get-data-new-relic/metric-api/events-metrics-service-create-metrics#limits-rules">Distribution metric</a> as an input:</p>
            <pre><code>SELECT histogram(myDistributionMetric, 10, 20) FROM Metric SINCE 1 week ago

</code></pre>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoia2V5c2V0In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+a2V5c2V0KCk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTY5NywiY29sdW1uIjoxMSwib2Zmc2V0Ijo1ODk3OX0sImVuZCI6eyJsaW5lIjoxNjk3LCJjb2x1bW4iOjQ2LCJvZmZzZXQiOjU5MDE0fX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Using <code>keyset()</code> will allow you to see all of the attributes for a given data type over a given time range. It takes no arguments. It returns a JSON structure containing groups of string-typed keys, numeric-typed keys, boolean-typed keys, and all keys.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiU2VlIGFsbCBhdHRyaWJ1dGVzIGZvciBhIGRhdGEgdHlwZSJ9XQ==">
        <div data-prop-text="title">See all attributes for a data type</div>
        <p>This query returns the attributes found for <code>PageView</code> events from the last day:</p>
        <pre><code>SELECT keyset() FROM PageView SINCE 1 day ago

</code></pre>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmxhdGVzdChhdHRyaWJ1dGUpPC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE3MTQsImNvbHVtbiI6MTEsIm9mZnNldCI6NTk2MzN9LCJlbmQiOnsibGluZSI6MTcxNCwiY29sdW1uIjo1NSwib2Zmc2V0Ijo1OTY3N319fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>latest( )</code> function to return the most recent value for an attribute over a specified time range.</p>
    <p>It takes a single argument. Arguments after the first will be ignored.</p>
    <p>If used in conjunction with a <code>FACET</code> it will return the most recent value for an attribute for each of the resulting facets.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiR2V0IG1vc3QgcmVjZW50IGNvdW50cnkgcGVyIHVzZXIgYWdlbnQgZnJvbSBQYWdlVmlldyJ9XQ==">
        <div data-prop-text="title">Get most recent country per user agent from PageView</div>
        <p>This query returns the most recent country code per each user agent from the PageView event.</p>
        <pre><code>SELECT latest(countryCode) FROM PageView FACET userAgentName

</code></pre>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoibGF0ZXN0cmF0ZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPmxhdGVzdHJhdGUoYXR0cmlidXRlLCB0aW1lIGludGVydmFsKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxNzM2LCJjb2x1bW4iOjExLCJvZmZzZXQiOjYwNDIyfSwiZW5kIjp7ImxpbmUiOjE3MzYsImNvbHVtbiI6NzQsIm9mZnNldCI6NjA0ODV9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>latestrate( )</code> function to return the rate of change of a value based on the last 2 data points. It takes the attribute in question as the first argument and the unit of time for the resulting rate as the second argument. The function returns a result in units of <code>change in attribute/time interval</code>.</p>
    <p>This function can be useful to provide the most recent rate of change for an attribute in order to see leading-edge trends.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiR2V0IHRoZSBtb3N0IHJlY2VudCByYXRlIG9mIGNoYW5nZSBvZiBQYWdlVmlldyBEdXJhdGlvbiJ9XQ==">
        <div data-prop-text="title">Get the most recent rate of change of PageView Duration</div>
        <p>This query returns the rate of change of duration based on the last 2 data points. It will be returned in units of <code>duration/second</code> because of the <code>1 SECOND</code> argument.</p>
        <pre><code>SELECT latestrate(duration, 1 SECOND) FROM PageView

</code></pre>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1tYXgifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5tYXgoYXR0cmlidXRlKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxNzU2LCJjb2x1bW4iOjExLCJvZmZzZXQiOjYxNDIzfSwiZW5kIjp7ImxpbmUiOjE3NTYsImNvbHVtbiI6NTIsIm9mZnNldCI6NjE0NjR9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>max( )</code> function to return the maximum recorded value of a numeric attribute over the time range specified. It takes a single attribute name as an argument. If a value of the attribute is not numeric, it will be ignored when aggregating. If data matching the query's conditions is not found, or there are no numeric values returned by the query, it will return a value of null.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1tZWRpYW4ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5tZWRpYW4oYXR0cmlidXRlKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxNzY0LCJjb2x1bW4iOjExLCJvZmZzZXQiOjYxOTQ2fSwiZW5kIjp7ImxpbmUiOjE3NjQsImNvbHVtbiI6NTUsIm9mZnNldCI6NjE5OTB9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>median( )</code> function to return an attribute's median, or 50th percentile. For more information about percentile queries, see <a href="#func-percentile">percentile()</a>.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>The <code>median( )</code> query is only available when using the <a href="/docs/chart-builder/use-chart-builder/get-started/introduction-chart-builder">query builder</a>.</p>
    </div>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiTWVkaWFuIHF1ZXJ5In1d">
        <div data-prop-text="title">Median query</div>
        <p>This query will generate a line chart for the median value.</p>
        <pre><code>SELECT median(duration) FROM PageView TIMESERIES AUTO

</code></pre>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1taW4ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5taW4oYXR0cmlidXRlKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxNzg2LCJjb2x1bW4iOjExLCJvZmZzZXQiOjYyNzA2fSwiZW5kIjp7ImxpbmUiOjE3ODYsImNvbHVtbiI6NTIsIm9mZnNldCI6NjI3NDd9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>min( )</code> function to return the minimum recorded value of a numeric attribute over the time range specified. It takes a single attribute name as an argument. If a value of the attribute is not numeric, it will be ignored when aggregating. If data matching the query's conditions is not found, or there are no numeric values returned by the query, it will return a value of null.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1wZXJjZW50YWdlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+cGVyY2VudGFnZShmdW5jdGlvbihhdHRyaWJ1dGUpLCBXSEVSRSBjb25kaXRpb24pPC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE3OTQsImNvbHVtbiI6MTEsIm9mZnNldCI6NjMyMzN9LCJlbmQiOnsibGluZSI6MTc5NCwiY29sdW1uIjo4Niwib2Zmc2V0Ijo2MzMwOH19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>percentage( )</code> function to return the percentage of a target data set that matches some condition.</p>
    <p>The first argument requires an <a href="#functions">aggregator function</a> against the desired attribute. Use exactly two arguments (arguments after the first two will be ignored). If the attribute is not numeric, this function returns a value of 100%.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1wZXJjZW50aWxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+cGVyY2VudGlsZShhdHRyaWJ1dGUgXFxbLCBwZXJjZW50aWxlIFxcWywgLi4uXV0pPC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE4MDQsImNvbHVtbiI6MTEsIm9mZnNldCI6NjM3NjN9LCJlbmQiOnsibGluZSI6MTgwNCwiY29sdW1uIjo4NCwib2Zmc2V0Ijo2MzgzNn19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>percentile( )</code> function to return an attribute's approximate value at a given percentile. It requires an attribute and can take any number of arguments representing percentile points. The <code>percentile()</code> function enables percentiles to displays with up to three digits after the decimal point, providing greater precision. Percentile thresholds may be specified as decimal values, but be aware that for most data sets, percentiles closer than 0.1 from each other will not be resolved.</p>
    <p>
      <img src="./images/percentile_0.png" alt="percentile.png" title="percentile.png">
    </p>
    <p>Percentile display examples</p>
    <p>Use <code>TIMESERIES</code> to generate a line chart with percentiles mapped over time.</p>
    <ul>
      <li>
        <p>Omit <code>TIMESERIES</code> to generate a billboard and attribute sheet showing aggregate values for the percentiles.</p>
        <p>If no percentiles are listed, the default is the 95th percentile. To return only the 50th percentile value, the median, you can also use <a href="#func-median">median()</a>.</p>
        <div data-component="CollapserGroup" data-prop="W10=">
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQmFzaWMgcGVyY2VudGlsZSBxdWVyeSJ9XQ==">
            <div data-prop-text="title">Basic percentile query</div>
            <p>This query will generate a line chart with lines for the 5th, 50th, and 95th percentile.</p>
            <pre><code>SELECT percentile(duration, 5, 50, 95) FROM PageView TIMESERIES AUTO

</code></pre>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicHJlZGljdExpbmVhciJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPnByZWRpY3RMaW5lYXIoYXR0cmlidXRlLCBcXFssdGltZSBpbnRlcnZhbF0pPC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE4MzIsImNvbHVtbiI6MTEsIm9mZnNldCI6NjUyMDJ9LCJlbmQiOnsibGluZSI6MTgzMiwiY29sdW1uIjo4MSwib2Zmc2V0Ijo2NTI3Mn19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p><code>predictLinear()</code> is an extension of the <code>derivative()</code> function. It uses a similar method of least-squares linear regression to predict the future values for a dataset.</p>
    <ul>
      <li>The <code>time interval</code> is how far the query will look into the future. For example, <code>predictLinear(attributeName, 1 hour)</code> is a linear prediction 1 hour into the future of the query time window.</li>
      <li>Generally, <code>predictLinear()</code> is helpful for continuously growing values like disk space, or predictions on large trends.</li>
      <li>Since <code>predictLinear()</code> is a linear regression, familiarity with the dataset being queried helps to ensure accurate long-term predictions.</li>
      <li>Any dataset which grows exponentially, logarithmically, or by other nonlinear means will likely only be successful in very short-term predictions.</li>
      <li>New Relic recommends against using <code>predictLinear</code> in <code>TIMESERIES</code> queries. This is because each bucket will be making an individual prediction based on its relative timeframe within the query, meaning that such queries will not show predictions from the end of the timeseries forward.</li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1yYXRlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+cmF0ZShmdW5jdGlvbihhdHRyaWJ1dGUpIFxcWyx0aW1lIGludGVydmFsXSk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTg0NiwiY29sdW1uIjoxMSwib2Zmc2V0Ijo2NjQ1MX0sImVuZCI6eyJsaW5lIjoxODQ2LCJjb2x1bW4iOjgxLCJvZmZzZXQiOjY2NTIxfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>rate( )</code> function to visualize the frequency or rate of a given query per time interval. For example, you might want to know the number of pageviews per minute over an hour-long period or the count of unique sessions on your site per hour over a day-long period.</p>
    <ul>
      <li>
        <p>Use <a href="#sel-timeseries"><code>TIMESERIES</code></a> to generate a line chart with rates mapped over time.</p>
      </li>
      <li>
        <p>Omit <a href="#sel-timeseries"><code>TIMESERIES</code></a> to generate a billboard showing a single rate value averaged over time.</p>
        <div data-component="CollapserGroup" data-prop="W10=">
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiQmFzaWMgcmF0ZSBxdWVyeSJ9XQ==">
            <div data-prop-text="title">Basic rate query</div>
            <p>This query will generate a line chart showing the rate of throughput for APM transactions per 10 minutes over the past 6 hours.</p>
            <pre><code>SELECT rate(count(*), 10 minute) FROM Transaction SINCE 6 hours ago 
TIMESERIES

</code></pre>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoicm91bmQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5yb3VuZChhdHRyaWJ1dGUpPC9JbmxpbmVDb2RlPiIsInBvc2l0aW9uIjp7InN0YXJ0Ijp7ImxpbmUiOjE4NjgsImNvbHVtbiI6MTEsIm9mZnNldCI6Njc0NTd9LCJlbmQiOnsibGluZSI6MTg2OCwiY29sdW1uIjo1NCwib2Zmc2V0Ijo2NzUwMH19fX1d">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>round( )</code> function to return the rounded value of an attribute.</p>
    <p>Optionally <code>round( )</code> can take a second argument, <code>to_nearest</code>, to round the first argument to the closest multiple of the second one. <code>to_nearest</code> can be fractional.</p>
    <pre><code>SELECT round(n [, to_nearest])

</code></pre>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3RkZGV2In0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+c3RkZGV2KGF0dHJpYnV0ZSk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTg4MiwiY29sdW1uIjoxMSwib2Zmc2V0Ijo2Nzg4N30sImVuZCI6eyJsaW5lIjoxODgyLCJjb2x1bW4iOjU1LCJvZmZzZXQiOjY3OTMxfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>stddev( )</code> function to return one <a href="https://en.wikipedia.org/wiki/Standard_deviation">standard deviation</a> for a numeric attribute over the time range specified.<br>It takes a single argument. If the attribute is not numeric, it will return a value of zero.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic3RkdmFyIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPElubGluZUNvZGU+c3RkdmFyKGF0dHJpYnV0ZSk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTg5MSwiY29sdW1uIjoxMSwib2Zmc2V0Ijo2ODI4OX0sImVuZCI6eyJsaW5lIjoxODkxLCJjb2x1bW4iOjU1LCJvZmZzZXQiOjY4MzMzfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>stdvar( )</code> function to return the <a href="https://en.wikipedia.org/wiki/Variance">standard variance</a> for a numeric attribute over the time range specified.</p>
    <p>It takes a single argument. If the attribute is not numeric, it will return a value of zero.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy1zdW0ifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6eyJ0eXBlIjoibWR4VmFsdWVFeHByZXNzaW9uIiwidmFsdWUiOiI8SW5saW5lQ29kZT5zdW0oYXR0cmlidXRlKTwvSW5saW5lQ29kZT4iLCJwb3NpdGlvbiI6eyJzdGFydCI6eyJsaW5lIjoxOTAxLCJjb2x1bW4iOjExLCJvZmZzZXQiOjY4NjgxfSwiZW5kIjp7ImxpbmUiOjE5MDEsImNvbHVtbiI6NTIsIm9mZnNldCI6Njg3MjJ9fX19XQ==">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>sum( )</code> function to return the sum recorded values of a numeric attribute over the time range specified.</p>
    <p>It takes a single argument. Arguments after the first will be ignored. If the attribute is not numeric, it will return a value of zero.</p>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy11bmlxdWVDb3VudCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjp7InR5cGUiOiJtZHhWYWx1ZUV4cHJlc3Npb24iLCJ2YWx1ZSI6IjxJbmxpbmVDb2RlPnVuaXF1ZUNvdW50KGF0dHJpYnV0ZSk8L0lubGluZUNvZGU+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTkxMSwiY29sdW1uIjoxMSwib2Zmc2V0Ijo2OTA3N30sImVuZCI6eyJsaW5lIjoxOTExLCJjb2x1bW4iOjYwLCJvZmZzZXQiOjY5MTI2fX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>uniqueCount( )</code> function to return the number of unique values recorded for an attribute over the time range specified.</p>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>To optimize query performance, this function returns approximate results for queries that inspect more than 256 unique values.</p>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJjbGFzc05hbWUiLCJ2YWx1ZSI6ImZyZXEtbGluayJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZnVuYy11bmlxdWVzIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOnsidHlwZSI6Im1keFZhbHVlRXhwcmVzc2lvbiIsInZhbHVlIjoiPD48SW5saW5lQ29kZT51bmlxdWVzKGF0dHJpYnV0ZSBcXFssbGltaXRdPC9JbmxpbmVDb2RlPjxJbmxpbmVDb2RlPik8L0lubGluZUNvZGU+PC8+IiwicG9zaXRpb24iOnsic3RhcnQiOnsibGluZSI6MTkyMywiY29sdW1uIjoxMSwib2Zmc2V0Ijo2OTUyOH0sImVuZCI6eyJsaW5lIjoxOTIzLCJjb2x1bW4iOjk2LCJvZmZzZXQiOjY5NjEzfX19fV0=">
    <div data-prop-text="title">[object Object]</div>
    <p>Use the <code>uniques( )</code> function to return a list of unique values recorded for an attribute over the time range specified. When used along with the <code>facet</code> clause, a list of unique attribute values will be returned per each facet value.</p>
    <p>The <code>limit</code> parameter is optional. When it is not provided, the default limit of 1,000 unique attribute values per facet is applied. You may specify a different <code>limit</code> value, up to a maximum of 10,000. The <code>uniques( )</code> function will return the first set of unique attribute values discovered, until the limit is reached. Therefore, if you have 5,000 unique attribute values in your data set, and the limit is set to 1,000, the operator will return the first 1,000 unique values that it discovers, regardless of their frequency.</p>
    <p>The maximum number of values that can be returned in a query result is the product of the <code>uniques( )</code> limit times the <code>facet</code> limit. In the following query, the theoretical maximum number of values that can be returned is 5 million (5,000 x 1,000).</p>
    <pre><code>From Transaction SELECT uniques(host,5000) FACET appName LIMIT 1000

</code></pre>However, depending on the data set being queried, and the complexity of the query, memory protection limits may prevent a very large query from being executed.
  </div>
</div>
<h2>Type conversion</h2>
<p>NRQL does not support "coercion." This means that a float stored as a string is treated as a string and cannot be operated on by functions expecting float values.</p>
<p>You can convert a string with a numeric value or a boolean with a string value to their numeric and boolean types with these functions:</p>
<ul>
  <li>Use the <code>numeric()</code> function to convert a number with a string format to a numeric function. The function can be built into a query that uses math functions on query results or NRQL aggregator functions, such as <code>average()</code>.</li>
  <li>Use the <code>boolean()</code> function to convert a string value of "true" or "false" to the corresponding boolean value.</li>
</ul>
