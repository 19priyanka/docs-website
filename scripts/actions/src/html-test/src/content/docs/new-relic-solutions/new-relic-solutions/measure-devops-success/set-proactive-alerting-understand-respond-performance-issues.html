
<p>The term "alerting" often carries some negative connotations; for too many developers, alerting correlates too closely with errors, mistakes, and ongoing issues. However, for developers who are proactive about alerting, they know they don’t have to stare at their dashboards all day, because effective alerts will tell them when to check in.</p>
<p>Well-defined alerts help you understand the health of your systems, so you can respond to performance problems before they affect your customers. Alerts can become overwhelming, so tune alerts and leverage AI so you get alerted on what matters.</p>
<h2>Prerequisites</h2>
<p>This tutorial assumes you have:</p>
<ul>
  <li>Instrumented your applications in New Relic.</li>
  <li>Reviewed the tutorial <a href="/docs/establish-objectives-baselines">Establish objectives and baselines</a> before you begin this one.</li>
  <li>Optional: added <a href="/docs/insights/insights-data-sources/custom-data/send-custom-data-insights">custom attributes and events</a>.</li>
</ul>
<h2>1. Define required alerting policies based on Service Level Objectives [#define]</h2>
<p>A <a href="https://en.wikipedia.org/wiki/Service_level_objective">service level objective (SLO)</a> is an agreed upon means of measuring the performance of your service. The SLO defines a target value of a specified quantitative measure, which is called a service level indicator (SLI). Examples service level indicators could be average response time, response time percentile, and application availability. SLOs would then clarify a target value for those SLIs such as:</p>
<ul>
  <li>Average response time should be less than 200 ms.</li>
  <li>95% of requests should be completed within 250 ms.</li>
  <li>Availability of the service should be 99.99%.</li>
</ul>
<p>These SLOs can also be logically grouped together to provide an overall boolean indicator of whether the service is meeting expectations or not (for example, “95% of requests completed within 250 ms AND availability is 99.99%”), which can be helpful for alerting purposes.</p>
<p>Use these SLIs as key performance indicators (KPIs) so your team and organization can measure your service and ensure it’s meeting customer expectations. By breaking down the quantitative performance metrics that are required of your services, you can then identify what kinds of alerts you should set for each. For instance, you could set an alert to notify you if web transaction times go above half a millisecond, or if the error rate goes higher than .20%.</p>
<p>However, not every SLO needs to become an alert. A strong alert strategy takes SLOs and creates a set of simple, actionable alerts. New Relic often finds that our most mature DevOps customers set fewer alerts in general and focus those alerts on a core set of metrics that indicate when their customer experience is truly degraded. As a result, New Relic DevOps customers often use <a href="/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction">Apdex</a> as part of their alerting strategy to align alerts with signs of degraded user satisfaction.</p>
<p>As you design your alert strategy, keep this question in mind: “If the customer isn’t impacted, is it worth waking someone up?”</p>
<p>For a simple framework of areas to set alerts for, use the following questions and advised metrics and KPIs:</p>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Questions</p>
      </div>
      <div>
        <p>Metrics and KPIs</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p>Are we open for business?</p>
      </div>
      <div>
        <p>Use <a href="https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/getting-started/get-started-new-relic-synthetic-monitoring">Synthetic monitoring pings</a> to determine if the site is up and <a href="https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/scripting-monitors/introduction-scripted-browser-monitors">scripted checks</a> to determine that the most important capabilities (such as a checkout cart) are working.</p>
      </div>
    </div>
    <div>
      <div>
        <p>How's our underlying infrastructure?</p>
      </div>
      <div>
        <p>Set KPIs for key <a href="https://docs.newrelic.com/docs/infrastructure/infrastructure-monitoring/get-started/get-started-infrastructure-monitoring">hardware, virtual hosts, containers</a>, <a href="https://github.com/newrelic/nri-network-telemetry">network</a>, and storage components.</p>
      </div>
    </div>
    <div>
      <div>
        <p>How's the health of our application?</p>
      </div>
      <div>
        <p>Track metrics for JVM performance, queuing, caching, and similar dependencies.</p>
      </div>
    </div>
    <div>
      <div>
        <p>How’s the overall quality of our application?</p>
      </div>
      <div>
        <p>Use an <a href="/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction">Apdex</a> score to quickly access an application’s quality.</p>
      </div>
    </div>
    <div>
      <div>
        <p>How are our customers doing?</p>
      </div>
      <div>
        <p>Consider real end-user metrics (<a href="/docs/browser">Browser</a> or <a href="/docs/apm">APM</a>), synthetic users (<a href="/docs/synthetics">Synthetics</a>), and <a href="/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction">Apdex</a> scores.</p>
      </div>
    </div>
    <div>
      <div>
        <p>How's our overall business doing?</p>
      </div>
      <div>
        <p>Focus on <a href="/docs/apm/transactions/key-transactions/introduction-key-transactions">key transactions</a> within an application, and tie that to expected business outcomes to illustrate correlation between your application and business performance.</p>
      </div>
    </div>
  </div>
</div>
<h2>2. Set specific alerts for performance, correctness, throughput, availability, and dependencies [#specify]</h2>
<p>With New Relic you can set alerts on your instrumented applications, end-user experience, infrastructure, databases, and more. New Relic will alert you if your site’s availability dips or if your error rate spikes above acceptable levels, as defined by your SLOs. You can set <a href="/docs/alerts/new-relic-alerts/defining-conditions/define-thresholds-trigger-alert">warning thresholds</a> to monitor issues that may be approaching a critical severity but don’t yet warrant a pager notification.</p>
<p>Setting thresholds for when alerts should notify teams can be challenging. Thresholds that are too tight will create alert fatigue while thresholds that are too loose will lead to unhappy customers.</p>
<p><a href="/docs/alerts/new-relic-alerts/defining-conditions/create-baseline-alert-conditions">Baseline alerts</a> allow you to set dynamic thresholds for alerts based on historical performance. Use baselines to tune your alert to the right threshold. For example, an alert in APM can notify incident response teams if web transaction times deviate from historical performance for an allotted amount of time.</p>
<p>
  <img src="./images/proactive-baseline-alerts-devops_0.png" alt="Proactive baseline alerts for devops" title="proactive-baseline-alerts-devops.png">
</p>
<p><strong><a href="https://alerts.newrelic.com">alerts.newrelic.com</a> > (select an alert policy) > (select an alert condition) > Define thresholds</strong></p>
<p>You can set this same kind of alert in Browser to catch sub-optimal performance. In the following example, we’ve set both a warning and a violation for throughput:</p>
<p>
  <img src="./images/proactive-baseline-alerts-thresholds.png" alt="Proactive baseline alerts - Browser thresholds" title="proactive-baseline-alerts-thresholds.png">
</p>
<p><strong><a href="https://alerts.newrelic.com">alerts.newrelic.com</a> > (select an alert policy) > (select an alert condition) > Define thresholds</strong></p>
<p>As you develop smaller, independent services running on increasingly ephemeral architectures, your environments become significantly more complex. Visibility into outliers can be an important tool for understanding likely performance issues. You should set alerts to automatically fire when you have an outlier -- this can indicate misbehaving hosts, load balancers, or apps.</p>
<p>For example, a load balancer divides web traffic approximately evenly across five different servers. You can set an alert based on a NRQL query, and notification to be sent if any server starts getting significantly more or less traffic than the other servers. Here’s the graph:</p>
<p>
  <img src="./images/outlier-alert.png" alt="outlier-alert.png" title="outlier-alert.png">
</p>
<p><strong><a href="https://alerts.newrelic.com">alerts.newrelic.com</a> > (select an alert policy) > (select an alert condition) > Define thresholds</strong></p>
<p>And here’s a sample NRQL query:</p>
<pre><code>SELECT average(cpuPercent) FROM SystemSample WHERE apmApplicationNames = 'MY-APP-NAME' FACET hostname
</code></pre>
<p>Now you have set static, baseline, and outlier alerts. This can provide a comprehensive awareness of your ecosystem.</p>
<p>Refer to the <a href="/docs/alerts/new-relic-alerts">New Relic Alerts documentation</a> for more details about optimizing your alerts.</p>
<h2>3. Identify groups to alert, and set broadcasting methods [#identify]</h2>
<p>Alerting without the proper broadcasting methods leaves you vulnerable. Your alerts strategy should include a <a href="/docs/alerts/new-relic-alerts/managing-notification-channels/notification-channels-control-where-send-alerts">notification channel</a> to ensure the appropriate teams are notified if your application or architecture encounters issues. New Relic has many <a href="/docs/alerts/new-relic-alerts/managing-notification-channels/notification-channels-control-where-send-alerts#channel-types">notification integrations</a>, but we recommend that you start simple and add more complexity later.</p>
<p>We recommend that you first send alerts to a group chat channel (for example, using <strong>Slack</strong>). Evaluate these alerts in real time for several weeks to understand which alerts are indicative of important or problematic issues. These are the the types of alerts that warrant waking someone up.</p>
<h2>4. Leverage AI to fine-tune alerts and seek anomalies [#fine-tune]</h2>
<p>To ensure you aren't training your teams to turn off or ignore notifications, keep your alerts valid and fresh. As you use New Relic to optimize your application and infrastructure performance, tighten your <a href="/docs/alerts">New Relic Alerts</a> policy conditions to keep pace with your improved performance. To keep alerts to a minimum, leverage New Relic Applied Intelligence features, such as <a href="https://docs.newrelic.com/docs/alerts-applied-intelligence/applied-intelligence/incident-intelligence/get-started-incident-intelligence">Incident Intelligence</a>, which correlates related alerts into one actionable issue combining machine learning and manual input. Check to make sure alerts are correlated correctly and train your system to obtain the most accurate incident correlation.</p>
<p>An additional way to reduce alert noise is by flapping detection and suppression. When an issue is "flapping," it is cycling between an open and resolved state, creating a new alert every time it cycles. <a href="https://blog.newrelic.com/product-news/how-to-use-decisions-applied-intelligence/">Effectively handling these</a> can reduce the number of total alerts sent to your team. Finally, when you have maintenance scheduled, take advantage of alert <a href="https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-notifications/muting-rules-suppress-notifications">muting rules</a> to suppress those alerts you don't need.</p>
<p>Now that you have tuned your alerts to valid notifications, you can proactively go after anomalies so you can fix issues before they become incidents. Enable <a href="https://docs.newrelic.com/docs/alerts-applied-intelligence/applied-intelligence/proactive-detection/proactive-detection-applied-intelligence">Proactive Detection</a> of anomalies and set some level of notification for them.</p>
<p>
  <img src="./images/new-relic-recent-anomalies-view.png" alt="New Relic Proactive Detection - recent anomalies" title="new-relic-recent-anomalies-view.png">
</p>
<h2>5. Create an alerts dashboard [#dashboard]</h2>
<p>Be sure to check your alerts and confirm that they're firing regularly and are still relevant for your customer satisfaction metrics. Use the New Relic platform to create dashboards centered around alerts and incidents for the most common policy conditions and violations.</p>
<p>
  <img src="./images/proactive-baseline-alerts-dashboards.png" alt="Proactive baseline alerts - dashboards" title="proactive-baseline-alerts-dashboards.png">
</p>
<p><strong><a href="https://insights.newrelic.com">insights.newrelic.com</a> > All dashboards > (selected dashboard)</strong></p>
<p>Use <a href="/docs/insights/nrql-new-relic-query-language/using-nrql/introduction-nrql">NRQL</a> to create your dashboards. For detailed instructions, check out <a href="https://blog.newrelic.com/2016/03/21/sending-alerts-data-to-insights/">Sending alerts data to Insights</a> (Insights is no longer our querying interface but the same concepts apply).</p>
<p>The dashboard above was created using the following NRQL queries. It's recommended you recreate them as needed for your alerting dashboards.</p>
<ul>
  <li>
    <p><strong>Incidents by condition</strong>:</p>
    <pre><code>SELECT count(*) FROM ALERT_NAME WHERE current_state = 'open' FACET condition_name SINCE 1 week ago
</code></pre>
  </li>
  <li>
    <p><strong>Incidents by policy</strong>:</p>
    <pre><code>SELECT count(*) FROM ALERT_NAME where current_state = 'open' FACET policy_name SINCE 60 MINUTES AGO TIMESERIES
</code></pre>
  </li>
  <li>
    <p><strong>Alert trends over time</strong>:</p>
    <pre><code>SELECT count(*) FROM ALERT_NAME WHERE current_state IS NOT NULL FACET policy_name SINCE 1 week ago TIMESERIES
</code></pre>
  </li>
  <li>
    <p><strong>Incident details</strong>:</p>
    <pre><code>SELECT timestamp, incident_id, policy_name, condition_name, details, severity FROM ALERT_NAME SINCE 1 week ago LIMIT 40
</code></pre>
  </li>
</ul>
<p>Visualizing this data provides a resource you can share with others to refine the alerts and thresholds you’re using.</p>
<p>For a more extensive discussion on notification channels, refer to the <a href="/docs/incident-orchestration">incident orchestration tutorial</a>.</p>
<h2>Conclusion</h2>
<p>Establishing a focused alerts policy helps you pinpoint any degradation that could impact performance in your application or infrastructure. With proactive alerting, you will decrease user-reported incidents, and allow your teams to spend less time firefighting and more time deploying significant changes to your product.</p>
<h2>For more help [#more_help]</h2>
<p>For more tips and best practices for alerting, see the following documentation:</p>
<ul>
  <li><a href="https://blog.newrelic.com/2017/03/29/alerts-dynamic-targeting-apps/">Tame application monitoring with dynamic targeting in New Relic Alerts</a></li>
  <li><a href="/docs/alerts/new-relic-alerts/getting-started/best-practices-alert-policies">Best practices for alert policies</a></li>
  <li><a href="/docs/infrastructure/new-relic-infrastructure/guides/new-relic-infrastructure-best-practices-guide#alerts">New Relic infrastructure monitoring best practices guide</a></li>
  <li><a href="/docs/infrastructure/new-relic-infrastructure/infrastructure-alert-conditions/infrastructure-alerting-examples">Infrastructure alerting examples</a></li>
</ul>
