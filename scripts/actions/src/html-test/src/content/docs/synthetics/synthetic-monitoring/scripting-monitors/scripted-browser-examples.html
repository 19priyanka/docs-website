
<p>Using <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers">scripted browsers</a>, you can build complex monitoring workflows using a JavaScript-like scripting language driven by <a href="https://seleniumhq.github.io/selenium/docs/api/javascript/index.html">Selenium WebDriver</a>.</p>
<p>For a detailed guide to all the available functions, see <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/synthetics-scripted-browser-reference-monitor-versions-050">Synthetic's scripted browser reference</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p>To view and share other scripted browser examples, check out the <a href="https://discuss.newrelic.com/tags/c/support-products-agents/synthetics/synthetics-script">synthetic scripts</a> section of the New Relic Online Technical Community.</p>
</div>
<h2>Monitor a URL [#advanced-url]</h2>
<p>In this example, the monitor visits <a href="http://telco.nrdemo-sandbox.com/">http://telco.nrdemo-sandbox.com/</a>:</p>
<pre><code>//Visit http://telco.nrdemo-sandbox.com/
$browser.get("http://telco.nrdemo-sandbox.com/");
</code></pre>
<p>This scripting action is the foundation for nearly all scripted browsers. For more information, see <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers#visiting-a-url">Visit a URL</a>.</p>
<h2>Navigate to a link [#advanced-navigate]</h2>
<p>In the example below, the monitor:</p>
<ol>
  <li>Navigates to <a href="http://telco.nrdemo-sandbox.com/">http://telco.nrdemo-sandbox.com/</a>.</li>
  <li>Finds the <strong>About</strong> page via link text and <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers#clicking-elements">clicks the link</a>.</li>
  <li>Finds the <strong>Acme Telco Home</strong> link by searching for the partial string <code>Home</code> and <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers#clicking-elements">clicks the link</a>.</li>
</ol>
<pre><code>$browser.get("http://telco.nrdemo-sandbox.com/").then(function(){
//Find a link whose display text is `About` and click that link.
    return $browser.findElement($driver.By.linkText("About")).click();
}).then(function(){
    return $browser.findElement($driver.By.partialLinkText("Home")).click();
});
</code></pre>
<p>These steps are ordered by a <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers#sequence">sequencing function</a>.</p>
<p>For detailed instructions and other methods of locating elements, see <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers#locating-elements">Locate elements</a>. For a list of all locators, see <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/synthetics-scripted-browser-reference-monitor-versions-050#locators">Locators: Find page elements</a>.</p>
<h2>Search a website [#advanced-search]</h2>
<p>In the example below, the monitor:</p>
<ol>
  <li>Navigates to <a href="http://telco.nrdemo-sandbox.com/static/companyBlog.jsp">http://telco.nrdemo-sandbox.com/static/companyBlog.jsp</a>.</li>
  <li>Locates the search box <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers#locate-by-xpath">via its XPath</a> and types <code>relic</code>.</li>
  <li>Locates the submit button <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers#locate-by-xpath">via its XPath</a> and clicks it to submit the search.</li>
</ol>
<pre><code>$browser.get("http://telco.nrdemo-sandbox.com/static/companyBlog.jsp").then(function(){
//Find the search field by specifying its id, then enter `relic`.
    return $browser.findElement($driver.By.xpath("//h4[text()='Blog Search']/following-sibling::div/input")).sendKeys("relic");
}).then(function(){
//Click the search button.
    return $browser.findElement($driver.By.xpath("//h4[text()='Blog Search']/following-sibling::div//button")).click();
});
</code></pre>
<p>For more information about sending text to a field, see <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers#entering-text">Enter text</a>.</p>
<h2>Wait for a page to load [#wait-for-title]</h2>
<p>In the example below, the monitor:</p>
<ol>
  <li>Navigates to <a href="http://telco.nrdemo-sandbox.com/browse/phones">http://telco.nrdemo-sandbox.com/browse/phones</a>.</li>
  <li>Finds the <strong>Details</strong> button for the <strong>Acme Standard</strong> phone <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers#locate-by-xpath">via its XPath</a> and clicks on it.</li>
  <li>Waits up to 10 seconds for the HTML page title to match <code>Acme Commerce Company</code>.</li>
  <li>Finds the <strong>Add to Cart</strong> button <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers#locate-by-xpath">via its XPath</a> and clicks on it.</li>
</ol>
<pre><code>$browser.get("http://telco.nrdemo-sandbox.com/browse/phones").then(function(){
    return $browser.findElement($driver.By.xpath("(//a[text()='Details'])[3]")).click();
});
//Call the wait function.
$browser.wait(function() {
//Tell the monitor to get the page title, then run a function on that title.
  return $browser.getTitle().then(function(title) {
//Ensure that the title matches `Acme Commerce Company`.
    return title === "Acme Commerce Company";
    });
//If the condition isn't satisfied within 10000 milliseconds (10 seconds), proceed anyway.
}, 10000);
//Find the `Add to Cart` button via its XPath and click it.
$browser.findElement($driver.By.xpath("//input[@value='Add to Cart']")).click();
</code></pre>
<p>For more information about setting wait conditions that will pause the script, see <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers#wait-page-title">Wait for page title</a>.</p>
<h2>Wait for a page element [#wait-for-element]</h2>
<p>In the example below, the monitor:</p>
<ol>
  <li>Loads <a href="http://telco.nrdemo-sandbox.com/">http://telco.nrdemo-sandbox.com/</a>.</li>
  <li>Finds the <strong>Support</strong> dropdown via HTML ID and clicks on it.</li>
  <li>Waits up to 20 seconds for the <strong>FAQ</strong> button to appear and clicks on it.</li>
</ol>
<pre><code>//Navigate to the Acme Telco Homepage and clicks on the Support dropdown.
$browser.get("http://telco.nrdemo-sandbox.com/").then(function(){
    return $browser.findElement($driver.By.id("supportDropDown")).click();
}).then(function(){
    //Call the wait function to wait until the FAQ button appears.
    return $browser.waitForAndFindElement($driver.By.id("supportFAQLink"), 2000).then(function(aboutPage){
        return aboutPage.click();
    })
});
</code></pre>
<p>For more information, see <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers#wait-page-element">Wait for a specific element</a> and <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/synthetics-scripted-browser-reference-monitor-versions-050#until">Conditions: Pause and wait for conditions</a>.</p>
<h2>Log in to a website [#advanced-login]</h2>
<p>In the example below, the monitor:</p>
<ol>
  <li>Loads <a href="http://telco.nrdemo-sandbox.com/login.jsp">http://telco.nrdemo-sandbox.com/login.jsp</a>.</li>
  <li>Finds the username field through element name and submits a secure username <a href="/docs/synthetics/new-relic-synthetics/using-monitors/secure-credentials-store-credentials-information-scripted-browsers">via our secure credentials feature.</a></li>
  <li>Finds the password field through the element name and submits a secure password.</li>
  <li>Finds the login button <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers#locate-by-xpath">via its XPath</a> and clicks to submit the account information.</li>
</ol>
<pre><code>$browser.get("http://telco.nrdemo-sandbox.com/login.jsp").then(function(){
//Find the user name field by specifying its name, then submits a secured username.
    return $browser.findElement($driver.By.name("username")).sendKeys($secure.SECURE_USERNAME);
}).then(function(){
//Find the password field by specifying its name, then submits a secured password.
    return $browser.findElement($driver.By.name("password")).sendKeys($secure.SECURE_PASSWORD);
}).then(function(){
//Find and click the login button.
    return $browser.findElement($driver.By.xpath("//input[@value='Login']")).click();
});
</code></pre>
<p>For more information about using secure credentials, see <a href="/docs/synthetics/new-relic-synthetics/using-monitors/secure-credentials-store-credentials-information-scripted-browsers">Store secure credentials</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
  <p><strong>What credentials should I use?</strong></p>
  <p>Just like you shouldn't reuse a password across multiple websites, we recommend that you create new credentials unique to your script. Don't use your personal credentials or reuse credentials.</p>
</div>
<h2>For more help [#more_help]</h2>
<p>Additional resources include:</p>
<ul>
  <li><a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers">Write scripted browsers</a> (build WebDriverJS scripts for multi-step monitoring)</li>
  <li><a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/synthetics-scripted-browser-reference-monitor-versions-050">Synthetic's scripted browser reference</a> (detailed list of all available functions)</li>
  <li><a href="/docs/synthetics/new-relic-synthetics/using-monitors/adding-editing-monitors">Add and edit monitors</a> (how to create synthetic monitors, including configuration options)</li>
</ul>
