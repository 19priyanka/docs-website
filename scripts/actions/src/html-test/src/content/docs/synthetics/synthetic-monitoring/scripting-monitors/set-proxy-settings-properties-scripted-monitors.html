
<p>Read on to learn about synthetic monitoring's proxy settings and properties.</p>
<h2>Proxy settings API for scripted monitors [#proxy-api]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>You can set proxy server configuration for synthetic scripted monitors for monitor versions 0.4.0 or higher.</p>
</div>
<p>The global object <code>$network</code> allows you to control the network configuration used by your synthetic scripted monitors. The following are applicable for both <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers">scripted browsers</a> and <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-api-tests">API tests</a>, unless otherwise stated.</p>
<div data-component="CollapserGroup" data-prop="W10=">
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGVydXJsIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiIkbmV0d29yay5zZXRQcm94eShzdHJpbmcgb3Igb2JqZWN0IFBST1hZIFVSTCkifV0=">
    <div data-prop-text="title">$network.setProxy(string or object PROXY URL)</div>
    <p>Sets a proxy server to be used for all per-URL requests (HTTP, HTTPS, and FTP).</p>
    <p>Additional notes:</p>
    <ul>
      <li>
        <p>The port is optional. If not provided, it will be derived from the scheme. For example, for HTTP the port would be 80.</p>
      </li>
      <li>
        <p>The username and password are assumed to be the result of a call to <code>encodeURIComponent()</code>. Special characters like <code>@</code> and <code>:</code> in the username and/or the password must be escaped.</p>
        <div data-component="CollapserGroup" data-prop="W10=">
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGVydXJsLXJldHVybnMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlJldHVybnMifV0=">
            <div data-prop-text="title">Returns</div>
            <p>This method returns a <code>Promise</code> that will resolve once the configuration has been applied.</p>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGFyYW1ldGVycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUGFyYW1ldGVycyJ9XQ==">
            <div data-prop-text="title">Parameters</div>
            <div data-component="Table" data-prop="W10=">
              <div>
                <div>
                  <div>
                    <p>Parameter</p>
                  </div>
                  <div>
                    <p>Data Type</p>
                  </div>
                  <div>
                    <p>Description</p>
                  </div>
                </div>
              </div>
              <div>
                <div>
                  <div>
                    <p><code>proxyURL | proxyUrlParsed</code></p>
                  </div>
                  <div>
                    <p>String or Object</p>
                  </div>
                  <div>
                    <p>The URL to connect to the proxy server. A string containing a <code>proxyURL</code> (for example, <code>http://proxy_host:8888</code>) or a plain object in the same format as defined by <a href="https://nodejs.org/api/url.html#url_url_strings_and_url_objects">Node's <code>url.parse(urlString)</code> method</a>.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktZXhhbXBsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRXhhbXBsZXMifV0=">
            <div data-prop-text="title">Examples</div>
            <p>An example of setting a proxy server with HTTP protocol on port 1234 with no authentication:</p>
            <pre><code>$network.setProxy('http://host.com:1234')

</code></pre>
            <pre><code>
$network.setProxy('http://proxyUsername:proxyPassword@proxyHost:1234')

</code></pre>An example of setting a proxy server with HTTP protocol with authentication credentials.
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktaHR0cCJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiJG5ldHdvcmsuc2V0UHJveHlGb3JIdHRwKHN0cmluZyBvciBvYmplY3QgUFJPWFkgVVJMKSJ9XQ==">
    <div data-prop-text="title">$network.setProxyForHttp(string or object PROXY URL)</div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>This call is exactly the same as the <a href="#setproxy-perurl">per-URL <code>setProxy</code> call</a>, except that it applies to HTTP traffic.</p>
    </div>
    <p>Sets a proxy server to be used for all HTTP requests.</p>
    <p>Additional notes:</p>
    <ul>
      <li>
        <p>The port is optional. If not provided, it will be derived from the scheme. For example, for HTTP the port would be 80.</p>
      </li>
      <li>
        <p>The username and password are assumed to be the result of a call to <code>encodeURIComponent()</code>. Special characters like <code>@</code> and <code>:</code> in the username and/or the password must be escaped.</p>
        <div data-component="CollapserGroup" data-prop="W10=">
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGVydXJsLXJldHVybnMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlJldHVybnMifV0=">
            <div data-prop-text="title">Returns</div>
            <p>This method returns a <code>Promise</code> that will resolve once the configuration has been applied.</p>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGFyYW1ldGVycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUGFyYW1ldGVycyJ9XQ==">
            <div data-prop-text="title">Parameters</div>
            <div data-component="Table" data-prop="W10=">
              <div>
                <div>
                  <div>
                    <p>Parameter</p>
                  </div>
                  <div>
                    <p>Data Type</p>
                  </div>
                  <div>
                    <p>Description</p>
                  </div>
                </div>
              </div>
              <div>
                <div>
                  <div>
                    <p><code>proxyURL | proxyUrlParsed</code></p>
                  </div>
                  <div>
                    <p>String or Object</p>
                  </div>
                  <div>
                    <p>The URL to connect to the proxy server. A string containing a <code>proxyURL</code> (for example, <code>http://proxy_host:8888</code>) or a plain object in the same format as defined by <a href="https://nodejs.org/api/url.html#url_url_strings_and_url_objects">Node's <code>url.parse(urlString)</code> method</a>.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktZXhhbXBsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRXhhbXBsZXMifV0=">
            <div data-prop-text="title">Examples</div>
            <p>An example of setting a proxy server with HTTP protocol on port 1234 with no authentication:</p>
            <pre><code>$network.setProxyForHttp('http://host.com:1234')

</code></pre>
            <pre><code>
$network.setProxyForHttp('http://proxyUsername:proxyPassword@proxyHost:1234')

</code></pre>An example of setting a proxy server with HTTP protocol with authentication credentials.
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktaHR0cHMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IiRuZXR3b3JrLnNldFByb3h5Rm9ySHR0cHMoc3RyaW5nIG9yIG9iamVjdCBQUk9YWSBVUkwpIn1d">
    <div data-prop-text="title">$network.setProxyForHttps(string or object PROXY URL)</div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>This call is exactly the same as the <a href="#setproxy-perurl">per-URL <code>setProxy</code> call</a>, except that it applies to HTTPS traffic.</p>
    </div>
    <p>Sets a proxy server to be used for all HTTPS requests.</p>
    <p>Additional notes:</p>
    <ul>
      <li>
        <p>The port is optional. If not provided, it will be derived from the scheme. For example, for HTTP the default port would be 443.</p>
      </li>
      <li>
        <p>The username and password are assumed to be the result of a call to <code>encodeURIComponent()</code>. Special characters like <code>@</code> and <code>:</code> in the username and/or the password must be escaped.</p>
        <div data-component="CollapserGroup" data-prop="W10=">
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGVydXJsLXJldHVybnMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlJldHVybnMifV0=">
            <div data-prop-text="title">Returns</div>
            <p>This method returns a <code>Promise</code> that will resolve once the configuration has been applied.</p>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGFyYW1ldGVycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUGFyYW1ldGVycyJ9XQ==">
            <div data-prop-text="title">Parameters</div>
            <div data-component="Table" data-prop="W10=">
              <div>
                <div>
                  <div>
                    <p>Parameter</p>
                  </div>
                  <div>
                    <p>Data Type</p>
                  </div>
                  <div>
                    <p>Description</p>
                  </div>
                </div>
              </div>
              <div>
                <div>
                  <div>
                    <p><code>proxyURL | proxyUrlParsed</code></p>
                  </div>
                  <div>
                    <p>String or Object</p>
                  </div>
                  <div>
                    <p>The URL to connect to the proxy server. A string containing a <code>proxyURL</code> (for example, <code>http://proxy_host:8888</code>) or a plain object in the same format as defined by <a href="https://nodejs.org/api/url.html#url_url_strings_and_url_objects">Node's <code>url.parse(urlString)</code> method</a>.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktZXhhbXBsZSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiRXhhbXBsZXMifV0=">
            <div data-prop-text="title">Examples</div>
            <p>An example of setting a proxy server with HTTPS protocol on port 1234 with no authentication:</p>
            <pre><code>$network.setProxyForHttps('https://host.com:1234')

</code></pre>
            <pre><code>
$network.setProxyForHttps('https://proxyUsername:proxyPassword@proxyHost:1234')

</code></pre>An example of setting a proxy server with HTTPS protocol with authentication credentials.
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGFjIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiIkbmV0d29yay5zZXRQcm94eVBBQyhzdHJpbmcgUEFDIFNDUklQVCBVUkwsIG9iamVjdCBBVVRIIE9CSkVDVCkifV0=">
    <div data-prop-text="title">$network.setProxyPAC(string PAC SCRIPT URL, object AUTH OBJECT)</div>
    <p>Sets a proxy server via a proxy auto-config (PAC) script and returns a promise. This function is only available for <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers">scripted browser monitors</a>.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGFjLXJldHVybnMifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IlJldHVybnMifV0=">
        <div data-prop-text="title">Returns</div>
        <p>This method returns a <code>Promise</code> that will resolve once the configuration has been applied.</p>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHlwYWMtcGFyYW1ldGVycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUGFyYW1ldGVycyJ9XQ==">
        <div data-prop-text="title">Parameters</div>
        <div data-component="Table" data-prop="W10=">
          <div>
            <div>
              <div>
                <p>Parameter</p>
              </div>
              <div>
                <p>Data Type</p>
              </div>
              <div>
                <p>Description</p>
              </div>
            </div>
          </div>
          <div>
            <div>
              <div>
                <p><code>scriptURL</code></p>
              </div>
              <div>
                <p>String</p>
              </div>
              <div>
                <p>The URL of the PAC script.</p>
              </div>
            </div>
            <div>
              <div>
                <p><code>authCredentialsMap</code></p>
              </div>
              <div>
                <p>Object</p>
              </div>
              <div>
                <p>Map of authentication credentials to be provided to the proxy server(s), keyed by the hostnames of the proxy server. Values of this map must be defined in the format <code>{username: 'authUsername', password: 'authPassword'}</code></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGFjLWV4YW1wbGUifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IkV4YW1wbGVzIn1d">
        <div data-prop-text="title">Examples</div>
        <p>An example of setting a proxy server via a proxy auto-config (PAC) script:</p>
        <pre><code>var authCredentialsMap = {
'example.com': {username: 'authUsername', password: 'authPassword'},
}

</code></pre>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktYWR2YW5jZWQifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IiRuZXR3b3JrLnNldFByb3h5QWR2YW5jZWQob2JqZWN0IFBST1hZIFJVTEVTIE9CSkVDVCkifV0=">
    <div data-prop-text="title">$network.setProxyAdvanced(object PROXY RULES OBJECT)</div>
    <div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJ0aXAifV0=">
      <p>This method is <strong>Chrome-specific</strong>: it only applies to Scripted Browser monitor types. It can be used to allow for a more flexible and complex Proxy configuration. In most cases, this method will not be needed.</p>
    </div>
    <p>Sets the proxy configuration using the format supported by Chrome Extension API for Proxying. The input is a ProxyRules object, as defined by the <a href="https://developer.chrome.com/extensions/proxy#type-ProxyRules">Chrome Extension API to configures proxies</a>. You can add <code>authCredentials</code> for proxies that need it. See Parameters for more details.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktYWR2YW5jZWQtcmV0dXJucyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUmV0dXJucyJ9XQ==">
        <div data-prop-text="title">Returns</div>
        <p>This method returns a <code>Promise</code> that will resolve once the configuration has been applied.</p>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHktcGFyYW1ldGVycyJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiUGFyYW1ldGVycyJ9XQ==">
        <div data-prop-text="title">Parameters</div>
        <div data-component="Table" data-prop="W10=">
          <div>
            <div>
              <div>
                <p>Parameter</p>
              </div>
              <div>
                <p>Data Type</p>
              </div>
              <div>
                <p>Description</p>
              </div>
            </div>
          </div>
          <div>
            <div>
              <div>
                <p><code>ProxyRules Object</code></p>
              </div>
              <div>
                <p>Object</p>
              </div>
              <div>
                <p>The <code>proxyRulesObject</code> is a plain object that follows the format ProxyRules as defined by the <a href="https://developer.chrome.com/extensions/proxy#type-ProxyRules">Chrome Extension API to configures proxies</a>. This object is "flavoured" to fit our runtime: users can define an additional property, <code>authCredentials</code>, for the <a href="https://developer.chrome.com/extensions/proxy#type-ProxyServer"><code>Proxy server objects</code></a> to provide authentication credentials for a specific proxy server. <code>authCredentials</code> is an object in the format <code>{username: 'authUsername', password: 'authPassword'}</code>.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHlhZHZhbmNlZC1leGFtcGxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJFeGFtcGxlcyJ9XQ==">
        <div data-prop-text="title">Examples</div>
        <p>An example of creating a <code>proxyRules</code> with <code>authCredentials</code>:</p>
        <pre><code>var proxyRules = {
	singleProxy: {
		host:"example.com",
		authCredentials: {
		  username: 'authUsername', 
		  password: 'authPassword'
		}
	}
};

</code></pre>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xlYXJwcm94eSJ9LHsidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ0aXRsZSIsInZhbHVlIjoiJG5ldHdvcmsuY2xlYXJQcm94eSgpIn1d">
    <div data-prop-text="title">$network.clearProxy()</div>
    <p>Clears/removes the current proxy configuration.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiY2xlYXJwcm94eS1yZXR1cm5zIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJSZXR1cm5zIn1d">
        <div data-prop-text="title">Returns</div>
        <p>This method returns a <code>Promise</code> that will resolve once the configuration has been applied.</p>
      </div>
    </div>
  </div>
  <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoiZ2V0cHJveHkifSx7InR5cGUiOiJtZHhBdHRyaWJ1dGUiLCJuYW1lIjoidGl0bGUiLCJ2YWx1ZSI6IiRuZXR3b3JrLmdldFByb3h5KCkifV0=">
    <div data-prop-text="title">$network.getProxy()</div>
    <p>This method returns the current proxy configuration. It must be synchronized in a promise callback.</p>
    <div data-component="CollapserGroup" data-prop="W10=">
      <div data-component="Collapser" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJpZCIsInZhbHVlIjoic2V0cHJveHlhZHZhbmNlZC1leGFtcGxlIn0seyJ0eXBlIjoibWR4QXR0cmlidXRlIiwibmFtZSI6InRpdGxlIiwidmFsdWUiOiJFeGFtcGxlcyJ9XQ==">
        <div data-prop-text="title">Examples</div>
        <p>An example of synchronizing <code>getProxy</code> with <code>$network.setProxy();</code> and <code>$network.clearProxy();</code>:</p>
        <pre><code>var assert = require('assert');

$network.setProxy("http://user:password@myproxyurl.com")
  .then(function () {
    console.log('Proxy configuration applied');

    //Note: $network.getProxy() is not synchronized with the webdriver Control Flow. 
    //To make sure we get the proxy configuration after the call to setProxy() above
    // succeeds we need to use a promise callback 
    var proxyData = $network.getProxy();
    console.log(proxyData);
  })
  .then(function () {
    // Again: getProxy() is not synchronized with the Webdriver Control Flow: we 
    //need this promise callback otherwise clearProxy() might be called before the call 
    // to getProxy() above returns 
    return $network.clearProxy();
  })
  .then(function () {
    console.log('Proxy configuration cleared');

    // We need this promise callback for reasons explained above
    var proxyData = $network.getProxy();
    assert.equal(proxyData.rules, null);
  });

</code></pre>
      </div>
    </div>
  </div>
</div>
<h2>Proxy properties [#proxy]</h2>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p>This proxy information applies only to these versions:</p>
  <ul>
    <li>API monitors: 0.4.0, 0.2.2, 0.2.1, 0.1.0</li>
    <li>Scripted monitors: 0.1.0</li>
  </ul>
</div>
<p>In order to analyze and collect your HTTP traffic metrics, New Relic must ensure the traffic passes through a conceptual funnel. Our synthetic monitoring includes a software funnel component capable of analyzing the HTTP requests or responses and then recording the information.</p>
<ul>
  <li>New Relic's scripted browser monitors (versions 0.4.x and lower) include a mechanism to do this analysis without needing an HTTP proxy, so you don't have to configure anything.</li>
  <li>New Relic's API test (versions 0.4.x and lower) provides an <code>$http</code> object that is pre-configured to make the requests pass through the internal HTTP proxy. This allows you to write your test without including any proxy settings.</li>
</ul>
<p>If you want to use some other way to generate HTTP traffic while still collecting the HTTP traffic metrics, you can use <code>$env.PROXY_HOST</code> and <code>$env.PROXY_PORT</code>. To record traffic metrics, be sure to include these properties in your script.</p>
<h2>For more help [#more_help]</h2>
<p>Additional documentation resources include:</p>
<ul>
  <li><a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers">Write scripted browsers</a> (how to write scripted browsers for synthetic monitoring)</li>
  <li><a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/write-api-tests">Write API tests</a> (how to write API tests for synthetic monitoring)</li>
  <li><a href="/docs/synthetics/new-relic-synthetics/using-monitors/add-edit-monitors">Add and edit monitors</a> (how to create virtual browser monitors in New Relic)</li>
</ul>
