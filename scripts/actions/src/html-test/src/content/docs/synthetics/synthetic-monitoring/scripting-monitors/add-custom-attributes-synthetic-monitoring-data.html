
<p>New Relic's <code>$util.insights</code> is a set of tools to set and manipulate <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#event-data">events</a> reported from synthetic monitoring. Custom data is added as custom attributes, with prefix <code>custom</code>, to the <code>SyntheticCheck</code> <a href="/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type">event</a>. These attributes are in addition to that event's <a href="/docs/insights/new-relic-insights/decorating-events/synthetics-default-attributes-insights#syntheticcheck-table">default attributes</a>.</p>
<div data-component="Callout" data-prop="W3sidHlwZSI6Im1keEF0dHJpYnV0ZSIsIm5hbWUiOiJ2YXJpYW50IiwidmFsdWUiOiJpbXBvcnRhbnQifV0=">
  <p><code>$util.insights</code> includes the word Insights because Insights was historically how New Relic saved queryable <a href="/docs/using-new-relic/data/understand-data/new-relic-data-types#event-data">event data</a>.</p>
</div>
<h2>Compatibility [#h2-compatibility]</h2>
<p>This functionality is available for <a href="/docs/synthetics/new-relic-synthetics/scripting-monitors/scripted-monitor-runtime-environment">monitor versions 0.2.0 or later</a>.</p>
<h2>Functions [#h2-functions]</h2>
<div data-component="Table" data-prop="W10=">
  <div>
    <div>
      <div>
        <p>Function</p>
      </div>
      <div>
        <p>Return value</p>
      </div>
    </div>
  </div>
  <div>
    <div>
      <div>
        <p><code>$util.insights.set(key: string, value: ?)</code></p>
        <p>Sets a key/value pair.</p>
      </div>
      <div>
        <p>void</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$util.insights.get(key: string)</code></p>
        <p>Returns the value for the provided key.</p>
      </div>
      <div>
        <p>object</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$util.insights.getKeys()</code></p>
        <p>Returns an array of keys currently set.</p>
      </div>
      <div>
        <p>object</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$util.insights.has(key: string)</code></p>
        <p>Returns <code>true</code> if the key exists in the data.</p>
      </div>
      <div>
        <p>boolean</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$util.insights.unset(key: string)</code></p>
        <p>Removes the key/value pair.</p>
      </div>
      <div>
        <p>void</p>
      </div>
    </div>
    <div>
      <div>
        <p><code>$util.insights.unsetAll()</code></p>
        <p>Removes all custom data.</p>
      </div>
      <div>
        <p>void</p>
      </div>
    </div>
  </div>
</div>
<h2>Example</h2>
<p>The example obtains the latest incident from New Relic's RSS status feed and saves the details for this event.</p>
<pre><code class="language-javascript">var parseString = require('xml2js').parseString;
 
// Get the New Relic status RSS feed
$http.get('https://status.newrelic.com/history.rss', function(err, response, body) {
  parseString(body, function(err, result){
    // Parse the RSS, and get the latest incident
    var latestIncident = result.rss.channel[0].item[0];
    
    // Push the incident details to New Relic 
    $util.insights.set('Incident', latestIncident.title[0]);
    $util.insights.set('Description', latestIncident.description[0]);
    $util.insights.set('Date', latestIncident.pubDate[0]);
  });
});
</code></pre>
<p>To view the incident data sent to New Relic in this example, use this query:</p>
<pre><code class="language-sql">FROM SyntheticCheck SELECT latest(custom.Date), latest(custom.Incident), latest(custom.Description)
</code></pre>
