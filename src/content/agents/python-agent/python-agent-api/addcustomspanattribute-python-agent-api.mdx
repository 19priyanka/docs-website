---
title: add_custom_span_attribute (Python agent API)
contentType: apiDoc
template: basicDoc
---

## Syntax

```newrelic.agent.add\_custom\_span\_attribute(key, value)```
Adds a custom attribute to a span event.

## Description

This call records a [custom attribute](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#attribute) (a key/value pair attached to your [span event](https://docs.newrelic.com/docs/using-new-relic/welcome-new-relic/get-started/glossary#span)).

Attributes may be found in Distributed Tracing or in APM if a transaction trace is created by the parent transaction. Attributes can also be [found and queried](/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data) in New Relic One.

Before you create custom attributes, review our list of [reserved terms used by NRQL](/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-reserved-words).

## Parameters

<table><thead><tr><th width="25%">Parameter</th><th>Description</th></tr></thead><tbody><tr><td><p><code>key</code></p><p><em>string</em></p></td><td>Required. The key name. Only the first 255 characters are retained.</td></tr><tr><td><p><code>value</code></p><p><em>string, integer, float, boolean</em></p></td><td>Required. The string value to add to the current span event. Only the first 255 characters are retained.</td></tr></tbody></table>

## Return values

Returns `True` if attribute was added successfully.Â 

## Examples

### Adding custom attributes to background task

An example of adding custom attributes to a [background task](/docs/agents/python-agent/python-agent-api/background_task):

```@newrelic.agent.background\_task()
def send\_request():
	with newrelic.agent.FunctionTrace(name='Trace'):
    	newrelic.agent.add\_custom\_span\_attribute('attribute', 'value')

```

### Using custom span attribute to troubleshoot

You can also use custom attributes to troubleshoot performance issues. For example, you might see occasional slow response times from a pool of memcache instances, but you don't know what instance is causing the problem. You might add an attribute to the span indicating the server, like so:

```\# Set server\_ip to be the current server processing the transaction

newrelic.agent.add\_custom\_span\_attribute("memcache\_query\_frontend\_lookup", server\_ip)
```