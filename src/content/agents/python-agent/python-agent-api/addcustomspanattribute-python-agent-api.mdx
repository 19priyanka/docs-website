---
title: add_custom_span_attribute (Python agent API)
contentType: apiDoc
template: basicDoc
---

<h2>Syntax</h2> <pre>newrelic.agent.add_custom_span_attribute(key, value)</pre>Adds a custom attribute to a span event. <h2>Description</h2><p>This call records a <a href="/docs/accounts-partnerships/education/getting-started-new-relic/glossary#attribute">custom attribute</a> (a key/value pair attached to your <a href="https://docs.newrelic.com/docs/using-new-relic/welcome-new-relic/get-started/glossary#span">span event</a>).</p><p>Attributes may be found in Distributed Tracing or in APM if a transaction trace is created by the parent transaction. Attributes can also be <a href="/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data">found and queried</a> in New Relic One.</p><div class="callout-important"><p>Before you create custom attributes, review our list of <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-reserved-words">reserved terms used by NRQL</a>.</p></div><h2>Parameters</h2><table>	<thead>		<tr>			<th width="25%">Parameter</th>			<th>Description</th>		</tr>	</thead>	<tbody>		<tr>			<td>			<p><code>key</code></p>			<p><em>string</em></p>			</td>			<td>Required. The key name. Only the first 255 characters are retained.</td>		</tr>		<tr>			<td>			<p><code>value</code></p>			<p><em>string, integer, float, boolean</em></p>			</td>			<td>Required. The string value to add to the current span event. Only the first 255 characters are retained.</td>		</tr>	</tbody></table> <h2>Return values</h2><p>Returns <code>True</code> if attribute was added successfully.&nbsp;</p><h2>Examples</h2><h3 id="custom-parameter-example">Adding custom attributes to background task</h3><p>An example of adding custom attributes to a <a href="/docs/agents/python-agent/python-agent-api/background_task">background task</a>:</p><pre>@newrelic.agent.background_task()def send_request():	with newrelic.agent.FunctionTrace(name='Trace'):    	newrelic.agent.add_custom_span_attribute('attribute', 'value')</pre><h3 id="parameter-troubleshooting">Using custom span attribute to troubleshoot</h3><p>You can also use custom attributes to troubleshoot performance issues. For example, you might see occasional slow response times from a pool of memcache instances, but you don't know what instance is causing the problem. You might add an attribute to the span indicating the server, like so:</p><pre># Set server_ip to be the current server processing the transactionnewrelic.agent.add_custom_span_attribute("memcache_query_frontend_lookup", server_ip)</pre>