---
title: Collecting data for troubleshooting with the 'snmpwalk' utility
tags:
  - Integrations
  - Network Performance Monitoring
  - Troubleshooting
metaDescription: Gathering details on all supported OIDs for your device using the 'snmpwalk' utility.
redirects: 
  - /docs/network-performance-monitoring/setup-performance-monitoring/snmp-troubleshooting-walk
---

## Problem [#problem]

You are having trouble collecting SNMP metrics from your device and/or you need to see what specific Object Identifiers (OIDs) your device supports.

## Solutions [#solutions]

The [snmpwalk](https://helpmanual.io/help/snmpwalk/) utility is a useful tool for troubleshooting various SNMP challenges you may encounter. Because `ktranslate` runs on the host network of the Linux host that Docker is running on top of, it is an accurate measurement of whether or not your devices are responding to SNMP requests and what specifically they are responding with.

<Callout variant="tip">
Most systems will have `snmpwalk` installed, but if necessary you can load it yourself using `apt-get install snmp` or `yum install net-snmp-utils`
</Callout>

### Connectivity Testing 

You can test connectivity to your SNMP devices with a basic test to gather the System Object Identifier (SysOID) of the device. If successful, you know that the configuration of SNMP on the device and the network connectivity between the Docker host and the device are both good. If it fails, you'll need to validate the settings in your internal network.

**SNMP v2c Example:**

```bash
snmpwalk -v 2c -On -c $COMMUNITY $IP_ADDRESS .1.3.6.1.2.1.1.2.0
```

Where `$COMMUNITY` is your SNMP community string and `$IP_ADDRESS` is the target device IP

**SNMP v3 Example:**

```bash
snmpwalk -v 3 -On -l $LEVEL -u $USERNAME -a $AUTH_PROTOCOL -A $AUTH_PASSPHRASE -x $PRIV_PROTOCOL -X $PRIV_PASSPHRASE $IP_ADDRESS .1.3.6.1.2.1.1.2.0
```
Replacing the following settings as necessary: 

```
$LEVEL == noAuthNoPriv | authNoPriv | authPriv
$USERNAME == SNMP v3 User
$AUTH_PROTOCOL == MD5 | SHA
$AUTH_PASSPHRASE == Authentication passphrase
$PRIV_PROTOCOL == DES | AES
$PRIV_PASSPHRASE == Privacy passphrase
$IP_ADDRESS == target device IP
```

The expected output from this command is something similar to this in your console: 

```
.1.3.6.1.2.1.1.2.0 = OID: .1.3.6.1.4.1.9.1.46
```

### Capturing Full SNMP Walk

It is often desirable to capture the output of walking every OID available on your device(s). This output is especially used when creating new SNMP profiles for `ktranslate` and is a required artifact when [opening a profile request](https://github.com/kentik/snmp-profiles/issues/new/choose) on the GitHub repo.

The primary differences in your command for this are changing the target to a root `.` and redirecting the output to a file that you can gather data from later. 

**SNMP v2 Example:**

```bash
snmpwalk -v 2c -On -c $COMMUNITY $IP_ADDRESS . >> snmpwalk.out
```

*SNMP v3 has the same required changes*

The output of this command will be a file named `snmpwalk.out` that lists every OID that the device responds to. Note on devices with a large number of interfaces it is expected for this walk to take upwards of 10+ minutes to complete. 
