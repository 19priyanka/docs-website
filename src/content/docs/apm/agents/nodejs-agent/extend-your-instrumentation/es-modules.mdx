---
title: Using the Node.js Agent in an ES Module application
tags:
  - Agents
  - Nodejs agent
  - ESM
  - ES Modules
  - Experimental
metaDescription: How to install and configure your Node.js APM agent for an application that uses ES Modules.
---

<Callout variant="important">
    Node.js APM agent support for instrumentation in [ES Module](https://nodejs.org/api/esm.html) applications is experimental.
    The agent is reliant on an experimental Node.js feature in order to register instrumentation.
    Breaking changes can occur until the Node.js API for [ES Module Loaders](https://nodejs.org/api/esm.html#loaders) is stable.
</Callout>

## Overview
* Node.js has support for two different module systems: CommonJS modules and ES Modules
* CommonJS == `require` and `module.exports`
* CommonJS was the original way to package code in Node.js
* ES Modules == `import` and `export`
* ES Modules is the standard way browsers and other JS runtimes manage packages
* Node.js added 
* Node.js used to only support CommonJS (require/module.exports) 

## Installing the Node.js Agent

## Configuring Your ES Module Application

### Relevant Links
https://nodejs.org/api/cli.html#--experimental-loadermodule
https://nodejs.org/api/esm.html#loaders
https://nodejs.org/api/documentation.html#stability-index
https://nodejs.org/api/packages.html#introduction