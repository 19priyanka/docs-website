---
title: Update the Java agent
tags:
  - Agents
  - Java agent
  - Installation
translate:
  - jp
metaDescription: 'How to update your APM Java agent, and notes on EOL support for early agent versions.'
redirects:
  - /docs/agents/java-agent/installation/update-java-agent
  - /docs/upgrading-java-agent
  - /docs/agents/java-agent/installation/upgrading-java-agent
  - /docs/agents/java-agent/installation/upgrade-java-agent
---

To take full advantage of New Relic's latest features, enhancements, and important security patches, we recommend you update your Java agent to the latest version. For additional information about specific agent updates, refer to the [Java agent release notes](/docs/release-notes/agent-release-notes/java-release-notes).

These update procedures describe how to replace some of the current contents of your [agent root directory](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent), which contains the New Relic Java agent (`newrelic.jar`), with newly downloaded contents from the New Relic UI.

## Update to latest version [#procedures]

To identify which version of the Java agent you're currently using, run `java -jar newrelic.jar -v`. Your Java agent version will be printed to your console.

Then, to update to the latest Java agent version:

1. Back up the **entire** [Java agent root directory](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent) to another location. Rename that directory to `NewRelic_Agent#.#.#`, where `#.#.#` is the agent version number.
2. [Download the agent.](/docs/release-notes/agent-release-notes/java-release-notes)
3. Unzip the new agent download file, then copy `newrelic-api.jar` and `newrelic.jar` into the original [Java agent root directory](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent).
4. Compare your old `newrelic.yml` with the newly downloaded `newrelic.yml` from the zip, and [update the file if needed](#diff).
5. Restart your Java dispatcher.

If you experience issues after the Java agent update, restore from the backed-up New Relic agent directory.

## Update agent config differences [#diff]

We add new settings to `newrelic.yml` as we release new versions of the agent. You can use `diff` or another diffing utility to see what's changed, and add the new config settings to your old file. You don't want to  If differences between the two versions are unrelated to your app's customizations, align the `newrelic.yml` you use moving forward with the latest updates to the default `newrelic.yml` from New Relic.

For example, if you `diff` the default `newrelic.yml` files for Java agent versions 3.29.0 and 3.30.0, the results printed to the console will be:

```
âžœ diff newrelic_3.29.0.yml newrelic_3.30.0.yml
254a255,265
> # Classes loaded by classloaders in this list will not be instrumented.
> # This is a useful optimization for runtimes which use classloaders to
> # load dynamic classes which the agent would not instrument.
> classloader_excludes:
> groovy.lang.GroovyClassLoader$InnerLoader,
> org.codehaus.groovy.runtime.callsite.CallSiteClassLoader,
> com.collaxa.cube.engine.deployment.BPELClassLoader,
> org.springframework.data.convert.ClassGeneratingEntityInstantiator$ObjectInstantiatorClassGenerator,
> org.mvel2.optimizers.impl.asm.ASMAccessorOptimizer$ContextClassLoader,
> gw.internal.gosu.compiler.SingleServingGosuClassLoader,
>
```
