---
title: "NerdGraph tutorial: Manage your synthetic monitors"
tags:
    - NerdGraph
    - Synthetic
metaDescription: Use NerdGraph to programatically manage your synthetic monitors, private locations, and secure credentials.
---

Our NerdGraph API allows you to automate creating, updating, or deleting your synthetic monitors.

If you've never used NerdGraph, read [Intro to NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) for a more thorough tutorial. If you want to use the UI instead, check out [Add and edit monitors](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/).

## Use queries to retrieve data [#query]

Queries make requests to fetch data. Check out our [NerdGraph entities API tutorial](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial/) to learn additional query capabilities available to your synthetic monitors. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="query-examples"
    title="Query monitors"
  >

  You query your synthetic monitors to get current status information about your data or details about the monitor configuration. Some query examples include: 

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            accountId
            monitorType
            tags {
              key
              values
            }
          }
        }
      }
    }
  }
}
``` 
  </Collapser>

  <Collapser
    className="freq-link"
    id="private-examples"
    title="Query private locations"
  >

  You're able to similarly query your private locations:

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
``` 

  </Collapser>

  <Collapser
    className="freq-link"
    id="credentials-example"
    title="Query secure credentials
"
  >

  Querying secure credentials lets you retrieve metadata only, but not the credential values values themselves:

```
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
      results {
        entities {
          ... on SecureCredentialEntityOutline {
            accountId
            guid
            name
            tags {
              key
              values
            }
            updatedAt
          }
        }
      }
    }
  }
}
```
  </Collapser>
</CollapserGroup>

## Create your synthetic monitors 

Below are some sample scripts to automate the creation of your synthetic monitors. Unlike with REST APIs, NerdGraph lets you programatically create [broken links](#create-broken-links), [step](#create-step), and [certificate check](create-certificate-check) monitors. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="create-ping"
    title="Create a ping monitor"
  >
  Ping monitors check that your application is running: 

```
  mutation {
    syntheticsCreateSimpleMonitor (
      accountId: <var>YOUR_ACCOUNT_ID</var> 
      monitor: {
        locations: {
          public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
          }, 
        name: <var>YOUR_MONITOR_NAME</var>, 
        period: <var>PERIOD</var>, 
        status: <var>STATUS</var>, 
        uri: <var>MONITORED_URI</var>, 
        advancedOptions: {
          customHeaders: {
            name: <var>HEADER_NAME</var>, 
            value: <var>HEADER_VALUE</var>
          }, 
          redirectIsFailure: <var>REDIRECT_IS_FAILURE</var>, 
          responseValidationText: <var>VALIDATION_TEXT</var>, 
          shouldBypassHeadRequest: <var>BYPASS_HEAD_REQUEST</var>, 
          useTlsValidation: <var>TLS_VALIDATION</var>
        }
      }
  ) {
      errors {
        description
        type
      }
    }
  }
```
</Collapser>
<Collapser
    className="freq-link"
    id="create-simple-browser"
    title="Create a simple browser monitor"
  >
Make some simple browser monitors for instances of Google Chrome that mimic customer visits:

```
  mutation {
    syntheticsCreateSimpleBrowserMonitor (
      accountId: <var>YOUR_ACCOUNT_ID</var>, 
      monitor: {
        browserType: <var>BROWSER_TYPE</var>, 
        browserVersion: <var>BROWSER_VERSION</var>, 
        locations: {
          public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
          }, 
        name: <var>YOUR_MONITOR_NAME</var>, 
        period: <var>PERIOD</var>, 
        scriptLanguage: <var>SCRIPT_LANGUAGE</var>, 
        status: <var>STATUS</var>, 
        uri: <var>MONITORED_URI</var>, 
        advancedOptions: {
          customHeaders: {
            name: <var>HEADER_NAME</var>, 
            value: <var>HEADER_VALUE</var>
          }, 
          enableScreenshotOnFailureAndScript: <var>ENABLE_SCREENSHOT</var>, 
          responseValidationText: <var>VALIDATION_TEXT</var>, 
          useTlsValidation: <var>TLS_VALIDATION</var>
        }
      ) {
      errors {
        description
        type
      }
    }
  }
```
</Collapser>

<Collapser
    className="freq-link"
    id="create-scripted-browser"
    title="Create a scripted browser"
  >

  [Scripted browser monitors](/docs/synthetics/synthetic-monitoring/scripting-monitors/introduction-scripted-browser-monitors) are more complex interactions with your pages and applications. They take specific actions to navigate your website and check for specific resources:
  
```
  mutation {
    syntheticsCreateScriptBrowserMonitor (
      accountId: <var>YOUR_ACCOUNT_ID</var>, 
      monitor: { 
        browserType: <var>BROWSER_TYPE</var>, 
        browserVersion: <var>BROWSER_VERSION</var>, 
        locations: {
          public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
          }, 
        name: <var>MONITOR_NAME</var>, 
        period: <var>PERIOD</var>, 
        script: <var>SCRIPT_CONTENT</var>, 
        scriptLanguage: <var>SCRIPT_LANGUAGE</var>, 
        status: <var>STATUS</var>, 
        advancedOptions: {
          enableScreenshotOnFailureAndScript: false
        }
      }
    ) {
      errors {
        description
        type
      }
    }
  }
```
</Collapser>

<Collapser
    className="freq-link"
    id="create-scripted-API"
    title="Create a scripted API monitor"
  >

[Scripted API monitors](/docs/synthetics/synthetic-monitoring/scripting-monitors/write-synthetic-api-tests) check your API endpoints.

```
  mutation {
    syntheticsCreateScriptApiMonitor (
      accountId: <var>YOUR_ACCOUNT_ID</var>, 
      monitor: {
        locations: {
          public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
          }, 
        name: <var>YOUR_MONITOR_NAME</var>, 
        period: <var>PERIOD</var>, 
        script: <var>SCRIPT_CONTENT</var>, 
        status: <var>STATUS</var>
      }
    ) {
      errors {
        description
        type
      }
    }
  }
```

  </Collapser>

  <Collapser
    className="freq-link"
    id="create-step"
    title="Create a step monitor"
  >
  Step monitors SOMETHING

  ```
  SOMETHING
  ```

  </Collapser>

  <Collapser
    className="freq-link"
    id="create-certificate-check"
    title="Create a certificate check monitor"
  >

Know when your SSL certificates expire by creating certificate check monitors that alert you before the certificates expire: 

```
  mutation {
    syntheticsCreateCertCheckMonitor (
      accountId: <var>YOUR_ACCOUNT_ID</var>, 
      monitor: {
        domain: <var>DOMAIN</var>, 
        locations: {
          public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
          },
        name: <var>YOUR_MONITOR_NAME</var>, 
        numberDaysToFailBeforeCertExpires: <var>DAYS_UNTIL_EXPIRATION</var>, 
        period: <var>PERIOD</var>, 
        status: <var>STATUS</var>
      }
    ) {
      errors {
        description
        type
      }
    }
  }
```

  </Collapser>

  <Collapser
    className="freq-link"
    id="create-broken-links"
    title="Create a broken links monitor"
  >

  Broken links monitors check the links on a webpage for failure. 

```
mutation {
  syntheticsCreateBrokenLinksMonitor (
    accountId: <var>YOUR_ACCOUNT_ID</var>, 
    monitor: {
      locations: {
        public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
        }, 
      name: <var>YOUR_MONITOR_NAME</var>, 
      period: <var>PERIOD</var>, 
      status: <var>STATUS</var>, 
      uri: <var>MONITOR_URI</var>, 
      tags: {
        key: <var>YOUR_TAG_NAME</var>, 
        values: <var>TAG_VALUE</var>
        }
      }
    ) {
      errors {
        description
        type
      }
  }
}

```

  </Collapser>
</CollapserGroup> 

## Update your synthetic monitors 

While you can't change the monitor type after creating it, you can update its settings:

<CollapserGroup>
  <Collapser
    className="freq-link"
    id=""
    title="Update a ping monitor"
  >

```
mutation {
  syntheticsUpdateSimpleMonitor (
    guid: <var>ENTITY_GUID</var>, 
    monitor: {
      locations: {
        public: [<var>LOCATION_1</var>, <var>LOCATION_2</var>]
      },  
      name: <var>YOUR_MONITOR_NAME</var>, 
      period: <var>PERIOD</var>, 
      status: <var>STATUS</var>, 
      uri: <var>MONITORED_URI</var>, 
      advancedOptions: {
        customHeaders: {
          name: <var>HEADER_NAME</var>, 
          value: <var>HEADER_VALUE</var>
        }, 
        redirectIsFailure: <var>REDIRECT_IS_FAILURE</var>, 
        responseValidationText: <var>VALIDATION_TEXT</var>, 
        shouldBypassHeadRequest: <var>BYPASS_HEAD_REQUEST</var>, 
        useTlsValidation: <var>TLS_VALIDATION</var>
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

  </Collapser>

  <Collapser
    className="freq-link"
    id="update-simple-browser"
    title="Update a simple browser monitor"
  >
```
SOMETHING
```
  </Collapser>

  <Collapser
    className="freq-link"
    id="update-scripted-browser"
    title="Update a scripted browser monitor"
  >
```
SOMETHING
```
  </Collapser>

  <Collapser
    className="freq-link"
    id="update-API-test"
    title="Update an API test monitor"
  >
```
SOMETHING
```
  </Collapser>

  <Collapser
    className="freq-link"
    id="update-step"
    title="Update a step monitor"
  >
```
SOMETHING
```
  </Collapser>

  <Collapser
    className="freq-link"
    id="update-certificate-check"
    title="Update a certificate check monitor"
  >
```
SOMETHING
```
  </Collapser>

  <Collapser
    className="freq-link"
    id="update-broken-links"
    title="Update a broken links monitor"
  >
```
SOMETHING
```
  </Collapser>
</CollapserGroup>

## Delete your synthetic monitors 

Sometimes a monitor doesn't serve your needs anymore. Use these scripts to delete your monitors: 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id=""
    title="Delete monitors"
  >

  ```
  mutation {
    syntheticsDeleteMonitor (
      guid: <var>ENTITY_GUID</var>
      ) {
      errors {
        description
      }
    }
  }
  ```
  </Collapser>
  <Collapser
    className="freq-link"
    id=""
    title="Delete scripted API monitors"
  >

  ```
  SOMETHING
  ```

  </Collapser>
</CollapserGroup>

## Manage your private locations

A [private location](/docs/synthetics/synthetic-monitoring/private-locations/priv[…]locations-overview-monitor-internal-sites-add-new-locations/) allows you to monitor applications behind your firewall. When you create a private location, you install and configure private minions to execute the monitors assigned to that private location. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="private-location"
    title="Create a private location"
  >

  ```
  mutation{
    syntheticsCreatePrivateLocation (
      accountId: <var>NR_ACCOUNT_ID</var>,
      name: "PrivateLocationName",
      description: "Optional description",
      verifiedScriptExecution: false
    ) {
      guid
      errors {
        description
        type
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="private-location"
    title="Update a private location"
  >
  
  ```
  mutation {
    syntheticsUpdatePrivateLocation (
      guid: <var>YOUR_ENTITY_GUID</var>,     
      description: "EnterYourDescription", 
      verifiedScriptExecution: true
    ) {
    description
    verifiedScriptExecution
    errors {
      description
      type
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="delete-private locations"
    title="Delete a private location"
  >

  ```
  mutation {
    syntheticsDeletePrivateLocation (
      guid: <var>YOUR_ENTITY_GUID</var>
      ) {
      errors {
        description
        type
      }
    }
  }
  ```
  </Collapser>
  <Collapser
    className="freq-link"
    id="purge-private-location"
    title="Purge a private location job queue"
  >

If you need to clear an unwieldy backlog of queued jobs, use this: 

  ```
  mutation {
    syntheticsPurgePrivateLocationQueue (
      guid: <var>YOUR_ENTITY_GUID</var>
      ) {
      errors {
        description
        type
      }
    }
  }
  ```
  </Collapser>
</CollapserGroup>

## Manage your secure credentials

You use [secure credentials](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests/) when storing, protecting, and centrally managing protected information used by your monitors, like passwords, API keys, or encoded certificates. Using NerdGraph allows you to programmatically change the values of your secure credentials if you need to reset any credentials for any reason.

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="secure-credential"
    title="Create a secure credential"
  >

  ```
  mutation {
    syntheticsCreateSecureCredential (
      accountId: <var>YOUR_ENTITY_GUID</var>, 
      description: "YourOptionalDescription", 
      key: <var>SECURE_CREDENTIAL_NAME</var>, 
      value: <var>SECURE_CREDENTIAL_VALUE</var> 
      ) {
      errors {
        description
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="update-secure"
    title="Update a secure credential"
  >

  ```
  mutation {
    syntheticsUpdateSecureCredential (
      accountId: <var>YOUR_ACCOUNT_ID</var>, 
      description: "YourOptionalDescription", 
      key: <var>SECURE_CREDENTIAL_NAME</var>, 
      value: <var>SECURE_CREDENTIAL_VALUE</var>) {
      createdAt
      lastUpdate
      errors {
        description
      }
    }
  }
  ```

  </Collapser>
  <Collapser
    className="freq-link"
    id="secure-credential"
    title="Delete a secure credential"
  >

  ```
  mutation {
    syntheticsDeleteSecureCredential (
      accountId: <var>YOUR_ACCOUNT_ID</var>, 
      key: <var>SECURE_CREDENTIAL_NAME</var>
      ) {
      errors {
        description
      }
    }
  }
  ```
  </Collapser>
</CollapserGroup>

## Understand fields in NerdGraph Explorer [#fields]

While you can view field definitions in NerdGraph's UI, the `LOCATION`, `PERIOD`, and `TAGS` fields need some explanation. 

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="location-attribute"
    title="Define location attribute"
  >
To identify a private location in your scripts, use the private location's entity GUID. To verify that a script executes successfully, also include the vsePassword attribute. For example: 

```
locations: {
  private: {
    guid: <var>LOCATION_ENTITY_GUID</var>, 
    vsePassword: <var>YOUR_VSE_PASSWORD</var>
  }
}
```

Public locations use the location identifier without AWS_, for example: 

```
locations: {
  public: ["US_EAST_2", "US_WEST_1"]
}
``` 

  </Collapser>

  <Collapser
    className="freq-link"
    id="period-attribute"
    title="Define period attribute"
  >
The `PERIOD` attribute, on the other hand, defines a time interval for your monitors to execute. To define the interval, use this forms:

* `EVERY_MINUTE` for every minute. 
* `EVERY_N_MINUTES`, where 'N' is minutes. For example, `EVERY_10_MINUTES`.
* `EVERY_HOUR` for every hour.
* `EVERY_N_HOURS`, where 'N' is hours. For example, `EVERY_12_HOURS`. 
* `EVERY_DAY` for once a day. 

  </Collapser>
  <Collapser
    className="freq-link"
    id="tags-attribute"
    title="Define tags attribute"
  >
Tags are optional. You can add tags during monitor creation, or later using tagging calls in NerdGraph or the UI. Multiple tags can be added in a single mutation call using an array that contains keys and values.

  </Collapser>

  <Collapser
    className="freq-link"
    id="optional-fields"
    title="Understand optional fields"
  >
Some fields are for more advanced configurations. These are optional. 

For [ping monitors](#create-ping), these include:

* <var>HEADER_NAME</var>: Your custom header names that appear on the request.
* <var>HEADER_VALUE</var>: The custom header value on the request. 
* <var>REDIRECT_IS_FAILURE</var>: Your monitor reports a failure if it's redirected. 
* <var>VALIDATION_TEXT</var>: If this text is not included in your monitor's response, it returns a failure. 
* <var>TLS_VALIDATION</var>: Verifies the [validity](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#simple) of the SSL certificate chain. 

For [simple browser monitors](#create-simple-browser):

* <var>BROWSER_TYPE</var>: The browser used by your monitor. "CHROME" is the only accepted value.
* <var>BROWSER_VERSION</var>: The browser version used by your monitor. "100" is the only accepted value. 

For [scripted browser monitors](#create-scripted-browser)

For [scripted API monitors](#scripted-API):

* <var>SCRIPT_CONTENT</var>: The actual contents of the script. This should **not** be based64 encoded. 

For [certificate check monitors](#create-certificate-check):

* <var>DAYS_UNTIL_EXPIRATION</var>: Notifies you when you need to update your certificate. For example, if you wanted a notification 30 days before the certificate expires, you would input 30. 

  </Collapser>
</CollapserGroup>