---
title: Use $har to get custom timing details
tags:
    - Synthetics
    - Synthetic monitoring
    - Scripting monitors
    - Scripted API monitor
metaDescription: $har is a set of tools to 
redirects:
---

The New Relic synthetics runtime environment provides out of the box timing details for each monitor type, including the usage of the $http object in scripted API monitors. While the $http object enables SOAP, REST, and GraphQL API testing, there are many other Node.JS modules available for use in scripted API monitors that do not produce out of the box timing details.

These additional modules include:
Default Node.js modules
Additional importable Node.js modules
Benefits
Custom timers can be combined with usage of $util.insights.set to time and trend actions across monitor executions, but the end result is still a result with no timing details in the UI and the requirement to use queries and dashboards to extract these values.

Using the $har custom timing library provides an experience that better mirrors default details including:
Easy custom timing for other Node.js modules
Timers are included in result waterfall views
SyntheticRequest events are created for each timer
Usage
Timing resources can be created by using the addResource() or getResource() methods and timers can be started and stopped using startTimer() and stopTimer().

k<CollapserGroup>
  <Collapser
    className="freq-link"
    id=""
    title="Create a resource named Test Timer"
  >
```
const testTimer = $har.addResource('Test Timer');
testTimer.startTimer();
await sleep(100);
testTimer.endTimer();

```
  </Collapser>
</CollapserGroup>


Simple Example 2: (collapser?)
Resources can also be created using the getResource method.
$har.getResource('Test Timer').startTimer();
await sleep(100);
$har.getResource('Test Timer').endTimer();

Additional timer attributes are available to extend the details collected in the timer and visible in the result waterfall view. These include:
blocked
dns
connect
ssl
send
wait
receive

DNS Attribute Example: (collapser?)
This simple DNS monitor includes a DNS attribute timer:
const { Resolver } = require('dns').promises;
const myResolver = new Resolver();

myResolver.setServers(['1.1.1.1']);

const dnsResource = $har.addResource('DNS Lookup');
dnsResource.startTimer();
dnsResource.dns().startTimer();

let addresses = await myResolver.resolve4('newrelic.com')
dnsResource.dns().endTimer();
dnsResource.endTimer();
console.log(addresses);

