---
subject: Java agent
releaseDate: '2021-01-27'
version: 6.4.0
downloadLink: 'http://download.newrelic.com/newrelic/java-agent/newrelic-agent/6.4.0/'
---

### There is an issue with the agent that could lead to spans not being sent to Infinite Tracing. Please use 6.4.1 instead.

### New Features and Improvements:

* Spring Webflux/Netty Reactor instrumentation improvements for enhanced tracing across asynchronous thread hops.
* The agent will now utilize a backoff sequence on connection retries to Infinite Tracing. ([#180](https://github.com/newrelic/newrelic-java-agent/pull/180))
* New distributed tracing APIs have been added to better support general use cases for propagating distributed tracing headers. In particular the new APIs provide enhanced support for [W3C Trace Context](https://www.w3.org/TR/trace-context/) but are flexible enough to support other header protocols that may be supported by the agent in the future. Previous distributed tracing APIs have been deprecated and are subject to removal in a future agent release. See [documentation here](https://docs.newrelic.com/docs/agents/java-agent/api-guides/guide-using-java-agent-api#trace-calls).
  * [`Transaction.insertDistributedTraceHeaders(Headers)`](https://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/Transaction.html#insertDistributedTraceHeaders(com.newrelic.api.agent.Headers)) is used to create and insert distributed tracing headers (both newrelic and W3C Trace Context) into a `Headers` data structure.
  * [`Transaction.acceptDistributedTraceHeaders(TransportType, Headers)`](https://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/Transaction.html#acceptDistributedTraceHeaders(com.newrelic.api.agent.TransportType,com.newrelic.api.agent.Headers)) is used to accept the distributed tracing headers sent from the calling service and link these services together in a distributed trace.

### Fixes:

* Updated the Java agent’s snakeyaml dependency to 1.27.
* In some environments the jar collector service could lead to high CPU utilization at application startup. The agent now provides a configurable rate limiter, with a reasonable default, for processing jars detected in the application’s environment. See [documentation here](https://docs.newrelic.com/docs/agents/java-agent/configuration/java-agent-configuration-config-file#jar-collector).

### Support statement:

* New Relic recommends that you upgrade the agent regularly and at a minimum every 3 months. As of this release, the oldest supported version is [4.10.0](https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes/java-agent-4100).
