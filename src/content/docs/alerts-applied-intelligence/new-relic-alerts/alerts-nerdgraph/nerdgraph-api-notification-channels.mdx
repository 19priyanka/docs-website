---
title: "NerdGraph tutorial: Notification channels"
tags:
  - Alerts and Applied Intelligence
  - New Relic Alerts
  - Alerts and Nerdgraph
metaDescription: 'Read about how you can list, create, update, and delete notification channels using the NerdGraph API.'
---

You can manage your notification channels using our GraphQL NerdGraph API. Here are some queries and mutations you can develop in our [NerdGraph API explorer](https://api.newrelic.com/graphiql).

<Callout variant="tip">
  See the [NerdGraph introduction](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph) for help getting started with NerdGraph API explorer.
</Callout>

## Queries to get channels [#get-channels]

Use the following queries to set the type of notification channel.

```
interface NotificationChannel {
  id: ID!
  name: String!
  type: NotificationChannelType!
}
  
enum NotificationChannelType {
  EMAIL
  OPSGENIE
  PAGERDUTY
  SLACK
  VICTOROPS
  WEBHOOK
  XMATTERS
}
  
type EmailNotificationChannel implements NotificationChannel {
  # + id + name + type
  config: EmailNotificationChannelConfig!
}
  
type EmailNotificationChannelConfig {
  recipients: [String!]!
  includeJSON: Boolean!
}
  
type OpsGenieNotificationChannel implements NotificationChannel {
  # + id + name + type
  config: OpsGenieNotificationChannelConfig!
} 
  
type OpsGenieNotificationChannelConfig {
  apiKey: SecureValue!
  teams: [String!]
  tags: [String!]
  recipients: [String!] #emails
  dataCenterRegion: OpsGenieDataCenterRegion!
}
  
enum OpsGenieDataCenterRegion {
  US
  EU
}
  
type PagerDutyNotificationChannel implements NotificationChannel {
  # + id + name + type
  config: PagerDutyNotificationChannelConfig!
}
  
type PagerDutyNotificationChannelConfig {
  apiKey: SecureValue!
}
  
type SlackNotificationChannel implements NotificationChannel {
  # + id + name + type
  config: SlackNotificationChannelConfig!
}
  
type SlackNotificationChannelConfig {
  url: SecureValue!
  teamChannel: String
}
  
type VictorOpsNotificationChannel implements NotificationChannel {
  # + id + name + type
  config: VictorOpsNotificationChannelConfig!
}
  
type VictorOpsNotificationChannelConfig {
  key: SecureValue!
  routeKey: String!
}
  
type WebhookNotificationChannel implements NotificationChannel {
  # + id + name + type
  config: WebhookNotificationChannelConfig!
}
  
type WebhookNotificationChannelConfig {
  baseUrl: String!
  basicAuth: WebhookBasicAuth
  customHttpHeaders: [WebhookCustomHeader!]
  customPayloadType: WebhookCustomPayloadType
  customPayloadBody: String
}
  
type WebhookBasicAuth {
  username: String!
  password: SecureValue!
}
  
type WebhookCustomHeader {
  name: String!
  value: SecureValue!
}
  
enum WebhookCustomPayloadType {
  JSON
  FORM
}
  
type XMattersNotificationChannel implements NotificationChannel {
  # + id + name + type
  config: XMattersNotificationChannelConfig!
}
  
type XMattersNotificationChannelConfig {
  integrationUrl: SecureValue!
}

```
### Examples [#get-channel-examples]

<CollapserGroup>
  <Collapser
    id="given-account-id"
    title="For a given account Id"
  >
    ```
    {
      actor {
        account(id: $accountId) {
          alerts {
            notificationChannels(cursor: $cursor) {
              # selection set here
    } } } } }
    ```
    Type for results:

    ```
    type NotificationChannelsResultSet {
      nextCursor: String
      notificationChannels: [NotificationChannel!]!
      totalCount: Int!
    }
    ```
  </Collapser>
  
  <Collapser
    id="given-specific-channel"
    title="For a specific individual channel, by Id"
  >
    ```
    {
      actor {
        account(id: $accountId) {
          alerts {
            notificationChannel(id: $channelId) {
              # selection set here
              ...on EmailNotificationChannel {}
              # etc. w/ the type-specific fragments
    } } } } }
    ```
  </Collapser>

</CollapserGroup>

## Mutations [#channel-mutations]

### Notification channels input types [#input-types]

```
input EmailNotificationChannelCreateInput {
  name: String!
  recipients: [String!]!
  includeJSON: Boolean!
}
  input EmailNotificationChannelUpdateInput {
  name: String
  recipients: [String!]
  includeJSON: Boolean
}
  input OpsGenieNotificationChannelCreateInput {
  name: String!
  apiKey: SecureValue!
  teams: [String!]
  tags: [String!]
  recipients: [String!]
  dataCenterRegion: OpsGenieDataCenterRegion!
}
  input OpsGenieNotificationChannelUpdateInput {
  name: String
  apiKey: SecureValue
  teams: [String!]
  tags: [String!]
  recipients: [String!]
  dataCenterRegion: OpsGenieDataCenterRegion
}
  input PagerDutyNotificationChannelCreateInput {
  name: String!
  apiKey: SecureValue!
}
  input PagerDutyNotificationChannelUpdateInput {
  name: String
  apiKey: SecureValue
}
  input SlackNotificationChannelCreateInput {
  name: String!
  url: SecureValue!
  teamChannel: String
}
  input SlackNotificationChannelUpdateInput {
  name: String
  url: SecureValue
  teamChannel: String
}
  input VictorOpsNotificationChannelCreateInput {
  name: String!
  key: String!
  routeKey: String!
}
  input VictorOpsNotificationChannelUpdateInput {
  name: String
  key: String
  routeKey: String
}
  input WebHookNotificationChannelCreateInput {
  name: String!
  baseUrl: String!
  basicAuth: WebhookBasicAuthInput
  customHttpHeaders: [WebhookCustomHeaderInput!]
  customPayloadType: WebhookCustomPayloadType
  customPayloadBody: String
}
  input WebHookNotificationChannelUpdateInput {
  name: String
  baseUrl: String
  basicAuth: WebhookBasicAuthInput
  customHttpHeaders: [WebhookCustomHeaderInput!]
  customPayloadType: WebhookCustomPayloadType
  customPayloadBody: String
}
  input WebhookBasicAuthInput {
  username: String!
  password: SecretValue!
}
  input WebhookCustomHeaderInput {
  name: String!
  value: SecureValue!
}
  input XMattersNotificationChannelCreateInput {
  name: String!
  policyIds: [Int!]
  integrationUrl: SecureValue!
}
  input XMattersNotificationChannelUpdateInput {
  name: String
  policyIds: [Int!]
  integrationUrl: SecureValue
}
```
### Create a notification channel [#channel-create]

To create a notification channel for a given account Id:

```
mutation {
  alertsEmailNotificationChannelCreate(
    accountId: $accountId,
    notificationChannel: {
      name: $name
      recipients: [$recipientList]
      includeJSON: $include
    }
  ) {
    # selection set here
  }
}
```
For each supported type:
* alertsOpsGenieNotificationChannelCreate
* alertsPagerDutyNotificationChannelCreate
* alertsSlackNotificationChannelCreate
* alertsVictorOpsNotificationChannelCreate
* alertsWebHookNotificationChannelCreate
* alertsXMattersNotificationChannelCreate

### Update a notification channel [#channel-update]

To update a notification channel for a given account Id and channel Id:

```
mutation {
  alertsEmailNotificationChannelUpdate(
    accountId: $accountId,
    id: $channelId,
    notificationChannel: {
      name: $name
      recipients: [$recipientList]
      includeJSON: $include
    }
  ) {
    # selection set here
  }
}
```

For each supported type:
* alertsOpsGenieNotificationChannelCreate
* alertsPagerDutyNotificationChannelCreate
* alertsSlackNotificationChannelCreate
* alertsVictorOpsNotificationChannelCreate
* alertsWebHookNotificationChannelCreate
* alertsXMattersNotificationChannelCreate

### Delete a notification channel [#channel-delete]

To delete a notification channel for a given account Id. This deletes the entire notification channel and transparently dissociates it from all policies as a side effect.

```
mutation {
  alertsNotificationChannelDelete(
    accountId: $accountId,
    id: $channelId
  ) {
    # selection set here
  }
}
```

### Associate channels to a policy [#channel-associate]

```
mutation {
  alertsNotificationChannelsAddToPolicy(accountId: $accountId,
    notificationChannels: $channelIds,
    id: $policyId
  ) {
    id # policyId
    notificationChannels
  }
}
```
### Dissociate a channel from a policy [#channel-dissociate]

This leaves the channel itself intact, but removes it from the specified policy.

```
Leaves the channel itself intact but removes it from the specified policy
mutation {
  alertsNotificationChannelRemoveFromPolicy(accountId: $accountId,
    notificationChannel: $channelId,
    id: $policyId
  ) {
    id # policyId
    notificationChannels
  }
}
```
