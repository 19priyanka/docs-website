---
title: 'Java: Configure logs in context'
tags:
  - Logs
  - Enable log management in New Relic
  - Configure logs in context
metaDescription: For apps monitored by Java, learn how to link log data with related data across the rest of the New Relic platform.
---

Logs in context for the Java agent connects your logs and APM data in New Relic. Bringing all of this data together in a single tool helps you quickly get to the root cause of an issue and find the log lines that you need to identify and resolve a problem.

## Set up your Java app [#enable-logs-java]

To enable logs in context for APM apps monitored by Java:

1. Make sure you have already [set up logging in New Relic](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/enable-log-management-new-relic/). This includes configuring a supported log forwarder that collects your application logs and extends the metadata that is forwarded to New Relic.
2. [Install](/docs/agents/java-agent/installation/install-java-agent/) or [update](/docs/agents/java-agent/installation/update-java-agent/) to the latest Java agent version, and [enable distributed tracing](/docs/distributed-tracing/enable-configure/quick-start/). Use [Java agent version 5.6.0 or higher](/docs/release-notes/agent-release-notes/java-release-notes/) for logs in context.
3. Configure logs in context for Java to enrich your log data, using any of the following extensions as applicable. If you use Spring or Spring Boot and aren't sure which extension you need, see our [Spring](#spring) documentation.

<CollapserGroup>
  <Collapser
    id="java-dropwizard"
    title="Dropwizard 1.3 or higher"
  >



  We offer a [Dropwizard](https://dropwizard.readthedocs.io/en/release-1.3.x/manual/core.html#logging) extension for logs in context with the Java agent. To get started, review the [code](https://github.com/newrelic/java-log-extensions/tree/main/dropwizard) and an [example application](https://github.com/newrelic/java-log-extensions/tree/main/examples/dropwizard-app) on GitHub.
  
  To configure logs in context for your Java app with the DropWizard extension:
  
  1. Make sure you have the [Dropwizard 1.3 or higher](https://dropwizard.readthedocs.io/en/release-1.3.x/manual/core.html#logging) package installed and working on your application. Use the original Dropwizard appenders and logging factory installed and working on the application.
  
  2. Make sure you have the New Relic Java agent version 5.6.0 or higher installed on your application, and that you have enabled the [JVM argument `-javaagent`](/docs/agents/java-agent/installation/include-java-agent-jvm-argument).

  3. Update your project's dependencies to include the Dropwizard 1.3 extension as applicable:

  **Gradle:** Add the following to your `build.gradle` file:

  ```
  dependencies {
      compile("com.newrelic.logging:dropwizard:2.0")
      }
  ```
  
  **Maven:** Add the following to your `pom.xml` file:

  ```
  <dependencies>
      <dependency>
          <groupId>com.newrelic.logging</groupId>
          <artifactId>dropwizard</artifactId>
          <version>2.0</version>
      </dependency>
  </dependencies>
  ```
  4. Update your Dropwizard `.yaml` configuration file with a `newrelic-json` layout, replacing the currently used `type: console` or `type: file` with either `type: newrelic-console` or `type: newrelic-file` as appropriate. For example:

  ```
  logging:
    appenders:
      - <var>type: newrelic-console</var>
        # Add the two lines below if you don't have a layout specified on the appender.
        # If you have a layout, remove all parameters to the layout and set the type.
        layout:
          <var>type: newrelic-json</var>
  ```
  
  The New Relic Dropwizard extension also supports a `log-format` layout type that uses the standard Dropwizard logging. For testing purposes, you can change the type of the layout with a one-line change:

  ```
  logging:
    appenders:
      - type: newrelic-file
        # This format will be ignored by the newrelic-json layout, but used by the log-format layout.
        logFormat: "%date{ISO8601} %c %-5p: %m trace.id=%mdc{trace.id} span.id=%mdc{span.id}%n"
        layout:
          # type: newrelic-json
          type: log-format
  ```

  </Collapser>
  
  <Collapser
    id="java-util-logging"
    title="java.util.logging"
  >

text

  </Collapser>

  <Collapser
    id="java-adding-classpath"
    title="java.util.logging classpath additions"
  >

text

  </Collapser>

  <Collapser
    id="java-log4j-1x"
    title="Log4j 1.x"
  >

text

  </Collapser>

  <Collapser
    id="java-log4j-2x"
    title="Log4j 2.x"
  >

text

  </Collapser>

  <Collapser
    id="java-logback"
    title="Logback version 1.2.0 or higher"
  >

text

  </Collapser>

 <Collapser
    id="spring"
    title="Spring and Springboot"
  >

text

  </Collapser>

</CollapserGroup>

## View logs in UI [#test-view]

To verify that you have configured the log appender correctly, run your application, then check your [logs data in New Relic One](/docs/logs/log-management/ui-data/use-logs-ui/) using the query operator `has:span.id has:trace.id`.

If everything is configured correctly and your data is being forwarded to New Relic with the enriched metadata, your logs should now be emitted as JSON and contain `trace.id` and `span.id` fields. If you don't see log data in the UI, follow the [troubleshooting procedures](/docs/logs/log-management/troubleshooting/no-log-data-appears-ui/).

## What's next? [#what-next]

After you set up APM logs in context, make the most of your logging data:

* Explore the logging data across your platform with our [Logs UI](/docs/logs/log-management/ui-data/use-logs-ui/).
* See your logs in context of your app's performance in the [APM UI](/docs/logs/log-management/ui-data/use-logs-ui/#links). Troubleshoot [errors](/docs/apm/apm-ui-pages/error-analytics/errors-page-find-fix-verify-problems/) with [distributed tracing](/docs/apm/distributed-tracing/ui-data/understand-use-distributed-tracing-data), stack traces, application logs, and more.
* Get deeper visibility into both your application and your platform performance data by forwarding your logs with our [infrastructure monitoring agent](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/forward-your-logs-using-infrastructure-agent/). Review your [infrastructure logs](/docs/logs/log-management/ui-data/use-logs-ui/#links) in the UI.
* Set up [alerts](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-alert-conditions/).
* [Query your data](/docs/query-your-data/explore-query-data/get-started/introduction-querying-new-relic-data/) and [create dashboards](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards/).
