---
title: New Relic NerdGraphの概要
contentType: page
template: basicDoc
topics:
  - APIs
  - NerdGraph
  - Get started
---

NerdGraphはNew RelicのGraphQL APIであり、効率的で柔軟なクエリ言語で、フェッチの過不足なしに、必要なデータだけをリクエストできます。一般的なREST APIであれば複数のURLからロードする必要があるものの、NerdGraphコールは単一のリクエストですべてのデータを取得できます。また、NerdGraphは、APIを経時的に進化させて、強力な開発者ツールとなります。

<Callout variant="tip">
  お使いのアカウントがEUデータセンターでデータをホストする場合は、適切な[EUリージョンアカウント向けAPIエンドポイント](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints)を使用していることを確認してください。
</Callout>

## NerdGraph GraphiQLエクスプローラーを使用 [#explorer]

NerdGraphには、スキーマを詳しく調べ定義を検索するためのGraphiQLエクスプローラーが含まれます。エクスプローラーを使用するには：

1. [有効なNew Relic APIキー](#authentication)を必ず用意しておきます。
2. [api.newrelic.com/graphiql](https://api.newrelic.com/graphiql)へ移動します。

<Callout variant="tip">
  [EUデータセンター](/docs/using-new-relic/welcome-new-relic/get-started/our-eu-us-region-data-centers)のアカウントにアクセスするには、[api.eu.newrelic.com/graphql](https://api.eu.newrelic.com/graphql).を使用してください
</Callout>

## 認証 [#authentication]

NerdGraph GraphiQLエクスプローラーを開始するには、New Relic[パーソナルAPIキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys)が必要です。まだキーがない場合：

* [NerdGraph GraphiQLエクスプローラー](https://api.newrelic.com/graphiql)で新規のAPIキーを生成します。

  または
* [New Relicアカウント設定](/docs/apis/getting-started/intro-apis/understand-new-relic-api-keys#user-api-key)から、新たなAPIキーを作成します。

## NerdGraphエンドポイント [#endpoint]

NerdGraph には、単一のエンドポイントがあります:

```
https://api.newrelic.com/graphql
```

<Callout variant="tip">
  [EUデータセンター](/docs/using-new-relic/welcome-new-relic/get-started/our-eu-us-region-data-centers)のアカウントにアクセスするには、`https://api.eu.newrelic.com/graphql`を使用してください
</Callout>

エンドポイントにアクセスするには、次のcURLコマンドを使用します：

```
curl -X POST https://api.newrelic.com/graphql \
-H 'Content-Type: application/json' \
-H 'API-Key: YOUR_API_KEY' \
-d '{ "query":  "{ requestContext { userId apiKey } }" } '
```

[NerdGraphエクスプローラー](https://api.newrelic.com/graphiql)を使用して、エンドポイントにアクセスすることもできます。

## NerdGraphの例 [#tutorials]

NerdGraphを使用して、次のことを行えます:

<Table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        NerdGraph GraphiQLエクスプローラー
      </th>

      <th>
        例
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        アカウントに関連するすべての[エンティティ](/docs/new-relic-one/use-new-relic-one/core-concepts/what-entity-new-relic)をクエリする。
      </td>

      <td>
        [エンティティチュートリアル](/docs/apis/graphql-api/tutorials/use-new-relic-graphql-api-query-entities)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        御社のアカウントに関連する[ワークロード](/docs/new-relic-one/use-new-relic-one/core-concepts/new-relic-one-workloads-isolate-resolve-incidents-faster)のクエリと作成、更新を行います。
      </td>

      <td>
        [ワークロードのチュートリアル](/docs/nerdgraph-workloads-tutorials)をご覧ください。
      </td>
    </tr>

    <tr>
      <td>
        [タグ](/docs/new-relic-one/use-new-relic-one/core-concepts/tagging-use-tags-organize-group-what-you-monitor)を作成、管理し、エンティティに追加する。
      </td>

      <td>
        詳細と例については[タグ作成チュートリアル](/docs/apis/graphql-api/tutorials/graphql-tagging-api-tutorial)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        ディストリビューティッド（分散）トレーシングデータのクエリを行う。
      </td>

      <td>
        [トレースデータのチュートリアル](/docs/apis/graphql-api/tutorials/query-distributed-trace-data-using-graphql-api)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        [New Relic Oneアプリ](https://developer.newrelic.com/)を構築する際にデータをフェッチする。
      </td>

      <td>
        [New Relic Oneのデータクエリおよびミューテーション](https://developer.newrelic.com/build-tools/new-relic-one-applications/query-and-store-data)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        サービスとのアップストリームとダウンストリームの関係を理解する。
      </td>

      <td>
        [関係チュートリアル](/docs/apis/graphql-api/tutorials/graphql-relationships-api-tutorial)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        New Relic Infrastructureクラウドインテグレーションを設定する。
      </td>

      <td>
        [クラウドインテグレーションの例](/docs/cloud-integration-new-relic-graphql-api-examples)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        NRQLにより[New Relic](/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights)で[イベントデータ](/docs/using-new-relic/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data#event-data)と[カスタムイベントデータ](/docs/insights/insights-data-sources/custom-data/send-custom-data-insights)をクエリする。
      </td>

      <td>
        [NerdGraph GraphiQLおよびNRQLチュートリアル](/docs/use-new-relic-graphql-query-data-nrql)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        NerdGraphについてのビデオチュートリアルを見る。
      </td>

      <td>
        New Relic University チュートリアル [New Relic NerdGraphの説明](https://newrelic.wistia.com/medias/h9qfum9nh0)にアクセスします。または、完全なオンラインコースの[New Relic API](https://learn.newrelic.com/new-relic-apis)にアクセスしてください。
      </td>
    </tr>
  </tbody>
</Table>

## NerdGraphテクノロジー [#terminology]

New Relic GraphQLサーバーは、NerdGraphのグラフ構造を明示的に定義します。次のキーワードは、すべてのGraphQLサーバーに共通しています。このキーワードを使用して、独自のクエリを構築し理解に役立ててください。さらに、以下の手順に従います。

* New Relicで監視するすべてのものにNerdGraphがどのように一元的にアクセスするかを理解するには、[NerdGraphエンティティ](https://docs.newrelic.co.jp/docs/use-new-relic-graphql-api-query-entities)を参照してください。
* スキーマ定義を理解するには：[NerdGraph GraphiQL エクスプローラー](https://api.newrelic.com/graphiql)から、**Docs**を選択します。

<Table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        用語
      </th>

      <th>
        定義
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        クエリ
      </td>

      <td>
        [クエリ](https://graphql.org/learn/queries/)とは、追加のアクションなしにデータのみをフェッチするための、基本的なリクエストです。NerdGraph GraphiQLエクスプローラーでのクエリは静的ではありません。つまり、ニーズに応じて、求めるデータの量を加減することができます。各クエリについて、[スキーマ](https://graphql.org/learn/schema/)でサポートされている限り、どのデータを取得するかを厳密に指定できます。
      </td>
    </tr>

    <tr>
      <td>
        ミューテーション
      </td>

      <td>
        [ミューテーション](https://graphql.org/learn/queries/#mutations)とは、データの作成やサーバーでのデータ更新など、アクションを追加するためのリクエストです。ミューテーションでは、キーワード`mutation`と、ミューテーションの`name`が必要です。
      </td>
    </tr>

    <tr>
      <td>
        種類
      </td>

      <td>
        Data in GraphQLはタイプにまとめられます。タイプは、[スカラー](https://graphql.org/learn/schema/#scalar-types)（文字列や数字、booleanなど）またはオブジェクトタイプとなります。

        [オブジェクトタイプ](https://graphql.org/learn/schema/#object-types-and-fields)は、一連のフィールドで構成されるカスタムタイプです。たとえば、`User`と呼ばれるオブジェクトタイプは、システムのユーザーを表します。
      </td>
    </tr>

    <tr>
      <td>
        フィールド
      </td>

      <td>
        [フィールド](https://graphql.org/learn/schema/#object-types-and-fields)は、クエリを行えるオブジェクトタイプについての一片の情報を表します。フィールドとしては、スカラーやリスト、オブジェクトがあります。たとえば、`User`オブジェクトは、`name`と呼ばれる文字列フィールドを有することができます。
      </td>
    </tr>

    <tr>
      <td>
        インタフェース
      </td>

      <td>
        [インタフェース](https://graphql.org/learn/schema/#interfaces)とは、その他のオブジェクトタイプが`implement`可能な一連の一般的なフィールドを表す抽象型です。
      </td>
    </tr>
  </tbody>
</Table>

## エクスプローラーを使用してクエリを行う [#make-query]

[NerdGraph GraphiQL エクスプローラー](https://api.newrelic.com/graphiql)を使用して、クエリを行うことができます。エクスプローラーは、自動完了およびクエリ検証を含む、組み込み型のスキーマ定義と機能を備えています。

GraphQLで、New Relicのデータのグラフ構成で特定の情報を尋ねます。グラフのノードに従い、希望するデータそのもののクエリを行えます。

新規フィールドがシームレスに追加され、古いフィールドには非推奨として印が付けられ、ドキュメントから削除され、最終的にはそのフィールドを円満にシャットダウンできます。

<CollapserGroup>
  <Collapser
    id="example-account-user"
    title="New Relicユーザーがアクセスできるアカウントのクエリを行う"
  >
    `actor`（New Relicの正規ユーザー）がアクセスできるアカウント名のクエリを行えます：

    ```
    query {
       actor {
          account(id: YOUR_ACCOUNT_ID) {
             name
          }
       }
    }
    ```

    回答では、リクエストで定義したクエリ構成が反映され、お望みの特定のデータが簡単に求められます。

    ```
    {
      "data": {
          "actor": {
             "account": {
                "name": "Data Nerd"
             }
          }
       }
    }
    ```
  </Collapser>

  <Collapser
    id="example-multiple-requests"
    title="ユーザーとアカウント、NRQLを1つのNerdGraph GraphiQLリクエストでクエリ"
  >
    グラフ構成には、クエリが複雑になった場合の機能が示されています。たとえば、ユーザー情報やアカウント情報のクエリを行い、NRQLクエリを1回のリクエストで行えます。REST APIを使用すると、3つの異なるリクエストが、3つの異なるエンドポイントとなります。

    ```
    query {
       actor {
          account(id: YOUR_ACCOUNT_ID) {
             name
             nrql(query: "SELECT * FROM Transaction") {
                results
             }
          }
          user {
             name
             id
          }
       }
    }
    ```
  </Collapser>
</CollapserGroup>

## その他のヘルプ [#more_help]

さらに支援が必要な場合は、これらのサポートと学習リソースを確認してください：

* [Explorers Hub](https://discuss.newrelic.com/)を参照して、コミュニティから支援を受け、ディスカッションに参加してください。
* [当社のサイトで回答を見つけ、サポートポータルの使用方法について学びます](/docs/using-new-relic/welcome-new-relic/get-started/find-help-use-support-portal)。
* Linux、Windows、およびmacOSのトラブルシューティングツールである[New Relic Diagnosticsを実行します](/docs/using-new-relic/cross-product-functions/troubleshooting/new-relic-diagnostics)。
* New Relicの[データセキュリティ](/docs/security)と[ライセンス](/docs/licenses)ドキュメントを見直してください。
