---
title: JavaScriptエラーページ：エラーの検知と分析
tags:
  - Browser
  - Browser monitoring
  - Browser Pro features
---

Browser Monitoringの**JS Error** UIページでは、JavaScriptエラーがどこで発生しているのかを示し、根本原因の特定に役立つツールを提供します。また、JSエラーデータに関して問い合わせて[クエリビルダー](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder)でダッシュボードを作成するか、Browser APIを利用して処理済みエラーをモニターできます。

## JavaScriptエラーを表示する [#find]

JavaScriptエラーを検証するには：

1. **[one.newrelic.com](https://one.newrelic.com/browser) > Browser >（アプリケーションを選択) > JSエラー**に進みます。
2. [UIで利用可能なオプション](#ui-features)を利用して、何がエラーの原因となっているかを検証します。
3. オプション：UIで[イベントログ](#event-log)もしくは[スタックトレースを見直します](#stack-trace)。
4. オプション：[JSエラーに関して問い合わせてダッシュボードを作成](#insights)するか、[APIを使用](#api-logs)してエラーをモニターもしくはログします。

UIで利用可能なオプションには、以下が含まれます：

<Table>
  <thead>
    <tr>
      <th style={{ width: "220px" }}>
        以下を行う場合...
      </th>

      <th>
        実行する操作
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        長いエラーリストを検索する
      </td>

      <td>
        **Search** <Icon name="fe-search"/>
        ボックスを使用することで、キーワード、URL等でエラーをすぐに見つけて修正できます。
      </td>
    </tr>

    <tr>
      <td>
        [attributes](/docs/using-new-relic/welcome-new-relic/getting-started/glossary#attribute)をグループ化／フィルタリングする
      </td>

      <td>
        * エラーデータがグループ化される方法を変更するには、**Group by**関数を使用します。（**Page loads**チャートは、グループ化で変更できません。）
        * 特定の属性を伴うエラーのみを表示してデータをフィルタリングするには、**Filter**ドロップダウンを使用します。
      </td>
    </tr>

    <tr>
      <td>
        注目すべき偏差とパターンを表示する
      </td>

      <td>
        [**エラープロファイル**テーブル](/docs/browser/new-relic-browser/browser-pro-features/browser-error-profiles-find-causes-errors)は、通常よりも頻繁にエラーが発生するブラウザバージョンやデバイスなど、注目すべき統計的変動を示しています。
      </td>
    </tr>

    <tr id="error-details">
      <td>
        エラー詳細を検証する
      </td>

      <td>
        * メインページからエラーを選択して、エラーが発生した上位5つのブラウザ／デバイス、そして関連のURLなど、そのエラーに関する詳細を表示します。
        * **Error instances**を選択して、[イベントログ](#event-log)と[スタックトレース](#stack-trace)が利用可能な場合はこれを表示します。
      </td>
    </tr>

    <tr>
      <td>
        エラーにつながったイベントを検証する
      </td>

      <td>
        [**イベントログ**](#event-log)には、エラーにつながったブラウザインタラクション、AJAXコール、そしてトレースが表示されます。
      </td>
    </tr>

    <tr>
      <td>
        Minified版JavaScriptをデコードする
      </td>

      <td>
        JavaScriptがMinified版の場合、**JS errors**ページのエラーはあまり役に立たない可能性があります。Minified版JavaScriptをデコードして、こうしたエラースタックトレースを活用するには、New Relicに[JavaScriptソースマップをアップロード](/docs/browser/new-relic-browser/browser-pro-features/new-relic-browser-source-maps)します。
      </td>
    </tr>
  </tbody>
</Table>

![browser_jserrors_overview.png](./images/browser_jserrors_overview.png "browser_jserrors_overview.png")

**[one.newrelic.com](https://one.newrelic.com) > Browser >（アプリケーションを選択) > JSエラー：** このページを利用することで、エラーのグループ化とフィルタリング、スタックトレース詳細の調査、そして動向の検証が可能となります。（UIページの表示内容が異なる場合は、過去の[非推奨UI](#classic-ui)を使用している可能性があります。）

## JSデータの問い合わせと視覚化 [#insights]

New Relicは、JSエラーを[イベントデータ](/docs/using-new-relic/welcome-new-relic/getting-started/glossary#event)として保存します。これにより、[クエリビルダー](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder)でエラーデータのクエリを行えます。[NRQLクエリを実行](/docs/insights/nrql-new-relic-query-language/nrql-query-examples/insights-query-examples-new-relic-browser-single-page-app-data)して、表示もしくは共有する[ダッシュボードを作成](/docs/query-your-data/explore-query-data/dashboards/introduction-new-relic-one-dashboards)するには、クエリビルダーDe[`JavaScriptError`イベントタイプ](/docs/insights/insights-data-sources/default-data/browser-default-events-attributes-insights#javascriptError-attributes)を問い合わせます。

## APIを使用して処理済みエラーを監視する [#api-logs]

Browser Monitoring APIの[`noticeError`](/docs/browser/new-relic-browser/browser-agent-spa-api/newrelicnoticeerror-browser-agent-api)コールを使用すると、ご利用のアプリケーションが処理したエラーやその他のエラーを関知し、ログすることができます。

## イベントログを見直す [#event-log]

<Callout variant="important">
  [SPAモニタリング](/docs/browser/single-page-app-monitoring/get-started/install-single-page-app-monitoring-new-relic-browser)を有効にする必要があります。
</Callout>

イベントログには、JSエラーにつながったブラウザインタラクション、AJAXコール、そしてトレースが表示されます。これによって、エラーの根本原因をトラブルシューティングできます。

![browser_jserror_log.png](./images/browser_jserror_log.png "browser_jserror_log.png")

**[one.newrelic.com](https://one.newrelic.com) > Browser >（アプリケーションを選択） > JSエラー > （エラーを選択） > エラーインスタンス**: [SPA監視](/docs/browser/single-page-app-monitoring/get-started/install-single-page-app-monitoring-new-relic-browser)を有効にすると、エラーにつながったアクティビティがイベントログで表示されます。

**Event log**（利用可能な場合）を表示するには：**[one.newrelic.com](one.newrelic.com/) > Browser >（アプリケーションを選択） > JSエラー > （エラーを選択） > エラーインスタンス**の順に移動します。[イベントログにイベントが無い場合](#troubleshoot-event-log)は、イベントログが表示されません。

たとえば、エラーメッセージを示すAJAXリクエスト後にJSエラーが発生している場合、AJAXリクエストに正しい情報が含まれていない可能性があります。この場合、AJAXコールの失敗が原因となってJSエラーにつながります。

<CollapserGroup>
  <Collapser
    id="troubleshoot-event-log"
    title="イベントログの欠如をトラブルシューティングする"
  >
    イベントログ内のイベントが存在しない理由として、以下が挙げられます：

    * **エージェントのバージョン。** イベントログデータをキャプチャするには、[SPA監視](/docs/browser/single-page-app-monitoring/get-started/install-single-page-app-monitoring-new-relic-browser)を有効にする必要があります（Browserエージェントバージョン1071以降）。
    * **ブラウザ[インタラクション](/docs/using-new-relic/welcome-new-relic/getting-started/glossary#interaction)の一部ではないJSエラー。** JSエラーがインタラクション外で発生した場合、これに関連したブラウザインタラクションの詳細はキャプチャーできません（例：非同期JSファイルでエラーが起きた場合）。
    * **クリックによってJSエラーが引き起こされた。** 一部のケースでは、クリックの直接的な結果としてエラーが起きた場合、関連のインタラクションはキャプチャーされません。

    イベントログもしくはスタックトレースが無い場合は、[エラー詳細チャート](#error-details)を利用して、エラーがブラウザタイプ、デバイスタイプ、そしてURLに及ぼす影響を分析できます。
  </Collapser>
</CollapserGroup>

## スタックトレースを表示する [#stack-trace]

スタックトレースでは、エラーが重要な機能性を損ねているか、そのエラーの重要性が低いかを示すことができます。エラーのスタックトレース（利用可能な場合）を表示するには：**[one.newrelic.com](https://one.newrelic.com) > Browser >（アプリケーションを選択） > JSエラー > （エラーを選択） > エラーインスタンス**の順に移動します。

<CollapserGroup>
  <Collapser
    id="stack-trace-troubleshooting"
    title="スタックトレースの欠如をトラブルシューティングする"
  >
    エラーに関するスタックトレースが表示されない場合、以下の理由が挙げられます：

    * エラーが投げられていない場合、スタックトレースは生成されません。
    * JSスクリプトはCDNもしくは他の外部ロケーションでホスティングされており、New Relicはこれらのスクリプトに起因するエラーを確認できません。これは、オリジン間リソース共有（CORS）を利用することで、解決できる場合があります。
    * AngularJSエラーです。この詳細に関しては[Angularエラーの欠如](/docs/browser/new-relic-browser/troubleshooting/angularjs-errors-do-not-appear)を参照してください。
    * エラーが`SyntaxError`もしくは`Script error`である：これらは、スクリプトの読み込み中に発生するため、スタックトレースを生成しません。
    * 一部の古いブラウザでは、スタックトレースの無いエラーを生成するか、利用できないスタックトレースを提供する可能性があります。
    * New Relicエージェントが見つける前に、エラーをキャプチャーしています。
    * 同一ユーザーのアクセスにおいて重複する[収集サイクル](http://[cycle](docs.newrelic.com/docs/using-new-relic/welcome-new-relic/get-started/glossary#harvest-cycle))中にエラーが発生すると、最初の収集サイクル時にレポートされたエラーイベントのみスタックトレースが記録されます。

    以下に示すのは、スタックトレースのレポートにおける一部のソリューションになります：

    * [`noticeError` APIコール](/docs/browser/new-relic-browser/browser-agent-spa-api/notice-error)を使用します。
    * [ディベロップメントモード](/docs/browser/new-relic-browser/troubleshooting/view-detailed-error-logs-browser)を有効にします。
    * **JS errors** UI ページを利用して、[イベントログ](#event-log)を含む詳細を取得します。**JS errors**ページは、スタックトレース抜きでも実行可能な情報を提供できるよう設計されています。
  </Collapser>
</CollapserGroup>

## グローバルおよび一般的エラー [#js-unavailable-errors]

New Relicは、JavaScript関数をラップすることで、スタックトレース経由で投げられるエラー情報を取得します。エラーが投げられていなければ、これらを利用することはできません。たとえば、AngularJSアプリケーションで[AngularJSエラーがUIに表示されない](/docs/browser/new-relic-browser/troubleshooting/angularjs-errors-do-not-appear)際は、トラブルシューティング手順に従います。

利用不可能なエラーには、以下が含まれます：

* `SyntaxError`もしくは`Script error`: これらは、スクリプトの読み込み中に発生するため、スタックトレースを生成しません。
* インラインのJavaScriptもしくはイベントハンドラエラー：これらはラップされていません。
* 別ドメインに存在するサードパーティースクリプトが投げたエラーは、利用できません。
* 古いブラウザで発生しているエラー：これらは、利用可能なスタックトレースを提供できない可能性があります。一部のケースでは、スタックトレースが一切提供されない場合もあります。

エラー収集はJavaScript関数をラップすることで行われるため、ブラウザによって下位で投げられるエラー（[オリジン間リソース共有](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)エラー等）も利用できません。

## その他のヘルプ [#more_help]

さらに支援が必要な場合は、これらのサポートと学習リソースを確認してください：

* [Explorers Hub](https://discuss.newrelic.com/)を参照して、コミュニティから支援を受け、ディスカッションに参加してください。
* [当社のサイトで回答を見つけ、サポートポータルの使用方法について学びます](/docs/using-new-relic/welcome-new-relic/get-started/find-help-use-support-portal)。
* Linux、Windows、およびmacOSのトラブルシューティングツールである[New Relic Diagnosticsを実行します](/docs/using-new-relic/cross-product-functions/troubleshooting/new-relic-diagnostics)。
* New Relicの[データセキュリティ](/docs/security)と[ライセンス](/docs/licenses)ドキュメントを見直してください。
